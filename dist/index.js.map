{"version":3,"file":"index.js","sources":["../src/UIContext.js","../src/components/DropDownComponent.js","../src/components/ToolbarComponent.js","../src/components/ContextMenuComponent.js","../src/components/MacoWrapperComponent.js","../src/components/PanelComponent.js","../src/components/TextComponent.js","../src/components/ControlGroupComponent.js","../src/components/hooks/ResizeHook.js","../src/components/SplitContainer.js","../src/components/LayoutContainer.js","../src/components/PagesContainer.js","../src/components/input/InputBool.js","../src/components/input/InputFloat.js","../src/components/input/InputSelect.js","../src/components/input/InputSlider.js","../src/components/input/InputColor.js","../src/stores/Context.js","../src/stores/Panel.js","../src/stores/Layout.js","../src/stores/Theme.js","../src/stores/UI.js","../src/index.js"],"sourcesContent":["import React from 'react'\r\n\r\nconst UIContext = React.createContext({})\r\n\r\nexport const UIProvider = UIContext.Provider\r\nexport const UIConsumer = UIContext.Consumer\r\nexport default UIContext","import React, { useState, useContext, useRef, useLayoutEffect } from 'react'\nimport UIContext from '../UIContext'\nimport styles from './DropDownComponent.module.css'\nimport classNames from 'classnames'\nimport { observer } from 'mobx-react'\n\nlet style = {\n  drawer: {\n    width: '0px',\n    top: '0px',\n    left: '0px'\n  }\n}\n\nconst DropDown = observer((props) => {\n  const context = useContext(UIContext).theme\n  const mainRef = useRef(null)\n\n  const [activeItem, setActiveItem] = useState(null)\n  const [subDropDownOpen, setSubDropDownOpen] = useState(false)\n  const [subDropDownId, setSubDropDownId] = useState(null)\n  const [subDropDownPosition, setSubDropDownPosition] = useState({\n    top: 0,\n    left: 0\n  })\n\n  const handleSubDropDown = (e, index, item) => {\n    if (item.onClick) item.onClick()\n    const toggle = index === activeItem ? !subDropDownOpen : true\n\n    const bounds = e.currentTarget.getBoundingClientRect()\n\n    setActiveItem(toggle ? index : false)\n    setSubDropDownId(item.id)\n    setSubDropDownOpen(toggle)\n    setSubDropDownPosition({\n      top: !props.openUp ? -bounds.height : 'auto',\n      bottom: props.openUp ? 0 : 'auto',\n      left: props.openLeft ? -bounds.width : bounds.width\n    })\n  }\n\n  const handleClickAway = (e) => {\n    if (mainRef.current && !mainRef.current.contains(e.target)) {\n      setActiveItem(null)\n      setSubDropDownOpen(false)\n    }\n  }\n\n  function handleRef(e) {\n    mainRef.current = e\n    if (props.onRef) props.onRef(mainRef)\n  }\n\n  function handleContextMenu(e) {\n    setSubDropDownOpen(false)\n  }\n\n  useLayoutEffect(() => {\n    document.addEventListener('click', (e) => handleClickAway(e))\n    document.addEventListener('contextmenu', (e) => handleContextMenu(e))\n\n    return () => {\n      document.removeEventListener('click', (e) => handleClickAway(e))\n      document.addEventListener('contextmenu', (e) => handleContextMenu(e))\n    }\n  }, [])\n\n  style = {\n    ...style,\n    drawer: {\n      width: props.open ? '150px' : '0px',\n      ...props.position\n    }\n  }\n\n  return (\n    <div\n      className={classNames(styles.drawer, {\n        //   [styles.openLeft]: props.openLeft,\n        //   [styles.openUp]: props.openUp,\n      })}\n      ref={(e) => handleRef(e)}\n      style={{\n        ...style.drawer,\n        backgroundColor: context.secondary_color,\n        color: context.text_color\n      }}\n    >\n      {props.items &&\n        Object.keys(props.items).map((k, i) => {\n          const item = props.items[k]\n\n          // if there is a subdropdown\n          if (item.dropDown) {\n            return (\n              <div\n                key={item.id}\n                className={styles.subDropDown}\n                style={{\n                  ...style.drawer,\n                  backgroundColor: context.secondary_color,\n                  color: context.text_color\n                }}\n              >\n                <button\n                  key={'sub' + item.id}\n                  onClick={(e) => handleSubDropDown(e, i, item)}\n                  className={classNames({\n                    [styles.activeButton]: item.active ?? i === activeItem,\n                    [styles.openLeft]: props.openLeft,\n                    [styles.openUp]: props.openUp\n                  })}\n                >\n                  {item.label}\n                  <span>{props.openLeft ? '<' : '>'}</span>\n                </button>\n\n                {/* \n                                this extra div helps ensure nested \n                                dropdowns are visible through hidden\n                                overflow\n                             */}\n                {i === activeItem && subDropDownId && (\n                  <div key={item.id} style={{ position: 'fixed' }}>\n                    <DropDown\n                      key={item.id + 'dd'}\n                      open={props.open && subDropDownOpen}\n                      items={{ ...props.items[subDropDownId].dropDown }}\n                      position={subDropDownPosition}\n                      openLeft={props.openLeft}\n                      openUp={props.openUp}\n                    />\n                  </div>\n                )}\n              </div>\n            )\n          } else {\n            return (\n              <div\n                key={item.id}\n                className={classNames({\n                  [styles.activeButton]: item.active ?? i === activeItem,\n                  [styles.disableHover]: item.disableHover,\n                  [styles.openLeft]: props.openLeft,\n                  [styles.openUp]: props.openUp\n                })}\n                style={{\n                  display: 'flex',\n                  width: '100%'\n                }}\n              >\n                <button\n                  key={'normal' + item.id}\n                  title={item.title}\n                  onClick={item.onClick}\n                >\n                  {item.label}\n                </button>\n                {item.buttons &&\n                  Object.keys(item.buttons).map((k) => {\n                    const b = item.buttons[k]\n                    return (\n                      <button\n                        key={'button' + b.id}\n                        onClick={b.onClick}\n                        title={b.title}\n                        style={{\n                          border: `1px solid ${context.outline_color}`,\n                          borderTop: 'none',\n                          borderBottom: 'none',\n                          borderLeftStyle: !props.openLeft ? 'solid' : 'none',\n                          borderRightStyle: props.openLeft ? 'solid' : 'none',\n                          flexShrink: 10,\n                          padding: 3\n                        }}\n                      >\n                        <small>{b.label}</small>\n                      </button>\n                    )\n                  })}\n              </div>\n            )\n          }\n        })}\n    </div>\n  )\n})\n\nDropDown.defaultProps = {\n  openLeft: false,\n  openUp: false\n}\n\nDropDown.propTypes = {}\n\nexport default DropDown\n","import React, { useState, useContext, useRef, useEffect } from 'react'\nimport styles from './ToolbarComponent.module.css'\nimport UIContext from '../UIContext'\nimport DropDownComponent from './DropDownComponent'\nimport classNames from 'classnames'\nimport { observer } from 'mobx-react'\n\nconst Toolbar = observer((props) => {\n  const context = useContext(UIContext).theme\n  const mainRef = useRef(null)\n\n  const [activeItem, setActiveItem] = useState(null)\n  const [dropDownOpen, setDropDownOpen] = useState(false)\n  const [dropDownId, setDropDownId] = useState(null)\n  const [dropDownPosition, setDropDownPosition] = useState({ top: 0, left: 0 })\n  const [openUp, setOpenUp] = useState(false)\n\n  const handleClickAway = (e) => {\n    if (mainRef.current && !mainRef.current.contains(e.target)) {\n      setActiveItem(null)\n      setDropDownOpen(false)\n    }\n  }\n\n  const handleWheel = (e) => {\n    let offset = Math.sign(e.deltaY) * 5\n    mainRef.current.scroll(mainRef.current.scrollLeft + offset, 0)\n\n    let at_start = mainRef.current.scrollLeft === 0\n    let at_end =\n      mainRef.current.offsetWidth + mainRef.current.scrollLeft >=\n      mainRef.current.scrollWidth\n\n    if (!at_start && !at_end && dropDownOpen) {\n      setDropDownPosition({\n        top: dropDownPosition.top,\n        left: dropDownPosition.left - offset\n      })\n    }\n  }\n\n  useEffect(() => {\n    document.addEventListener('click', (e) => handleClickAway(e))\n\n    let bounds = mainRef.current.getBoundingClientRect()\n    setOpenUp(bounds.y > window.innerHeight - window.innerHeight / 3)\n\n    return document.removeEventListener('click', (e) => handleClickAway(e))\n  }, [])\n\n  return (\n    <div\n      className={styles.toolbar}\n      ref={mainRef}\n      style={{\n        ...props.style,\n        backgroundColor: context.secondary_color || 'black',\n        color: context.text_color || 'white'\n      }}\n      onWheel={handleWheel}\n    >\n      {props.items &&\n        Object.keys(props.items).map((k, i) => {\n          let item = props.items[k]\n          return (\n            <button\n              key={item.id}\n              title={item.title}\n              style={{\n                ...item.style,\n                borderColor: context.text_color\n              }}\n              className={classNames(styles.button, {\n                [styles.activeButton]: item === activeItem || item.highlight,\n                // [styles.disableHover]: (item.onClick === undefined) && !item.dropDown\n                [styles.disableHover]: item.disableHover\n              })}\n              onClick={(e) => {\n                if (item.dropDown) {\n                  let toggle = item === activeItem ? !dropDownOpen : true\n\n                  let parent_bounds = mainRef.current.getBoundingClientRect()\n                  let bounds = e.currentTarget.getBoundingClientRect()\n\n                  let _openUp =\n                    bounds.y > window.innerHeight - window.innerHeight / 3\n                  setActiveItem(toggle ? item : null)\n                  setOpenUp(_openUp)\n                  setDropDownOpen(toggle)\n\n                  // this id is important so that the dropdowns to received DERIVED STATE!\n                  setDropDownId(item.id)\n                  setDropDownPosition({\n                    top: !openUp ? bounds.height : 'auto',\n                    bottom: openUp ? 0 : 'auto',\n                    left: bounds.left - parent_bounds.x\n                  })\n                }\n\n                if (item.onClick) item.onClick()\n              }}\n            >\n              {item.label}\n              {item.dropDown && (\n                <span className={styles.itemDecoration}>\n                  {openUp ? '▲' : '▼'}\n                </span>\n              )}\n            </button>\n          )\n        })}\n\n      <div style={{ position: 'fixed' }}>\n        {props.items[dropDownId] && (\n          <DropDownComponent\n            open={dropDownOpen}\n            items={{ ...props.items[dropDownId].dropDown }}\n            position={dropDownPosition}\n            openUp={openUp}\n          />\n        )}\n      </div>\n    </div>\n  )\n})\n\nexport default Toolbar\n","import React, { useState, useRef, useLayoutEffect } from 'react'\nimport DropDownComponent from './DropDownComponent'\nimport { observer } from 'mobx-react'\n\nconst ContextMenu = observer((props) => {\n  const mainRef = useRef(null)\n  let dropRef = useRef(null)\n\n  const [dropDownOpen, setDropDownOpen] = useState(false)\n  const [dropDownPosition, setDropDownPosition] = useState({ top: 0, left: 0 })\n  const [dropDownOpenLeft, setDropDownOpenLeft] = useState(false)\n  const [dropDownOpenUp, setDropDownOpenUp] = useState(false)\n\n  const handleClickAway = (e) => {\n    if (mainRef.current && !mainRef.current.contains(e.target)) {\n      setDropDownOpen(false)\n    }\n  }\n\n  const handleClick = (e) => {\n    e.preventDefault()\n\n    // keep open with right click.\n    setDropDownOpen(true)\n\n    // adjust to keep menu in frame\n    let x = e.pageX\n    let y = e.pageY\n\n    // 150 is the menu width, this shouldn't be hardcoded\n    // but it's not in bounding box when first clicked\n    if (e.pageX + 150 > window.innerWidth) x -= 150\n\n    let _openUp = y > window.innerHeight - window.innerHeight / 3\n\n    setDropDownOpenUp(_openUp)\n    setDropDownOpenLeft(e.pageX > window.innerWidth / 2)\n    setDropDownPosition({\n      top: !_openUp ? y : 'auto',\n      bottom: _openUp ? window.innerHeight - y : 'auto',\n      left: x\n    })\n\n    return false\n  }\n\n  const handleRef = (e) => {\n    dropRef = e\n  }\n\n  useLayoutEffect(() => {\n    document.addEventListener('click', (e) => handleClickAway(e), true)\n    document.addEventListener('contextmenu', (e) => handleClick(e), true)\n\n    return () => {\n      document.removeEventListener('click', (e) => handleClickAway(e), true)\n      document.removeEventListener('contextmenu', (e) => handleClick(e), true)\n    }\n  }, [])\n\n  return (\n    <div ref={mainRef}>\n      {/* <div style={{\n                position: 'absolute',\n                top: dropDownPosition.top,\n                left: dropDownPosition.left,\n                fontSize: '2em',\n                zIndex: 10000\n            }}>\n                ⌖\n            </div> */}\n      <DropDownComponent\n        open={dropDownOpen}\n        items={props.items}\n        position={dropDownPosition}\n        onRef={handleRef}\n        openLeft={dropDownOpenLeft}\n        openUp={dropDownOpenUp}\n      />\n    </div>\n  )\n})\n\nexport default ContextMenu\n","import React from 'react'\nimport styles from './MacoWrapperComponent.module.css'\nimport { observer } from 'mobx-react'\nimport ToolbarComponent from './ToolbarComponent'\nimport ContextMenuComponent from './ContextMenuComponent'\nimport UIContext from '../UIContext'\n\nconst MacoWrapper = observer((props) => {\n  const store = props.store\n\n  const handleContextMenu = () => {\n    // prevents context menu anywhere that hasn't been\n    // explicitly allowed\n    store.ui.context.setContextmenu(props.contextmenu)\n  }\n\n  return (\n    <div className={styles.wrapper}>\n      <UIContext.Provider value={store.ui}>\n        <ToolbarComponent items={props.titlebar} />\n        <ContextMenuComponent items={store.ui.context.contextmenu} />\n\n        <div\n          className={props.className}\n          style={{\n            width: '100%',\n            height: '100%',\n            position: 'absolute',\n            backgroundColor: store.ui.theme.tertiary_color,\n            ...props.style\n          }}\n          onContextMenu={() => handleContextMenu()}\n        />\n\n        {props.children}\n      </UIContext.Provider>\n    </div>\n  )\n})\n\nMacoWrapper.defaultProps = {\n  contextmenu: {},\n  titlebar: {}\n}\n\nexport default MacoWrapper\n","import React, { useState, useContext, useRef, useLayoutEffect } from 'react'\nimport styles from './PanelComponent.module.css'\nimport UIContext from '../UIContext'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport { observer } from 'mobx-react'\n\nconst Tooltip = observer((props) => {\n  const context = useContext(UIContext).theme\n  const [show, setShow] = useState(false)\n  const [position, setPosition] = useState([0, 0, 0, 0])\n\n  const handleToggle = (e) => {\n    let x = e.pageX\n    let y = e.pageY\n\n    if (x > window.innerWidth - 150) x = e.pageX - 150\n\n    if (y > window.innerHeight - 150) y = e.pageY - 150\n\n    setPosition([x, y])\n    setShow(!show)\n  }\n\n  return (\n    <div className={styles.tooltip}>\n      <div className={styles.tooltip_symbol} onClick={(e) => handleToggle(e)}>\n        ℹ\n      </div>\n      <div\n        className={styles.tooltip_content}\n        style={{\n          backgroundColor: context.primary_color,\n          border: `1px solid ${context.outline_color}`,\n          display: show ? 'block' : 'none',\n          left: position[0],\n          top: position[1]\n        }}\n      >\n        {props.content}\n      </div>\n    </div>\n  )\n})\n\nconst Panel = observer((props) => {\n  const context = useContext(UIContext).theme\n  const ui = useContext(UIContext)\n\n  const wrapperElement = useRef(null)\n\n  const [expanded, setExpanded] = useState(props.expanded)\n  const [focused, setFocused] = useState(props.focused)\n\n  const handleResize = (e, direction = 'xy') => {\n    let dragging = true\n\n    const pBounds = wrapperElement.current.getBoundingClientRect()\n    const initialDimensions = [pBounds.width, pBounds.height]\n    const initialPosition = [pBounds.x, pBounds.y]\n\n    const handleMove = (e) => {\n      if (e.touches) e = e.touches[0]\n\n      if (e.pageY && dragging) {\n        const pBounds = wrapperElement.current.getBoundingClientRect()\n\n        let w, h\n        let x, y\n\n        switch (direction) {\n          case 'se':\n            w = e.pageX - pBounds.x\n            h = e.pageY - pBounds.y\n            props.onDimensionsChange([w, h])\n            break\n          case 'e':\n            w = e.pageX - pBounds.x\n            h = props.dimensions[1]\n            props.onDimensionsChange([w, h])\n            break\n          case 's':\n            w = props.dimensions[0]\n            h = e.pageY - pBounds.y\n            props.onDimensionsChange([w, h])\n            break\n          case 'sw':\n            w = initialDimensions[0] + (initialPosition[0] - e.pageX)\n            h = e.pageY - pBounds.y\n            x = e.pageX\n            y = pBounds.y\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          case 'w':\n            w = initialDimensions[0] + (initialPosition[0] - e.pageX)\n            h = props.dimensions[1]\n            x = e.pageX\n            y = pBounds.y\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          case 'n':\n            w = props.dimensions[0]\n            h = initialDimensions[1] + (initialPosition[1] - e.pageY)\n            x = pBounds.x\n            y = e.pageY\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          case 'nw':\n            w = initialDimensions[0] + (initialPosition[0] - e.pageX)\n            h = initialDimensions[1] + (initialPosition[1] - e.pageY)\n            x = e.pageX\n            y = e.pageY\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          case 'ne':\n            w = e.pageX - pBounds.x\n            h = initialDimensions[1] + (initialPosition[1] - e.pageY)\n            x = pBounds.x\n            y = e.pageY\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          default:\n            break\n        }\n      }\n    }\n\n    const handleMoveEnd = (e) => {\n      dragging = false\n      if (e.touches && e.touches[0]) e = e.touches[0]\n\n      if (e.pageY) {\n        const pBounds = wrapperElement.current.getBoundingClientRect()\n\n        let w, h\n        let x, y\n\n        switch (direction) {\n          case 'se':\n            w = e.pageX - pBounds.x\n            h = e.pageY - pBounds.y\n            props.onDimensionsChange([w, h])\n            break\n          case 'e':\n            w = e.pageX - pBounds.x\n            h = props.dimensions[1]\n            props.onDimensionsChange([w, h])\n            break\n          case 's':\n            w = props.dimensions[0]\n            h = e.pageY - pBounds.y\n            props.onDimensionsChange([w, h])\n            break\n          case 'sw':\n            w = initialDimensions[0] + (initialPosition[0] - e.pageX)\n            h = e.pageY - pBounds.y\n            x = e.pageX\n            y = pBounds.y\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          case 'w':\n            w = initialDimensions[0] + (initialPosition[0] - e.pageX)\n            h = props.dimensions[1]\n            x = e.pageX\n            y = pBounds.y\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          case 'n':\n            w = props.dimensions[0]\n            h = initialDimensions[1] + (initialPosition[1] - e.pageY)\n            x = pBounds.x\n            y = e.pageY\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          case 'nw':\n            w = initialDimensions[0] + (initialPosition[0] - e.pageX)\n            h = initialDimensions[1] + (initialPosition[1] - e.pageY)\n            x = e.pageX\n            y = e.pageY\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          case 'ne':\n            w = e.pageX - pBounds.x\n            h = initialDimensions[1] + (initialPosition[1] - e.pageY)\n            x = pBounds.x\n            y = e.pageY\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          default:\n            break\n        }\n      }\n\n      document.removeEventListener('mousemove', handleMove)\n      document.removeEventListener('mouseup', handleMoveEnd)\n      document.removeEventListener('touchmove', handleMove)\n      document.removeEventListener('touchend', handleMoveEnd)\n    }\n\n    if (e.touches && e.touches[0]) e = e.touches[0]\n\n    document.addEventListener('mousemove', handleMove)\n    document.addEventListener('mouseup', handleMoveEnd)\n    document.addEventListener('touchmove', handleMove)\n    document.addEventListener('touchend', handleMoveEnd)\n  }\n\n  const handleMoveStart = (e) => {\n    /*\n\t\t\tthere are issues with drag events in firefox that make\n\t\t\tthe native 'drag' events less useful for this case. my \n\t\t\talternative was to use mouseEvents and create listeners \n\t\t\ton the document\n\t\t*/\n\n    function handleMove(e) {\n      if (e.touches) e = e.touches[0]\n\n      if (e.pageY) {\n        const x = e.pageX - dragOff[0]\n        const y = e.pageY - dragOff[1]\n\n        // limits to upper left\n        props.onPositionChange([x >= 0 ? x : 0, y >= 0 ? y : 0])\n      }\n    }\n\n    function handleMoveEnd(e) {\n      if (e.touches && e.touches[0]) e = e.touches[0]\n\n      if (e.pageY) {\n        const x = e.pageX - dragOff[0]\n        const y = e.pageY - dragOff[1]\n\n        // limits to upper left\n        props.onPositionChange([x >= 0 ? x : 0, y >= 0 ? y : 0])\n      }\n\n      document.removeEventListener('mousemove', handleMove)\n      document.removeEventListener('mouseup', handleMoveEnd)\n      document.removeEventListener('touchmove', handleMove)\n      document.removeEventListener('touchend', handleMoveEnd)\n    }\n\n    // use first touch event if on mobile device\n    if (e.touches) e = e.touches[0]\n\n    const pBounds = wrapperElement.current.getBoundingClientRect()\n    const offset = { x: pBounds.left, y: pBounds.top }\n\n    const dragOff = [e.pageX - offset.x, e.pageY - offset.y]\n\n    document.addEventListener('mousemove', handleMove)\n    document.addEventListener('mouseup', handleMoveEnd)\n    document.addEventListener('touchmove', handleMove)\n    document.addEventListener('touchend', handleMoveEnd)\n  }\n\n  const handleCenter = () => {\n    if (!props.onPositionChange) return\n    const pBounds = wrapperElement.current.getBoundingClientRect()\n\n    const x = window.innerWidth / 2 - pBounds.width / 2\n    const y = window.innerHeight / 2 - pBounds.height / 2\n\n    // limits to upper left\n    props.onPositionChange([x >= 0 ? x : 0, y >= 0 ? y : 0])\n  }\n\n  const handleFullscreen = () => {\n    if (!props.fullscreen) handleCenter()\n\n    props.onFullscreen(!props.fullscreen)\n    props.onFloat(props.fullscreen)\n  }\n\n  const handleFloat = () => {\n    if (props.floating === null) {\n      // get current width/height if it hasn't been detached before\n      const pBounds = wrapperElement.current.getBoundingClientRect()\n      if (props.onDimensionsChange)\n        props.onDimensionsChange([pBounds.width, pBounds.height])\n    }\n\n    if (props.onFloat) props.onFloat(!props.floating)\n  }\n\n  /*\n\t\tpositions the panel on top when hovered over\n\n    TODO \n    it's still not possible for parent elements to display\n    overtop the child element\n\n    if the parent element is currently focused, make this element \n    temporarily parentElement.zIndex - 1\n\t*/\n  const handleFocus = (e) => {\n    // this prevents the child and parent elements from focusing at once\n    e.stopPropagation()\n    // console.log('props', props)\n    // console.log('focusing', wrapperElement.current)\n    setFocused(true)\n    if (props.onFocus) props.onFocus(e)\n  }\n\n  const handleBlur = () => {\n    wrapperElement.current.blur()\n    setFocused(false)\n    if (props.onBlur) props.onBlur(false)\n  }\n\n  let mainStyling = {}\n\n  if (props.floating && !props.fullscreen) {\n    mainStyling = {\n      width: props.dimensions[0],\n      height: expanded ? props.dimensions[1] : 'min-content',\n      left: props.position[0],\n      top: props.position[1]\n    }\n  } else if (props.fullscreen) {\n    mainStyling = {\n      width: '100%',\n      height: '100%',\n      left: 0,\n      top: 0\n    }\n  }\n\n  const hasTitle =\n    props.showTitle &&\n    (props.title || props.onRemove || props.collapsible || props.floating)\n  const borderColor = focused ? context.accent_color : context.outline_color\n\n  // let dblClickTitle = null\n\n  // if (props.canFullscreen) {\n  //   dblClickTitle = handleFullscreen\n  // } else if (props.collapsible) {\n  //   dblClickTitle = () => setExpanded(!expanded)\n  // } else if (props.canFloat) {\n  //   dblClickTitle = handleFloat\n  // }\n\n  // questionable mix of controlled/uncontrolled\n  useLayoutEffect(() => {\n    setExpanded(props.expanded)\n  }, [props.expanded])\n\n  return (\n    <div\n      ref={wrapperElement}\n      className={classNames(styles.panel, {\n        [styles.fullscreen]: props.fullscreen,\n        [styles.floating]: props.floating,\n        [styles.collapsed]: !expanded\n      })}\n      style={{\n        backgroundColor: !props.fullscreen\n          ? context.primary_color\n          : 'transparent',\n        color: context.text_color || 'white',\n        border:\n          props.border && !props.fullscreen\n            ? '1px solid ' + borderColor\n            : 'none',\n        height: props.collapsible ? 'auto' : '100%',\n        margin: props.gutters ? props.gutterSize : 0,\n        /* TODO if the outside layout is currently focused,\n        then make the zIndex = -1 */\n        // zIndex: focused ? 5 : 2,\n        zIndex: focused ? 5 : 2,\n        ...mainStyling,\n        ...props.style\n      }}\n      onFocus={handleFocus}\n      onBlur={handleBlur}\n      onContextMenu={props.onContextMenu}\n      onMouseEnter={props.onMouseEnter}\n      onMouseLeave={props.onMouseLeave}\n      onMouseOver={props.onMouseOver}\n      onMouseOut={props.onMouseOut}\n      tabIndex='-1'\n    >\n      {hasTitle && (\n        <div\n          className={styles.title_bar}\n          style={{\n            backgroundColor: context.primary_color || 'black',\n            ...props.titleStyle\n          }}\n        >\n          {props.canFullscreen && (\n            <button\n              title='fullscreen'\n              onClick={handleFullscreen}\n              style={{ fontSize: '0.9em' }}\n            >\n              ✳\n            </button>\n          )}\n\n          {props.canRemove && (\n            <button title='close' onClick={props.onRemove}>\n              x\n            </button>\n          )}\n\n          {props.canFloat && (\n            <button\n              title={props.floating ? 'snap' : 'float'}\n              onClick={handleFloat}\n              style={{ fontSize: '0.9em' }}\n            >\n              {props.floating ? '◧' : '❏'}\n            </button>\n          )}\n\n          {props.collapsible && (\n            <button onClick={() => setExpanded(!expanded)}>\n              {expanded ? '▾' : '▸'}\n            </button>\n          )}\n\n          <div\n            className={styles.dragContainer}\n            // NOTE: double click temporarily disabled\n            // because it gets in the way of panel select\n            // onDoubleClick={dblClickTitle}\n            onClick={\n              props.collapsible && !props.canFullscreen\n                ? () => setExpanded(!expanded)\n                : null\n            }\n          >\n            {props.floating && (\n              <div\n                className={styles.moveHandle}\n                onTouchStart={handleMoveStart}\n                onMouseDown={handleMoveStart}\n              />\n            )}\n\n            {props.onPanelSelect !== undefined ? (\n              <select\n                title='select the panel to display'\n                className={styles.panelSelect}\n                onChange={props.onPanelSelect}\n                defaultValue={props.uuid}\n              >\n                {Object.values(ui.panelVariants).map((e) => (\n                  <option key={e.id} value={e.id}>\n                    {e.title}\n                  </option>\n                ))}\n              </select>\n            ) : (\n              <legend>\n                <strong>{props.title}</strong>\n              </legend>\n            )}\n          </div>\n\n          <div className={styles.subtitle}>{props.subtitle}</div>\n\n          {props.indicators && (\n            <div className={styles.indicators}>\n              {props.indicators.map((e, i) => {\n                return (\n                  <div\n                    key={i}\n                    className={styles.indicator}\n                    title={e.title}\n                    style={{\n                      color: context.primary_color,\n                      backgroundColor: e.color\n                    }}\n                  >\n                    {e.label}\n                  </div>\n                )\n              })}\n            </div>\n          )}\n\n          {props.tooltip && <Tooltip content={props.tooltip} />}\n        </div>\n      )}\n\n      {expanded && props.toolbar}\n\n      {expanded && (\n        <div\n          style={{\n            borderColor: context.text_color,\n            flexBasis: props.fullscreen ? '0px' : 'auto'\n          }}\n          className={classNames(styles.panel_content, {\n            [styles.horizontal]: props.horizontal,\n            [styles.vertical]: props.vertical\n          })}\n          ref={props.onRef}\n        >\n          {props.children}\n        </div>\n      )}\n\n      {expanded && props.footbar}\n\n      {/* resize handles */}\n      {props.floating && !props.fullscreen && expanded && (\n        <React.Fragment>\n          <div\n            className={`${styles.resizeHandle} ${styles.resizeSE}`}\n            onTouchStart={(e) => handleResize(e, 'se')}\n            onMouseDown={(e) => handleResize(e, 'se')}\n            style={{\n              borderColor: context.text_color\n            }}\n          />\n          <div\n            className={`${styles.resizeHandle} ${styles.resizeE}`}\n            onTouchStart={(e) => handleResize(e, 'e')}\n            onMouseDown={(e) => handleResize(e, 'e')}\n            style={{\n              borderColor: context.text_color\n            }}\n          />\n          <div\n            className={`${styles.resizeHandle} ${styles.resizeS}`}\n            onTouchStart={(e) => handleResize(e, 's')}\n            onMouseDown={(e) => handleResize(e, 's')}\n            style={{\n              borderColor: context.text_color\n            }}\n          />\n          <div\n            className={`${styles.resizeHandle} ${styles.resizeSW}`}\n            onTouchStart={(e) => handleResize(e, 'sw')}\n            onMouseDown={(e) => handleResize(e, 'sw')}\n            style={{\n              borderColor: context.text_color\n            }}\n          />\n          <div\n            className={`${styles.resizeHandle} ${styles.resizeW}`}\n            onTouchStart={(e) => handleResize(e, 'w')}\n            onMouseDown={(e) => handleResize(e, 'w')}\n            style={{\n              borderColor: context.text_color\n            }}\n          />\n          <div\n            className={`${styles.resizeHandle} ${styles.resizeN}`}\n            onTouchStart={(e) => handleResize(e, 'n')}\n            onMouseDown={(e) => handleResize(e, 'n')}\n            style={{\n              borderColor: context.text_color\n            }}\n          />\n          <div\n            className={`${styles.resizeHandle} ${styles.resizeNE}`}\n            onTouchStart={(e) => handleResize(e, 'ne')}\n            onMouseDown={(e) => handleResize(e, 'ne')}\n            style={{\n              borderColor: context.text_color\n            }}\n          />\n          <div\n            className={`${styles.resizeHandle} ${styles.resizeNW}`}\n            onTouchStart={(e) => handleResize(e, 'nw')}\n            onMouseDown={(e) => handleResize(e, 'nw')}\n            style={{\n              borderColor: context.text_color\n            }}\n          />\n        </React.Fragment>\n      )}\n    </div>\n  )\n})\n\nPanel.defaultProps = {\n  fullscreen: false,\n  expanded: true,\n  border: true,\n  focused: false,\n  floating: false,\n  position: [100, 100],\n  dimensions: [100, 100],\n  gutterSize: 5,\n  showTitle: true,\n  onContextMenu: () => {}\n}\n\nPanel.propTypes = {\n  onRemove: PropTypes.func,\n  onFocus: PropTypes.func,\n  toolbar: PropTypes.object,\n  children: PropTypes.any,\n  style: PropTypes.object,\n  titleStyle: PropTypes.object,\n  title: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  indicators: PropTypes.array,\n  horizontal: PropTypes.bool,\n  vertical: PropTypes.bool,\n  collapsible: PropTypes.bool,\n  fullscreen: PropTypes.bool,\n  floating: PropTypes.bool,\n  showTitle: PropTypes.bool,\n  // adds space around the panel, off by default\n  gutters: PropTypes.bool,\n  gutterSize: PropTypes.number,\n  border: PropTypes.bool\n}\n\nexport const GenericPanel = observer((props) => (\n  <Panel\n    uuid={props.panel.id}\n    title={props.title ?? props.panel.title}\n    subtitle={props.subtitle ?? props.panel.subtitle}\n    collapsible={props.collapsible ?? props.panel.collapsible}\n    fullscreen={props.panel.fullscreen}\n    canFullscreen={props.panel.canFullscreen}\n    floating={props.panel.floating}\n    expanded={props.expanded}\n    showTitle={props.showTitle ?? props.panel.showTitle}\n    canFloat={props.panel.canFloat}\n    defaultWidth={props.panel.defaultWidth}\n    defaultHeight={props.panel.defaultWidth}\n    position={props.panel.position}\n    dimensions={props.panel.dimensions}\n    toolbar={props.toolbar}\n    footbar={props.footbar}\n    indicators={props.indicators}\n    tooltip={props.tooltip}\n    onRemove={props.onRemove ?? props.panel.onRemove}\n    canRemove={props.canRemove ?? props.panel.canRemove}\n    style={props.style}\n    onContextMenu={props.onContextMenu}\n    onContextMenuCapture={props.onContextMenuCapture}\n    onFocus={props.onFocus}\n    onBlur={props.onBlur}\n    onRef={props.onRef}\n    onFloat={props.panel.setFloating}\n    onPositionChange={props.panel.setPosition}\n    onDimensionsChange={props.panel.setDimensions}\n    onFullscreen={props.panel.setFullscreen}\n    onPanelSelect={props.onPanelSelect}\n  >\n    {props.children}\n  </Panel>\n))\n\nexport default Panel\n","import React from 'react'\nimport styles from './TextComponent.module.css'\n\nconst Text = (props) => {\n  return (\n    <div className={styles.text} style={props.style}>\n      {props.children}\n    </div>\n  )\n}\n\nexport default Text\n","import React, { useContext } from 'react'\nimport styles from './ControlGroupComponent.module.css'\nimport UIContext from '../UIContext'\n\nconst ControlGroup = (props) => {\n  const context = useContext(UIContext).theme\n\n  return (\n    <div className={styles.wrapper}>\n      <fieldset\n        style={{\n          borderColor: context.outline_color\n        }}\n      >\n        {props.name && (\n          <legend\n            style={{\n              padding: '2px 4px',\n              backgroundColor: context.text_color,\n              color: context.primary_color\n            }}\n          >\n            <strong>{props.name}</strong>\n          </legend>\n        )}\n\n        <div>\n          {React.Children.map(props.children, (child) => {\n            let inputWidth = 100.0\n\n            if (props.children.length) {\n              inputWidth = 100.0 / props.children.length\n            }\n\n            if (React.isValidElement(child)) {\n              return React.cloneElement(child, {\n                style: { width: `${inputWidth}%` }\n              })\n            }\n\n            return child\n          })}\n        </div>\n      </fieldset>\n    </div>\n  )\n}\n\nexport default ControlGroup\n","import { useLayoutEffect, useRef } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport ResizeObserver from 'resize-observer-polyfill'\r\n\r\nconst useObserver = (callback, element, dependencies = []) => {\r\n  const observer = useRef(null)\r\n  \r\n  useLayoutEffect(() => {\r\n    const observe = () => {\r\n      if (element && element.current && observer.current) {\r\n        observer.current.observe(element.current)\r\n      }\r\n    }\r\n\r\n    const current = element.current\r\n\r\n    // if we are already observing old element\r\n    if (observer && observer.current && current) {\r\n      observer.current.unobserve(current)\r\n    }\r\n    const resizeObserverOrPolyfill = ResizeObserver\r\n\r\n    observer.current = new resizeObserverOrPolyfill(callback)\r\n    observe()\r\n\r\n    return () => {\r\n      if (observer && observer.current && current) {\r\n        observer.current.unobserve(current)\r\n      }\r\n    }\r\n  }, [callback, element, observer, ...dependencies])\r\n}\r\n\r\nuseObserver.propTypes = {\r\n  element: PropTypes.object,\r\n  callback: PropTypes.func\r\n  //   dependencies\r\n}\r\n\r\nexport default useObserver\r\n","import React, {\n  useState,\n  useContext,\n  useRef,\n  useEffect,\n  useLayoutEffect\n} from 'react'\nimport useResizeObserver from './hooks/ResizeHook'\nimport classNames from 'classnames'\nimport styles from './SplitContainer.module.css'\nimport UIContext from '../UIContext'\nimport PropTypes from 'prop-types'\n\nclass Split {\n  constructor({ id = 0, floating = false, size = 100 }) {\n    this.id = id\n    this.floating = floating\n    this.size = size\n  }\n}\n\nconst SplitContainer = (props) => {\n  const context = useContext(UIContext).theme\n\n  const distributeSplits = () => {\n    const count = props.children.length\n\n    // make a full length split if there is only one child\n    if (count <= 1)\n      return [\n        new Split({\n          id: 0,\n          floating: false,\n          size: 100\n        })\n      ]\n\n    // get all splits with default size values\n    const defaultSplits = props.children\n      .filter((e) => e.props.defaultsize)\n      .map(\n        (e, i) =>\n          new Split({\n            id: i,\n            floating: false,\n            size: e.props.defaultsize * 100.0\n          })\n      )\n\n    // if defaults are defined, take them into account\n    if (defaultSplits.length) {\n      const defaultSum = defaultSplits\n        .filter((s) => !s.floating)\n        .reduce((a, b) => a + b.size, 0)\n\n      // get default split sum\n      return props.children.map(\n        (e, i) =>\n          new Split({\n            id: i,\n            size: e.props.defaultsize\n              ? e.props.defaultsize * 100.0\n              : (100.0 - defaultSum) / (count - 1),\n            floating: false\n          })\n      )\n    } else {\n      return props.children.map(\n        (e, i) =>\n          new Split({\n            id: i,\n            floating: false,\n            size: 100.0 / count\n          })\n      )\n    }\n  }\n\n  const [split, setSplit] = useState(distributeSplits())\n  const [isEmpty, setEmpty] = useState(false)\n\n  const wrapperElement = useRef(null)\n\n  // if the split is set to auto, decide whether or not its vertical based on\n  // wrapper dimensions / aspect ratio\n  const [isVertical, setIsVertical] = useState(\n    props.vertical || !props.horizontal\n  )\n\n  const handleContainerResize = (e) => {\n    if (props.auto) {\n      const bounds = wrapperElement.current.getBoundingClientRect()\n      setIsVertical(bounds.width < bounds.height)\n    }\n  }\n\n  // TO DO this causes way too many redraws!\n  useResizeObserver(handleContainerResize, wrapperElement, [\n    props.auto,\n    isVertical\n  ])\n\n  const handlePanelResize = (e, i) => {\n    function handleMove(e) {\n      if (e.pageX) {\n        const pBounds = wrapperElement.current.getBoundingClientRect()\n\n        let s\n\n        if (isVertical) {\n          s = (e.pageY - pBounds.y) / pBounds.height\n        } else {\n          s = (e.pageX - pBounds.x) / pBounds.width\n        }\n\n        const splitSum =\n          i > 0\n            ? split\n                .slice(0, i)\n                .filter((s) => !s.floating)\n                .reduce((a, b) => a + b.size, 0)\n            : 0\n        split[i].size = s * 100 - splitSum\n\n        if (split[i].size > 100) split[i].size = 100\n        if (split[i].size < 0) split[i].size = 0\n\n        setSplit([...split])\n      }\n    }\n\n    function handleMoveEnd(e) {\n      if (e.touches && e.touches[0]) e = e.touches[0]\n\n      if (e.pageX) {\n        const pBounds = wrapperElement.current.getBoundingClientRect()\n\n        let s\n\n        if (isVertical) {\n          s = (e.pageY - pBounds.y) / pBounds.height\n        } else {\n          s = (e.pageX - pBounds.x) / pBounds.width\n        }\n\n        const splitSum =\n          i > 0\n            ? split\n                .slice(0, i)\n                .filter((s) => !s.floating)\n                .reduce((a, b) => a + b.size, 0)\n            : 0\n        split[i].size = s * 100 - splitSum\n\n        if (split[i].size > 100) split[i].size = 100\n        if (split[i].size < 0) split[i].size = 0\n\n        setSplit([...split])\n      }\n\n      document.removeEventListener('mousemove', handleMove)\n      document.removeEventListener('mouseup', handleMoveEnd)\n      document.removeEventListener('touchmove', handleMove)\n      document.removeEventListener('touchend', handleMoveEnd)\n    }\n\n    if (e.touches && e.touches[0]) e = e.touches[0]\n\n    document.addEventListener('mousemove', handleMove)\n    document.addEventListener('mouseup', handleMoveEnd)\n    document.addEventListener('touchmove', handleMove)\n    document.addEventListener('touchend', handleMoveEnd)\n  }\n\n  const handleDetach = (i, detachBool) => {\n    if (i === split.length) return\n    split[i].floating = detachBool\n    setSplit([...split])\n  }\n\n  useLayoutEffect(\n    (e) => {\n      setSplit(distributeSplits())\n    },\n    [props.children.length, props.updateFlag]\n  )\n\n  useEffect(\n    (e) => {\n      // if all empty\n      if (!split.filter((s) => !s.floating).length && !isEmpty) {\n        setEmpty(true)\n        if (props.onEmpty) props.onEmpty(true)\n      }\n\n      // if empty and a new split has been changed\n      if (isEmpty) {\n        setEmpty(false)\n        if (props.onEmpty) props.onEmpty(false)\n      }\n    },\n    [split]\n  )\n\n  const wrapperClass = classNames(styles.wrapper, {\n    [styles.vertical]: isVertical,\n    [styles.horizontal]: !isVertical,\n    [styles.empty]: isEmpty\n  })\n\n  return (\n    <div\n      className={wrapperClass}\n      ref={wrapperElement}\n      style={{\n        backgroundColor: context.tertiary_color\n      }}\n    >\n      {props.children &&\n        React.Children.map(props.children, (child, i) => {\n          const isSplit = child.type.name === 'SplitContainer'\n\n          // if there is only one panel, make it full width and height\n          if (props.children.length === 1)\n            return (\n              <div\n                style={isVertical ? { height: '100%' } : { width: '100%' }}\n                className={classNames({\n                  [styles.split_container]: isSplit,\n                  [styles.panel_container]: !isSplit\n                })}\n              >\n                {child}\n              </div>\n            )\n\n          let hasHandle = i < props.children.length - 1\n\n          let w\n          // for all panels up to the last\n          if (i < props.children.length - 1) {\n            w = split[i] ? split[i].size : 0\n            w = split[i].floating ? 0 : w\n            if (split[i].floating) hasHandle = false\n          } else {\n            // sum all splits and get the final panel width\n            // if last split is floating, remove handle\n            if (split[i] && split[i].floating) {\n              hasHandle = false\n              w = 0\n            } else {\n              w =\n                100 -\n                split\n                  .slice(0, -1)\n                  .filter((s) => !s.floating)\n                  .reduce((a, b) => a + b.size, 0)\n            }\n          }\n\n          if (split[i + 1] && split[i + 1].floating && i === split.length - 2) {\n            w =\n              100 -\n              split\n                .slice(0, i)\n                .filter((s) => !s.floating)\n                .reduce((a, b) => a + b.size, 0)\n          }\n\n          if (\n            split[i] &&\n            !split[i].floating &&\n            split.filter((s) => !s.floating).length === 1\n          ) {\n            w = 100\n            hasHandle = false\n          }\n\n          /* \n            attaches hook that watches for float\n            (hopefully this isn't a performance hit)\n          */\n          if (child.props.detachable) {\n            child = React.cloneElement(child, {\n              ...child.props,\n              onDetach: (b) => handleDetach(i, b)\n            })\n          }\n\n          /*\n            if the child is a split, and the split is empty, make it shrink\n          */\n          if (isSplit) {\n            child = React.cloneElement(child, {\n              ...child.props,\n              onEmpty: (b) => handleDetach(i, b)\n            })\n          }\n\n          return (\n            <React.Fragment>\n              <div\n                style={isVertical ? { height: w + '%' } : { width: w + '%' }}\n                className={classNames(styles.panel_content, {\n                  [styles.split_container]: isSplit,\n                  [styles.panel_container]: !isSplit,\n                  [styles.split_floating]: split[i] ? split[i].floating : false\n                })}\n              >\n                {/* {`w: ${w}`} */}\n                {child}\n              </div>\n              {hasHandle && (\n                <div\n                  className={classNames(styles.drag_container, {\n                    [styles.vertical]: isVertical,\n                    [styles.horizontal]: !isVertical\n                  })}\n                >\n                  <div\n                    className={classNames(styles.drag_handle_visible, {\n                      [styles.vertical]: isVertical,\n                      [styles.horizontal]: !isVertical\n                    })}\n                    style={{\n                      // backgroundColor: context.accent_color,\n                      borderColor: context.accent_color\n                    }}\n                    onTouchStart={(e) => handlePanelResize(e, i)}\n                    onMouseDown={(e) => handlePanelResize(e, i)}\n                  >\n                    <div\n                      className={classNames(styles.drag_handle, {\n                        [styles.vertical]: isVertical,\n                        [styles.horizontal]: !isVertical\n                      })}\n                      style={{\n                        // backgroundColor: context.accent_color,\n                        borderColor: context.outline_color\n                      }}\n                    />\n                  </div>\n                </div>\n              )}\n            </React.Fragment>\n          )\n        })}\n\n      {props.children.length === 0 && (\n        <p\n          style={{\n            alignSelf: 'center',\n            textAlign: 'center'\n          }}\n        >\n          <small>no panel in split!</small>\n        </p>\n      )}\n    </div>\n  )\n}\n\nSplitContainer.defaultProps = {\n  updateFlag: false\n}\n\n// the children can have a defaultsize prop\n\nSplitContainer.propTypes = {\n  children: PropTypes.any.isRequired,\n  horizontal: PropTypes.bool,\n  vertical: PropTypes.bool,\n  auto: PropTypes.bool, // used to automatically choose from horizontal or vertical\n  split: PropTypes.array,\n  updateFlag: PropTypes.bool\n}\n\nexport default SplitContainer\n","import React, { useContext, useRef } from 'react'\nimport classNames from 'classnames'\nimport styles from './LayoutContainer.module.css'\nimport UIContext from '../UIContext'\nimport { GenericPanel } from './PanelComponent'\nimport { observer } from 'mobx-react'\n\nconst LayoutContainer = observer((props) => {\n  const context = useContext(UIContext).theme\n  const ui = useContext(UIContext)\n\n  const isVertical = props.layout.direction === 'VERTICAL'\n\n  const isEmpty = props.layout.isEmpty\n\n  const wrapperElement = useRef(null)\n\n  const handleResize = (e, layout) => {\n    function handleMove(e) {\n      if (e.touches) e = e.touches[0]\n\n      if (e.pageX) {\n        const bounds = wrapperElement.current.getBoundingClientRect()\n\n        let pos\n        if (isVertical) {\n          pos = (e.pageY - bounds.y) / bounds.height\n        } else {\n          pos = (e.pageX - bounds.x) / bounds.width\n        }\n\n        layout.adjust(pos)\n      }\n    }\n\n    function handleMoveEnd(e) {\n      if (e.touches && e.touches[0]) e = e.touches[0]\n\n      if (e.pageX) {\n        const bounds = wrapperElement.current.getBoundingClientRect()\n\n        let pos\n        if (isVertical) {\n          pos = (e.pageY - bounds.y) / bounds.height\n        } else {\n          pos = (e.pageX - bounds.x) / bounds.width\n        }\n\n        layout.adjust(pos)\n      }\n\n      document.removeEventListener('mousemove', handleMove)\n      document.removeEventListener('mouseup', handleMoveEnd)\n      document.removeEventListener('touchmove', handleMove)\n      document.removeEventListener('touchend', handleMoveEnd)\n    }\n\n    if (e.touches && e.touches[0]) e = e.touches[0]\n\n    document.addEventListener('mousemove', handleMove)\n    document.addEventListener('mouseup', handleMoveEnd)\n    document.addEventListener('touchmove', handleMove)\n    document.addEventListener('touchend', handleMoveEnd)\n  }\n\n  const handleContextMenu = (e, layout) => {\n    let addPanels = {}\n    let addHorizontalPanels = {}\n    let addVerticalPanels = {}\n\n    Object.values(ui.panelVariants).forEach((panel) => {\n      addPanels = {\n        ...addPanels,\n        [panel.id]: {\n          id: panel.id,\n          label: panel.title,\n          onClick: () => {\n            props.layout.addPanel(panel, layout)\n          }\n        }\n      }\n      addHorizontalPanels = {\n        ...addHorizontalPanels,\n        [panel.id]: {\n          id: panel.id,\n          label: panel.title,\n          onClick: () => {\n            props.layout.addPanel(panel, layout, 'HORIZONTAL')\n          }\n        }\n      }\n      addVerticalPanels = {\n        ...addVerticalPanels,\n        [panel.id]: {\n          id: panel.id,\n          label: panel.title,\n          onClick: () => {\n            props.layout.addPanel(panel, layout, 'VERTICAL')\n          }\n        }\n      }\n    })\n\n    ui.context.setContextmenu({\n      addPanel: {\n        id: 'addPanel',\n        label: 'add panel',\n        dropDown: addPanels\n      },\n      addLayout: {\n        id: 'addLayout',\n        label: 'add split layout',\n        dropDown: {\n          horizontal: {\n            id: 'horizontal',\n            label: 'horizontal',\n            dropDown: addHorizontalPanels\n            // onClick: () => {\n            //   props.layout.addLayout('HORIZONTAL', layout)\n            // }\n          },\n          vertical: {\n            id: 'vertical',\n            label: 'vertical',\n            dropDown: addVerticalPanels\n            // onClick: () => {\n            //   props.layout.addLayout('VERTICAL', layout)\n            // }\n          }\n        }\n      },\n      changeOrientation: {\n        id: 'changeOrientation',\n        label: 'layout direction',\n        dropDown: {\n          horizontal: {\n            id: 'horizontal',\n            label: 'horizontal',\n            active: props.layout.direction === 'HORIZONTAL',\n            onClick: () => {\n              props.layout.setDirection('HORIZONTAL')\n              ui.context.setContextmenu() // removes menu\n            }\n          },\n          vertical: {\n            id: 'vertical',\n            label: 'vertical',\n            active: props.layout.direction === 'VERTICAL',\n            onClick: () => {\n              props.layout.setDirection('VERTICAL')\n              ui.context.setContextmenu() // removes menu\n            }\n          }\n        }\n      },\n      distributeLayout: {\n        id: 'DistributeLayout',\n        label: 'distribute layout',\n        onClick: props.layout.distributeChildren\n      }\n    })\n\n    if (props.onContextMenu) props.onContextMenu(e, layout)\n  }\n\n  const handlePanelSelect = (e, sibling) => {\n    sibling.setPanel(e.target.value)\n  }\n\n  const handlePanelRemove = (layout) => {\n    props.layout.removePanel(layout)\n  }\n\n  const generateLayout = () => {\n    let elements = []\n    elements = props.layout.children.map((sibling, i) => {\n      /* \n          this will loop through all of the components passed as\n          children, and if it is another layout, it will nest another \n          layout inside\n        */\n      const siblings = props.layout.children\n      const childIsLayout = sibling.children.length && sibling.direction\n\n      let hasHandle = i < props.layout.children.length - 1\n      let size = 0\n\n      const filterOutFloats = (s) => !s.panel || (s.panel && !s.panel.floating)\n\n      const isFirst = i === 0\n      const isLast = i === siblings.length - 1\n\n      const isEmpty = (layout) => {\n        return (\n          layout.children.length &&\n          layout.children.filter(filterOutFloats).length === 0\n        )\n      }\n      /*\n          the benefit of applying the size calculations here\n          is that floating panels will retain their width. \n\n          this is for the most part why there is resizing \n          logic here AND in Layout.js. The layout holds on\n          to the width even when something is floating, and\n          then it can restore to it's original dimensions.\n      */\n      const isFloating = (layout) => {\n        return isEmpty(layout) || (layout.panel && layout.panel.floating)\n      }\n\n      if (isFloating(sibling)) {\n        hasHandle = false\n        size = 0\n      } else {\n        size = sibling.size\n\n        /*  \n            scan to the left for any floats to absorb\n          */\n        for (let j = i - 1; j >= 0; j--) {\n          if (isFloating(siblings[j])) {\n            size += siblings[j].size\n          } else {\n            break\n          }\n        }\n\n        /*\n          check to see if there are floats that extend all of the\n          way to the right\n        */\n        let tSum = 0\n        for (let j = i + 1; j < siblings.length; j++) {\n          if (isFloating(siblings[j])) {\n            tSum += siblings[j].size\n            // if we make it to the end, absorb all.\n            // otherwise, another panel will take care of it\n            if (j === siblings.length - 1) size += tSum\n          } else {\n            break\n          }\n        }\n      }\n\n      size *= 100\n\n      const matchingChild = !childIsLayout\n        ? props.children.filter((child) => {\n            // console.log(child.props)\n            /* \n          this grabs the id that corresponds with the \n          panel.id\n        */\n            if (child.props.panel) {\n              return child.props.panel.id === sibling.panel.id\n            } else {\n              return child.props.id === sibling.panel.id\n            }\n          })[0]\n        : undefined\n\n      return (\n        <React.Fragment key={sibling.id}>\n          {/* \n            insert handle at the START of series. \n            no resize but should have a contextmenu \n            to insert elements\n          */}\n          {isFirst && (\n            <div\n              onContextMenu={(e) => handleContextMenu(e, null)}\n              className={classNames(styles.drag_container, {\n                [styles.vertical]: isVertical,\n                [styles.horizontal]: !isVertical\n              })}\n            >\n              <div\n                className={classNames(styles.drag_handle, styles.firstDrag, {\n                  [styles.vertical]: isVertical,\n                  [styles.horizontal]: !isVertical\n                })}\n                style={{\n                  backgroundColor: context.accent_color,\n                  borderColor: context.primary_color\n                }}\n              />\n            </div>\n          )}\n          {/* this div element contains each individual frame */}\n          <div\n            style={isVertical ? { height: size + '%' } : { width: size + '%' }}\n            className={classNames(styles.panel_content, {\n              [styles.layout_container]: childIsLayout,\n              [styles.panel_container]: !childIsLayout,\n              [styles.float_container]: isFloating(sibling)\n            })}\n          >\n            <div className={styles.debug}>{size}</div>\n            {/*  \n                if the current sibling has children, render layout,\n                otherwise display panel\n              */}\n            {sibling.children.length ? (\n              <LayoutContainer layout={sibling}>\n                {props.children}\n              </LayoutContainer>\n            ) : (\n              <GenericPanel\n                panel={sibling.panel}\n                onPanelSelect={(e) => handlePanelSelect(e, sibling)}\n                onRemove={() => handlePanelRemove(sibling)}\n              >\n                {/* \n                    this is the main panel that surrounds the child\n                    it scans through the props.children for matching\n                    components\n                  */}\n                {matchingChild &&\n                  React.cloneElement(matchingChild, [\n                    { panel: sibling.panel } // trying this as a fix to setDimensions problem\n                  ])}\n              </GenericPanel>\n            )}\n          </div>\n\n          {hasHandle && (\n            <div\n              onContextMenu={(e) => handleContextMenu(e, sibling)}\n              className={classNames(styles.drag_container, {\n                [styles.vertical]: isVertical,\n                [styles.horizontal]: !isVertical\n              })}\n              onTouchStart={(e) => handleResize(e, sibling)}\n              onMouseDown={(e) => handleResize(e, sibling)}\n            >\n              <div\n                className={classNames(styles.drag_handle, {\n                  [styles.vertical]: isVertical,\n                  [styles.horizontal]: !isVertical\n                })}\n                style={{\n                  backgroundColor: context.accent_color,\n                  borderColor: context.primary_color\n                }}\n              />\n            </div>\n          )}\n          {/* \n            insert handle at the very end of series. \n            no resize but should have a contextmenu \n            to insert elements\n          */}\n          {isLast && (\n            <div\n              onContextMenu={(e) => handleContextMenu(e, sibling)}\n              className={classNames(styles.drag_container, {\n                [styles.vertical]: isVertical,\n                [styles.horizontal]: !isVertical\n              })}\n            >\n              <div\n                className={classNames(styles.drag_handle, styles.lastDrag, {\n                  [styles.vertical]: isVertical,\n                  [styles.horizontal]: !isVertical\n                })}\n                style={{\n                  backgroundColor: context.accent_color,\n                  borderColor: context.primary_color\n                }}\n              />\n            </div>\n          )}\n        </React.Fragment>\n      )\n    })\n\n    return elements\n  }\n\n  return (\n    <div\n      ref={wrapperElement}\n      style={{\n        backgroundColor: context.tertiary_color\n      }}\n      className={classNames(styles.wrapper, {\n        [styles.vertical]: isVertical,\n        [styles.horizontal]: !isVertical,\n        [styles.empty]: isEmpty\n      })}\n    >\n      {generateLayout()}\n    </div>\n  )\n})\n\nLayoutContainer.defaultProps = {\n  size: 100,\n  order: 0\n}\n\nLayoutContainer.propTypes = {}\n\nexport default LayoutContainer\n","import React, { useState, useContext } from 'react'\nimport styles from './PagesContainer.module.css'\nimport UIContext from '../UIContext'\n\nconst Pages = (props) => {\n  const [currentPage, setCurrentPage] = useState(0)\n  const context = useContext(UIContext).theme\n\n  const handlePreviousPage = () => {\n    if (currentPage > 0) setCurrentPage(currentPage - 1)\n  }\n\n  const handleNextPage = () => {\n    if (currentPage + 1 < props.children.length) setCurrentPage(currentPage + 1)\n  }\n\n  const buttonStyle = {\n    backgroundColor: context.secondary_color,\n    color: context.text_color\n  }\n\n  return (\n    <div className={styles.wrapper} style={props.style}>\n      <div className={styles.pagecontent}>{props.children[currentPage]}</div>\n      <div className={styles.pagenav}>\n        <button style={buttonStyle} onClick={handlePreviousPage}>\n          {'<'}\n        </button>\n        <button style={buttonStyle} onClick={handleNextPage}>\n          {'>'}\n        </button>\n        <span>{`${currentPage + 1} of ${props.children.length}`}</span>\n      </div>\n    </div>\n  )\n}\n\nexport default Pages\n","import React, { useContext } from 'react'\nimport styles from './InputBool.module.css'\nimport UIContext from '../../UIContext'\nimport { observer } from 'mobx-react'\n\nconst InputBool = observer((props) => {\n  const context = useContext(UIContext).theme\n  const updateValue = (e) => props.onChange(e.target.checked, e.target.value)\n\n  return (\n    <div\n      className={styles.wrapper}\n      style={{\n        ...props.style,\n        backgroundColor: props.focused\n          ? context.accent_color\n          : context.secondary_color,\n        flexFlow: props.hLabel && props.label ? 'row' : 'column'\n      }}\n    >\n      {props.label && (\n        <label\n          style={{\n            backgroundColor: props.focused\n              ? context.accent_color\n              : context.text_color,\n            color: context.primary_color\n          }}\n        >\n          {props.label}:\n        </label>\n      )}\n      <div className={styles.wrapper_inner}>\n        <input\n          style={props.style}\n          type='checkbox'\n          value={props.value}\n          checked={props.checked}\n          onChange={updateValue}\n          onContextMenu={props.onContextMenu}\n        />\n      </div>\n    </div>\n  )\n})\n\nexport default InputBool\n","import React, { useContext } from 'react'\nimport styles from './InputFloat.module.css'\nimport UIContext from '../../UIContext'\nimport { observer } from 'mobx-react'\nimport PropTypes from 'prop-types'\n\nlet position = [0, 0]\nlet base_value = 0\n\n/*\n    ISSUES:\n\n        should be able to drag input outside of browser window\n        but the solution in js is not immediately obvious\n\n        there is a possible lead here:\n        https://stackoverflow.com/questions/1685326/responding-to-the-onmousemove-event-outside-of-the-browser-window-in-ie\n*/\n\nconst InputFloat = observer((props) => {\n  const context = useContext(UIContext).theme\n\n  const handleChange = (e) => props.onChange(Number(e.target.value))\n\n  const handleDragStart = (e) => {\n    let dragging = false\n\n    function handleDrag(e) {\n      e.preventDefault()\n      dragging = true\n      /*\n                conditional fixes issue where last frame of\n                drag results in a 'jump' in value, as pageY\n                is 0. \n            */\n      if (e.pageY) {\n        // fine control w shift / large control w ctrl\n        let scalar = e.ctrlKey ? 100 : e.shiftKey ? 20000 : 1000\n\n        let x_offset = e.pageX - position[0]\n        let y_offset = position[1] - e.pageY\n\n        x_offset = Math.min(Math.max(x_offset, 1), 100)\n\n        let output_value = base_value + (y_offset * x_offset) / scalar\n\n        // factor in step size\n        if (props.step) {\n          output_value /= props.step\n          output_value = Math.floor(output_value)\n          output_value *= props.step\n        }\n\n        props.onChange(output_value)\n      }\n    }\n\n    function handleDragEnd(e) {\n      if (dragging) {\n        // fine control w shift / large control w ctrl\n        let scalar = e.ctrlKey ? 100 : e.shiftKey ? 20000 : 1000\n\n        let x_offset = e.pageX - position[0]\n        let y_offset = position[1] - e.pageY\n\n        x_offset = Math.min(Math.max(x_offset, 1), 100)\n\n        let output_value = base_value + (y_offset * x_offset) / scalar\n\n        // factor in step size\n        if (props.step) {\n          output_value /= props.step\n          output_value = Math.floor(output_value)\n          output_value *= props.step\n        }\n\n        props.onChange(output_value)\n      }\n\n      document.removeEventListener('mousemove', handleDrag)\n      document.removeEventListener('mouseup', handleDragEnd)\n      document.removeEventListener('touchmove', handleDrag)\n      document.removeEventListener('touchend', handleDragEnd)\n\n      dragging = false\n    }\n\n    if (e.touches && e.touches[0]) e = e.touches[0]\n\n    position = [e.pageX, e.pageY]\n    base_value = props.value\n\n    document.addEventListener('mousemove', handleDrag)\n    document.addEventListener('mouseup', handleDragEnd)\n    document.addEventListener('touchmove', handleDrag)\n    document.addEventListener('touchend', handleDragEnd)\n  }\n\n  const value = parseFloat(props.value).toFixed(2)\n\n  const defaultInputStyle = {\n    backgroundColor: context.secondary_color,\n    color: context.text_color\n  }\n\n  return (\n    <div\n      className={styles.wrapper}\n      style={{\n        ...props.style,\n        backgroundColor: props.focused\n          ? context.accent_color\n          : context.secondary_color\n      }}\n    >\n      {props.label && (\n        <label\n          style={{\n            backgroundColor: props.focused\n              ? context.accent_color\n              : context.text_color,\n            color: context.primary_color\n          }}\n        >\n          {props.label}:\n        </label>\n      )}\n      <div className={styles.wrapper_inner}>\n        <input\n          type='number'\n          step={props.step}\n          value={Number(value)}\n          onChange={handleChange}\n          onClick={props.onClick}\n          onTouchStart={handleDragStart}\n          onMouseDown={handleDragStart}\n          onDoubleClick={props.onDoubleClick}\n          onContextMenu={props.onContextMenu}\n          style={{\n            ...defaultInputStyle,\n            ...props.inputStyle\n          }}\n        />\n      </div>\n    </div>\n  )\n})\n\nInputFloat.defaultProps = {\n  value: 0,\n  step: 0.1,\n  focused: false\n}\n\nInputFloat.propTypes = {\n  label: PropTypes.string,\n  value: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  step: PropTypes.number,\n  focused: PropTypes.bool,\n\n  onChange: PropTypes.func,\n  onDoubleClick: PropTypes.func,\n  inputStyle: PropTypes.object\n}\n\nexport default InputFloat\n","import React, { useContext } from 'react'\nimport styles from './InputSelect.module.css'\nimport UIContext from '../../UIContext'\n\nconst InputSelect = (props) => {\n  const context = useContext(UIContext).theme\n\n  const handleChange = (e) => props.onChange(e.target.value)\n\n  return (\n    <div\n      className={styles.wrapper}\n      style={{\n        ...props.style,\n        backgroundColor: props.focused\n          ? context.accent_color\n          : context.secondary_color\n      }}\n    >\n      {props.label && (\n        <label\n          style={{\n            backgroundColor: props.focused\n              ? context.accent_color\n              : context.text_color,\n            color: context.primary_color\n          }}\n        >\n          {props.label}:\n        </label>\n      )}\n      <div className={styles.wrapper_inner}>\n        <select\n          defaultValue={props.selectedOption}\n          onChange={handleChange}\n          onContextMenu={props.onContextMenu}\n          style={{\n            backgroundColor: context.secondary_color,\n            color: context.text_color\n          }}\n        >\n          {props.options.map((opt, i) => (\n            <option key={i} value={opt.value}>\n              {opt.label}\n            </option>\n          ))}\n        </select>\n      </div>\n    </div>\n  )\n}\n\nexport default InputSelect\n","import React, { useContext, useRef } from 'react'\nimport styles from './InputSlider.module.css'\nimport InputFloat from './InputFloat'\nimport UIContext from '../../UIContext'\nimport PropTypes from 'prop-types'\n\nlet slider_bounds = null\n\nconst InputSlider = (props) => {\n  const context = useContext(UIContext).theme\n\n  const slider_element = useRef(null)\n\n  const handleDragStart = (e) => {\n    function handleDrag(e) {\n      if (e.touches) e = e.touches[0]\n      /*\n              conditional fixes issue where last frame of\n              drag results in a 'jump' in value, as pageY\n              is 0. \n          */\n      if (e.pageY) {\n        let x = e.pageX + 2\n        let position = (x - slider_bounds.x) / slider_bounds.width\n\n        let value = position * (props.max - props.min) + props.min\n\n        if (position <= 0.0) value = props.min\n        if (position >= 1.0) value = props.max\n\n        props.onChange(Math.floor(value / props.step) * props.step)\n      }\n    }\n\n    function handleDragEnd(e) {\n      if (e.touches && e.touches[0]) e = e.touches[0]\n\n      let x = e.pageX + 2\n      let position = (x - slider_bounds.x) / slider_bounds.width\n      let value = position * (props.max - props.min) + props.min\n\n      if (position >= 0.0 && position <= 1.0) {\n        props.onChange(Math.floor(value / props.step) * props.step)\n      }\n\n      document.removeEventListener('mousemove', handleDrag)\n      document.removeEventListener('mouseup', handleDragEnd)\n      document.removeEventListener('touchmove', handleDrag)\n      document.removeEventListener('touchend', handleDragEnd)\n    }\n\n    if (e.touches && e.touches[0]) e = e.touches[0]\n\n    slider_bounds = slider_element.current.getBoundingClientRect()\n    let x = e.pageX + 2\n    let position = (x - slider_bounds.x) / slider_bounds.width\n\n    let value = position * (props.max - props.min) + props.min\n    console.log([props.min, props.max])\n    console.log('position', position)\n    console.log('value', value)\n\n    if (position >= 0.0 && position <= 1.0) {\n      props.onChange(Math.floor(value / props.step) * props.step) // floor to step\n    }\n\n    document.addEventListener('mousemove', handleDrag)\n    document.addEventListener('mouseup', handleDragEnd)\n    document.addEventListener('touchmove', handleDrag)\n    document.addEventListener('touchend', handleDragEnd)\n  }\n\n  const handleFloatDrag = (v) => {\n    props.onChange(v)\n  }\n\n  return (\n    <div\n      className={styles.wrapper + ' ' + styles.horizontal}\n      style={props.style}\n      onContextMenu={props.onContextMenu}\n    >\n      <InputFloat\n        value={props.value}\n        onChange={handleFloatDrag}\n        step={props.step || 0.1}\n      />\n      <div\n        ref={slider_element}\n        className={styles.slider_track}\n        onTouchStart={handleDragStart}\n        onMouseDown={handleDragStart}\n        style={{\n          backgroundColor: context.secondary_color\n        }}\n      >\n        <div\n          className={styles.sleeve}\n          style={{\n            width:\n              ((props.value - props.min) / (props.max - props.min)) * 100 + '%',\n            backgroundColor: context.accent_color\n          }}\n        ></div>\n        <div\n          className={styles.handle}\n          style={{\n            left:\n              ((props.value - props.min) / (props.max - props.min)) * 100 + '%',\n            backgroundColor: context.accent_color\n          }}\n        ></div>\n      </div>\n    </div>\n  )\n}\n\nInputSlider.propTypes = {\n  min: PropTypes.number,\n  max: PropTypes.number,\n  value: PropTypes.number,\n  style: PropTypes.object\n}\n\nexport default InputSlider\n","import React, { useContext } from 'react'\nimport styles from './InputColor.module.css'\nimport UIContext from '../../UIContext'\n\nconst InputColor = (props) => {\n  const context = useContext(UIContext).theme\n\n  const handleChange = (e) => props.onChange(e.target.value)\n\n  return (\n    <div\n      className={styles.wrapper}\n      style={{\n        ...props.style,\n        backgroundColor: props.focused\n          ? context.accent_color\n          : context.secondary_color\n      }}\n    >\n      {props.label && (\n        <label\n          style={{\n            backgroundColor: props.focused\n              ? context.accent_color\n              : context.text_color,\n            color: context.primary_color\n          }}\n        >\n          {props.label}:\n        </label>\n      )}\n      <div className={styles.wrapper_inner}>\n        {props.showValue && (\n          <input\n            type='string'\n            className={styles.textInput}\n            value={props.value}\n            onChange={handleChange}\n            style={{\n              backgroundColor: context.text_color,\n              color: context.secondary_color\n            }}\n          />\n        )}\n\n        <input\n          type='color'\n          value={props.value}\n          onChange={handleChange}\n          onContextMenu={props.onContextMenu}\n          style={{\n            backgroundColor: context.secondary_color,\n            color: context.secondary_color\n          }}\n        />\n      </div>\n    </div>\n  )\n}\n\nexport default InputColor\n","import { types } from 'mobx-state-tree'\nimport tinykeys from 'tinykeys'\n\nexport const ContextMenuItem = types\n  .model('ContextMenuItem', {\n    id: types.identifier,\n    label: types.frozen(),\n    buttons: types.frozen(),\n    dropDown: types.map(types.late(() => ContextMenuItem))\n  })\n  .volatile((self) => ({\n    onClick: () => {}\n  }))\n\nconst Context = types\n  .model('Context', {})\n  .volatile((self) => ({\n    contextmenu: {},\n    keylistener: tinykeys(window, {}),\n    keymap: null\n  }))\n  .actions((self) => ({\n    setKeymap: (keymap) => {\n      if (self.keylistener) self.keylistener()\n\n      self.keymap = keymap\n      self.keylistener = tinykeys(window, self.keymap)\n    },\n    removeKeymap: () => self.keylistener(),\n    setContextmenu: (c) => {\n      self.contextmenu = c\n    }\n  }))\n\nexport default Context\n","import { types, getParent, clone } from 'mobx-state-tree'\nimport Layout from './Layout'\n\nconst Panel = types\n  .model('Panel', {\n    id: types.identifier,\n    component_type: '',\n    title: types.maybe(types.string),\n    subtitle: types.maybe(types.string),\n    showTitle: true,\n    floating: false,\n    fullscreen: false,\n    canFloat: false,\n    canRemove: false,\n    canFullscreen: false,\n    dimensions: types.array(types.number),\n    position: types.array(types.number),\n    // layout: types.maybe(types.safeReference(types.late(() => Layout)))\n    layout: types.maybe(types.late(() => Layout))\n  })\n  .volatile((self) => ({\n    parent_layout: null\n  }))\n  .actions((self) => ({\n    setLayout: (layout) => {\n      const newLayout = clone(layout)\n      self.layout = newLayout\n    },\n\n    setFloating: (f) => {\n      self.floating = f\n    },\n\n    toggleFloating: () => {\n      self.floating = !self.floating\n    },\n\n    toggleFullscreen: () => {\n      self.fullscreen = !self.fullscreen\n    },\n\n    setPosition: (p) => {\n      // TEMP: hack to keep away from title, use safe areas instead\n      if (p[1] < 24) p[1] = 24\n\n      self.position = p\n\n      // EXPERIMENT: Limit position to max bounds\n      if (p[0] + self.dimensions[0] > window.innerWidth)\n        self.position[0] = window.innerWidth - self.dimensions[0]\n\n      if (p[1] + self.dimensions[1] > window.innerHeight)\n        self.position[1] = window.innerHeight - self.dimensions[1]\n    },\n\n    setDimensions: (d) => {\n      self.dimensions = d\n\n      // EXPERIMENT: Limit position to max bounds\n      if (d[0] + self.position[0] > window.innerWidth)\n        self.dimensions[0] = window.innerWidth - self.position[0]\n\n      if (d[1] + self.position[1] > window.innerHeight)\n        self.dimensions[1] = window.innerHeight - self.position[1]\n    },\n\n    setFullscreen: (f) => {\n      self.fullscreen = f\n    },\n\n    onRemove: () => {\n      self.parent_layout = getParent(self, 2) // ERROR HERE, cant remove\n      self.parent_layout.removePanel(self)\n    },\n\n    center: () => {\n      self.position[0] = window.innerWidth / 2 - self.dimensions[0] / 2\n      self.position[1] = window.innerHeight / 2 - self.dimensions[1] / 2\n    },\n\n    fitScreen: () => {\n      if (self.position[0] <= 0) self.position[0] = 0\n\n      if (self.position[1] <= 0) self.position[1] = 0\n\n      // if (self.dimensions[0] + self.position[0] >= window.innerWidth)\n      // self.dimensions[0] = window.innerWidth - self.position[0];\n\n      // if (self.dimensions[1] + self.position[1] >= window.innerHeight)\n      // self.dimensions[1] = window.innerHeight - self.position[1];\n    }\n  }))\n\nexport default Panel\n","import { types, getParent, getRoot, getSnapshot } from 'mobx-state-tree'\nimport { nanoid } from 'nanoid'\nimport Panel from './Panel'\n\nconst Layout = types\n  .model('Layout', {\n    id: types.identifier,\n    title: 'Layout',\n    size: 0,\n    panel: types.maybe(Panel),\n    children: types.array(types.late(() => Layout)),\n    direction: types.optional(\n      types.enumeration(['VERTICAL', 'HORIZONTAL']),\n      'HORIZONTAL'\n    )\n  })\n  .views((self) => ({\n    get isEmpty() {\n      const result =\n        self.children.length &&\n        self.children.filter(\n          (s) => (!s.panel && !s.isEmpty) || (s.panel && !s.panel.floating)\n        ).length === 0\n      return result\n    }\n  }))\n  .volatile((self) => ({\n    siblings: null,\n    rootStore: null\n  }))\n  .actions((self) => ({\n    afterAttach: () => {\n      self.siblings = getParent(self)\n      self.rootStore = getRoot(self)\n    },\n\n    adjust: (position) => {\n      const selfIndex = getParent(self).indexOf(self)\n\n      /* \n        the sum is all panels (except for those floating) \n        *leading up to* the one we are resizing\n      */\n      let sum = 0\n      for (let i = 0; i < selfIndex; i++) {\n        sum += getParent(self)[i].size\n      }\n\n      const previousSize = self.size\n      const adjustedSize = position - sum\n\n      self.setSize(adjustedSize)\n\n      const nextSibling = getParent(self)[selfIndex + 1]\n      nextSibling.setSize(nextSibling.size + (previousSize - adjustedSize))\n    },\n\n    distributeChildren: () => {\n      self.children.forEach((e, i) => {\n        e.setSize(1 / self.children.length)\n      })\n    },\n\n    setSize: (size) => {\n      self.size = size\n    },\n\n    setDirection: (direction) => {\n      self.direction = direction\n    },\n\n    setPanel: (panelId) => {\n      /*  \n        TODO \n          I think that this can be simplified in some way, \n          mainly I think there too many serialized fields\n          a new panel is really just a different 'component_type'\n          field\n\n          until I figure out a better way to do this I am going to\n          make sure that it retains floating, dimensions, and position\n      */\n      const newpanel = {\n        ...getRoot(self).ui.panelVariants[panelId],\n        floating: self.panel.floating,\n        dimensions: [...self.panel.dimensions],\n        position: [...self.panel.position]\n      }\n\n      self.panel = newpanel\n      self.title = getRoot(self).ui.panelVariants[panelId].title\n    },\n\n    /* NOTE not currently in use */\n    addLayout: (orientation, after) => {\n      /* \n        look for the 'after' node and insert 'panel'\n        after it\n        \n        if after is null, then insert at the very beginning (-1)\n       */\n      const insertAfter = after ? self.children.indexOf(after) : -1\n\n      self.children.splice(\n        insertAfter + 1,\n        0,\n        Layout.create({\n          id: nanoid(),\n          children: [\n            Layout.create({\n              id: nanoid() + '_child',\n              // panel: panel,\n              panel: {\n                id: nanoid() + '_sub_child',\n                title: 'New Layout'\n              },\n              size: 1\n            })\n          ],\n          direction: orientation,\n          size: 1 / self.children.length\n        })\n      )\n\n      self.distributeChildren()\n    },\n\n    addPanel: (panel, after, direction) => {\n      /* \n        look for the 'after' node and insert 'panel'\n        after it\n        \n        if after is null, then insert at the very beginning (-1)\n       */\n      const insertAfter = after ? self.children.indexOf(after) : -1\n\n      /* if direction is defined, treat it as a new layout */\n      if (direction) {\n        self.children.splice(\n          insertAfter + 1,\n          0,\n          Layout.create({\n            id: nanoid(),\n            children: [\n              Layout.create({\n                id: nanoid() + '_child',\n                panel: panel,\n                size: 1\n              })\n            ],\n            direction: direction,\n            size: 1 / self.children.length\n          })\n        )\n      } else {\n        self.children.splice(\n          insertAfter + 1,\n          0,\n          Layout.create({\n            id: nanoid(),\n            panel: panel,\n            size: 1 / self.children.length\n          })\n        )\n      }\n\n      self.distributeChildren()\n    },\n\n    removePanel: (panel) => {\n      if (self.children) {\n        self.children = self.children.filter((child) => child !== panel)\n\n        // if all panels are gone, remove this layout\n        if (self.children.length === 0) {\n          if (getParent(self, 2).removePanel)\n            getParent(self, 2).removePanel(self)\n        }\n      }\n\n      // TODO factor in the size of the removed panel\n      // into the panel to its left and right\n\n      self.distributeChildren()\n    },\n\n    clear: () => {\n      if (self.panels && self.children) {\n        self.panels.clear()\n        self.children = []\n      }\n    }\n  }))\n\nexport default Layout\n","import { types } from \"mobx-state-tree\";\n\nexport const themes = {\n  'weyland': { // light\n    primary_color: '#ffffff',\n    secondary_color: '#C2C2C2',\n    tertiary_color: '#e0e0e0',\n    text_color: '#000000',\n    outline_color: '#aaaaaa',\n    accent_color: '#3fa3a3'\n  },\n  'yutani': { // dark\n    primary_color: '#000000',\n    secondary_color: '#202020',\n    tertiary_color: '#303030',\n    text_color: '#ffffff',\n    outline_color: '#474747',\n    accent_color: '#3fa3a3'\n  },\n  'powershell': { // blue\n    primary_color: '#012456',\n    secondary_color: '#304E78',\n    tertiary_color: '#233767',\n    text_color: '#ffffff',\n    outline_color: '#51578B',\n    accent_color: '#ffff00'\n  },\n  'sarah': {\n    primary_color: '#0D5439',\n    secondary_color: '#9D6C71',\n    tertiary_color: '#5b6b5c',\n    text_color: '#C9A6A6',\n    outline_color: '#aaaaaa',\n    accent_color: '#D3945A'\n  },\n};\n\nconst Theme = types\n    .model(\"Theme\", {\n        ...themes.weyland\n    })\n    .actions(self => ({\n      setTheme: (theme) => {\n        self.primary_color = theme.primary_color;\n        self.secondary_color = theme.secondary_color;\n        self.tertiary_color = theme.tertiary_color;\n        self.text_color = theme.text_color;\n        self.outline_color = theme.outline_color;\n        self.accent_color = theme.accent_color;\n      },\n      setPrimaryColor: color => self.primary_color = color,\n      setSecondaryColor: color => self.secondary_color = color,\n      setTertiaryColor: color => self.tertiary_color = color,\n      setTextColor: color => self.text_color = color,\n      setOutlineColor: color => self.outline_color = color,\n      setAccentColor: color => self.accent_color = color\n    }))\n\nexport default Theme;","import { types, onSnapshot, getSnapshot, applySnapshot } from 'mobx-state-tree'\nimport Context from './Context'\nimport { nanoid } from 'nanoid'\n\nimport Panel from './Panel'\nimport Theme from './Theme'\nimport Layout from './Layout'\n\n/*  \n  TODO\n    some of the names for variable should be made a little more\n    clear, in particular names for layouts.\n\n    Layouts are a structure that hold panels and other sublayouts,\n    and these can be saved. the member variable 'layouts' though\n    refers to custom layouts that are saved and recalled, and that\n    requires actually grabbing the whole outer panel. So it's not\n    as much a layout as it is a panel, but not sure of the right \n    words to make that clear.\n*/\n\nconst UI = types\n  .model('UI', {\n    panels: types.map(Panel),\n    theme: Theme,\n    layouts: types.map(Panel),\n    context: types.maybe(Context)\n  })\n  .volatile((self) => ({\n    panelVariants: null\n  }))\n  .actions((self) => ({\n    afterAttach: () => {\n      self.context = Context.create()\n\n      // restore layout from local storage\n      // whenever theme is changed, save in local storage\n      onSnapshot(self.theme, () => {\n        console.log('saving theme')\n        window.localStorage.setItem(\n          'theme',\n          JSON.stringify(getSnapshot(self.theme))\n        )\n      })\n\n      // if theme exists in local storage, load it up\n      if (window.localStorage.getItem('theme')) {\n        self.theme.setTheme(JSON.parse(window.localStorage.getItem('theme')))\n      }\n\n      // whenever layouts are changed, save in local storage\n      // onSnapshot(self.layouts, () => {\n      //   console.log('saving layouts')\n      //   if (window.localStorage.getItem('layouts'))\n      //     window.localStorage.setItem(\n      //       'layouts',\n      //       JSON.stringify(getSnapshot(self.layouts))\n      //     )\n      // })\n\n      // if layouts exist in local storage, load them up\n      if (window.localStorage.getItem('layouts')) {\n        self.setCustomLayouts(JSON.parse(window.localStorage.getItem('layouts')))\n      }\n    },\n\n    setPanelVariants: (panels) => {\n      self.panelVariants = panels\n    },\n\n    setCustomLayouts: (layouts) => {\n      for (const l in layouts) {\n        self.layouts.put(layouts[l])\n      }\n    },\n\n    saveCustomLayouts: () => {\n      console.log('saving layouts')\n      window.localStorage.setItem(\n        'layouts',\n        JSON.stringify(getSnapshot(self.layouts))\n      )\n    },\n\n    addNewMainLayout: (layout, title) => {\n      const newId = nanoid(4)\n      self.layouts.put({ ...layout, id: newId, title: title || newId })\n      self.saveCustomLayouts()\n    },\n\n    removeLayout: (layout) => {\n      self.layouts.delete(layout.id)\n      self.saveCustomLayouts()\n    },\n\n    getPanelVariant: (id) => {\n      return self.panelVariants[id]\n    },\n\n    getLayout: (id) => {\n      if (self.layouts.has(id)) {\n        return self.layouts.get(id)\n      }\n    },\n\n    getPanel: (id) => {\n      return self.panels.get(id)\n    },\n\n    applyLayoutToMainPanel: (panel) => {\n      const main = self.panels.get('MAIN')\n      const snap = getSnapshot(panel)\n\n      applySnapshot(main, { ...main, ...snap, id: 'MAIN', title: main.title })\n    }\n  }))\n\nexport default UI\n","import _MacoWrapperComponent from './components/MacoWrapperComponent'\n\nimport _PanelComponent, {\n  GenericPanel as _GenericPanel\n} from './components/PanelComponent'\nimport _TextComponent from './components/TextComponent'\nimport _ToolbarComponent from './components/ToolbarComponent'\nimport _ContextMenuComponent from './components/ContextMenuComponent'\nimport _ControlGroupComponent from './components/ControlGroupComponent'\nimport _SplitContainer from './components/SplitContainer'\nimport _LayoutContainer from './components/LayoutContainer'\nimport _PagesContainer from './components/PagesContainer'\n\nimport _InputBool from './components/input/InputBool'\nimport _InputFloat from './components/input/InputFloat'\nimport _InputSelect from './components/input/InputSelect'\nimport _InputSlider from './components/input/InputSlider'\nimport _InputColor from './components/input/InputColor'\n\nimport _UIContext from './UIContext'\n\n// STORES\nimport _ContextStore from './stores/Context'\nimport _LayoutStore from './stores/Layout'\nimport _PanelStore from './stores/Panel'\nimport { themes } from './stores/Theme'\nimport _UIStore from './stores/UI'\n\nexport const MacoWrapperComponent = _MacoWrapperComponent\n\nexport const TextComponent = _TextComponent\nexport const PanelComponent = _PanelComponent\nexport const GenericPanel = _GenericPanel\nexport const ToolbarComponent = _ToolbarComponent\nexport const ContextMenuComponent = _ContextMenuComponent\nexport const ControlGroupComponent = _ControlGroupComponent\nexport const SplitContainer = _SplitContainer\nexport const LayoutContainer = _LayoutContainer\nexport const PagesContainer = _PagesContainer\n\nexport const InputBool = _InputBool\nexport const InputFloat = _InputFloat\nexport const InputSelect = _InputSelect\nexport const InputSlider = _InputSlider\nexport const InputColor = _InputColor\n\nexport const UIContext = _UIContext\n\nexport const Themes = themes\n\n// STORES\nexport const ContextStore = _ContextStore\nexport const LayoutStore = _LayoutStore\nexport const PanelStore = _PanelStore\nexport const UIStore = _UIStore // main store output\n"],"names":["UIContext","React","createContext","style","drawer","width","top","left","DropDown","observer","props","context","useContext","theme","mainRef","useRef","useState","activeItem","setActiveItem","subDropDownOpen","setSubDropDownOpen","subDropDownId","setSubDropDownId","subDropDownPosition","setSubDropDownPosition","handleSubDropDown","e","index","item","onClick","toggle","bounds","currentTarget","getBoundingClientRect","id","openUp","height","bottom","openLeft","handleClickAway","current","contains","target","handleRef","onRef","handleContextMenu","useLayoutEffect","document","addEventListener","removeEventListener","open","position","classNames","styles","backgroundColor","secondary_color","color","text_color","items","Object","keys","map","k","i","dropDown","subDropDown","activeButton","active","label","disableHover","display","title","buttons","b","border","outline_color","borderTop","borderBottom","borderLeftStyle","borderRightStyle","flexShrink","padding","defaultProps","propTypes","Toolbar","dropDownOpen","setDropDownOpen","dropDownId","setDropDownId","dropDownPosition","setDropDownPosition","setOpenUp","handleWheel","offset","Math","sign","deltaY","scroll","scrollLeft","at_start","at_end","offsetWidth","scrollWidth","useEffect","y","window","innerHeight","toolbar","borderColor","button","highlight","parent_bounds","_openUp","x","itemDecoration","DropDownComponent","ContextMenu","dropRef","dropDownOpenLeft","setDropDownOpenLeft","dropDownOpenUp","setDropDownOpenUp","handleClick","preventDefault","pageX","pageY","innerWidth","MacoWrapper","store","ui","setContextmenu","contextmenu","wrapper","ToolbarComponent","titlebar","ContextMenuComponent","className","tertiary_color","children","Tooltip","show","setShow","setPosition","handleToggle","tooltip","tooltip_symbol","tooltip_content","primary_color","content","Panel","wrapperElement","expanded","setExpanded","focused","setFocused","handleResize","direction","dragging","pBounds","initialDimensions","initialPosition","handleMove","touches","w","h","onDimensionsChange","dimensions","onPositionChange","handleMoveEnd","handleMoveStart","dragOff","handleCenter","handleFullscreen","fullscreen","onFullscreen","onFloat","handleFloat","floating","handleFocus","stopPropagation","onFocus","handleBlur","blur","onBlur","mainStyling","hasTitle","showTitle","onRemove","collapsible","accent_color","panel","collapsed","margin","gutters","gutterSize","zIndex","onContextMenu","onMouseEnter","onMouseLeave","onMouseOver","onMouseOut","title_bar","titleStyle","canFullscreen","fontSize","canRemove","canFloat","dragContainer","moveHandle","onPanelSelect","undefined","panelSelect","uuid","values","panelVariants","subtitle","indicators","indicator","flexBasis","panel_content","horizontal","vertical","footbar","resizeHandle","resizeSE","resizeE","resizeS","resizeSW","resizeW","resizeN","resizeNE","resizeNW","PropTypes","func","object","any","oneOfType","string","array","bool","number","GenericPanel","defaultWidth","onContextMenuCapture","setFloating","setDimensions","setFullscreen","Text","text","ControlGroup","name","Children","child","inputWidth","length","isValidElement","cloneElement","useObserver","callback","element","dependencies","observe","unobserve","resizeObserverOrPolyfill","ResizeObserver","Split","size","SplitContainer","distributeSplits","count","defaultSplits","filter","defaultsize","defaultSum","s","reduce","a","split","setSplit","isEmpty","setEmpty","isVertical","setIsVertical","handleContainerResize","auto","useResizeObserver","handlePanelResize","splitSum","slice","handleDetach","detachBool","updateFlag","onEmpty","wrapperClass","empty","isSplit","type","split_container","panel_container","hasHandle","detachable","onDetach","split_floating","drag_container","drag_handle_visible","drag_handle","alignSelf","textAlign","isRequired","LayoutContainer","layout","pos","adjust","addPanels","addHorizontalPanels","addVerticalPanels","forEach","addPanel","addLayout","changeOrientation","setDirection","distributeLayout","distributeChildren","handlePanelSelect","sibling","setPanel","value","handlePanelRemove","removePanel","generateLayout","elements","siblings","childIsLayout","filterOutFloats","isFirst","isLast","isFloating","j","tSum","matchingChild","firstDrag","layout_container","float_container","debug","lastDrag","order","Pages","currentPage","setCurrentPage","handlePreviousPage","handleNextPage","buttonStyle","pagecontent","pagenav","InputBool","updateValue","onChange","checked","flexFlow","hLabel","wrapper_inner","base_value","InputFloat","handleChange","Number","handleDragStart","handleDrag","scalar","ctrlKey","shiftKey","x_offset","y_offset","min","max","output_value","step","floor","handleDragEnd","parseFloat","toFixed","defaultInputStyle","onDoubleClick","inputStyle","InputSelect","selectedOption","options","opt","slider_bounds","InputSlider","slider_element","console","log","handleFloatDrag","v","slider_track","sleeve","handle","InputColor","showValue","textInput","ContextMenuItem","types","model","identifier","frozen","late","self","Context","keylistener","tinykeys","keymap","actions","setKeymap","removeKeymap","c","component_type","maybe","Layout","parent_layout","setLayout","newLayout","clone","f","toggleFloating","toggleFullscreen","p","d","getParent","center","fitScreen","optional","enumeration","views","result","rootStore","afterAttach","getRoot","selfIndex","indexOf","sum","previousSize","adjustedSize","setSize","nextSibling","panelId","newpanel","orientation","after","insertAfter","splice","create","nanoid","clear","panels","themes","Theme","weyland","setTheme","setPrimaryColor","setSecondaryColor","setTertiaryColor","setTextColor","setOutlineColor","setAccentColor","UI","layouts","onSnapshot","localStorage","setItem","JSON","stringify","getSnapshot","getItem","parse","setCustomLayouts","setPanelVariants","l","put","saveCustomLayouts","addNewMainLayout","newId","removeLayout","getPanelVariant","getLayout","has","get","getPanel","applyLayoutToMainPanel","main","snap","applySnapshot","MacoWrapperComponent","_MacoWrapperComponent","TextComponent","_TextComponent","PanelComponent","_PanelComponent","_GenericPanel","_ToolbarComponent","_ContextMenuComponent","ControlGroupComponent","_ControlGroupComponent","_SplitContainer","_LayoutContainer","PagesContainer","_PagesContainer","_InputBool","_InputFloat","_InputSelect","_InputSlider","_InputColor","_UIContext","Themes","ContextStore","_ContextStore","LayoutStore","_LayoutStore","PanelStore","_PanelStore","UIStore","_UIStore"],"mappings":"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"}