{"version":3,"file":"index.js","sources":["../src/stores/Theme.js","../src/ThemeContext.js","../src/components/DropDownComponent.js","../src/components/ToolbarComponent.js","../src/components/ContextMenuComponent.js","../src/components/MacoWrapperComponent.js","../src/components/PanelComponent.js","../src/components/TextComponent.js","../src/components/ControlGroupComponent.js","../src/components/hooks/ResizeHook.js","../src/components/SplitContainer.js","../src/components/LayoutContainer.js","../src/components/PagesContainer.js","../src/components/input/InputBool.js","../src/components/input/InputFloat.js","../src/components/input/InputSelect.js","../src/components/input/InputSlider.js","../src/components/input/InputColor.js","../src/stores/Context.js","../src/stores/Panel.js","../src/stores/Layout.js","../src/stores/UI.js","../src/index.js"],"sourcesContent":["import { types } from \"mobx-state-tree\";\n\nexport const themes = {\n  'weyland': { // light\n    primary_color: '#ffffff',\n    secondary_color: '#C2C2C2',\n    tertiary_color: '#e0e0e0',\n    text_color: '#000000',\n    outline_color: '#aaaaaa',\n    accent_color: '#3fa3a3'\n  },\n  'yutani': { // dark\n    primary_color: '#000000',\n    secondary_color: '#202020',\n    tertiary_color: '#303030',\n    text_color: '#ffffff',\n    outline_color: '#474747',\n    accent_color: '#3fa3a3'\n  },\n  'powershell': { // blue\n    primary_color: '#012456',\n    secondary_color: '#304E78',\n    tertiary_color: '#233767',\n    text_color: '#ffffff',\n    outline_color: '#51578B',\n    accent_color: '#ffff00'\n  },\n  'sarah': {\n    primary_color: '#0D5439',\n    secondary_color: '#9D6C71',\n    tertiary_color: '#5b6b5c',\n    text_color: '#C9A6A6',\n    outline_color: '#aaaaaa',\n    accent_color: '#D3945A'\n  },\n};\n\nconst Theme = types\n    .model(\"Theme\", {\n        ...themes.weyland\n    })\n    .actions(self => ({\n      setTheme: (theme) => {\n        self.primary_color = theme.primary_color;\n        self.secondary_color = theme.secondary_color;\n        self.tertiary_color = theme.tertiary_color;\n        self.text_color = theme.text_color;\n        self.outline_color = theme.outline_color;\n        self.accent_color = theme.accent_color;\n      },\n      setPrimaryColor: color => self.primary_color = color,\n      setSecondaryColor: color => self.secondary_color = color,\n      setTertiaryColor: color => self.tertiary_color = color,\n      setTextColor: color => self.text_color = color,\n      setOutlineColor: color => self.outline_color = color,\n      setAccentColor: color => self.accent_color = color\n    }))\n\nexport default Theme;","import { createContext } from 'react';\n\nimport { themes } from \"./stores/Theme\";\n\nconst ThemeContext = createContext(themes.weyland)\n\nexport default ThemeContext","import React, { useState, useContext, useRef, useLayoutEffect, useEffect } from 'react';\nimport ThemeContext from '../ThemeContext';\nimport styles from './DropDownComponent.module.css';\nimport classNames from 'classnames';\nimport {observer} from 'mobx-react';\n\nlet style = {\n    drawer: {\n        width: \"0px\",\n        top: \"0px\",\n        left: \"0px\",\n    }\n}\n\nconst DropDown = observer((props) => {\n    const context = useContext(ThemeContext);\n    let mainRef = useRef(null);\n\n    const [activeItem, setActiveItem] = useState(null);\n    const [subDropDownOpen, setSubDropDownOpen] = useState(false);\n    const [subDropDownId, setSubDropDownId] = useState(null);\n    const [subDropDownPosition, setSubDropDownPosition] = useState({top:0,left:0});\n\n    const handleSubDropDown = (e, index, item) => {\n        if(item.onClick) item.onClick();\n        let toggle = index === activeItem ? !subDropDownOpen : true;\n\n        let bounds = e.currentTarget.getBoundingClientRect();\n\n        setActiveItem(toggle ? index : false);\n        setSubDropDownId(item.id)\n        setSubDropDownOpen(toggle);\n        setSubDropDownPosition({\n            top: !props.openUp ? -bounds.height : 'auto',\n            bottom: props.openUp ? 0 : 'auto', \n            left: props.openLeft ? -bounds.width : bounds.width\n        });\n    }\n\n    const handleClickAway = e => {\n        if (mainRef.current && !mainRef.current.contains(e.target)) {\n            setActiveItem(null);\n            setSubDropDownOpen(false);\n        }\n    }\n\n    function handleRef(e) {\n        mainRef.current = e;\n        if(props.onRef) props.onRef(mainRef)\n    }\n\n    function handleContextMenu(e) {\n        setSubDropDownOpen(false);\n    }\n\n    useLayoutEffect(() => {\n      document.addEventListener('click', (e) => handleClickAway(e));\n      document.addEventListener('contextmenu', (e) => handleContextMenu(e));\n\n      return () => {\n        document.removeEventListener('click', (e) => handleClickAway(e));\n        document.addEventListener('contextmenu', (e) => handleContextMenu(e));\n      }\n    }, []);\n\n    style = {\n      ...style,\n      drawer: {\n        width: props.open ? '150px' : '0px',\n        ...props.position\n      }\n    };\n\n    return(\n        <div \n            className = {\n              classNames(\n                styles.drawer, {\n                //   [styles.openLeft]: props.openLeft,\n                //   [styles.openUp]: props.openUp,\n                }\n              )\n            }\n            ref={(e)=>handleRef(e)}\n            style={{\n                ...style.drawer,\n                backgroundColor: context.secondary_color,\n                color: context.text_color\n            }}            \n        >\t\t\t\n            {props.items && Object.keys(props.items).map((k,i)=>{ \n                let item = props.items[k];\n\n                // if there is a subdropdown               \n                if(item.dropDown) {         \n                    return (\n                        <div \n                            key={item.id}\n                            className={styles.subDropDown}\n                            style = {\n                              {\n                                ...style.drawer,\n                                backgroundColor: context.secondary_color,\n                                color: context.text_color\n                              }\n                            }\n                        >\n                            <button\n                                key={'sub'+item.id}                                \n                                onClick={e=>handleSubDropDown(e,i,item)}\n                                className={\n                                    classNames(\n                                        {\n                                            [styles.activeButton]: i === activeItem,\n                                            [styles.openLeft]: props.openLeft,\n                                            [styles.openUp]: props.openUp,\n                                        }\n                                    )\n                                }\n                            >                                \n                                {item.label}      \n                                <span>{props.openLeft ? '<' : '>'}</span>\n                            </button>\n                            \n\n                            {/* \n                                this extra div helps ensure nested \n                                dropdowns are visible through hidden\n                                overflow\n                             */}\n                            {(i === activeItem && subDropDownId) && (\n                                <div key={item.id} style={{position:'fixed'}}>\n                                    <DropDown \n                                        key={item.id+'dd'}\n                                        open={props.open && subDropDownOpen}                                    \n                                        items={{...props.items[subDropDownId].dropDown}}\n                                        position={subDropDownPosition}       \n                                        openLeft={props.openLeft}   \n                                        openUp={props.openUp}                          \n                                    />\n                                </div>\n                            )}\n                        </div>                            \n                    )\n                }else{\n                    return (\n                        <div \n                            key={item.id}\n                            className = {\n                              classNames({\n                                [styles.activeButton]: i === activeItem,\n                                [styles.disableHover]: item.disableHover,\n                                [styles.openLeft]: props.openLeft,\n                                [styles.openUp]: props.openUp,\n                              })\n                            }\n                            style={{\n                                display:'flex',\n                                width:'100%'\n                            }}\n                        >\n                            <button\n                                key={'normal'+item.id}   \n                                title={item.title}                                            \n                                onClick={item.onClick}\n                            >\n                                {item.label}                                 \n                            </button>\n                            {item.buttons && Object.keys(item.buttons).map((k) => {\n                                let b = item.buttons[k];\n                                return (\n                                    <button\n                                        key={'button'+b.id}\n                                        onClick={b.onClick} \n                                        title={b.title}             \n                                        style={{\n                                            border: `1px solid ${context.outline_color}`,\n                                            borderTop: 'none',\n                                            borderBottom: 'none',\n                                            borderLeftStyle: !props.openLeft ? 'solid' : 'none',\n                                            borderRightStyle: props.openLeft ? 'solid' : 'none',\n                                            flexShrink: 10,\n                                            padding: 3\n                                        }}\n                                    ><small>{b.label}</small></button>\n                                )\n                            })}\n                        </div>                        \n                    )\n                }\n            })}\n        </div>\n    )\n})\n\nDropDown.defaultProps = {\n  openLeft: false,\n  openUp: false\n}\n\nDropDown.propTypes = {\n\n}\n\nexport default DropDown;","import React, { useState, useContext, useRef, useEffect } from 'react';\nimport styles from './ToolbarComponent.module.css';\nimport ThemeContext from '../ThemeContext';\nimport DropDownComponent from './DropDownComponent';\nimport classNames from 'classnames';\nimport {observer} from 'mobx-react';\n\nconst Toolbar = observer((props) => {\n    const context = useContext(ThemeContext);\n    const mainRef = useRef(null); \n\n    const [activeItem, setActiveItem] = useState(null);\n    const [dropDownOpen, setDropDownOpen] = useState(false);\n    const [dropDownId, setDropDownId] = useState(null);\n    const [dropDownPosition, setDropDownPosition] = useState({top:0,left:0});\n    const [openUp, setOpenUp] = useState(false);\n\n    const handleClickAway = (e) => {\n      if (mainRef.current && !mainRef.current.contains(e.target)) {\n        setActiveItem(null);\n        setDropDownOpen(false);\n      }\n    }\n\n    const handleWheel = (e) => {\n        let offset = (Math.sign(e.deltaY) * 5)\n        mainRef.current.scroll(mainRef.current.scrollLeft + offset, 0);\n            \n        let at_start = mainRef.current.scrollLeft === 0;\n        let at_end = mainRef.current.offsetWidth + mainRef.current.scrollLeft >= mainRef.current.scrollWidth;\n        \n        if(!at_start && !at_end && dropDownOpen) {            \n            setDropDownPosition({\n              top: dropDownPosition.top,\n              left: dropDownPosition.left - offset\n            });\n        }\n    }\n\n    useEffect(()=>{\n        document.addEventListener('click', (e) => handleClickAway(e));\n\n        let bounds = mainRef.current.getBoundingClientRect();\n        setOpenUp(bounds.y > (window.innerHeight - (window.innerHeight / 3)))\n\n        return (document.removeEventListener('click', (e) => handleClickAway(e)));\n    }, []);\n\n    return (\n        <div \n            className={styles.toolbar}\n            ref={mainRef}\n            style = {{\n                ...props.style,\n                backgroundColor: context.secondary_color || 'black',\n                color: context.text_color || 'white',\n            }}\n            onWheel={handleWheel}\n        >\n            {props.items && Object.keys(props.items).map((k,i)=>{\n                let item = props.items[k];\n                return (\n                    <button\n                        key={item.id}\n                        title={item.title}\n                        style={{\n                            ...item.style,\n                            borderColor: context.text_color\n                        }}\n                        className = {\n                          classNames(styles.button, {\n                            [styles.activeButton]: (item === activeItem) || (item.highlight),\n                            // [styles.disableHover]: (item.onClick === undefined) && !item.dropDown\n                            [styles.disableHover]: item.disableHover\n                          })\n                        }\n                        onClick={(e)=>{\n                            if(item.dropDown) {\n                                let toggle = item === activeItem ? !dropDownOpen : true;\n\n                                let parent_bounds = mainRef.current.getBoundingClientRect();\n                                let bounds = e.currentTarget.getBoundingClientRect();\n\n                                let _openUp = bounds.y > (window.innerHeight - (window.innerHeight / 3));\n                                setActiveItem(toggle ? item : null);\n                                setOpenUp(_openUp)\n                                setDropDownOpen(toggle);\n\n                                // this id is important so that the dropdowns to received DERIVED STATE!\n                                setDropDownId(item.id);\n                                setDropDownPosition({\n                                  top: !openUp ? bounds.height : 'auto',\n                                  bottom: openUp ? 0 : 'auto',\n                                  left: bounds.left - parent_bounds.x\n                                });\n                            }\n                            \n                            if(item.onClick) item.onClick();\n                        }}\n                    >\n                        {item.label}   \n                        {item.dropDown && (\n                            <span className={styles.itemDecoration}>\n                                {openUp ? '▲' : '▼'}\n                            </span>\n                        )}                         \n                    </button>\n                )\n            })}\n\n            <div style={{position:'fixed'}}>\n                {props.items[dropDownId] && (<DropDownComponent \n                    open={dropDownOpen}                                    \n                    items={{...props.items[dropDownId].dropDown}}\n                    position={dropDownPosition}\n                    openUp={openUp}\n                />)}\n            </div>\n            \n        </div>  \n    );\n});\n\nexport default Toolbar;","import React, { useState, useRef, useLayoutEffect } from 'react';\nimport DropDownComponent from './DropDownComponent';\nimport {observer} from 'mobx-react';\n\nconst ContextMenu = observer((props) => {\n    const mainRef = useRef(null);\n    let dropRef = useRef(null);\n\n    const [dropDownOpen, setDropDownOpen] = useState(false);\n    const [dropDownPosition, setDropDownPosition] = useState({top:0,left:0});\n    const [dropDownOpenLeft, setDropDownOpenLeft] = useState(false);\n    const [dropDownOpenUp, setDropDownOpenUp] = useState(false);\n\n    const handleClickAway = (e) => {\n        if (mainRef.current && !mainRef.current.contains(e.target)) {\n            setDropDownOpen(false);\n        }\n    }\n\n    const handleClick = (e) => {\n        e.preventDefault();\n\n        // keep open with right click.\n        setDropDownOpen(true);\n\n        // adjust to keep menu in frame\n        let x = e.pageX;\n        let y = e.pageY;\n\n        // 150 is the menu width, this shouldn't be hardcoded\n        // but it's not in bounding box when first clicked\n        if (e.pageX + 150 > window.innerWidth)\n            x -= 150\n        \n        let _openUp = y > (window.innerHeight - (window.innerHeight / 3));\n\n        setDropDownOpenUp(_openUp);\n        setDropDownOpenLeft(e.pageX > window.innerWidth / 2);\n        setDropDownPosition({\n            top: !_openUp ? y : 'auto',\n            bottom: _openUp ? (window.innerHeight - y) : 'auto',            \n            left:x\n        });\n         \n        return false;\n    }\n\n    const handleRef = (e) => {\n        dropRef = e;\n    }\n\n    useLayoutEffect(()=>{\n        document.addEventListener('click', (e) => handleClickAway(e), true);\n        document.addEventListener('contextmenu', (e) => handleClick(e), true);\n\n        return () => {\n            document.removeEventListener('click', (e) => handleClickAway(e), true);\n            document.removeEventListener('contextmenu', (e) => handleClick(e), true);\n        };\n    }, []);\n\n    return (\n        <div ref={mainRef}>\n            {/* <div style={{\n                position: 'absolute',\n                top: dropDownPosition.top,\n                left: dropDownPosition.left,\n                fontSize: '2em',\n                zIndex: 10000\n            }}>\n                ⌖\n            </div> */}\n            <DropDownComponent \n                open={dropDownOpen}                                    \n                items={props.items}\n                position={dropDownPosition}\n                onRef={handleRef}\n                openLeft={dropDownOpenLeft}\n                openUp={dropDownOpenUp}\n            />\n        </div>\n    );\n})\n\nexport default ContextMenu;","import React, { useState, useContext, useRef, useLayoutEffect } from 'react';\nimport styles from './MacoWrapperComponent.module.css';\nimport ThemeContext from '../ThemeContext';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport {observer} from 'mobx-react';\nimport ToolbarComponent from './ToolbarComponent';\nimport ContextMenuComponent from './ContextMenuComponent';\n\nconst MacoWrapper = observer((props) => {\n\tconst store = props.store;\n\n\tconst handleContextMenu = () => {\n\t  // prevents context menu anywhere that hasn't been\n\t  // explicitly allowed\n\t  store.ui.context.setContextmenu(props.contextmenu);\n\t};\n\n\treturn (\n\t\t<div className={styles.wrapper}>\n\t\t\t<ThemeContext.Provider value={store.ui.theme}>\n\t\t\t\t<ToolbarComponent items={props.titlebar} />\n\t\t\t\t<ContextMenuComponent items={store.ui.context.contextmenu} />\n\n\t\t\t\t<div \n\t\t\t\t\tstyle={{\n\t\t\t\t\t\twidth:'100%',\n\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\tbackgroundColor: store.ui.theme.tertiary_color\n\t\t\t\t\t}}\n\t\t\t\t\tonContextMenu={() => handleContextMenu()}\n\t\t\t\t></div>\n\n\t\t\t\t{props.children}\n\t\t\t</ThemeContext.Provider>\n\t\t</div>\n\t);\n});\n\nMacoWrapper.defaultProps = {\n\tcontextmenu: {},\n\ttitlebar: {}\n}\n\nexport default MacoWrapper;","import React, { useState, useContext, useRef, useLayoutEffect } from 'react';\nimport styles from './PanelComponent.module.css';\nimport ThemeContext from '../ThemeContext';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport {observer} from 'mobx-react';\n\nconst Tooltip = observer((props) => {\n\tconst context = useContext(ThemeContext);\n\tconst [show, setShow] = useState(false);\n\tconst [position, setPosition] = useState([0,0,0,0]);\n\n\tconst handleToggle = (e) => {\t\t\n\t\tlet x = e.pageX;\n\t\tlet y = e.pageY;\n\n\t\tif(x > (window.innerWidth-150))\t\n\t\t\tx = e.pageX - 150;\t\t\n\n\t\tif(y > (window.innerHeight-150))\n\t\t\ty = e.pageY - 150;\t\t\n\n\t\tsetPosition([x, y]);\n\t\tsetShow(!show);\n\t}\n\n\treturn (\n\t\t<div \n\t\t\tclassName={styles.tooltip}\t\t\t\n\t\t>\n\t\t\t<div \n\t\t\t\tclassName={styles.tooltip_symbol}\n\t\t\t\tonClick={(e)=>handleToggle(e)}\n\t\t\t>ℹ</div>\n\t\t\t<div \n\t\t\t\tclassName={styles.tooltip_content}\n\t\t\t\tstyle={{\n\t\t\t\t\tbackgroundColor: context.primary_color,\n\t\t\t\t\tborder: `1px solid ${context.outline_color}`,\t\t\t\t\t\n\t\t\t\t\tdisplay: show ? 'block' : 'none',\n\t\t\t\t\tleft: position[0],\n\t\t\t\t\ttop: position[1]\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{props.content}\n\t\t\t</div>\n\t\t</div>\n\t)\n})\n\nconst Panel = observer((props) => {\n\tconst context = useContext(ThemeContext);\n\n\tconst wrapper_element = useRef(null);\n\n\tconst [expanded, setExpanded] \t  = useState(props.expanded);\n\tconst [focused, setFocused] \t  = useState(props.focused);\n\tconst [hover, setHover]\t\t\t  = useState(false);\n\n\tconst handleResize = (e, axis = 'xy') => {\n\n\t\tfunction handleMove(e) {\n\t\t\tif (e.touches) e = e.touches[0]\n\n\t\t\tif (e.pageY) {\n\t\t\t\tconst p_bounds = wrapper_element.current.getBoundingClientRect();\n\n\t\t\t\tconst w = e.pageX - p_bounds.x + 10;\n\t\t\t\tconst h = e.pageY - p_bounds.y + 10;\n\n\t\t\t\tswitch (axis) {\n\t\t\t\t\tcase 'xy':\n\t\t\t\t\t\tprops.onDimensionsChange([w, h]);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'x': \n\t\t\t\t\t\tprops.onDimensionsChange([w, props.dimensions[1]]);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'y':\n\t\t\t\t\t\tprops.onDimensionsChange([props.dimensions[0], h]);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\t\t\t\t\n\t\t\t}\n\t\t}\n\n\t\tfunction handleMoveEnd(e) {\n\t\t\tif (e.touches && e.touches[0]) e = e.touches[0]\n\n\t\t\tif (e.pageY) {\n\t\t\t  const p_bounds = wrapper_element.current.getBoundingClientRect();\n\n\t\t\t  const w = e.pageX - p_bounds.x + 10;\n\t\t\t\tconst h = e.pageY - p_bounds.y + 10;\n\n\t\t\t\tswitch (axis) {\n\t\t\t\t\tcase 'xy':\n\t\t\t\t\t\tprops.onDimensionsChange([w, h]);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'x': \n\t\t\t\t\t\tprops.onDimensionsChange([w, props.dimensions[1]]);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'y':\n\t\t\t\t\t\tprops.onDimensionsChange([props.dimensions[0], h]);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\t\t\t\t\n\t\t\t}\n\n\t\t\tdocument.removeEventListener(\"mousemove\", handleMove);\n\t\t\tdocument.removeEventListener(\"mouseup\", handleMoveEnd);\n\t\t\tdocument.removeEventListener(\"touchmove\", handleMove);\n\t\t\tdocument.removeEventListener(\"touchend\", handleMoveEnd);\n\t\t}\n\n\t\tif (e.touches && e.touches[0]) e = e.touches[0]\n\n\t\tdocument.addEventListener(\"mousemove\", handleMove);\n\t\tdocument.addEventListener(\"mouseup\", handleMoveEnd);\n\t\tdocument.addEventListener(\"touchmove\", handleMove);\n\t\tdocument.addEventListener(\"touchend\", handleMoveEnd);\n\t}\n\n\tconst handleMoveStart = (e) => {\t\n\t\t/*\n\t\t\tthere are issues with drag events in firefox that make\n\t\t\tthe native 'drag' events less useful for this case. my \n\t\t\talternative was to use mouseEvents and create listeners \n\t\t\ton the document\n\t\t*/\n\n\t\tfunction handleMove(e) {\n\t\t  if(e.touches) e = e.touches[0]\n\t\t\t\n\t\t  if (e.pageY) {\n\t\t    const x = e.pageX - dragOff[0];\n\t\t    const y = e.pageY - dragOff[1];\n\n\t\t    // limits to upper left\n\t\t    props.onPositionChange([x >= 0 ? x : 0, y >= 0 ? y : 0])\n\t\t  }\n\t\t}\n\n\t\tfunction handleMoveEnd(e) {\n\t\t  if (e.touches && e.touches[0]) e = e.touches[0]\n\n\t\t  if (e.pageY) {\n\t\t    const x = e.pageX - dragOff[0];\n\t\t    const y = e.pageY - dragOff[1];\n\n\t\t    // limits to upper left\n\t\t    props.onPositionChange([x >= 0 ? x : 0, y >= 0 ? y : 0])\n\t\t  }\n\n\t\t  document.removeEventListener(\"mousemove\", handleMove);\n\t\t  document.removeEventListener(\"mouseup\", handleMoveEnd);\n\t\t  document.removeEventListener(\"touchmove\", handleMove);\n\t\t  document.removeEventListener(\"touchend\", handleMoveEnd);\n\t\t}\n\n\t\t// use first touch event if on mobile device\n\t\tif (e.touches) e = e.touches[0]\n\n\t\tconst p_bounds = wrapper_element.current.getBoundingClientRect();\n\t\tlet offset = { x: p_bounds.left, y: p_bounds.top };\n\n\t\tlet dragOff = [e.pageX - offset.x, e.pageY - offset.y];\n\n\t\tdocument.addEventListener(\"mousemove\", handleMove);\n\t\tdocument.addEventListener(\"mouseup\", handleMoveEnd);\n\t\tdocument.addEventListener(\"touchmove\", handleMove);\n\t\tdocument.addEventListener(\"touchend\", handleMoveEnd);\n\t}\n\n\tconst handleCenter = () => {\n\t\tif(!props.onPositionChange) return\n\t\tconst p_bounds = wrapper_element.current.getBoundingClientRect();\n\n\t\tconst x = (window.innerWidth/2) - (p_bounds.width/2);\n\t\tconst y = (window.innerHeight/2) - (p_bounds.height/2);\n\t\t\n\t\t// limits to upper left\n\t\tprops.onPositionChange([x >= 0 ? x : 0, y >= 0 ? y : 0])\n\t}\n\n\tconst handleFullscreen = () => {\n\t\tif (!props.fullscreen) handleCenter()\n\n\t\tprops.onFullscreen(!props.fullscreen);\n\t\tprops.onFloat(props.fullscreen)\n\t}\n\n\tconst handleFloat = () => {\n\t\tif(props.floating === null) {\n\t\t\t// get current width/height if it hasn't been detached before\n\t\t\tconst p_bounds = wrapper_element.current.getBoundingClientRect();\n\t\t\tif (props.onDimensionsChange) props.onDimensionsChange([p_bounds.width, p_bounds.height]);\n\t\t}\n\n\t\tif (props.onFloat) props.onFloat(!props.floating);\n\t}\n\n\t/*\n\t\tpositions the panel on top when hovered over\n\t*/\n\tconst handleFocus = (e) => {\n\t\tsetHover(true);\n\t\tsetFocused(true);\n\t\tif(props.onFocus) props.onFocus(e);\n\t}\n\n\tconst handleBlur = () => {\n\t\twrapper_element.current.blur();\n\t\tsetHover(false);\n\t\tsetFocused(false);\n\t\tif(props.onBlur) props.onBlur(false);\n\t}\n\t\n\tlet main_styling = {};\n\n\tif(props.floating && !props.fullscreen) {\n\t\tmain_styling = {\n\t\t\twidth: props.dimensions[0],\n\t\t\theight: expanded ? props.dimensions[1] : 'min-content',\n\t\t\tleft: props.position[0],\n\t\t\ttop: props.position[1],\t\t  \n\t\t}\n\t} else if(props.fullscreen) {\n\t\tmain_styling = {\n\t\t  width: '100%',\n\t\t  height: '100%',\n\t\t  left: 0,\n\t\t  top: 0,\n\t\t}\n\t}\n\n\tconst hasTitle = props.showTitle && (props.title || props.onRemove || props.collapsible || props.floating);\n\tconst borderColor = focused ? context.accent_color : context.outline_color;\n\t\n\tlet dblClickTitle = null;\n\n\tif(props.canFullscreen) {\n\t\tdblClickTitle = handleFullscreen;\n\t} else if(props.collapsible) {\n\t\tdblClickTitle = () => setExpanded(!expanded);\n\t} else if(props.canFloat) {\n\t\tdblClickTitle = handleFloat;\n\t}\n\n\t// questionable mix of controlled/uncontrolled\n\tuseLayoutEffect(() => {\n\t\tsetExpanded(props.expanded);\n\t}, [props.expanded])\n\n\treturn (\n\t\t<div \t\n\t\t\tref={wrapper_element}\t\t\t\t\t\t\n\t\t\tclassName={classNames(\n\t\t\t\tstyles.panel, \n\t\t\t\t{ \n\t\t\t\t\t[styles.fullscreen]: props.fullscreen,\n\t\t\t\t\t[styles.floating]: props.floating,\n\t\t\t\t\t[styles.collapsed]: !expanded,\n\t\t\t\t}\n\t\t\t)}\n\t\t\tstyle={{\n\t\t\t\tbackgroundColor: !props.fullscreen ? context.primary_color : 'transparent',\n\t\t\t\tcolor: context.text_color || 'white',\n\t\t\t\tborder: props.border && !props.fullscreen ? '1px solid '+borderColor : 'none',\n\t\t\t\theight: props.collapsible ? 'auto' : '100%',\n\t\t\t\tmargin: props.gutters ? props.gutterSize : 0,\n\t\t\t\tzIndex: hover ? 5 : 2,\n\t\t\t\t...main_styling,\n\t\t\t\t...props.style\n\t\t\t}}\t\t\t\n\t\t\tonFocus={handleFocus}\n\t\t\tonBlur={handleBlur}\n\t\t\tonContextMenu={props.onContextMenu}\n\t\t\tonMouseEnter={props.onMouseEnter}\n\t\t\tonMouseLeave={props.onMouseLeave}\n\t\t\tonMouseOver={props.onMouseOver}\n\t\t\tonMouseOut={props.onMouseOut}\n\t\t\ttabIndex=\"-1\"\n\t\t>\n\t\t\t{ hasTitle && (\n\t\t\t\t<div \n\t\t\t\t\tclassName={styles.title_bar} \n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tbackgroundColor: context.primary_color || 'black',\n\t\t\t\t\t\t...props.titleStyle\n\t\t\t\t\t}}\n\t\t\t\t>\n\n\t\t\t\t\t{props.canFullscreen && (\t\t\t\t\t\t \n\t\t\t\t\t\t<button \n\t\t\t\t\t\t\ttitle=\"fullscreen\"\n\t\t\t\t\t\t\tonClick={handleFullscreen}\n\t\t\t\t\t\t\tstyle={{fontSize:'0.9em'}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t✳\n\t\t\t\t\t\t</button>\t\t\t\t\t\n\t\t\t\t\t)}\n\n\t\t\t\t\t{ props.canRemove && (\n\t\t\t\t\t\t<button \n\t\t\t\t\t\t\ttitle=\"close\" \n\t\t\t\t\t\t\tonClick={props.onRemove}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tx\n\t\t\t\t\t\t</button>\n\t\t\t\t\t) }\n\n\t\t\t\t\t{ props.canFloat && (\n\t\t\t\t\t\t<button \n\t\t\t\t\t\t\ttitle={props.floating ? \"snap\" : \"float\"} \n\t\t\t\t\t\t\tonClick={handleFloat}\n\t\t\t\t\t\t\tstyle={{fontSize:'0.9em'}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t  props.floating ? '◧' : '❏'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t) }\n\n\t\t\t\t\t{ props.collapsible && (\n\t\t\t\t\t\t<button onClick={()=>setExpanded(!expanded)}>\n\t\t\t\t\t\t\t{expanded ? '▾' : '▸'}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t) }\n\n\t\t\t\t\t<div \n\t\t\t\t\t\tclassName={styles.dragContainer}\n\t\t\t\t\t\t\n\t\t\t\t\tonDoubleClick={dblClickTitle}\n\t\t\t\t\tonClick={props.collapsible && !props.canFullscreen ? () => setExpanded(!expanded) : null}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ props.floating && (\n\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\tclassName={styles.moveHandle}\n\t\t\t\t\t\t\t\tonTouchStart={handleMoveStart}\n\t\t\t\t\t\t\t\tonMouseDown={handleMoveStart}\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t<legend> \n\t\t\t\t\t\t\t<strong>{props.title}</strong>\n\t\t\t\t\t\t</legend>\n\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className={styles.subtitle}>{props.subtitle}</div>\n\t\t\t\t\t\n\t\t\t\t\t{props.indicators && (\n\t\t\t\t\t\t<div className={styles.indicators}>\n\t\t\t\t\t\t\t{props.indicators.map((e,i)=>{\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\tclassName={styles.indicator}\n\t\t\t\t\t\t\t\t\t\ttitle={e.title}\n\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\tcolor: context.primary_color,\n\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: e.color\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ e.label }\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</div>\t\t\n\t\t\t\t\t)}\t\n\n\t\t\t\t\t{props.tooltip && (\n\t\t\t\t\t\t<Tooltip content={props.tooltip}/>\t\t\n\t\t\t\t\t)}\t\t\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t                    \n\t\t\t{expanded && props.toolbar}\n\n\t\t\t{expanded && (\t\t\t\n\t\t\t\t<div \n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tborderColor: context.text_color,\n\t\t\t\t\t\tflexBasis: props.fullscreen ? \"0px\" : \"auto\"\n\t\t\t\t\t}} \t\t\t\t\t\n\t\t\t\t\tclassName = {\n\t\t\t\t\t  classNames(\n\t\t\t\t\t    styles.panel_content, {\n\t\t\t\t\t      [styles.horizontal]: props.horizontal,\n\t\t\t\t\t\t  [styles.vertical]: props.vertical\n\t\t\t\t\t    }\n\t\t\t\t\t  )\n\t\t\t\t\t}\n\t\t\t\t\tref={props.onRef}\n\t\t\t\t>\n\t\t\t\t\t{props.children}\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{expanded && props.footbar}\n\n\t\t\t{/* resize handles */}\n\t\t\t{(props.floating && !props.fullscreen && expanded)  && (\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t<div \n\t\t\t\t\t\tclassName={`${styles.resizeHandle} ${styles.resizeSE}`}\n\t\t\t\t\t\tonTouchStart={handleResize}\n\t\t\t\t\t\tonMouseDown={handleResize}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tborderColor: context.text_color,\n\t\t\t\t\t\t}} \n\t\t\t\t\t></div>\n\t\t\t\t\t<div \n\t\t\t\t\t\tclassName={`${styles.resizeHandle} ${styles.resizeE}`}\n\t\t\t\t\t\tonTouchStart={(e) => handleResize(e,'x')}\n\t\t\t\t\t\tonMouseDown={(e) => handleResize(e,'x')}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tborderColor: context.text_color,\n\t\t\t\t\t\t}} \n\t\t\t\t\t></div>\n\t\t\t\t\t<div \n\t\t\t\t\t\tclassName={`${styles.resizeHandle} ${styles.resizeS}`}\n\t\t\t\t\t\tonTouchStart={(e) => handleResize(e,'y')}\n\t\t\t\t\t\tonMouseDown={(e) => handleResize(e,'y')}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tborderColor: context.text_color,\n\t\t\t\t\t\t}} \n\t\t\t\t\t></div>\n\t\t\t\t</React.Fragment>\t\t\t\t\n\t\t\t)}\n\t\t\n\t\t</div>\n\t);\n});\n\nPanel.defaultProps = {\n\tfullscreen: false,\n\texpanded: true,\t\n\tborder: true,\n\tfocused: false,\n\tfloating: false,\n\tposition: [100,100],\n\tdimensions: [100,100],\n\tgutterSize: 5,\n\tshowTitle: true,\n\tonContextMenu: () => {}\n}\n\nPanel.propTypes = {\n\tonRemove: PropTypes.func,\n\tonFocus: PropTypes.func,\n\ttoolbar: PropTypes.object,\n\tchildren: PropTypes.any,\n\tstyle: PropTypes.object,\n\n\ttitleStyle: PropTypes.object,\n\ttitle: PropTypes.oneOfType([\n\t\tPropTypes.string,\n\t\tPropTypes.object\n\t]),\n\tindicators: PropTypes.array,\n\n\t//tooltip: PropTypes.string\n\n\thorizontal: PropTypes.bool,\n\tvertical: PropTypes.bool,\n\n\tcollapsible: PropTypes.bool,\n\tfullscreen: PropTypes.bool,\n\tfloating: PropTypes.bool,\n\t\n\tshowTitle: PropTypes.bool,\n\n\t// adds space around the panel, off by default\n\tgutters: PropTypes.bool,\n\tgutterSize: PropTypes.number,\n\n\tborder: PropTypes.bool,\n\n\tonFocus: PropTypes.func,\n}\n\nexport const GenericPanel = observer(props => (\n  <Panel\n    uuid={props.panel.id}\n\ttitle={props.title ?? props.panel.title}        \n\tsubtitle={props.subtitle ?? props.panel.subtitle}   \n\tcollapsible={props.collapsible ?? props.panel.collapsible} \n\tfullscreen={props.panel.fullscreen} \n\tcanFullscreen={props.panel.canFullscreen}\n\tfloating={props.panel.floating}\n\texpanded={props.expanded}\n\n\tshowTitle={props.showTitle ?? props.panel.showTitle}\n\t\n\tcanFloat={props.panel.canFloat}\n    defaultWidth={props.panel.defaultWidth}\n    defaultHeight={props.panel.defaultWidth}\n    position={props.panel.position}\n    dimensions={props.panel.dimensions}\n\ttoolbar={props.toolbar}\n\tfootbar={props.footbar}\n\tindicators={props.indicators}\n\ttooltip={props.tooltip}\n\n\tonRemove={props.onRemove ?? props.panel.onRemove}\n\tcanRemove={props.canRemove ?? props.panel.canRemove}\n\tstyle={props.style}\n\t\n\tonContextMenu={props.onContextMenu}\n\tonContextMenuCapture={props.onContextMenuCapture}\n\tonFocus={props.onFocus}\n\tonBlur={props.onBlur}\n\tonRef={props.onRef}\n\tonFloat={props.panel.setFloating}\n    onPositionChange={props.panel.setPosition}\n\tonDimensionsChange={props.panel.setDimensions}\n\tonFullscreen={props.panel.setFullscreen}\n  >\n    {props.children}\n  </Panel>\n));\n\nexport default Panel;","import React from 'react';\nimport styles from './TextComponent.module.css';\n\nconst Text = (props) => {\n\treturn(\n\t\t<div className={styles.text} style={props.style}>\n\t\t\t{props.children}\n\t\t</div>\t\n\t)\n}\n\nexport default Text;","import React, { useContext } from 'react';\nimport styles from './ControlGroupComponent.module.css';\nimport ThemeContext from '../ThemeContext';\n\nconst ControlGroup = (props) => {\n    const context = useContext(ThemeContext);\n\n    return (\n        <div className={styles.wrapper}>\n            <fieldset\n                style={{\n                    borderColor: context.outline_color\n                }}\n            >                \n                {props.name && (\n                    <legend\n                        style={{ \n                            padding: '2px 4px',\n                            backgroundColor: context.text_color,\n                            color: context.primary_color\n                        }}\n                    >\n                        <strong>{props.name}</strong>\n                    </legend>  \n                )}\n                                  \n                <div>\n                    {React.Children.map(props.children,(child)=>{\n                        let input_width = 100.0;\n\n                        if(props.children.length) {\n                            input_width = 100.0 / props.children.length;\n                        }\n                        \n                        if (React.isValidElement(child)) {\n                            return React.cloneElement(child, { style: {width:`${input_width}%`} })\n                        }\n\n                        return child;\n                    })}\n                </div>                    \n            </fieldset>  \n        </div>          \n    );\n}\n\nexport default ControlGroup;","import { useLayoutEffect, useRef } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport ResizeObserver from 'resize-observer-polyfill'\r\n\r\nconst useObserver = (callback, element, dependencies = []) => {\r\n  const observer = useRef(null)\r\n  \r\n  useLayoutEffect(() => {\r\n    const observe = () => {\r\n      if (element && element.current && observer.current) {\r\n        observer.current.observe(element.current)\r\n      }\r\n    }\r\n\r\n    const current = element.current\r\n\r\n    // if we are already observing old element\r\n    if (observer && observer.current && current) {\r\n      observer.current.unobserve(current)\r\n    }\r\n    const resizeObserverOrPolyfill = ResizeObserver\r\n\r\n    observer.current = new resizeObserverOrPolyfill(callback)\r\n    observe()\r\n\r\n    return () => {\r\n      if (observer && observer.current && current) {\r\n        observer.current.unobserve(current)\r\n      }\r\n    }\r\n  }, [callback, element, observer, ...dependencies])\r\n}\r\n\r\nuseObserver.propTypes = {\r\n  element: PropTypes.object,\r\n  callback: PropTypes.func\r\n  //   dependencies\r\n}\r\n\r\nexport default useObserver\r\n","import React, {\n  useState,\n  useContext,\n  useRef,\n  useEffect,\n  useLayoutEffect\n} from 'react'\nimport useResizeObserver from './hooks/ResizeHook'\nimport classNames from 'classnames'\nimport styles from './SplitContainer.module.css'\nimport ThemeContext from '../ThemeContext'\nimport PropTypes from 'prop-types'\n\nclass Split {\n  constructor({ id = 0, floating = false, size = 100 }) {\n    this.id = id\n    this.floating = floating\n    this.size = size\n  }\n}\n\nconst SplitContainer = (props) => {\n  const context = useContext(ThemeContext)\n\n  const distributeSplits = () => {\n    const count = props.children.length\n\n    // make a full length split if there is only one child\n    if (count <= 1)\n      return [\n        new Split({\n          id: 0,\n          floating: false,\n          size: 100\n        })\n      ]\n\n    // get all splits with default size values\n    const defaultSplits = props.children\n      .filter((e) => e.props.defaultsize)\n      .map(\n        (e, i) =>\n          new Split({\n            id: i,\n            floating: false,\n            size: e.props.defaultsize * 100.0\n          })\n      )\n\n    // if defaults are defined, take them into account\n    if (defaultSplits.length) {\n      const defaultSum = defaultSplits\n        .filter((s) => !s.floating)\n        .reduce((a, b) => a + b.size, 0)\n\n      // get default split sum\n      return props.children.map(\n        (e, i) =>\n          new Split({\n            id: i,\n            size: e.props.defaultsize\n              ? e.props.defaultsize * 100.0\n              : (100.0 - defaultSum) / (count - 1),\n            floating: false\n          })\n      )\n    } else {\n      return props.children.map(\n        (e, i) =>\n          new Split({\n            id: i,\n            floating: false,\n            size: 100.0 / count\n          })\n      )\n    }\n  }\n\n  const [split, setSplit] = useState(distributeSplits())\n  const [isEmpty, setEmpty] = useState(false)\n\n  const wrapperElement = useRef(null)\n\n  // if the split is set to auto, decide whether or not its vertical based on\n  // wrapper dimensions / aspect ratio\n  const [isVertical, setIsVertical] = useState(\n    props.vertical || !props.horizontal\n  )\n\n  const handleContainerResize = (e) => {\n    if (props.auto) {\n      const bounds = wrapperElement.current.getBoundingClientRect()\n      setIsVertical(bounds.width < bounds.height)\n    }\n  }\n\n  // TO DO this causes way too many redraws!\n  useResizeObserver(handleContainerResize, wrapperElement, [\n    props.auto,\n    isVertical\n  ])\n\n  const handlePanelResize = (e, i) => {\n    function handleMove(e) {\n      if (e.pageX) {\n        const pBounds = wrapperElement.current.getBoundingClientRect()\n\n        let s\n\n        if (isVertical) {\n          s = (e.pageY - pBounds.y) / pBounds.height\n        } else {\n          s = (e.pageX - pBounds.x) / pBounds.width\n        }\n\n        const splitSum =\n          i > 0\n            ? split\n                .slice(0, i)\n                .filter((s) => !s.floating)\n                .reduce((a, b) => a + b.size, 0)\n            : 0\n        split[i].size = s * 100 - splitSum\n\n        if (split[i].size > 100) split[i].size = 100\n        if (split[i].size < 0) split[i].size = 0\n\n        setSplit([...split])\n      }\n    }\n\n    function handleMoveEnd(e) {\n      if (e.touches && e.touches[0]) e = e.touches[0]\n\n      if (e.pageX) {\n        const pBounds = wrapperElement.current.getBoundingClientRect()\n\n        let s\n\n        if (isVertical) {\n          s = (e.pageY - pBounds.y) / pBounds.height\n        } else {\n          s = (e.pageX - pBounds.x) / pBounds.width\n        }\n\n        const splitSum =\n          i > 0\n            ? split\n                .slice(0, i)\n                .filter((s) => !s.floating)\n                .reduce((a, b) => a + b.size, 0)\n            : 0\n        split[i].size = s * 100 - splitSum\n\n        if (split[i].size > 100) split[i].size = 100\n        if (split[i].size < 0) split[i].size = 0\n\n        setSplit([...split])\n      }\n\n      document.removeEventListener('mousemove', handleMove)\n      document.removeEventListener('mouseup', handleMoveEnd)\n      document.removeEventListener('touchmove', handleMove)\n      document.removeEventListener('touchend', handleMoveEnd)\n    }\n\n    if (e.touches && e.touches[0]) e = e.touches[0]\n\n    document.addEventListener('mousemove', handleMove)\n    document.addEventListener('mouseup', handleMoveEnd)\n    document.addEventListener('touchmove', handleMove)\n    document.addEventListener('touchend', handleMoveEnd)\n  }\n\n  const handleDetach = (i, detachBool) => {\n    if (i === split.length) return\n    split[i].floating = detachBool\n    setSplit([...split])\n  }\n\n  useLayoutEffect(\n    (e) => {\n      setSplit(distributeSplits())\n    },\n    [props.children.length, props.updateFlag]\n  )\n\n  useEffect(\n    (e) => {\n      // if all empty\n      if (!split.filter((s) => !s.floating).length && !isEmpty) {\n        setEmpty(true)\n        if (props.onEmpty) props.onEmpty(true)\n      }\n\n      // if empty and a new split has been changed\n      if (isEmpty) {\n        setEmpty(false)\n        if (props.onEmpty) props.onEmpty(false)\n      }\n    },\n    [split]\n  )\n\n  const wrapperClass = classNames(styles.wrapper, {\n    [styles.vertical]: isVertical,\n    [styles.horizontal]: !isVertical,\n    [styles.empty]: isEmpty\n  })\n\n  return (\n    <div\n      className={wrapperClass}\n      ref={wrapperElement}\n      style={{\n        backgroundColor: context.tertiary_color\n      }}\n    >\n      {props.children &&\n        React.Children.map(props.children, (child, i) => {\n          const isSplit = child.type.name === 'SplitContainer'\n\n          // if there is only one panel, make it full width and height\n          if (props.children.length === 1)\n            return (\n              <div\n                style={isVertical ? { height: '100%' } : { width: '100%' }}\n                className={classNames({\n                  [styles.split_container]: isSplit,\n                  [styles.panel_container]: !isSplit\n                })}\n              >\n                {child}\n              </div>\n            )\n\n          let hasHandle = i < props.children.length - 1\n\n          let w\n          // for all panels up to the last\n          if (i < props.children.length - 1) {\n            w = split[i] ? split[i].size : 0\n            w = split[i].floating ? 0 : w\n            if (split[i].floating) hasHandle = false\n          } else {\n            // sum all splits and get the final panel width\n            // if last split is floating, remove handle\n            if (split[i] && split[i].floating) {\n              hasHandle = false\n              w = 0\n            } else {\n              w =\n                100 -\n                split\n                  .slice(0, -1)\n                  .filter((s) => !s.floating)\n                  .reduce((a, b) => a + b.size, 0)\n            }\n          }\n\n          if (split[i + 1] && split[i + 1].floating && i === split.length - 2) {\n            w =\n              100 -\n              split\n                .slice(0, i)\n                .filter((s) => !s.floating)\n                .reduce((a, b) => a + b.size, 0)\n          }\n\n          if (\n            split[i] &&\n            !split[i].floating &&\n            split.filter((s) => !s.floating).length === 1\n          ) {\n            w = 100\n            hasHandle = false\n          }\n\n          /* \n            attaches hook that watches for float\n            (hopefully this isn't a performance hit)\n          */\n          if (child.props.detachable) {\n            child = React.cloneElement(child, {\n              ...child.props,\n              onDetach: (b) => handleDetach(i, b)\n            })\n          }\n\n          /*\n            if the child is a split, and the split is empty, make it shrink\n          */\n          if (isSplit) {\n            child = React.cloneElement(child, {\n              ...child.props,\n              onEmpty: (b) => handleDetach(i, b)\n            })\n          }\n\n          return (\n            <React.Fragment>\n              <div\n                style={isVertical ? { height: w + '%' } : { width: w + '%' }}\n                className={classNames(styles.panel_content, {\n                  [styles.split_container]: isSplit,\n                  [styles.panel_container]: !isSplit,\n                  [styles.split_floating]: split[i] ? split[i].floating : false\n                })}\n              >\n                {/* {`w: ${w}`} */}\n                {child}\n              </div>\n              {hasHandle && (\n                <div\n                  className={classNames(styles.drag_container, {\n                    [styles.vertical]: isVertical,\n                    [styles.horizontal]: !isVertical\n                  })}\n                >\n                  <div\n                    className={classNames(styles.drag_handle_visible, {\n                      [styles.vertical]: isVertical,\n                      [styles.horizontal]: !isVertical\n                    })}\n                    style={{\n                      // backgroundColor: context.accent_color,\n                      borderColor: context.accent_color\n                    }}\n                    onTouchStart={(e) => handlePanelResize(e, i)}\n                    onMouseDown={(e) => handlePanelResize(e, i)}                    \n                  >\n                    <div\n                      className={classNames(styles.drag_handle, {\n                        [styles.vertical]: isVertical,\n                        [styles.horizontal]: !isVertical\n                      })}\n                      style={{\n                        // backgroundColor: context.accent_color,\n                        borderColor: context.outline_color\n                      }}\n                    />\n                  </div>\n                </div>\n              )}\n            </React.Fragment>\n          )\n        })}\n\n      {props.children.length === 0 && (\n        <p\n          style={{\n            alignSelf: 'center',\n            textAlign: 'center'\n          }}\n        >\n          <small>no panel in split!</small>\n        </p>\n      )}\n    </div>\n  )\n}\n\nSplitContainer.defaultProps = {\n  updateFlag: false\n}\n\n// the children can have a defaultsize prop\n\nSplitContainer.propTypes = {\n  children: PropTypes.any.isRequired,\n  horizontal: PropTypes.bool,\n  vertical: PropTypes.bool,\n  auto: PropTypes.bool, // used to automatically choose from horizontal or vertical\n  split: PropTypes.array,\n  updateFlag: PropTypes.bool\n}\n\nexport default SplitContainer\n","import React, { useContext, useRef } from 'react'\nimport classNames from 'classnames'\nimport styles from './LayoutContainer.module.css'\nimport ThemeContext from '../ThemeContext'\nimport { observer } from 'mobx-react'\n\nconst LayoutContainer = observer((props) => {\n  const context = useContext(ThemeContext)\n\n  let isVertical = props.layout.direction === 'VERTICAL'\n\n  let isEmpty = props.layout.isEmpty\n\n  const wrapper_element = useRef(null)\n\n  const handleResize = (e, layout) => {\n    function handleMove(e) {\n      if (e.touches) e = e.touches[0]\n\n      if (e.pageX) {\n        const bounds = wrapper_element.current.getBoundingClientRect()\n\n        let pos\n        if (isVertical) {\n          pos = (e.pageY - bounds.y) / bounds.height\n        } else {\n          pos = (e.pageX - bounds.x) / bounds.width\n        }\n\n        layout.adjust(pos)\n      }\n    }\n\n    function handleMoveEnd(e) {\n      if (e.touches && e.touches[0]) e = e.touches[0]\n\n      if (e.pageX) {\n        const bounds = wrapper_element.current.getBoundingClientRect()\n\n        let pos\n        if (isVertical) {\n          pos = (e.pageY - bounds.y) / bounds.height\n        } else {\n          pos = (e.pageX - bounds.x) / bounds.width\n        }\n\n        layout.adjust(pos)\n      }\n\n      document.removeEventListener('mousemove', handleMove)\n      document.removeEventListener('mouseup', handleMoveEnd)\n      document.removeEventListener('touchmove', handleMove)\n      document.removeEventListener('touchend', handleMoveEnd)\n    }\n\n    if (e.touches && e.touches[0]) e = e.touches[0]\n\n    document.addEventListener('mousemove', handleMove)\n    document.addEventListener('mouseup', handleMoveEnd)\n    document.addEventListener('touchmove', handleMove)\n    document.addEventListener('touchend', handleMoveEnd)\n  }\n\n  const handleContextMenu = (e, layout) => {\n    if (props.onContextMenu) props.onContextMenu(e, layout)\n  }\n\n  return (\n    <div\n      ref={wrapper_element}\n      style={{\n        backgroundColor: context.tertiary_color\n      }}\n      className={classNames(styles.wrapper, {\n        [styles.vertical]: isVertical,\n        [styles.horizontal]: !isVertical,\n        [styles.empty]: isEmpty\n      })}\n    >\n      {props.layout.children.map((sibling, i) => {\n        let siblings = props.layout.children\n        let hasHandle = i < props.layout.children.length - 1\n        let childIsLayout = sibling.children.length\n        let size = 0\n\n        let filterOutFloats = (s) => !s.panel || (s.panel && !s.panel.floating)\n        let filterOutEmptyLayouts = (s) => !s.isEmpty\n        let empty =\n          sibling.children.length &&\n          sibling.children.filter(filterOutFloats).length === 0\n\n        /*\n                    the benefit of applying the size calculations here\n                    is that floating panels will retain their width. \n                */\n        let isFloating = sibling.panel && sibling.panel.floating\n\n        // for all panels up to the last\n        if (i < siblings.length - 1) {\n          size = sibling ? sibling.size : 0\n\n          // if the next panel is floating, absorb it\n          if (siblings[i + 1].panel && siblings[i + 1].panel.floating) {\n            // while right sibling is floating... TODO: might still need to finish this\n            // let _i = i;\n            // while (siblings[_i + 1] && siblings[_i + 1].panel.floating) {\n            //     size += props.layout.children[_i + 1].size;\n            //     _i++;\n            // }\n            size += props.layout.children[i + 1].size\n            // removes handle (and fixes overflow issue)\n            if (i === siblings.length - 2) hasHandle = false\n          }\n\n          if (isFloating) {\n            hasHandle = false\n            size = 0\n          }\n        } else {\n          // sum all splits and get the final panel width\n          if (isFloating || empty) {\n            hasHandle = false\n            size = 0\n          } else {\n            size =\n              1 -\n              siblings\n                .slice(0, -1)\n                .filter(filterOutFloats)\n                .filter(filterOutEmptyLayouts)\n                .reduce((a, b) => a + b.size, 0)\n          }\n        }\n\n        if (\n          i < siblings.length - 1 &&\n          siblings[i + 1].floating &&\n          i === siblings.length - 2\n        ) {\n          size =\n            1 -\n            siblings\n              .slice(0, i)\n              .filter(filterOutFloats)\n              .filter(filterOutEmptyLayouts)\n              .reduce((a, b) => a + b.size, 0)\n        }\n\n        if (\n          sibling &&\n          !isFloating &&\n          !empty &&\n          siblings.filter(filterOutFloats).filter(filterOutEmptyLayouts)\n            .length === 1\n        ) {\n          size = 1\n          hasHandle = false\n        }\n\n        size *= 100\n\n        return (\n          <React.Fragment key={sibling.id}>\n            <div\n              style={\n                isVertical ? { height: size + '%' } : { width: size + '%' }\n              }\n              className={classNames(styles.panel_content, {\n                [styles.layout_container]: childIsLayout,\n                [styles.panel_container]: !childIsLayout,\n                [styles.float_container]: isFloating\n              })}\n            >\n              {/* <div className={styles.debug}>\n                                {size}\n                            </div> */}\n              {sibling.children.length ? (\n                <LayoutContainer layout={sibling}>\n                  {props.children}\n                </LayoutContainer>\n              ) : (\n                props.children.filter((child) => {\n                  if (child.props.panel) {\n                    return child.props.panel.id === sibling.id\n                  } else {\n                    return child.props.id === sibling.id\n                  }\n                })\n              )}\n            </div>\n            {hasHandle && (\n              <div\n                onContextMenu={handleContextMenu}\n                className={classNames(styles.drag_container, {\n                  [styles.vertical]: isVertical,\n                  [styles.horizontal]: !isVertical\n                })}\n              >\n                <div\n                  className={classNames(styles.drag_handle, {\n                    [styles.vertical]: isVertical,\n                    [styles.horizontal]: !isVertical\n                  })}\n                  style={{\n                    backgroundColor: context.accent_color,\n                    borderColor: context.primary_color\n                  }}\n                  onTouchStart={(e) => handleResize(e, sibling)}\n                  onMouseDown={(e) => handleResize(e, sibling)}\n                ></div>\n              </div>\n            )}\n          </React.Fragment>\n        )\n      })}\n    </div>\n  )\n})\n\nLayoutContainer.defaultProps = {\n  size: 100,\n  order: 0\n}\n\nLayoutContainer.propTypes = {}\n\nexport default LayoutContainer\n","import React, { useState, useContext } from 'react';\nimport styles from './PagesContainer.module.css';\nimport ThemeContext from '../ThemeContext';\n\nconst Pages = (props) => {\n\tconst [currentPage, setCurrentPage] = useState(0);\n\tconst context = useContext(ThemeContext);\n\n\tconst handlePreviousPage = () => {\n\t\tif (currentPage > 0)\n\t\t\tsetCurrentPage(currentPage-1);\n\t}\n\n\tconst handleNextPage = () => {\n\t\tif(currentPage + 1 < props.children.length)\n\t\t\tsetCurrentPage(currentPage+1);\n\t}\t\n\n\tconst buttonStyle = {\n\t\tbackgroundColor: context.secondary_color,\n\t\tcolor: context.text_color\n\t}\n\t\n\treturn(\n\t\t<div className={styles.wrapper} style={props.style}>\n\t\t\t<div className={styles.pagecontent}>\n\t\t\t\t{props.children[currentPage]}\n\t\t\t</div>\n\t\t\t<div className={styles.pagenav}>\n\t\t\t\t<button style={buttonStyle} onClick={handlePreviousPage}>{'<'}</button>\t\t\t\t\n\t\t\t\t<button style={buttonStyle} onClick={handleNextPage}>{'>'}</button>\t\t\t\t\n\t\t\t\t<span>{`${currentPage+1} of ${props.children.length}`}</span>\n\t\t\t</div>\n\t\t</div>\t\n\t)\n}\n\nexport default Pages;","import React, { useContext } from 'react';\nimport styles from './InputBool.module.css';\nimport ThemeContext from '../../ThemeContext';\nimport {observer} from 'mobx-react';\n\nconst InputBool = observer((props) => {    \n    const context = useContext(ThemeContext);\n    const updateValue = e => props.onChange(e.target.checked, e.target.value);\n\n    return (\n        <div \n            className={styles.wrapper}\n            style={{\n                ...props.style,\n                backgroundColor: props.focused ? context.accent_color : context.secondary_color,\n                flexFlow: props.hLabel && props.label ? 'row' : 'column'\n            }}\n        >\n            {props.label && (\n                <label\n                    style={{\n                        backgroundColor: props.focused ? context.accent_color : context.text_color,\n                        color: context.primary_color\n                    }}\n                >\n                    {props.label}:\n                </label>\n            )}\n            <div\n                className={styles.wrapper_inner}\n            >\n                <input \n                    style={props.style}\n                    type=\"checkbox\"         \n                    value={props.value}\n                    checked={props.checked}\n                    onChange={updateValue}\n                    onContextMenu={props.onContextMenu}\n                />\n            </div>                                                           \n        </div>\n    );\n});\n\nexport default InputBool;","import React, { useContext } from 'react';\nimport styles from './InputFloat.module.css';\nimport ThemeContext from '../../ThemeContext';\nimport {observer} from 'mobx-react';\nimport PropTypes from 'prop-types';\n\nlet position = [0, 0];\nlet base_value = 0;\n\n/*\n    ISSUES:\n\n        should be able to drag input outside of browser window\n        but the solution in js is not immediately obvious\n\n        there is a possible lead here:\n        https://stackoverflow.com/questions/1685326/responding-to-the-onmousemove-event-outside-of-the-browser-window-in-ie\n*/\n\nconst InputFloat = observer((props) => {\n    const context = useContext(ThemeContext);\n\n    const handleChange = e => props.onChange(Number(e.target.value));\n\n    const handleDragStart = e => {\n        let dragging = false;\n\n        function handleDrag(e) {\n            e.preventDefault();\n            dragging = true;\n            /*\n                conditional fixes issue where last frame of\n                drag results in a 'jump' in value, as pageY\n                is 0. \n            */\n            if (e.pageY) {\n                // fine control w shift / large control w ctrl\n                let scalar = e.ctrlKey ? 100 : e.shiftKey ? 20000 : 1000;\n\n                let x_offset = e.pageX - position[0];\n                let y_offset = (position[1] - e.pageY);\n\n                x_offset = Math.min(Math.max(x_offset, 1), 100);\n\n                let output_value = base_value + (y_offset * x_offset / scalar);\n\n                // factor in step size\n                if (props.step) {\n                    output_value /= props.step;\n                    output_value = Math.floor(output_value);\n                    output_value *= props.step;\n                }\n\n                props.onChange(output_value);\n            }\n        }\n\n        function handleDragEnd(e) {\n            if(dragging) {\n                // fine control w shift / large control w ctrl\n                let scalar = e.ctrlKey ? 100 : e.shiftKey ? 20000 : 1000;\n\n                let x_offset = e.pageX - position[0];\n                let y_offset = position[1] - e.pageY;\n\n                x_offset = Math.min(Math.max(x_offset, 1), 100);\n\n                let output_value = base_value + (y_offset * x_offset / scalar);\n\n                // factor in step size\n                if (props.step) {\n                    output_value /= props.step;\n                    output_value = Math.floor(output_value);\n                    output_value *= props.step;\n                }\n\n                props.onChange(output_value);\n            } \n\n            document.removeEventListener(\"mousemove\", handleDrag);\n            document.removeEventListener(\"mouseup\", handleDragEnd);\n            document.removeEventListener(\"touchmove\", handleDrag);\n            document.removeEventListener(\"touchend\", handleDragEnd);\n\n            dragging = false;\n        }\n\n        if (e.touches && e.touches[0]) e = e.touches[0]\n\n        position = [e.pageX, e.pageY];\n        base_value = props.value;\n\n        document.addEventListener(\"mousemove\", handleDrag);\n        document.addEventListener(\"mouseup\", handleDragEnd);\n        document.addEventListener(\"touchmove\", handleDrag);\n        document.addEventListener(\"touchend\", handleDragEnd);\n    }\n\n    const value = parseFloat(props.value).toFixed(2);\n\n    const defaultInputStyle = {\n        backgroundColor: context.secondary_color,\n        color: context.text_color\n    }\n\n    return (\n        <div \n            className={styles.wrapper}\n            style={{\n                ...props.style,\n                backgroundColor: props.focused ? context.accent_color : context.secondary_color,\n            }}\n        >\n            {props.label && (\n                <label\n                    style={{\n                        backgroundColor: props.focused ? context.accent_color : context.text_color,\n                        color: context.primary_color\n                    }}\n                >\n                    {props.label}:\n                </label>\n            )}\n            <div\n                className={styles.wrapper_inner}\n            >\n                <input                 \n                    type=\"number\" \n                    step={props.step}\n                    value={Number(value)}                    \n                    onChange={handleChange} \n                    \n                    onClick={props.onClick}\n                    onTouchStart={handleDragStart}\n\t\t\t\t\tonMouseDown={handleDragStart}\n                    onDoubleClick={props.onDoubleClick}      \n                    onContextMenu={props.onContextMenu}\n\n                    style={{                        \n                        ...defaultInputStyle,\n                        ...props.inputStyle,\n                    }}                  \n                />   \n            </div>                                                           \n        </div>\n    );\n});\n\nInputFloat.defaultProps = {\n    value: 0,\n    step: 0.1,\n    focused: false,\n}\n\nInputFloat.propTypes = {\n    label: PropTypes.string,\n    value: PropTypes.oneOfType([\n        PropTypes.number,\n        PropTypes.string\n    ]),\n    step: PropTypes.number,\n    focused: PropTypes.bool,\n    \n    onChange: PropTypes.func,\n    onDoubleClick: PropTypes.func,\n    inputStyle: PropTypes.object\n}\n\nexport default InputFloat;\n","import React, { useContext } from 'react';\nimport styles from './InputSelect.module.css';\nimport ThemeContext from '../../ThemeContext';\n\nconst InputSelect = (props) => {\n    const context = useContext(ThemeContext);\n\n    const handleChange = e => props.onChange(e.target.value);\n\n    return (\n        <div \n            className={styles.wrapper}\n            style={{\n                ...props.style,\n                backgroundColor: props.focused ? context.accent_color : context.secondary_color,\n            }}\n        >\n            {props.label && (\n                <label\n                    style={{\n                        backgroundColor: props.focused ? context.accent_color : context.text_color,\n                        color: context.primary_color\n                    }}\n                >\n                    {props.label}:\n                </label>\n            )}\n            <div\n                className={styles.wrapper_inner}\n            >\n                <select \n                    defaultValue={props.selectedOption} \n                    onChange={handleChange} \n                    onContextMenu={props.onContextMenu}\n                    style={{\n                        backgroundColor: context.secondary_color,\n                        color: context.text_color,\n                    }}\n                >\n                    {props.options.map((opt,i)=>(\n                        <option key={i} value={opt.value}>\n                            {opt.label}\n                        </option> \n                    ))}                   \n                </select>   \n            </div>                                             \n        </div>\n    );\n}\n\nexport default InputSelect;\n","import React, { useContext, useRef } from 'react';\nimport styles from './InputSlider.module.css';\nimport InputFloat from './InputFloat';\nimport ThemeContext from '../../ThemeContext';\nimport PropTypes from 'prop-types';\n\nlet slider_bounds = null;   \n\nconst InputSlider = (props) => {\n    const context = useContext(ThemeContext);\n\n    const slider_element = useRef(null);\n\n    const handleDragStart = e => {\n        function handleDrag(e) {\n            if (e.touches) e = e.touches[0]\n          /*\n              conditional fixes issue where last frame of\n              drag results in a 'jump' in value, as pageY\n              is 0. \n          */\n          if (e.pageY) {\n            let x = e.pageX + 2;\n            let position = (x - slider_bounds.x) / slider_bounds.width;\n\n            let value = (position * (props.max - props.min)) + props.min;\n\n            if (position <= 0.00) value = props.min\n            if (position >= 1.00) value = props.max\n\n            props.onChange(Math.floor(value / props.step) * props.step)\n          }\n        }\n\n        function handleDragEnd(e) {\n            if (e.touches && e.touches[0]) e = e.touches[0]\n\n            let x = e.pageX + 2;\n            let position = (x - slider_bounds.x) / slider_bounds.width;\n            let value = (position * (props.max - props.min)) + props.min;\n\n            if (position >= 0.00 && position <= 1.0) {\n                props.onChange(Math.floor(value / props.step) * props.step)\n            }\n\n            document.removeEventListener(\"mousemove\", handleDrag);\n            document.removeEventListener(\"mouseup\", handleDragEnd);\n            document.removeEventListener(\"touchmove\", handleDrag);\n            document.removeEventListener(\"touchend\", handleDragEnd);\n        }\n\n        if (e.touches && e.touches[0]) e = e.touches[0]\n\n        slider_bounds = slider_element.current.getBoundingClientRect();\n        let x = e.pageX + 2;\n        let position = (x - slider_bounds.x) / slider_bounds.width;\n\n        let value = (position * (props.max-props.min)) + props.min;\n        console.log([props.min,props.max])\n        console.log('position',position)\n        console.log('value',value)\n\n        if (position >= 0.00 && position <= 1.0) {\n            props.onChange(Math.floor(value / props.step) * props.step) // floor to step\n        }\n\n        document.addEventListener(\"mousemove\", handleDrag);\n        document.addEventListener(\"mouseup\", handleDragEnd);\n        document.addEventListener(\"touchmove\", handleDrag);\n        document.addEventListener(\"touchend\", handleDragEnd);\n    }\n\n    const handleFloatDrag = v => {\n        props.onChange(v)\n    }\n\n    return (\n        <div \n            className={styles.wrapper + ' ' + styles.horizontal}\n            style={props.style}\n            onContextMenu={props.onContextMenu}\n        >\n            <InputFloat \n                value={props.value}\n                onChange={handleFloatDrag}\n                step={props.step || 0.1}\n            />\n            <div \n                ref={slider_element}\t\t\t\n                className={styles.slider_track}    \n                onTouchStart={handleDragStart}\n                onMouseDown={handleDragStart}  \n                style={{\n                    backgroundColor: context.secondary_color\n                }}                        \n            >\n                <div \n                    className={styles.sleeve}\n                    style={{\n                        width: ((props.value-props.min)/(props.max-props.min)*100) + '%',\n                        backgroundColor: context.accent_color\n                    }}\n                >                        \n                </div>\n                <div\n                    className={styles.handle}\n                    style={{\n                        left: ((props.value-props.min)/(props.max-props.min)*100) + '%',\n                        backgroundColor: context.accent_color\n                    }}                    \n                ></div>                        \n            </div>                                               \n        </div>\n    );\n}\n\nInputSlider.propTypes = {\n    min: PropTypes.number,\n    max: PropTypes.number,\n    value: PropTypes.number,\n    style: PropTypes.object,\n}\n\nexport default InputSlider;","import React, { useContext } from 'react';\nimport styles from './InputColor.module.css';\nimport ThemeContext from '../../ThemeContext';\n\nconst InputColor = (props) => {\n    const context = useContext(ThemeContext);\n\n    const handleChange = (e) => props.onChange(e.target.value);\n\n    return (\n        <div \n            className={styles.wrapper}\n            style={{\n                ...props.style,\n                backgroundColor: props.focused ? context.accent_color : context.secondary_color,\n            }}\n        >\n            {props.label && (\n                <label\n                    style={{\n                        backgroundColor: props.focused ? context.accent_color : context.text_color,\n                        color: context.primary_color\n                    }}\n                >\n                    {props.label}:\n                </label>\n            )}\n            <div\n                className={styles.wrapper_inner}\n            >\n            \n                {props.showValue && (\n                    <input \n                        type=\"string\"\n                        className={styles.textInput}\n                        value={props.value}\n                        onChange={handleChange}\n                        style={{\n                            backgroundColor: context.text_color,\n                            color: context.secondary_color\n                        }}\n                    />                     \n                )}   \n\n                    <input \n                        type=\"color\"\n                        value={props.value}\n                        onChange={handleChange}\n                        onContextMenu={props.onContextMenu}\n                        style={{\n                            backgroundColor: context.secondary_color,\n                            color: context.secondary_color                        \n                        }}\n                    /> \n            </div>                                                    \n        </div>\n    );\n}\n\nexport default InputColor;","import { types } from \"mobx-state-tree\";\nimport tinykeys from \"tinykeys\";\nimport { observable } from \"mobx\";\n\nexport const ContextMenuItem = types\n  .model(\"ContextMenuItem\", {\n    id: types.identifier,\n    label: types.frozen(),\n    buttons: types.frozen(),\n    dropDown: types.map(types.late(() => ContextMenuItem))\n  })\n  .volatile(self => ({\n    onClick: () => {}\n  }));\n\nconst Context = types\n  .model(\"Context\", {})\n  .volatile(self => ({\n    contextmenu: {},\n    keylistener: tinykeys(window, {}),\n    keymap: null\n  }))\n  .actions(self => ({\n    setKeymap: keymap => {\n      if (self.keylistener) self.keylistener();\n\n      self.keymap = keymap;\n      self.keylistener = tinykeys(window, self.keymap);\n    },\n    removeKeymap: () => self.keylistener(),\n    setContextmenu: c => {\n      self.contextmenu = c;\n    }\n  }));\n\nexport default Context;","import { types, getParent } from \"mobx-state-tree\";\nimport Layout from './Layout';\n\nconst Panel = types\n    .model(\"Panel\", {\n        id: types.identifier,\n        component_type: \"\",\n        title: types.maybe(types.string),\n        subtitle: types.maybe(types.string),\n        showTitle: true,\n        floating: false,\n        fullscreen: false,\n        canFloat: false,\n        canRemove: false,\n        canFullscreen: false,\n        dimensions: types.array(types.number),\n        position: types.array(types.number),\n        layout: types.maybe(types.late(() => Layout))\n    })\n    .volatile(self => ({\n        parent_layout: null\n    }))\n    .actions(self => ({\n        setLayout: layout => {\n          self.layout = layout;\n        },\n\n        setFloating: f => {\n          self.floating = f;\n        },\n\n        toggleFloating: () => {\n          self.floating = !self.floating;\n        },\n\n        toggleFullscreen: () => {\n          self.fullscreen = !self.fullscreen;\n        },\n\n        setPosition: (p) => {\n          // TEMP: hack to keep away from title, use safe areas instead\n          if (p[1] < 24) p[1] = 24;\n\n          self.position = p;\n\n          // EXPERIMENT: Limit position to max bounds\n          if (p[0] + self.dimensions[0] > window.innerWidth) \n            self.position[0] = window.innerWidth - self.dimensions[0];\n          \n          if (p[1] + self.dimensions[1] > window.innerHeight)\n            self.position[1] = window.innerHeight - self.dimensions[1];\n        },\n\n        setDimensions: (d) => {\n          self.dimensions = d;\n\n          // EXPERIMENT: Limit position to max bounds\n          if (d[0] + self.position[0] > window.innerWidth)\n            self.dimensions[0] = window.innerWidth - self.position[0];\n\n          if (d[1] + self.position[1] > window.innerHeight)\n            self.dimensions[1] = window.innerHeight - self.position[1];\n        },\n\n        setFullscreen: (f) => {\n          self.fullscreen = f;\n        },\n\n        onRemove: () => {\n          self.parent_layout = getParent(self, 2); // ERROR HERE, cant remove\n          self.parent_layout.removePanel(self);\n        },\n\n        center: () => {\n          self.position[0] = window.innerWidth / 2 - self.dimensions[0] / 2;\n          self.position[1] = window.innerHeight / 2 - self.dimensions[1] / 2;\n        },\n\n        fitScreen: () => {\n          if (self.position[0] <= 0) self.position[0] = 0;\n\n          if (self.position[1] <= 0) self.position[1] = 0;\n\n          // if (self.dimensions[0] + self.position[0] >= window.innerWidth)\n          // self.dimensions[0] = window.innerWidth - self.position[0];\n\n          // if (self.dimensions[1] + self.position[1] >= window.innerHeight)\n          // self.dimensions[1] = window.innerHeight - self.position[1];\n        }\n    }))\n\nexport default Panel;","import {\n  types,\n  getParent,\n  getRoot\n} from \"mobx-state-tree\";\nimport Panel from \"./Panel\";\n\nconst Layout = types\n  .model(\"Layout\", {\n    id: types.identifier,\n    title: \"Layout\",\n    size: 0,\n    panel: types.maybe(types.safeReference(Panel)),\n    children: types.array(types.late(() => Layout)),\n    panels: types.maybe(types.map(Panel)),\n    direction: types.optional(\n      types.enumeration([\"VERTICAL\", \"HORIZONTAL\"]),\n      \"HORIZONTAL\"\n    )\n  })\n  .views(self => ({\n    get isEmpty() {\n      let result =\n        self.children.length &&\n        self.children.filter(\n          s => (!s.panel && !s.isEmpty) || (s.panel && !s.panel.floating)\n        ).length === 0;\n      return result;\n    }\n  }))\n  .volatile(self => ({\n    siblings: null,\n    rootStore: null\n  }))\n  .actions(self => ({\n\n    afterAttach: () => {\n      self.siblings = getParent(self);\n      self.rootStore = getRoot(self);\n    },\n\n    adjust: (size) => {\n      let self_index = self.siblings.indexOf(self);\n\n      let adjusted_size = size;\n\n      let sum =\n        self_index > 0 ?\n        self.siblings\n        .slice(0, self_index)\n        .filter(s => !s.floating)\n        .reduce((a, b) => a + b.size, 0) :\n        0;\n\n      adjusted_size = size - sum;\n\n      if (adjusted_size > 100) adjusted_size = 100;\n      if (adjusted_size < 0) adjusted_size = 0;\n\n      self.setSize(adjusted_size);\n    },\n\n    distributeChildren: () => {\n      self.children.forEach((e, i) => {\n        console.log(i, (i + 1) / self.children.length);\n        e.setSize(1 / self.children.length);\n      });\n    },\n\n    setSize: (size) => {\n      self.size = size;\n    },\n\n    addPanel: (panel) => {\n      // if panel is a string, look it up from list of defaults\n      if (typeof panel === \"string\" && self.rootStore.panelVariants[panel]) {\n        panel = self.rootStore.panelVariants[panel];\n      }\n\n      let layout = Layout.create({\n        id: panel.id,\n        panel: panel.id,\n        size: 1 / self.children.length\n      });\n\n      self.panels.put(panel);\n      self.children.push(layout);\n\n      //       console.log(\"self\", self);\n\n      //       self.distributeChildren();\n    },\n\n    removePanel: (panel) => {\n      if (self.panels) self.panels.delete(panel);\n      if (self.children) {\n        self.children = self.children.filter(e => e.panel !== panel);\n\n        self.children.forEach(e => {\n          e.removePanel(panel);\n        });\n\n        // console.log(\"SELF\", getSnapshot(self));\n\n        // TODO: if all panels are gone, remove this layout\n        // if(!self.children.length) {\n        //     console.log(getParent(self,1))\n        //     let parent = getParent(self, 1);\n        //     parent.children.filter(e => e !== self)\n        // }\n      }\n    },\n\n    clear: () => {\n      if (self.panels && self.children) {\n        self.panels.clear();\n        self.children = [];\n      }\n    },\n\n    // removeLayout: (layout) => {\n    //     if(self.children) self.children.filter(e => e !== layout);\n    // }\n\n  }))\n\nexport default Layout;\n","import { types } from \"mobx-state-tree\";\nimport Context from \"./Context\";\n\nimport Panel from \"./Panel\";\nimport Theme from \"./Theme\";\n\nconst UI = types\n    .model('UI', {\n        panels: types.map(Panel),\n        theme: Theme,\n        context: types.maybe(Context)\n    })\n    .volatile(self => ({\n        panelVariants: null,\n        layoutVariants: null\n    }))\n    .actions(self => ({\n        afterAttach: () => {\n            self.context = Context.create()\n        },\n\n        setPanelVariants: panels => {\n            self.panelVariants = panels;\n        },\n\n        setLayoutVariants: layouts => {\n            self.layoutVariants = layouts;\n        },\n\n        getPanelVariant: id => {\n            return self.panelVariants[id];\n        },\n\n        getLayoutVariant: id => {\n            if (self.layoutVariants[id]) {\n                return self.layoutVariants[id]\n            }else{\n                if(self.panelVariants) {\n                    console.error(`variant (${id}) could not be found. should be one of the following: (${Object.keys(self.panelVariants)})`)\n                } else {\n                    console.error(`no variants found!`)\n                }\n                    \n            }\n                \n            return;\n        },\n\n        getPanel: id => {\n            return self.panels.get(id);\n        }\n    }))\n\nexport default UI;","import _MacoWrapperComponent from './components/MacoWrapperComponent';\n\nimport _PanelComponent from './components/PanelComponent';\nimport { GenericPanel as _GenericPanel} from './components/PanelComponent';\nimport _TextComponent from './components/TextComponent';\nimport _ToolbarComponent from './components/ToolbarComponent';\nimport _ContextMenuComponent from './components/ContextMenuComponent';\nimport _ControlGroupComponent from './components/ControlGroupComponent';\nimport _SplitContainer from './components/SplitContainer';\nimport _LayoutContainer from './components/LayoutContainer';\nimport _PagesContainer from './components/PagesContainer';\n\nimport _InputBool from './components/input/InputBool';\nimport _InputFloat from './components/input/InputFloat';\nimport _InputSelect from './components/input/InputSelect';\nimport _InputSlider from './components/input/InputSlider';\nimport _InputColor from './components/input/InputColor';\n\nimport _ThemeContext from './ThemeContext';\n\n// STORES\nimport _ContextStore from './stores/Context';\nimport _LayoutStore from './stores/Layout';\nimport _PanelStore from './stores/Panel';\nimport _ThemeStore, { themes } from './stores/Theme';\nimport _UIStore from './stores/UI';\n\nexport let MacoWrapperComponent = _MacoWrapperComponent;\n\nexport let TextComponent = _TextComponent;\nexport let PanelComponent = _PanelComponent;\nexport let GenericPanel = _GenericPanel;\nexport let ToolbarComponent = _ToolbarComponent;\nexport let ContextMenuComponent = _ContextMenuComponent;\nexport let ControlGroupComponent = _ControlGroupComponent;\nexport let SplitContainer = _SplitContainer;\nexport let LayoutContainer = _LayoutContainer;\nexport let PagesContainer = _PagesContainer;\n\nexport let InputBool = _InputBool;\nexport let InputFloat = _InputFloat;\nexport let InputSelect = _InputSelect;\nexport let InputSlider = _InputSlider;\nexport let InputColor = _InputColor;\n\nexport let ThemeContext = _ThemeContext;\nexport let ThemeStore = _ThemeStore;\nexport let Themes = themes;\n\n// STORES\nexport let ContextStore = _ContextStore;\nexport let LayoutStore = _LayoutStore;\nexport let PanelStore = _PanelStore;\nexport let UIStore = _UIStore; // main store output\n"],"names":["themes","primary_color","secondary_color","tertiary_color","text_color","outline_color","accent_color","Theme","types","model","weyland","actions","self","setTheme","theme","setPrimaryColor","color","setSecondaryColor","setTertiaryColor","setTextColor","setOutlineColor","setAccentColor","ThemeContext","createContext","style","drawer","width","top","left","DropDown","observer","props","context","useContext","mainRef","useRef","useState","activeItem","setActiveItem","subDropDownOpen","setSubDropDownOpen","subDropDownId","setSubDropDownId","subDropDownPosition","setSubDropDownPosition","handleSubDropDown","e","index","item","onClick","toggle","bounds","currentTarget","getBoundingClientRect","id","openUp","height","bottom","openLeft","handleClickAway","current","contains","target","handleRef","onRef","handleContextMenu","useLayoutEffect","document","addEventListener","removeEventListener","open","position","React","classNames","styles","backgroundColor","items","Object","keys","map","k","i","dropDown","subDropDown","activeButton","label","disableHover","display","title","buttons","b","border","borderTop","borderBottom","borderLeftStyle","borderRightStyle","flexShrink","padding","defaultProps","propTypes","Toolbar","dropDownOpen","setDropDownOpen","dropDownId","setDropDownId","dropDownPosition","setDropDownPosition","setOpenUp","handleWheel","offset","Math","sign","deltaY","scroll","scrollLeft","at_start","at_end","offsetWidth","scrollWidth","useEffect","y","window","innerHeight","toolbar","borderColor","button","highlight","parent_bounds","_openUp","x","itemDecoration","DropDownComponent","ContextMenu","dropRef","dropDownOpenLeft","setDropDownOpenLeft","dropDownOpenUp","setDropDownOpenUp","handleClick","preventDefault","pageX","pageY","innerWidth","MacoWrapper","store","ui","setContextmenu","contextmenu","wrapper","ToolbarComponent","titlebar","ContextMenuComponent","children","Tooltip","show","setShow","setPosition","handleToggle","tooltip","tooltip_symbol","tooltip_content","content","Panel","wrapper_element","expanded","setExpanded","focused","setFocused","hover","setHover","handleResize","axis","handleMove","touches","p_bounds","w","h","onDimensionsChange","dimensions","handleMoveEnd","handleMoveStart","dragOff","onPositionChange","handleCenter","handleFullscreen","fullscreen","onFullscreen","onFloat","handleFloat","floating","handleFocus","onFocus","handleBlur","blur","onBlur","main_styling","hasTitle","showTitle","onRemove","collapsible","dblClickTitle","canFullscreen","canFloat","panel","collapsed","margin","gutters","gutterSize","zIndex","onContextMenu","onMouseEnter","onMouseLeave","onMouseOver","onMouseOut","title_bar","titleStyle","fontSize","canRemove","dragContainer","moveHandle","subtitle","indicators","indicator","flexBasis","panel_content","horizontal","vertical","footbar","resizeHandle","resizeSE","resizeE","resizeS","PropTypes","func","object","any","oneOfType","string","array","bool","number","GenericPanel","defaultWidth","onContextMenuCapture","setFloating","setDimensions","setFullscreen","Text","text","ControlGroup","name","Children","child","input_width","length","isValidElement","cloneElement","useObserver","callback","element","dependencies","observe","unobserve","resizeObserverOrPolyfill","ResizeObserver","Split","size","SplitContainer","distributeSplits","count","defaultSplits","filter","defaultsize","defaultSum","s","reduce","a","split","setSplit","isEmpty","setEmpty","wrapperElement","isVertical","setIsVertical","handleContainerResize","auto","useResizeObserver","handlePanelResize","pBounds","splitSum","slice","handleDetach","detachBool","updateFlag","onEmpty","wrapperClass","empty","isSplit","type","split_container","panel_container","hasHandle","detachable","onDetach","split_floating","drag_container","drag_handle_visible","drag_handle","alignSelf","textAlign","isRequired","LayoutContainer","layout","direction","pos","adjust","sibling","siblings","childIsLayout","filterOutFloats","filterOutEmptyLayouts","isFloating","layout_container","float_container","order","Pages","currentPage","setCurrentPage","handlePreviousPage","handleNextPage","buttonStyle","pagecontent","pagenav","InputBool","updateValue","onChange","checked","value","flexFlow","hLabel","wrapper_inner","base_value","InputFloat","handleChange","Number","handleDragStart","dragging","handleDrag","scalar","ctrlKey","shiftKey","x_offset","y_offset","min","max","output_value","step","floor","handleDragEnd","parseFloat","toFixed","defaultInputStyle","onDoubleClick","inputStyle","InputSelect","selectedOption","options","opt","slider_bounds","InputSlider","slider_element","console","log","handleFloatDrag","v","slider_track","sleeve","handle","InputColor","showValue","textInput","ContextMenuItem","identifier","frozen","late","Context","keylistener","tinykeys","keymap","setKeymap","removeKeymap","c","component_type","maybe","Layout","parent_layout","setLayout","f","toggleFloating","toggleFullscreen","p","d","getParent","removePanel","center","fitScreen","safeReference","panels","optional","enumeration","views","result","rootStore","afterAttach","getRoot","self_index","indexOf","adjusted_size","sum","setSize","distributeChildren","forEach","addPanel","panelVariants","create","put","push","clear","UI","layoutVariants","setPanelVariants","setLayoutVariants","layouts","getPanelVariant","getLayoutVariant","error","getPanel","get","MacoWrapperComponent","_MacoWrapperComponent","TextComponent","_TextComponent","PanelComponent","_PanelComponent","_GenericPanel","_ToolbarComponent","_ContextMenuComponent","ControlGroupComponent","_ControlGroupComponent","_SplitContainer","_LayoutContainer","PagesContainer","_PagesContainer","_InputBool","_InputFloat","_InputSelect","_InputSlider","_InputColor","_ThemeContext","ThemeStore","_ThemeStore","Themes","ContextStore","_ContextStore","LayoutStore","_LayoutStore","PanelStore","_PanelStore","UIStore","_UIStore"],"mappings":"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"}