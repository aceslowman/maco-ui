{"version":3,"file":"index.modern.js","sources":["../src/stores/Theme.js","../src/ThemeContext.js","../src/components/DropDownComponent.js","../src/components/ToolbarComponent.js","../src/components/ContextMenuComponent.js","../src/components/MacoWrapperComponent.js","../src/components/PanelComponent.js","../src/components/TextComponent.js","../src/components/ControlGroupComponent.js","../src/components/hooks/ResizeHook.js","../src/components/SplitContainer.js","../src/components/LayoutContainer.js","../src/components/PagesContainer.js","../src/components/input/InputBool.js","../src/components/input/InputFloat.js","../src/components/input/InputSelect.js","../src/components/input/InputSlider.js","../src/components/input/InputColor.js","../src/stores/Context.js","../src/stores/Panel.js","../src/stores/Layout.js","../src/stores/UI.js","../src/index.js"],"sourcesContent":["import { types } from \"mobx-state-tree\";\n\nexport const themes = {\n  'weyland': { // light\n    primary_color: '#ffffff',\n    secondary_color: '#C2C2C2',\n    tertiary_color: '#e0e0e0',\n    text_color: '#000000',\n    outline_color: '#aaaaaa',\n    accent_color: '#3fa3a3'\n  },\n  'yutani': { // dark\n    primary_color: '#000000',\n    secondary_color: '#202020',\n    tertiary_color: '#303030',\n    text_color: '#ffffff',\n    outline_color: '#474747',\n    accent_color: '#3fa3a3'\n  },\n  'powershell': { // blue\n    primary_color: '#012456',\n    secondary_color: '#304E78',\n    tertiary_color: '#233767',\n    text_color: '#ffffff',\n    outline_color: '#51578B',\n    accent_color: '#ffff00'\n  },\n  'sarah': {\n    primary_color: '#0D5439',\n    secondary_color: '#9D6C71',\n    tertiary_color: '#5b6b5c',\n    text_color: '#C9A6A6',\n    outline_color: '#aaaaaa',\n    accent_color: '#D3945A'\n  },\n};\n\nconst Theme = types\n    .model(\"Theme\", {\n        ...themes.weyland\n    })\n    .actions(self => ({\n      setTheme: (theme) => {\n        self.primary_color = theme.primary_color;\n        self.secondary_color = theme.secondary_color;\n        self.tertiary_color = theme.tertiary_color;\n        self.text_color = theme.text_color;\n        self.outline_color = theme.outline_color;\n        self.accent_color = theme.accent_color;\n      },\n      setPrimaryColor: color => self.primary_color = color,\n      setSecondaryColor: color => self.secondary_color = color,\n      setTertiaryColor: color => self.tertiary_color = color,\n      setTextColor: color => self.text_color = color,\n      setOutlineColor: color => self.outline_color = color,\n      setAccentColor: color => self.accent_color = color\n    }))\n\nexport default Theme;","import { createContext } from 'react';\n\nimport { themes } from \"./stores/Theme\";\n\nconst ThemeContext = createContext(themes.weyland)\n\nexport default ThemeContext","import React, { useState, useContext, useRef, useLayoutEffect, useEffect } from 'react';\nimport ThemeContext from '../ThemeContext';\nimport styles from './DropDownComponent.module.css';\nimport classNames from 'classnames';\nimport {observer} from 'mobx-react';\n\nlet style = {\n    drawer: {\n        width: \"0px\",\n        top: \"0px\",\n        left: \"0px\",\n    }\n}\n\nconst DropDown = observer((props) => {\n    const context = useContext(ThemeContext);\n    let mainRef = useRef(null);\n\n    const [activeItem, setActiveItem] = useState(null);\n    const [subDropDownOpen, setSubDropDownOpen] = useState(false);\n    const [subDropDownId, setSubDropDownId] = useState(null);\n    const [subDropDownPosition, setSubDropDownPosition] = useState({top:0,left:0});\n\n    const handleSubDropDown = (e, index, item) => {\n        if(item.onClick) item.onClick();\n        let toggle = index === activeItem ? !subDropDownOpen : true;\n\n        let bounds = e.currentTarget.getBoundingClientRect();\n\n        setActiveItem(toggle ? index : false);\n        setSubDropDownId(item.id)\n        setSubDropDownOpen(toggle);\n        setSubDropDownPosition({\n            top: !props.openUp ? -bounds.height : 'auto',\n            bottom: props.openUp ? 0 : 'auto', \n            left: props.openLeft ? -bounds.width : bounds.width\n        });\n    }\n\n    const handleClickAway = e => {\n        if (mainRef.current && !mainRef.current.contains(e.target)) {\n            setActiveItem(null);\n            setSubDropDownOpen(false);\n        }\n    }\n\n    function handleRef(e) {\n        mainRef.current = e;\n        if(props.onRef) props.onRef(mainRef)\n    }\n\n    function handleContextMenu(e) {\n        setSubDropDownOpen(false);\n    }\n\n    useLayoutEffect(() => {\n      document.addEventListener('click', (e) => handleClickAway(e));\n      document.addEventListener('contextmenu', (e) => handleContextMenu(e));\n\n      return () => {\n        document.removeEventListener('click', (e) => handleClickAway(e));\n        document.addEventListener('contextmenu', (e) => handleContextMenu(e));\n      }\n    }, []);\n\n    style = {\n      ...style,\n      drawer: {\n        width: props.open ? '150px' : '0px',\n        ...props.position\n      }\n    };\n\n    return(\n        <div \n            className = {\n              classNames(\n                styles.drawer, {\n                //   [styles.openLeft]: props.openLeft,\n                //   [styles.openUp]: props.openUp,\n                }\n              )\n            }\n            ref={(e)=>handleRef(e)}\n            style={{\n                ...style.drawer,\n                backgroundColor: context.secondary_color,\n                color: context.text_color\n            }}            \n        >\t\t\t\n            {props.items && Object.keys(props.items).map((k,i)=>{ \n                let item = props.items[k];\n\n                // if there is a subdropdown               \n                if(item.dropDown) {         \n                    return (\n                        <div \n                            key={item.id}\n                            className={styles.subDropDown}\n                            style = {\n                              {\n                                ...style.drawer,\n                                backgroundColor: context.secondary_color,\n                                color: context.text_color\n                              }\n                            }\n                        >\n                            <button\n                                key={'sub'+item.id}                                \n                                onClick={e=>handleSubDropDown(e,i,item)}\n                                className={\n                                    classNames(\n                                        {\n                                            [styles.activeButton]: i === activeItem,\n                                            [styles.openLeft]: props.openLeft,\n                                            [styles.openUp]: props.openUp,\n                                        }\n                                    )\n                                }\n                            >                                \n                                {item.label}      \n                                <span>{props.openLeft ? '<' : '>'}</span>\n                            </button>\n                            \n\n                            {/* \n                                this extra div helps ensure nested \n                                dropdowns are visible through hidden\n                                overflow\n                             */}\n                            {(i === activeItem && subDropDownId) && (\n                                <div key={item.id} style={{position:'fixed'}}>\n                                    <DropDown \n                                        key={item.id+'dd'}\n                                        open={props.open && subDropDownOpen}                                    \n                                        items={{...props.items[subDropDownId].dropDown}}\n                                        position={subDropDownPosition}       \n                                        openLeft={props.openLeft}   \n                                        openUp={props.openUp}                          \n                                    />\n                                </div>\n                            )}\n                        </div>                            \n                    )\n                }else{\n                    return (\n                        <div \n                            key={item.id}\n                            className = {\n                              classNames({\n                                [styles.activeButton]: i === activeItem,\n                                [styles.disableHover]: item.disableHover,\n                                [styles.openLeft]: props.openLeft,\n                                [styles.openUp]: props.openUp,\n                              })\n                            }\n                            style={{\n                                display:'flex',\n                                width:'100%'\n                            }}\n                        >\n                            <button\n                                key={'normal'+item.id}   \n                                title={item.title}                                            \n                                onClick={item.onClick}\n                            >\n                                {item.label}                                 \n                            </button>\n                            {item.buttons && Object.keys(item.buttons).map((k) => {\n                                let b = item.buttons[k];\n                                return (\n                                    <button\n                                        key={'button'+b.id}\n                                        onClick={b.onClick} \n                                        title={b.title}             \n                                        style={{\n                                            border: `1px solid ${context.outline_color}`,\n                                            borderTop: 'none',\n                                            borderBottom: 'none',\n                                            borderLeftStyle: !props.openLeft ? 'solid' : 'none',\n                                            borderRightStyle: props.openLeft ? 'solid' : 'none',\n                                            flexShrink: 10,\n                                            padding: 3\n                                        }}\n                                    ><small>{b.label}</small></button>\n                                )\n                            })}\n                        </div>                        \n                    )\n                }\n            })}\n        </div>\n    )\n})\n\nDropDown.defaultProps = {\n  openLeft: false,\n  openUp: false\n}\n\nDropDown.propTypes = {\n\n}\n\nexport default DropDown;","import React, { useState, useContext, useRef, useEffect } from 'react';\nimport styles from './ToolbarComponent.module.css';\nimport ThemeContext from '../ThemeContext';\nimport DropDownComponent from './DropDownComponent';\nimport classNames from 'classnames';\nimport {observer} from 'mobx-react';\n\nconst Toolbar = observer((props) => {\n    const context = useContext(ThemeContext);\n    const mainRef = useRef(null); \n\n    const [activeItem, setActiveItem] = useState(null);\n    const [dropDownOpen, setDropDownOpen] = useState(false);\n    const [dropDownId, setDropDownId] = useState(null);\n    const [dropDownPosition, setDropDownPosition] = useState({top:0,left:0});\n    const [openUp, setOpenUp] = useState(false);\n\n    const handleClickAway = (e) => {\n      if (mainRef.current && !mainRef.current.contains(e.target)) {\n        setActiveItem(null);\n        setDropDownOpen(false);\n      }\n    }\n\n    const handleWheel = (e) => {\n        let offset = (Math.sign(e.deltaY) * 5)\n        mainRef.current.scroll(mainRef.current.scrollLeft + offset, 0);\n            \n        let at_start = mainRef.current.scrollLeft === 0;\n        let at_end = mainRef.current.offsetWidth + mainRef.current.scrollLeft >= mainRef.current.scrollWidth;\n        \n        if(!at_start && !at_end && dropDownOpen) {            \n            setDropDownPosition({\n              top: dropDownPosition.top,\n              left: dropDownPosition.left - offset\n            });\n        }\n    }\n\n    useEffect(()=>{\n        document.addEventListener('click', (e) => handleClickAway(e));\n\n        let bounds = mainRef.current.getBoundingClientRect();\n        setOpenUp(bounds.y > (window.innerHeight - (window.innerHeight / 3)))\n\n        return (document.removeEventListener('click', (e) => handleClickAway(e)));\n    }, []);\n\n    return (\n        <div \n            className={styles.toolbar}\n            ref={mainRef}\n            style = {{\n                ...props.style,\n                backgroundColor: context.secondary_color || 'black',\n                color: context.text_color || 'white',\n            }}\n            onWheel={handleWheel}\n        >\n            {props.items && Object.keys(props.items).map((k,i)=>{\n                let item = props.items[k];\n                return (\n                    <button\n                        key={item.id}\n                        title={item.title}\n                        style={{\n                            ...item.style,\n                            borderColor: context.text_color\n                        }}\n                        className = {\n                          classNames(styles.button, {\n                            [styles.activeButton]: (item === activeItem) || (item.highlight),\n                            // [styles.disableHover]: (item.onClick === undefined) && !item.dropDown\n                            [styles.disableHover]: item.disableHover\n                          })\n                        }\n                        onClick={(e)=>{\n                            if(item.dropDown) {\n                                let toggle = item === activeItem ? !dropDownOpen : true;\n\n                                let parent_bounds = mainRef.current.getBoundingClientRect();\n                                let bounds = e.currentTarget.getBoundingClientRect();\n\n                                let _openUp = bounds.y > (window.innerHeight - (window.innerHeight / 3));\n                                setActiveItem(toggle ? item : null);\n                                setOpenUp(_openUp)\n                                setDropDownOpen(toggle);\n\n                                // this id is important so that the dropdowns to received DERIVED STATE!\n                                setDropDownId(item.id);\n                                setDropDownPosition({\n                                  top: !openUp ? bounds.height : 'auto',\n                                  bottom: openUp ? 0 : 'auto',\n                                  left: bounds.left - parent_bounds.x\n                                });\n                            }\n                            \n                            if(item.onClick) item.onClick();\n                        }}\n                    >\n                        {item.label}   \n                        {item.dropDown && (\n                            <span className={styles.itemDecoration}>\n                                {openUp ? '▲' : '▼'}\n                            </span>\n                        )}                         \n                    </button>\n                )\n            })}\n\n            <div style={{position:'fixed'}}>\n                {props.items[dropDownId] && (<DropDownComponent \n                    open={dropDownOpen}                                    \n                    items={{...props.items[dropDownId].dropDown}}\n                    position={dropDownPosition}\n                    openUp={openUp}\n                />)}\n            </div>\n            \n        </div>  \n    );\n});\n\nexport default Toolbar;","import React, { useState, useRef, useLayoutEffect } from 'react';\nimport DropDownComponent from './DropDownComponent';\nimport {observer} from 'mobx-react';\n\nconst ContextMenu = observer((props) => {\n    const mainRef = useRef(null);\n    let dropRef = useRef(null);\n\n    const [dropDownOpen, setDropDownOpen] = useState(false);\n    const [dropDownPosition, setDropDownPosition] = useState({top:0,left:0});\n    const [dropDownOpenLeft, setDropDownOpenLeft] = useState(false);\n    const [dropDownOpenUp, setDropDownOpenUp] = useState(false);\n\n    const handleClickAway = (e) => {\n        if (mainRef.current && !mainRef.current.contains(e.target)) {\n            setDropDownOpen(false);\n        }\n    }\n\n    const handleClick = (e) => {\n        e.preventDefault();\n\n        // keep open with right click.\n        setDropDownOpen(true);\n\n        // adjust to keep menu in frame\n        let x = e.pageX;\n        let y = e.pageY;\n\n        // 150 is the menu width, this shouldn't be hardcoded\n        // but it's not in bounding box when first clicked\n        if (e.pageX + 150 > window.innerWidth)\n            x -= 150\n        \n        let _openUp = y > (window.innerHeight - (window.innerHeight / 3));\n\n        setDropDownOpenUp(_openUp);\n        setDropDownOpenLeft(e.pageX > window.innerWidth / 2);\n        setDropDownPosition({\n            top: !_openUp ? y : 'auto',\n            bottom: _openUp ? (window.innerHeight - y) : 'auto',            \n            left:x\n        });\n         \n        return false;\n    }\n\n    const handleRef = (e) => {\n        dropRef = e;\n    }\n\n    useLayoutEffect(()=>{\n        document.addEventListener('click', (e) => handleClickAway(e), true);\n        document.addEventListener('contextmenu', (e) => handleClick(e), true);\n\n        return () => {\n            document.removeEventListener('click', (e) => handleClickAway(e), true);\n            document.removeEventListener('contextmenu', (e) => handleClick(e), true);\n        };\n    }, []);\n\n    return (\n        <div ref={mainRef}>\n            {/* <div style={{\n                position: 'absolute',\n                top: dropDownPosition.top,\n                left: dropDownPosition.left,\n                fontSize: '2em',\n                zIndex: 10000\n            }}>\n                ⌖\n            </div> */}\n            <DropDownComponent \n                open={dropDownOpen}                                    \n                items={props.items}\n                position={dropDownPosition}\n                onRef={handleRef}\n                openLeft={dropDownOpenLeft}\n                openUp={dropDownOpenUp}\n            />\n        </div>\n    );\n})\n\nexport default ContextMenu;","import React, { useState, useContext, useRef, useLayoutEffect } from 'react';\nimport styles from './MacoWrapperComponent.module.css';\nimport ThemeContext from '../ThemeContext';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport {observer} from 'mobx-react';\nimport ToolbarComponent from './ToolbarComponent';\nimport ContextMenuComponent from './ContextMenuComponent';\n\nconst MacoWrapper = observer((props) => {\n\tconst store = props.store;\n\n\tconst handleContextMenu = () => {\n\t  // prevents context menu anywhere that hasn't been\n\t  // explicitly allowed\n\t  store.ui.context.setContextmenu(props.contextmenu);\n\t};\n\n\treturn (\n\t\t<div className={styles.wrapper}>\n\t\t\t<ThemeContext.Provider value={store.ui.theme}>\n\t\t\t\t<ToolbarComponent items={props.titlebar} />\n\t\t\t\t<ContextMenuComponent items={store.ui.context.contextmenu} />\n\n\t\t\t\t<div \n\t\t\t\t\tstyle={{\n\t\t\t\t\t\twidth:'100%',\n\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\tbackgroundColor: store.ui.theme.tertiary_color\n\t\t\t\t\t}}\n\t\t\t\t\tonContextMenu={() => handleContextMenu()}\n\t\t\t\t></div>\n\n\t\t\t\t{props.children}\n\t\t\t</ThemeContext.Provider>\n\t\t</div>\n\t);\n});\n\nMacoWrapper.defaultProps = {\n\tcontextmenu: {},\n\ttitlebar: {}\n}\n\nexport default MacoWrapper;","import React, { useState, useContext, useRef, useLayoutEffect } from 'react';\nimport styles from './PanelComponent.module.css';\nimport ThemeContext from '../ThemeContext';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport {observer} from 'mobx-react';\n\nconst Tooltip = observer((props) => {\n\tconst context = useContext(ThemeContext);\n\tconst [show, setShow] = useState(false);\n\tconst [position, setPosition] = useState([0,0,0,0]);\n\n\tconst handleToggle = (e) => {\t\t\n\t\tlet x = e.pageX;\n\t\tlet y = e.pageY;\n\n\t\tif(x > (window.innerWidth-150))\t\n\t\t\tx = e.pageX - 150;\t\t\n\n\t\tif(y > (window.innerHeight-150))\n\t\t\ty = e.pageY - 150;\t\t\n\n\t\tsetPosition([x, y]);\n\t\tsetShow(!show);\n\t}\n\n\treturn (\n\t\t<div \n\t\t\tclassName={styles.tooltip}\t\t\t\n\t\t>\n\t\t\t<div \n\t\t\t\tclassName={styles.tooltip_symbol}\n\t\t\t\tonClick={(e)=>handleToggle(e)}\n\t\t\t>ℹ</div>\n\t\t\t<div \n\t\t\t\tclassName={styles.tooltip_content}\n\t\t\t\tstyle={{\n\t\t\t\t\tbackgroundColor: context.primary_color,\n\t\t\t\t\tborder: `1px solid ${context.outline_color}`,\t\t\t\t\t\n\t\t\t\t\tdisplay: show ? 'block' : 'none',\n\t\t\t\t\tleft: position[0],\n\t\t\t\t\ttop: position[1]\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{props.content}\n\t\t\t</div>\n\t\t</div>\n\t)\n})\n\nconst Panel = observer((props) => {\n\tconst context = useContext(ThemeContext);\n\n\tconst wrapper_element = useRef(null);\n\n\tconst [expanded, setExpanded] \t  = useState(props.expanded);\n\tconst [focused, setFocused] \t  = useState(props.focused);\n\tconst [hover, setHover]\t\t\t  = useState(false);\n\n\tconst handleResize = (e, axis = 'xy') => {\n\n\t\tfunction handleMove(e) {\n\t\t\tif (e.touches) e = e.touches[0]\n\n\t\t\tif (e.pageY) {\n\t\t\t\tconst p_bounds = wrapper_element.current.getBoundingClientRect();\n\n\t\t\t\tconst w = e.pageX - p_bounds.x + 10;\n\t\t\t\tconst h = e.pageY - p_bounds.y + 10;\n\n\t\t\t\tswitch (axis) {\n\t\t\t\t\tcase 'xy':\n\t\t\t\t\t\tprops.onDimensionsChange([w, h]);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'x': \n\t\t\t\t\t\tprops.onDimensionsChange([w, props.dimensions[1]]);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'y':\n\t\t\t\t\t\tprops.onDimensionsChange([props.dimensions[0], h]);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\t\t\t\t\n\t\t\t}\n\t\t}\n\n\t\tfunction handleMoveEnd(e) {\n\t\t\tif (e.touches && e.touches[0]) e = e.touches[0]\n\n\t\t\tif (e.pageY) {\n\t\t\t  const p_bounds = wrapper_element.current.getBoundingClientRect();\n\n\t\t\t  const w = e.pageX - p_bounds.x + 10;\n\t\t\t\tconst h = e.pageY - p_bounds.y + 10;\n\n\t\t\t\tswitch (axis) {\n\t\t\t\t\tcase 'xy':\n\t\t\t\t\t\tprops.onDimensionsChange([w, h]);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'x': \n\t\t\t\t\t\tprops.onDimensionsChange([w, props.dimensions[1]]);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'y':\n\t\t\t\t\t\tprops.onDimensionsChange([props.dimensions[0], h]);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\t\t\t\t\n\t\t\t}\n\n\t\t\tdocument.removeEventListener(\"mousemove\", handleMove);\n\t\t\tdocument.removeEventListener(\"mouseup\", handleMoveEnd);\n\t\t\tdocument.removeEventListener(\"touchmove\", handleMove);\n\t\t\tdocument.removeEventListener(\"touchend\", handleMoveEnd);\n\t\t}\n\n\t\tif (e.touches && e.touches[0]) e = e.touches[0]\n\n\t\tdocument.addEventListener(\"mousemove\", handleMove);\n\t\tdocument.addEventListener(\"mouseup\", handleMoveEnd);\n\t\tdocument.addEventListener(\"touchmove\", handleMove);\n\t\tdocument.addEventListener(\"touchend\", handleMoveEnd);\n\t}\n\n\tconst handleMoveStart = (e) => {\t\n\t\t/*\n\t\t\tthere are issues with drag events in firefox that make\n\t\t\tthe native 'drag' events less useful for this case. my \n\t\t\talternative was to use mouseEvents and create listeners \n\t\t\ton the document\n\t\t*/\n\n\t\tfunction handleMove(e) {\n\t\t  if(e.touches) e = e.touches[0]\n\t\t\t\n\t\t  if (e.pageY) {\n\t\t    const x = e.pageX - dragOff[0];\n\t\t    const y = e.pageY - dragOff[1];\n\n\t\t    // limits to upper left\n\t\t    props.onPositionChange([x >= 0 ? x : 0, y >= 0 ? y : 0])\n\t\t  }\n\t\t}\n\n\t\tfunction handleMoveEnd(e) {\n\t\t  if (e.touches && e.touches[0]) e = e.touches[0]\n\n\t\t  if (e.pageY) {\n\t\t    const x = e.pageX - dragOff[0];\n\t\t    const y = e.pageY - dragOff[1];\n\n\t\t    // limits to upper left\n\t\t    props.onPositionChange([x >= 0 ? x : 0, y >= 0 ? y : 0])\n\t\t  }\n\n\t\t  document.removeEventListener(\"mousemove\", handleMove);\n\t\t  document.removeEventListener(\"mouseup\", handleMoveEnd);\n\t\t  document.removeEventListener(\"touchmove\", handleMove);\n\t\t  document.removeEventListener(\"touchend\", handleMoveEnd);\n\t\t}\n\n\t\t// use first touch event if on mobile device\n\t\tif (e.touches) e = e.touches[0]\n\n\t\tconst p_bounds = wrapper_element.current.getBoundingClientRect();\n\t\tlet offset = { x: p_bounds.left, y: p_bounds.top };\n\n\t\tlet dragOff = [e.pageX - offset.x, e.pageY - offset.y];\n\n\t\tdocument.addEventListener(\"mousemove\", handleMove);\n\t\tdocument.addEventListener(\"mouseup\", handleMoveEnd);\n\t\tdocument.addEventListener(\"touchmove\", handleMove);\n\t\tdocument.addEventListener(\"touchend\", handleMoveEnd);\n\t}\n\n\tconst handleCenter = () => {\n\t\tif(!props.onPositionChange) return\n\t\tconst p_bounds = wrapper_element.current.getBoundingClientRect();\n\n\t\tconst x = (window.innerWidth/2) - (p_bounds.width/2);\n\t\tconst y = (window.innerHeight/2) - (p_bounds.height/2);\n\t\t\n\t\t// limits to upper left\n\t\tprops.onPositionChange([x >= 0 ? x : 0, y >= 0 ? y : 0])\n\t}\n\n\tconst handleFullscreen = () => {\n\t\tif (!props.fullscreen) handleCenter()\n\n\t\tprops.onFullscreen(!props.fullscreen);\n\t\tprops.onFloat(props.fullscreen)\n\t}\n\n\tconst handleFloat = () => {\n\t\tif(props.floating === null) {\n\t\t\t// get current width/height if it hasn't been detached before\n\t\t\tconst p_bounds = wrapper_element.current.getBoundingClientRect();\n\t\t\tif (props.onDimensionsChange) props.onDimensionsChange([p_bounds.width, p_bounds.height]);\n\t\t}\n\n\t\tif (props.onFloat) props.onFloat(!props.floating);\n\t}\n\n\t/*\n\t\tpositions the panel on top when hovered over\n\t*/\n\tconst handleFocus = (e) => {\n\t\tsetHover(true);\n\t\tsetFocused(true);\n\t\tif(props.onFocus) props.onFocus(e);\n\t}\n\n\tconst handleBlur = () => {\n\t\twrapper_element.current.blur();\n\t\tsetHover(false);\n\t\tsetFocused(false);\n\t\tif(props.onBlur) props.onBlur(false);\n\t}\n\t\n\tlet main_styling = {};\n\n\tif(props.floating && !props.fullscreen) {\n\t\tmain_styling = {\n\t\t\twidth: props.dimensions[0],\n\t\t\theight: expanded ? props.dimensions[1] : 'min-content',\n\t\t\tleft: props.position[0],\n\t\t\ttop: props.position[1],\t\t  \n\t\t}\n\t} else if(props.fullscreen) {\n\t\tmain_styling = {\n\t\t  width: '100%',\n\t\t  height: '100%',\n\t\t  left: 0,\n\t\t  top: 0,\n\t\t}\n\t}\n\n\tconst hasTitle = props.showTitle && (props.title || props.onRemove || props.collapsible || props.floating);\n\tconst borderColor = focused ? context.accent_color : context.outline_color;\n\t\n\tlet dblClickTitle = null;\n\n\tif(props.canFullscreen) {\n\t\tdblClickTitle = handleFullscreen;\n\t} else if(props.collapsible) {\n\t\tdblClickTitle = () => setExpanded(!expanded);\n\t} else if(props.canFloat) {\n\t\tdblClickTitle = handleFloat;\n\t}\n\n\t// questionable mix of controlled/uncontrolled\n\tuseLayoutEffect(() => {\n\t\tsetExpanded(props.expanded);\n\t}, [props.expanded])\n\n\treturn (\n\t\t<div \t\n\t\t\tref={wrapper_element}\t\t\t\t\t\t\n\t\t\tclassName={classNames(\n\t\t\t\tstyles.panel, \n\t\t\t\t{ \n\t\t\t\t\t[styles.fullscreen]: props.fullscreen,\n\t\t\t\t\t[styles.floating]: props.floating,\n\t\t\t\t\t[styles.collapsed]: !expanded,\n\t\t\t\t}\n\t\t\t)}\n\t\t\tstyle={{\n\t\t\t\tbackgroundColor: !props.fullscreen ? context.primary_color : 'transparent',\n\t\t\t\tcolor: context.text_color || 'white',\n\t\t\t\tborder: props.border && !props.fullscreen ? '1px solid '+borderColor : 'none',\n\t\t\t\theight: props.collapsible ? 'auto' : '100%',\n\t\t\t\tmargin: props.gutters ? props.gutterSize : 0,\n\t\t\t\tzIndex: hover ? 5 : 2,\n\t\t\t\t...main_styling,\n\t\t\t\t...props.style\n\t\t\t}}\t\t\t\n\t\t\tonFocus={handleFocus}\n\t\t\tonBlur={handleBlur}\n\t\t\tonContextMenu={props.onContextMenu}\n\t\t\tonMouseEnter={props.onMouseEnter}\n\t\t\tonMouseLeave={props.onMouseLeave}\n\t\t\tonMouseOver={props.onMouseOver}\n\t\t\tonMouseOut={props.onMouseOut}\n\t\t\ttabIndex=\"-1\"\n\t\t>\n\t\t\t{ hasTitle && (\n\t\t\t\t<div \n\t\t\t\t\tclassName={styles.title_bar} \n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tbackgroundColor: context.primary_color || 'black',\n\t\t\t\t\t\t...props.titleStyle\n\t\t\t\t\t}}\n\t\t\t\t>\n\n\t\t\t\t\t{props.canFullscreen && (\t\t\t\t\t\t \n\t\t\t\t\t\t<button \n\t\t\t\t\t\t\ttitle=\"fullscreen\"\n\t\t\t\t\t\t\tonClick={handleFullscreen}\n\t\t\t\t\t\t\tstyle={{fontSize:'0.9em'}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t✳\n\t\t\t\t\t\t</button>\t\t\t\t\t\n\t\t\t\t\t)}\n\n\t\t\t\t\t{ props.canRemove && (\n\t\t\t\t\t\t<button \n\t\t\t\t\t\t\ttitle=\"close\" \n\t\t\t\t\t\t\tonClick={props.onRemove}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tx\n\t\t\t\t\t\t</button>\n\t\t\t\t\t) }\n\n\t\t\t\t\t{ props.canFloat && (\n\t\t\t\t\t\t<button \n\t\t\t\t\t\t\ttitle={props.floating ? \"snap\" : \"float\"} \n\t\t\t\t\t\t\tonClick={handleFloat}\n\t\t\t\t\t\t\tstyle={{fontSize:'0.9em'}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t  props.floating ? '◧' : '❏'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t) }\n\n\t\t\t\t\t{ props.collapsible && (\n\t\t\t\t\t\t<button onClick={()=>setExpanded(!expanded)}>\n\t\t\t\t\t\t\t{expanded ? '▾' : '▸'}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t) }\n\n\t\t\t\t\t<div \n\t\t\t\t\t\tclassName={styles.dragContainer}\n\t\t\t\t\t\t\n\t\t\t\t\tonDoubleClick={dblClickTitle}\n\t\t\t\t\tonClick={props.collapsible && !props.canFullscreen ? () => setExpanded(!expanded) : null}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ props.floating && (\n\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\tclassName={styles.moveHandle}\n\t\t\t\t\t\t\t\tonTouchStart={handleMoveStart}\n\t\t\t\t\t\t\t\tonMouseDown={handleMoveStart}\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t<legend> \n\t\t\t\t\t\t\t<strong>{props.title}</strong>\n\t\t\t\t\t\t</legend>\n\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className={styles.subtitle}>{props.subtitle}</div>\n\t\t\t\t\t\n\t\t\t\t\t{props.indicators && (\n\t\t\t\t\t\t<div className={styles.indicators}>\n\t\t\t\t\t\t\t{props.indicators.map((e,i)=>{\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\tclassName={styles.indicator}\n\t\t\t\t\t\t\t\t\t\ttitle={e.title}\n\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\tcolor: context.primary_color,\n\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: e.color\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ e.label }\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</div>\t\t\n\t\t\t\t\t)}\t\n\n\t\t\t\t\t{props.tooltip && (\n\t\t\t\t\t\t<Tooltip content={props.tooltip}/>\t\t\n\t\t\t\t\t)}\t\t\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t                    \n\t\t\t{expanded && props.toolbar}\n\n\t\t\t{expanded && (\t\t\t\n\t\t\t\t<div \n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tborderColor: context.text_color,\n\t\t\t\t\t\tflexBasis: props.fullscreen ? \"0px\" : \"auto\"\n\t\t\t\t\t}} \t\t\t\t\t\n\t\t\t\t\tclassName = {\n\t\t\t\t\t  classNames(\n\t\t\t\t\t    styles.panel_content, {\n\t\t\t\t\t      [styles.horizontal]: props.horizontal,\n\t\t\t\t\t\t  [styles.vertical]: props.vertical\n\t\t\t\t\t    }\n\t\t\t\t\t  )\n\t\t\t\t\t}\n\t\t\t\t\tref={props.onRef}\n\t\t\t\t>\n\t\t\t\t\t{props.children}\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{expanded && props.footbar}\n\n\t\t\t{/* resize handles */}\n\t\t\t{(props.floating && !props.fullscreen && expanded)  && (\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t<div \n\t\t\t\t\t\tclassName={`${styles.resizeHandle} ${styles.resizeSE}`}\n\t\t\t\t\t\tonTouchStart={handleResize}\n\t\t\t\t\t\tonMouseDown={handleResize}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tborderColor: context.text_color,\n\t\t\t\t\t\t}} \n\t\t\t\t\t></div>\n\t\t\t\t\t<div \n\t\t\t\t\t\tclassName={`${styles.resizeHandle} ${styles.resizeE}`}\n\t\t\t\t\t\tonTouchStart={(e) => handleResize(e,'x')}\n\t\t\t\t\t\tonMouseDown={(e) => handleResize(e,'x')}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tborderColor: context.text_color,\n\t\t\t\t\t\t}} \n\t\t\t\t\t></div>\n\t\t\t\t\t<div \n\t\t\t\t\t\tclassName={`${styles.resizeHandle} ${styles.resizeS}`}\n\t\t\t\t\t\tonTouchStart={(e) => handleResize(e,'y')}\n\t\t\t\t\t\tonMouseDown={(e) => handleResize(e,'y')}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tborderColor: context.text_color,\n\t\t\t\t\t\t}} \n\t\t\t\t\t></div>\n\t\t\t\t</React.Fragment>\t\t\t\t\n\t\t\t)}\n\t\t\n\t\t</div>\n\t);\n});\n\nPanel.defaultProps = {\n\tfullscreen: false,\n\texpanded: true,\t\n\tborder: true,\n\tfocused: false,\n\tfloating: false,\n\tposition: [100,100],\n\tdimensions: [100,100],\n\tgutterSize: 5,\n\tshowTitle: true,\n\tonContextMenu: () => {}\n}\n\nPanel.propTypes = {\n\tonRemove: PropTypes.func,\n\tonFocus: PropTypes.func,\n\ttoolbar: PropTypes.object,\n\tchildren: PropTypes.any,\n\tstyle: PropTypes.object,\n\n\ttitleStyle: PropTypes.object,\n\ttitle: PropTypes.oneOfType([\n\t\tPropTypes.string,\n\t\tPropTypes.object\n\t]),\n\tindicators: PropTypes.array,\n\n\t//tooltip: PropTypes.string\n\n\thorizontal: PropTypes.bool,\n\tvertical: PropTypes.bool,\n\n\tcollapsible: PropTypes.bool,\n\tfullscreen: PropTypes.bool,\n\tfloating: PropTypes.bool,\n\t\n\tshowTitle: PropTypes.bool,\n\n\t// adds space around the panel, off by default\n\tgutters: PropTypes.bool,\n\tgutterSize: PropTypes.number,\n\n\tborder: PropTypes.bool,\n\n\tonFocus: PropTypes.func,\n}\n\nexport const GenericPanel = observer(props => (\n  <Panel\n    uuid={props.panel.id}\n\ttitle={props.title ?? props.panel.title}        \n\tsubtitle={props.subtitle ?? props.panel.subtitle}   \n\tcollapsible={props.collapsible ?? props.panel.collapsible} \n\tfullscreen={props.panel.fullscreen} \n\tcanFullscreen={props.panel.canFullscreen}\n\tfloating={props.panel.floating}\n\texpanded={props.expanded}\n\n\tshowTitle={props.showTitle ?? props.panel.showTitle}\n\t\n\tcanFloat={props.panel.canFloat}\n    defaultWidth={props.panel.defaultWidth}\n    defaultHeight={props.panel.defaultWidth}\n    position={props.panel.position}\n    dimensions={props.panel.dimensions}\n\ttoolbar={props.toolbar}\n\tfootbar={props.footbar}\n\tindicators={props.indicators}\n\ttooltip={props.tooltip}\n\n\tonRemove={props.onRemove ?? props.panel.onRemove}\n\tcanRemove={props.canRemove ?? props.panel.canRemove}\n\tstyle={props.style}\n\t\n\tonContextMenu={props.onContextMenu}\n\tonContextMenuCapture={props.onContextMenuCapture}\n\tonFocus={props.onFocus}\n\tonBlur={props.onBlur}\n\tonRef={props.onRef}\n\tonFloat={props.panel.setFloating}\n    onPositionChange={props.panel.setPosition}\n\tonDimensionsChange={props.panel.setDimensions}\n\tonFullscreen={props.panel.setFullscreen}\n  >\n    {props.children}\n  </Panel>\n));\n\nexport default Panel;","import React from 'react';\nimport styles from './TextComponent.module.css';\n\nconst Text = (props) => {\n\treturn(\n\t\t<div className={styles.text} style={props.style}>\n\t\t\t{props.children}\n\t\t</div>\t\n\t)\n}\n\nexport default Text;","import React, { useContext } from 'react';\nimport styles from './ControlGroupComponent.module.css';\nimport ThemeContext from '../ThemeContext';\n\nconst ControlGroup = (props) => {\n    const context = useContext(ThemeContext);\n\n    return (\n        <div className={styles.wrapper}>\n            <fieldset\n                style={{\n                    borderColor: context.outline_color\n                }}\n            >                \n                {props.name && (\n                    <legend\n                        style={{ \n                            padding: '2px 4px',\n                            backgroundColor: context.text_color,\n                            color: context.primary_color\n                        }}\n                    >\n                        <strong>{props.name}</strong>\n                    </legend>  \n                )}\n                                  \n                <div>\n                    {React.Children.map(props.children,(child)=>{\n                        let input_width = 100.0;\n\n                        if(props.children.length) {\n                            input_width = 100.0 / props.children.length;\n                        }\n                        \n                        if (React.isValidElement(child)) {\n                            return React.cloneElement(child, { style: {width:`${input_width}%`} })\n                        }\n\n                        return child;\n                    })}\n                </div>                    \n            </fieldset>  \n        </div>          \n    );\n}\n\nexport default ControlGroup;","import { useLayoutEffect, useRef } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport ResizeObserver from 'resize-observer-polyfill'\r\n\r\nconst useObserver = (callback, element, dependencies = []) => {\r\n  const observer = useRef(null)\r\n  \r\n  useLayoutEffect(() => {\r\n    const observe = () => {\r\n      if (element && element.current && observer.current) {\r\n        observer.current.observe(element.current)\r\n      }\r\n    }\r\n\r\n    const current = element.current\r\n\r\n    // if we are already observing old element\r\n    if (observer && observer.current && current) {\r\n      observer.current.unobserve(current)\r\n    }\r\n    const resizeObserverOrPolyfill = ResizeObserver\r\n\r\n    observer.current = new resizeObserverOrPolyfill(callback)\r\n    observe()\r\n\r\n    return () => {\r\n      if (observer && observer.current && current) {\r\n        observer.current.unobserve(current)\r\n      }\r\n    }\r\n  }, [callback, element, observer, ...dependencies])\r\n}\r\n\r\nuseObserver.propTypes = {\r\n  element: PropTypes.object,\r\n  callback: PropTypes.func\r\n  //   dependencies\r\n}\r\n\r\nexport default useObserver\r\n","import React, {\n  useState,\n  useContext,\n  useRef,\n  useEffect,\n  useLayoutEffect\n} from 'react'\nimport useResizeObserver from './hooks/ResizeHook'\nimport classNames from 'classnames'\nimport styles from './SplitContainer.module.css'\nimport ThemeContext from '../ThemeContext'\nimport PropTypes from 'prop-types'\n\nclass Split {\n  constructor({ id = 0, floating = false, size = 100 }) {\n    this.id = id\n    this.floating = floating\n    this.size = size\n  }\n}\n\nconst SplitContainer = (props) => {\n  const context = useContext(ThemeContext)\n\n  const distributeSplits = () => {\n    const count = props.children.length\n\n    // make a full length split if there is only one child\n    if (count <= 1)\n      return [\n        new Split({\n          id: 0,\n          floating: false,\n          size: 100\n        })\n      ]\n\n    // get all splits with default size values\n    const defaultSplits = props.children\n      .filter((e) => e.props.defaultsize)\n      .map(\n        (e, i) =>\n          new Split({\n            id: i,\n            floating: false,\n            size: e.props.defaultsize * 100.0\n          })\n      )\n\n    // if defaults are defined, take them into account\n    if (defaultSplits.length) {\n      const defaultSum = defaultSplits\n        .filter((s) => !s.floating)\n        .reduce((a, b) => a + b.size, 0)\n\n      // get default split sum\n      return props.children.map(\n        (e, i) =>\n          new Split({\n            id: i,\n            size: e.props.defaultsize\n              ? e.props.defaultsize * 100.0\n              : (100.0 - defaultSum) / (count - 1),\n            floating: false\n          })\n      )\n    } else {\n      return props.children.map(\n        (e, i) =>\n          new Split({\n            id: i,\n            floating: false,\n            size: 100.0 / count\n          })\n      )\n    }\n  }\n\n  const [split, setSplit] = useState(distributeSplits())\n  const [isEmpty, setEmpty] = useState(false)\n\n  const wrapperElement = useRef(null)\n\n  // if the split is set to auto, decide whether or not its vertical based on\n  // wrapper dimensions / aspect ratio\n  const [isVertical, setIsVertical] = useState(\n    props.vertical || !props.horizontal\n  )\n\n  const handleContainerResize = (e) => {\n    if (props.auto) {\n      const bounds = wrapperElement.current.getBoundingClientRect()\n      setIsVertical(bounds.width < bounds.height)\n    }\n  }\n\n  // TO DO this causes way too many redraws!\n  useResizeObserver(handleContainerResize, wrapperElement, [\n    props.auto,\n    isVertical\n  ])\n\n  const handlePanelResize = (e, i) => {\n    function handleMove(e) {\n      if (e.pageX) {\n        const pBounds = wrapperElement.current.getBoundingClientRect()\n\n        let s\n\n        if (isVertical) {\n          s = (e.pageY - pBounds.y) / pBounds.height\n        } else {\n          s = (e.pageX - pBounds.x) / pBounds.width\n        }\n\n        const splitSum =\n          i > 0\n            ? split\n                .slice(0, i)\n                .filter((s) => !s.floating)\n                .reduce((a, b) => a + b.size, 0)\n            : 0\n        split[i].size = s * 100 - splitSum\n\n        if (split[i].size > 100) split[i].size = 100\n        if (split[i].size < 0) split[i].size = 0\n\n        setSplit([...split])\n      }\n    }\n\n    function handleMoveEnd(e) {\n      if (e.touches && e.touches[0]) e = e.touches[0]\n\n      if (e.pageX) {\n        const pBounds = wrapperElement.current.getBoundingClientRect()\n\n        let s\n\n        if (isVertical) {\n          s = (e.pageY - pBounds.y) / pBounds.height\n        } else {\n          s = (e.pageX - pBounds.x) / pBounds.width\n        }\n\n        const splitSum =\n          i > 0\n            ? split\n                .slice(0, i)\n                .filter((s) => !s.floating)\n                .reduce((a, b) => a + b.size, 0)\n            : 0\n        split[i].size = s * 100 - splitSum\n\n        if (split[i].size > 100) split[i].size = 100\n        if (split[i].size < 0) split[i].size = 0\n\n        setSplit([...split])\n      }\n\n      document.removeEventListener('mousemove', handleMove)\n      document.removeEventListener('mouseup', handleMoveEnd)\n      document.removeEventListener('touchmove', handleMove)\n      document.removeEventListener('touchend', handleMoveEnd)\n    }\n\n    if (e.touches && e.touches[0]) e = e.touches[0]\n\n    document.addEventListener('mousemove', handleMove)\n    document.addEventListener('mouseup', handleMoveEnd)\n    document.addEventListener('touchmove', handleMove)\n    document.addEventListener('touchend', handleMoveEnd)\n  }\n\n  const handleDetach = (i, detachBool) => {\n    if (i === split.length) return\n    split[i].floating = detachBool\n    setSplit([...split])\n  }\n\n  useLayoutEffect(\n    (e) => {\n      setSplit(distributeSplits())\n    },\n    [props.children.length, props.updateFlag]\n  )\n\n  useEffect(\n    (e) => {\n      // if all empty\n      if (!split.filter((s) => !s.floating).length && !isEmpty) {\n        setEmpty(true)\n        if (props.onEmpty) props.onEmpty(true)\n      }\n\n      // if empty and a new split has been changed\n      if (isEmpty) {\n        setEmpty(false)\n        if (props.onEmpty) props.onEmpty(false)\n      }\n    },\n    [split]\n  )\n\n  const wrapperClass = classNames(styles.wrapper, {\n    [styles.vertical]: isVertical,\n    [styles.horizontal]: !isVertical,\n    [styles.empty]: isEmpty\n  })\n\n  return (\n    <div\n      className={wrapperClass}\n      ref={wrapperElement}\n      style={{\n        backgroundColor: context.tertiary_color\n      }}\n    >\n      {props.children &&\n        React.Children.map(props.children, (child, i) => {\n          const isSplit = child.type.name === 'SplitContainer'\n\n          // if there is only one panel, make it full width and height\n          if (props.children.length === 1)\n            return (\n              <div\n                style={isVertical ? { height: '100%' } : { width: '100%' }}\n                className={classNames({\n                  [styles.split_container]: isSplit,\n                  [styles.panel_container]: !isSplit\n                })}\n              >\n                {child}\n              </div>\n            )\n\n          let hasHandle = i < props.children.length - 1\n\n          let w\n          // for all panels up to the last\n          if (i < props.children.length - 1) {\n            w = split[i] ? split[i].size : 0\n            w = split[i].floating ? 0 : w\n            if (split[i].floating) hasHandle = false\n          } else {\n            // sum all splits and get the final panel width\n            // if last split is floating, remove handle\n            if (split[i] && split[i].floating) {\n              hasHandle = false\n              w = 0\n            } else {\n              w =\n                100 -\n                split\n                  .slice(0, -1)\n                  .filter((s) => !s.floating)\n                  .reduce((a, b) => a + b.size, 0)\n            }\n          }\n\n          if (split[i + 1] && split[i + 1].floating && i === split.length - 2) {\n            w =\n              100 -\n              split\n                .slice(0, i)\n                .filter((s) => !s.floating)\n                .reduce((a, b) => a + b.size, 0)\n          }\n\n          if (\n            split[i] &&\n            !split[i].floating &&\n            split.filter((s) => !s.floating).length === 1\n          ) {\n            w = 100\n            hasHandle = false\n          }\n\n          /* \n            attaches hook that watches for float\n            (hopefully this isn't a performance hit)\n          */\n          if (child.props.detachable) {\n            child = React.cloneElement(child, {\n              ...child.props,\n              onDetach: (b) => handleDetach(i, b)\n            })\n          }\n\n          /*\n            if the child is a split, and the split is empty, make it shrink\n          */\n          if (isSplit) {\n            child = React.cloneElement(child, {\n              ...child.props,\n              onEmpty: (b) => handleDetach(i, b)\n            })\n          }\n\n          return (\n            <React.Fragment>\n              <div\n                style={isVertical ? { height: w + '%' } : { width: w + '%' }}\n                className={classNames(styles.panel_content, {\n                  [styles.split_container]: isSplit,\n                  [styles.panel_container]: !isSplit,\n                  [styles.split_floating]: split[i] ? split[i].floating : false\n                })}\n              >\n                {/* {`w: ${w}`} */}\n                {child}\n              </div>\n              {hasHandle && (\n                <div\n                  className={classNames(styles.drag_container, {\n                    [styles.vertical]: isVertical,\n                    [styles.horizontal]: !isVertical\n                  })}\n                >\n                  <div\n                    className={classNames(styles.drag_handle_visible, {\n                      [styles.vertical]: isVertical,\n                      [styles.horizontal]: !isVertical\n                    })}\n                    style={{\n                      // backgroundColor: context.accent_color,\n                      borderColor: context.accent_color\n                    }}\n                    onTouchStart={(e) => handlePanelResize(e, i)}\n                    onMouseDown={(e) => handlePanelResize(e, i)}                    \n                  >\n                    <div\n                      className={classNames(styles.drag_handle, {\n                        [styles.vertical]: isVertical,\n                        [styles.horizontal]: !isVertical\n                      })}\n                      style={{\n                        // backgroundColor: context.accent_color,\n                        borderColor: context.outline_color\n                      }}\n                    />\n                  </div>\n                </div>\n              )}\n            </React.Fragment>\n          )\n        })}\n\n      {props.children.length === 0 && (\n        <p\n          style={{\n            alignSelf: 'center',\n            textAlign: 'center'\n          }}\n        >\n          <small>no panel in split!</small>\n        </p>\n      )}\n    </div>\n  )\n}\n\nSplitContainer.defaultProps = {\n  updateFlag: false\n}\n\n// the children can have a defaultsize prop\n\nSplitContainer.propTypes = {\n  children: PropTypes.any.isRequired,\n  horizontal: PropTypes.bool,\n  vertical: PropTypes.bool,\n  auto: PropTypes.bool, // used to automatically choose from horizontal or vertical\n  split: PropTypes.array,\n  updateFlag: PropTypes.bool\n}\n\nexport default SplitContainer\n","import React, { useContext, useRef } from 'react'\nimport classNames from 'classnames'\nimport styles from './LayoutContainer.module.css'\nimport ThemeContext from '../ThemeContext'\nimport { observer } from 'mobx-react'\n\nconst LayoutContainer = observer((props) => {\n  const context = useContext(ThemeContext)\n\n  let isVertical = props.layout.direction === 'VERTICAL'\n\n  let isEmpty = props.layout.isEmpty\n\n  const wrapper_element = useRef(null)\n\n  const handleResize = (e, layout) => {\n    function handleMove(e) {\n      if (e.touches) e = e.touches[0]\n\n      if (e.pageX) {\n        const bounds = wrapper_element.current.getBoundingClientRect()\n\n        let pos\n        if (isVertical) {\n          pos = (e.pageY - bounds.y) / bounds.height\n        } else {\n          pos = (e.pageX - bounds.x) / bounds.width\n        }\n\n        layout.adjust(pos)\n      }\n    }\n\n    function handleMoveEnd(e) {\n      if (e.touches && e.touches[0]) e = e.touches[0]\n\n      if (e.pageX) {\n        const bounds = wrapper_element.current.getBoundingClientRect()\n\n        let pos\n        if (isVertical) {\n          pos = (e.pageY - bounds.y) / bounds.height\n        } else {\n          pos = (e.pageX - bounds.x) / bounds.width\n        }\n\n        layout.adjust(pos)\n      }\n\n      document.removeEventListener('mousemove', handleMove)\n      document.removeEventListener('mouseup', handleMoveEnd)\n      document.removeEventListener('touchmove', handleMove)\n      document.removeEventListener('touchend', handleMoveEnd)\n    }\n\n    if (e.touches && e.touches[0]) e = e.touches[0]\n\n    document.addEventListener('mousemove', handleMove)\n    document.addEventListener('mouseup', handleMoveEnd)\n    document.addEventListener('touchmove', handleMove)\n    document.addEventListener('touchend', handleMoveEnd)\n  }\n\n  const handleContextMenu = (e, layout) => {\n    if (props.onContextMenu) props.onContextMenu(e, layout)\n  }\n\n  return (\n    <div\n      ref={wrapper_element}\n      style={{\n        backgroundColor: context.tertiary_color\n      }}\n      className={classNames(styles.wrapper, {\n        [styles.vertical]: isVertical,\n        [styles.horizontal]: !isVertical,\n        [styles.empty]: isEmpty\n      })}\n    >\n      {props.layout.children.map((sibling, i) => {\n        let siblings = props.layout.children\n        let hasHandle = i < props.layout.children.length - 1\n        let childIsLayout = sibling.children.length\n        let size = 0\n\n        let filterOutFloats = (s) => !s.panel || (s.panel && !s.panel.floating)\n        let filterOutEmptyLayouts = (s) => !s.isEmpty\n        let empty =\n          sibling.children.length &&\n          sibling.children.filter(filterOutFloats).length === 0\n\n        /*\n                    the benefit of applying the size calculations here\n                    is that floating panels will retain their width. \n                */\n        let isFloating = sibling.panel && sibling.panel.floating\n\n        // for all panels up to the last\n        if (i < siblings.length - 1) {\n          size = sibling ? sibling.size : 0\n\n          // if the next panel is floating, absorb it\n          if (siblings[i + 1].panel && siblings[i + 1].panel.floating) {\n            // while right sibling is floating... TODO: might still need to finish this\n            // let _i = i;\n            // while (siblings[_i + 1] && siblings[_i + 1].panel.floating) {\n            //     size += props.layout.children[_i + 1].size;\n            //     _i++;\n            // }\n            size += props.layout.children[i + 1].size\n            // removes handle (and fixes overflow issue)\n            if (i === siblings.length - 2) hasHandle = false\n          }\n\n          if (isFloating) {\n            hasHandle = false\n            size = 0\n          }\n        } else {\n          // sum all splits and get the final panel width\n          if (isFloating || empty) {\n            hasHandle = false\n            size = 0\n          } else {\n            size =\n              1 -\n              siblings\n                .slice(0, -1)\n                .filter(filterOutFloats)\n                .filter(filterOutEmptyLayouts)\n                .reduce((a, b) => a + b.size, 0)\n          }\n        }\n\n        if (\n          i < siblings.length - 1 &&\n          siblings[i + 1].floating &&\n          i === siblings.length - 2\n        ) {\n          size =\n            1 -\n            siblings\n              .slice(0, i)\n              .filter(filterOutFloats)\n              .filter(filterOutEmptyLayouts)\n              .reduce((a, b) => a + b.size, 0)\n        }\n\n        if (\n          sibling &&\n          !isFloating &&\n          !empty &&\n          siblings.filter(filterOutFloats).filter(filterOutEmptyLayouts)\n            .length === 1\n        ) {\n          size = 1\n          hasHandle = false\n        }\n\n        size *= 100\n\n        return (\n          <React.Fragment key={sibling.id}>\n            <div\n              style={\n                isVertical ? { height: size + '%' } : { width: size + '%' }\n              }\n              className={classNames(styles.panel_content, {\n                [styles.layout_container]: childIsLayout,\n                [styles.panel_container]: !childIsLayout,\n                [styles.float_container]: isFloating\n              })}\n            >\n              {/* <div className={styles.debug}>\n                                {size}\n                            </div> */}\n              {sibling.children.length ? (\n                <LayoutContainer layout={sibling}>\n                  {props.children}\n                </LayoutContainer>\n              ) : (\n                props.children.filter((child) => {\n                  if (child.props.panel) {\n                    return child.props.panel.id === sibling.id\n                  } else {\n                    return child.props.id === sibling.id\n                  }\n                })\n              )}\n            </div>\n            {hasHandle && (\n              <div\n                onContextMenu={handleContextMenu}\n                className={classNames(styles.drag_container, {\n                  [styles.vertical]: isVertical,\n                  [styles.horizontal]: !isVertical\n                })}\n              >\n                <div\n                  className={classNames(styles.drag_handle, {\n                    [styles.vertical]: isVertical,\n                    [styles.horizontal]: !isVertical\n                  })}\n                  style={{\n                    backgroundColor: context.accent_color,\n                    borderColor: context.primary_color\n                  }}\n                  onTouchStart={(e) => handleResize(e, sibling)}\n                  onMouseDown={(e) => handleResize(e, sibling)}\n                ></div>\n              </div>\n            )}\n          </React.Fragment>\n        )\n      })}\n    </div>\n  )\n})\n\nLayoutContainer.defaultProps = {\n  size: 100,\n  order: 0\n}\n\nLayoutContainer.propTypes = {}\n\nexport default LayoutContainer\n","import React, { useState, useContext } from 'react';\nimport styles from './PagesContainer.module.css';\nimport ThemeContext from '../ThemeContext';\n\nconst Pages = (props) => {\n\tconst [currentPage, setCurrentPage] = useState(0);\n\tconst context = useContext(ThemeContext);\n\n\tconst handlePreviousPage = () => {\n\t\tif (currentPage > 0)\n\t\t\tsetCurrentPage(currentPage-1);\n\t}\n\n\tconst handleNextPage = () => {\n\t\tif(currentPage + 1 < props.children.length)\n\t\t\tsetCurrentPage(currentPage+1);\n\t}\t\n\n\tconst buttonStyle = {\n\t\tbackgroundColor: context.secondary_color,\n\t\tcolor: context.text_color\n\t}\n\t\n\treturn(\n\t\t<div className={styles.wrapper} style={props.style}>\n\t\t\t<div className={styles.pagecontent}>\n\t\t\t\t{props.children[currentPage]}\n\t\t\t</div>\n\t\t\t<div className={styles.pagenav}>\n\t\t\t\t<button style={buttonStyle} onClick={handlePreviousPage}>{'<'}</button>\t\t\t\t\n\t\t\t\t<button style={buttonStyle} onClick={handleNextPage}>{'>'}</button>\t\t\t\t\n\t\t\t\t<span>{`${currentPage+1} of ${props.children.length}`}</span>\n\t\t\t</div>\n\t\t</div>\t\n\t)\n}\n\nexport default Pages;","import React, { useContext } from 'react';\nimport styles from './InputBool.module.css';\nimport ThemeContext from '../../ThemeContext';\nimport {observer} from 'mobx-react';\n\nconst InputBool = observer((props) => {    \n    const context = useContext(ThemeContext);\n    const updateValue = e => props.onChange(e.target.checked, e.target.value);\n\n    return (\n        <div \n            className={styles.wrapper}\n            style={{\n                ...props.style,\n                backgroundColor: props.focused ? context.accent_color : context.secondary_color,\n                flexFlow: props.hLabel && props.label ? 'row' : 'column'\n            }}\n        >\n            {props.label && (\n                <label\n                    style={{\n                        backgroundColor: props.focused ? context.accent_color : context.text_color,\n                        color: context.primary_color\n                    }}\n                >\n                    {props.label}:\n                </label>\n            )}\n            <div\n                className={styles.wrapper_inner}\n            >\n                <input \n                    style={props.style}\n                    type=\"checkbox\"         \n                    value={props.value}\n                    checked={props.checked}\n                    onChange={updateValue}\n                    onContextMenu={props.onContextMenu}\n                />\n            </div>                                                           \n        </div>\n    );\n});\n\nexport default InputBool;","import React, { useContext } from 'react';\nimport styles from './InputFloat.module.css';\nimport ThemeContext from '../../ThemeContext';\nimport {observer} from 'mobx-react';\nimport PropTypes from 'prop-types';\n\nlet position = [0, 0];\nlet base_value = 0;\n\n/*\n    ISSUES:\n\n        should be able to drag input outside of browser window\n        but the solution in js is not immediately obvious\n\n        there is a possible lead here:\n        https://stackoverflow.com/questions/1685326/responding-to-the-onmousemove-event-outside-of-the-browser-window-in-ie\n*/\n\nconst InputFloat = observer((props) => {\n    const context = useContext(ThemeContext);\n\n    const handleChange = e => props.onChange(Number(e.target.value));\n\n    const handleDragStart = e => {\n        let dragging = false;\n\n        function handleDrag(e) {\n            e.preventDefault();\n            dragging = true;\n            /*\n                conditional fixes issue where last frame of\n                drag results in a 'jump' in value, as pageY\n                is 0. \n            */\n            if (e.pageY) {\n                // fine control w shift / large control w ctrl\n                let scalar = e.ctrlKey ? 100 : e.shiftKey ? 20000 : 1000;\n\n                let x_offset = e.pageX - position[0];\n                let y_offset = (position[1] - e.pageY);\n\n                x_offset = Math.min(Math.max(x_offset, 1), 100);\n\n                let output_value = base_value + (y_offset * x_offset / scalar);\n\n                // factor in step size\n                if (props.step) {\n                    output_value /= props.step;\n                    output_value = Math.floor(output_value);\n                    output_value *= props.step;\n                }\n\n                props.onChange(output_value);\n            }\n        }\n\n        function handleDragEnd(e) {\n            if(dragging) {\n                // fine control w shift / large control w ctrl\n                let scalar = e.ctrlKey ? 100 : e.shiftKey ? 20000 : 1000;\n\n                let x_offset = e.pageX - position[0];\n                let y_offset = position[1] - e.pageY;\n\n                x_offset = Math.min(Math.max(x_offset, 1), 100);\n\n                let output_value = base_value + (y_offset * x_offset / scalar);\n\n                // factor in step size\n                if (props.step) {\n                    output_value /= props.step;\n                    output_value = Math.floor(output_value);\n                    output_value *= props.step;\n                }\n\n                props.onChange(output_value);\n            } \n\n            document.removeEventListener(\"mousemove\", handleDrag);\n            document.removeEventListener(\"mouseup\", handleDragEnd);\n            document.removeEventListener(\"touchmove\", handleDrag);\n            document.removeEventListener(\"touchend\", handleDragEnd);\n\n            dragging = false;\n        }\n\n        if (e.touches && e.touches[0]) e = e.touches[0]\n\n        position = [e.pageX, e.pageY];\n        base_value = props.value;\n\n        document.addEventListener(\"mousemove\", handleDrag);\n        document.addEventListener(\"mouseup\", handleDragEnd);\n        document.addEventListener(\"touchmove\", handleDrag);\n        document.addEventListener(\"touchend\", handleDragEnd);\n    }\n\n    const value = parseFloat(props.value).toFixed(2);\n\n    const defaultInputStyle = {\n        backgroundColor: context.secondary_color,\n        color: context.text_color\n    }\n\n    return (\n        <div \n            className={styles.wrapper}\n            style={{\n                ...props.style,\n                backgroundColor: props.focused ? context.accent_color : context.secondary_color,\n            }}\n        >\n            {props.label && (\n                <label\n                    style={{\n                        backgroundColor: props.focused ? context.accent_color : context.text_color,\n                        color: context.primary_color\n                    }}\n                >\n                    {props.label}:\n                </label>\n            )}\n            <div\n                className={styles.wrapper_inner}\n            >\n                <input                 \n                    type=\"number\" \n                    step={props.step}\n                    value={Number(value)}                    \n                    onChange={handleChange} \n                    \n                    onClick={props.onClick}\n                    onTouchStart={handleDragStart}\n\t\t\t\t\tonMouseDown={handleDragStart}\n                    onDoubleClick={props.onDoubleClick}      \n                    onContextMenu={props.onContextMenu}\n\n                    style={{                        \n                        ...defaultInputStyle,\n                        ...props.inputStyle,\n                    }}                  \n                />   \n            </div>                                                           \n        </div>\n    );\n});\n\nInputFloat.defaultProps = {\n    value: 0,\n    step: 0.1,\n    focused: false,\n}\n\nInputFloat.propTypes = {\n    label: PropTypes.string,\n    value: PropTypes.oneOfType([\n        PropTypes.number,\n        PropTypes.string\n    ]),\n    step: PropTypes.number,\n    focused: PropTypes.bool,\n    \n    onChange: PropTypes.func,\n    onDoubleClick: PropTypes.func,\n    inputStyle: PropTypes.object\n}\n\nexport default InputFloat;\n","import React, { useContext } from 'react';\nimport styles from './InputSelect.module.css';\nimport ThemeContext from '../../ThemeContext';\n\nconst InputSelect = (props) => {\n    const context = useContext(ThemeContext);\n\n    const handleChange = e => props.onChange(e.target.value);\n\n    return (\n        <div \n            className={styles.wrapper}\n            style={{\n                ...props.style,\n                backgroundColor: props.focused ? context.accent_color : context.secondary_color,\n            }}\n        >\n            {props.label && (\n                <label\n                    style={{\n                        backgroundColor: props.focused ? context.accent_color : context.text_color,\n                        color: context.primary_color\n                    }}\n                >\n                    {props.label}:\n                </label>\n            )}\n            <div\n                className={styles.wrapper_inner}\n            >\n                <select \n                    defaultValue={props.selectedOption} \n                    onChange={handleChange} \n                    onContextMenu={props.onContextMenu}\n                    style={{\n                        backgroundColor: context.secondary_color,\n                        color: context.text_color,\n                    }}\n                >\n                    {props.options.map((opt,i)=>(\n                        <option key={i} value={opt.value}>\n                            {opt.label}\n                        </option> \n                    ))}                   \n                </select>   \n            </div>                                             \n        </div>\n    );\n}\n\nexport default InputSelect;\n","import React, { useContext, useRef } from 'react';\nimport styles from './InputSlider.module.css';\nimport InputFloat from './InputFloat';\nimport ThemeContext from '../../ThemeContext';\nimport PropTypes from 'prop-types';\n\nlet slider_bounds = null;   \n\nconst InputSlider = (props) => {\n    const context = useContext(ThemeContext);\n\n    const slider_element = useRef(null);\n\n    const handleDragStart = e => {\n        function handleDrag(e) {\n            if (e.touches) e = e.touches[0]\n          /*\n              conditional fixes issue where last frame of\n              drag results in a 'jump' in value, as pageY\n              is 0. \n          */\n          if (e.pageY) {\n            let x = e.pageX + 2;\n            let position = (x - slider_bounds.x) / slider_bounds.width;\n\n            let value = (position * (props.max - props.min)) + props.min;\n\n            if (position <= 0.00) value = props.min\n            if (position >= 1.00) value = props.max\n\n            props.onChange(Math.floor(value / props.step) * props.step)\n          }\n        }\n\n        function handleDragEnd(e) {\n            if (e.touches && e.touches[0]) e = e.touches[0]\n\n            let x = e.pageX + 2;\n            let position = (x - slider_bounds.x) / slider_bounds.width;\n            let value = (position * (props.max - props.min)) + props.min;\n\n            if (position >= 0.00 && position <= 1.0) {\n                props.onChange(Math.floor(value / props.step) * props.step)\n            }\n\n            document.removeEventListener(\"mousemove\", handleDrag);\n            document.removeEventListener(\"mouseup\", handleDragEnd);\n            document.removeEventListener(\"touchmove\", handleDrag);\n            document.removeEventListener(\"touchend\", handleDragEnd);\n        }\n\n        if (e.touches && e.touches[0]) e = e.touches[0]\n\n        slider_bounds = slider_element.current.getBoundingClientRect();\n        let x = e.pageX + 2;\n        let position = (x - slider_bounds.x) / slider_bounds.width;\n\n        let value = (position * (props.max-props.min)) + props.min;\n        console.log([props.min,props.max])\n        console.log('position',position)\n        console.log('value',value)\n\n        if (position >= 0.00 && position <= 1.0) {\n            props.onChange(Math.floor(value / props.step) * props.step) // floor to step\n        }\n\n        document.addEventListener(\"mousemove\", handleDrag);\n        document.addEventListener(\"mouseup\", handleDragEnd);\n        document.addEventListener(\"touchmove\", handleDrag);\n        document.addEventListener(\"touchend\", handleDragEnd);\n    }\n\n    const handleFloatDrag = v => {\n        props.onChange(v)\n    }\n\n    return (\n        <div \n            className={styles.wrapper + ' ' + styles.horizontal}\n            style={props.style}\n            onContextMenu={props.onContextMenu}\n        >\n            <InputFloat \n                value={props.value}\n                onChange={handleFloatDrag}\n                step={props.step || 0.1}\n            />\n            <div \n                ref={slider_element}\t\t\t\n                className={styles.slider_track}    \n                onTouchStart={handleDragStart}\n                onMouseDown={handleDragStart}  \n                style={{\n                    backgroundColor: context.secondary_color\n                }}                        \n            >\n                <div \n                    className={styles.sleeve}\n                    style={{\n                        width: ((props.value-props.min)/(props.max-props.min)*100) + '%',\n                        backgroundColor: context.accent_color\n                    }}\n                >                        \n                </div>\n                <div\n                    className={styles.handle}\n                    style={{\n                        left: ((props.value-props.min)/(props.max-props.min)*100) + '%',\n                        backgroundColor: context.accent_color\n                    }}                    \n                ></div>                        \n            </div>                                               \n        </div>\n    );\n}\n\nInputSlider.propTypes = {\n    min: PropTypes.number,\n    max: PropTypes.number,\n    value: PropTypes.number,\n    style: PropTypes.object,\n}\n\nexport default InputSlider;","import React, { useContext } from 'react';\nimport styles from './InputColor.module.css';\nimport ThemeContext from '../../ThemeContext';\n\nconst InputColor = (props) => {\n    const context = useContext(ThemeContext);\n\n    const handleChange = (e) => props.onChange(e.target.value);\n\n    return (\n        <div \n            className={styles.wrapper}\n            style={{\n                ...props.style,\n                backgroundColor: props.focused ? context.accent_color : context.secondary_color,\n            }}\n        >\n            {props.label && (\n                <label\n                    style={{\n                        backgroundColor: props.focused ? context.accent_color : context.text_color,\n                        color: context.primary_color\n                    }}\n                >\n                    {props.label}:\n                </label>\n            )}\n            <div\n                className={styles.wrapper_inner}\n            >\n            \n                {props.showValue && (\n                    <input \n                        type=\"string\"\n                        className={styles.textInput}\n                        value={props.value}\n                        onChange={handleChange}\n                        style={{\n                            backgroundColor: context.text_color,\n                            color: context.secondary_color\n                        }}\n                    />                     \n                )}   \n\n                    <input \n                        type=\"color\"\n                        value={props.value}\n                        onChange={handleChange}\n                        onContextMenu={props.onContextMenu}\n                        style={{\n                            backgroundColor: context.secondary_color,\n                            color: context.secondary_color                        \n                        }}\n                    /> \n            </div>                                                    \n        </div>\n    );\n}\n\nexport default InputColor;","import { types } from \"mobx-state-tree\";\nimport tinykeys from \"tinykeys\";\nimport { observable } from \"mobx\";\n\nexport const ContextMenuItem = types\n  .model(\"ContextMenuItem\", {\n    id: types.identifier,\n    label: types.frozen(),\n    buttons: types.frozen(),\n    dropDown: types.map(types.late(() => ContextMenuItem))\n  })\n  .volatile(self => ({\n    onClick: () => {}\n  }));\n\nconst Context = types\n  .model(\"Context\", {})\n  .volatile(self => ({\n    contextmenu: {},\n    keylistener: tinykeys(window, {}),\n    keymap: null\n  }))\n  .actions(self => ({\n    setKeymap: keymap => {\n      if (self.keylistener) self.keylistener();\n\n      self.keymap = keymap;\n      self.keylistener = tinykeys(window, self.keymap);\n    },\n    removeKeymap: () => self.keylistener(),\n    setContextmenu: c => {\n      self.contextmenu = c;\n    }\n  }));\n\nexport default Context;","import { types, getParent } from \"mobx-state-tree\";\nimport Layout from './Layout';\n\nconst Panel = types\n    .model(\"Panel\", {\n        id: types.identifier,\n        component_type: \"\",\n        title: types.maybe(types.string),\n        subtitle: types.maybe(types.string),\n        showTitle: true,\n        floating: false,\n        fullscreen: false,\n        canFloat: false,\n        canRemove: false,\n        canFullscreen: false,\n        dimensions: types.array(types.number),\n        position: types.array(types.number),\n        layout: types.maybe(types.late(() => Layout))\n    })\n    .volatile(self => ({\n        parent_layout: null\n    }))\n    .actions(self => ({\n        setLayout: layout => {\n          self.layout = layout;\n        },\n\n        setFloating: f => {\n          self.floating = f;\n        },\n\n        toggleFloating: () => {\n          self.floating = !self.floating;\n        },\n\n        toggleFullscreen: () => {\n          self.fullscreen = !self.fullscreen;\n        },\n\n        setPosition: (p) => {\n          // TEMP: hack to keep away from title, use safe areas instead\n          if (p[1] < 24) p[1] = 24;\n\n          self.position = p;\n\n          // EXPERIMENT: Limit position to max bounds\n          if (p[0] + self.dimensions[0] > window.innerWidth) \n            self.position[0] = window.innerWidth - self.dimensions[0];\n          \n          if (p[1] + self.dimensions[1] > window.innerHeight)\n            self.position[1] = window.innerHeight - self.dimensions[1];\n        },\n\n        setDimensions: (d) => {\n          self.dimensions = d;\n\n          // EXPERIMENT: Limit position to max bounds\n          if (d[0] + self.position[0] > window.innerWidth)\n            self.dimensions[0] = window.innerWidth - self.position[0];\n\n          if (d[1] + self.position[1] > window.innerHeight)\n            self.dimensions[1] = window.innerHeight - self.position[1];\n        },\n\n        setFullscreen: (f) => {\n          self.fullscreen = f;\n        },\n\n        onRemove: () => {\n          self.parent_layout = getParent(self, 2); // ERROR HERE, cant remove\n          self.parent_layout.removePanel(self);\n        },\n\n        center: () => {\n          self.position[0] = window.innerWidth / 2 - self.dimensions[0] / 2;\n          self.position[1] = window.innerHeight / 2 - self.dimensions[1] / 2;\n        },\n\n        fitScreen: () => {\n          if (self.position[0] <= 0) self.position[0] = 0;\n\n          if (self.position[1] <= 0) self.position[1] = 0;\n\n          // if (self.dimensions[0] + self.position[0] >= window.innerWidth)\n          // self.dimensions[0] = window.innerWidth - self.position[0];\n\n          // if (self.dimensions[1] + self.position[1] >= window.innerHeight)\n          // self.dimensions[1] = window.innerHeight - self.position[1];\n        }\n    }))\n\nexport default Panel;","import {\n  types,\n  getParent,\n  getRoot\n} from \"mobx-state-tree\";\nimport Panel from \"./Panel\";\n\nconst Layout = types\n  .model(\"Layout\", {\n    id: types.identifier,\n    title: \"Layout\",\n    size: 0,\n    panel: types.maybe(types.safeReference(Panel)),\n    children: types.array(types.late(() => Layout)),\n    panels: types.maybe(types.map(Panel)),\n    direction: types.optional(\n      types.enumeration([\"VERTICAL\", \"HORIZONTAL\"]),\n      \"HORIZONTAL\"\n    )\n  })\n  .views(self => ({\n    get isEmpty() {\n      let result =\n        self.children.length &&\n        self.children.filter(\n          s => (!s.panel && !s.isEmpty) || (s.panel && !s.panel.floating)\n        ).length === 0;\n      return result;\n    }\n  }))\n  .volatile(self => ({\n    siblings: null,\n    rootStore: null\n  }))\n  .actions(self => ({\n\n    afterAttach: () => {\n      self.siblings = getParent(self);\n      self.rootStore = getRoot(self);\n    },\n\n    adjust: (size) => {\n      let self_index = self.siblings.indexOf(self);\n\n      let adjusted_size = size;\n\n      let sum =\n        self_index > 0 ?\n        self.siblings\n        .slice(0, self_index)\n        .filter(s => !s.floating)\n        .reduce((a, b) => a + b.size, 0) :\n        0;\n\n      adjusted_size = size - sum;\n\n      if (adjusted_size > 100) adjusted_size = 100;\n      if (adjusted_size < 0) adjusted_size = 0;\n\n      self.setSize(adjusted_size);\n    },\n\n    distributeChildren: () => {\n      self.children.forEach((e, i) => {\n        console.log(i, (i + 1) / self.children.length);\n        e.setSize(1 / self.children.length);\n      });\n    },\n\n    setSize: (size) => {\n      self.size = size;\n    },\n\n    addPanel: (panel) => {\n      // if panel is a string, look it up from list of defaults\n      if (typeof panel === \"string\" && self.rootStore.panelVariants[panel]) {\n        panel = self.rootStore.panelVariants[panel];\n      }\n\n      let layout = Layout.create({\n        id: panel.id,\n        panel: panel.id,\n        size: 1 / self.children.length\n      });\n\n      self.panels.put(panel);\n      self.children.push(layout);\n\n      //       console.log(\"self\", self);\n\n      //       self.distributeChildren();\n    },\n\n    removePanel: (panel) => {\n      if (self.panels) self.panels.delete(panel);\n      if (self.children) {\n        self.children = self.children.filter(e => e.panel !== panel);\n\n        self.children.forEach(e => {\n          e.removePanel(panel);\n        });\n\n        // console.log(\"SELF\", getSnapshot(self));\n\n        // TODO: if all panels are gone, remove this layout\n        // if(!self.children.length) {\n        //     console.log(getParent(self,1))\n        //     let parent = getParent(self, 1);\n        //     parent.children.filter(e => e !== self)\n        // }\n      }\n    },\n\n    clear: () => {\n      if (self.panels && self.children) {\n        self.panels.clear();\n        self.children = [];\n      }\n    },\n\n    // removeLayout: (layout) => {\n    //     if(self.children) self.children.filter(e => e !== layout);\n    // }\n\n  }))\n\nexport default Layout;\n","import { types } from \"mobx-state-tree\";\nimport Context from \"./Context\";\n\nimport Panel from \"./Panel\";\nimport Theme from \"./Theme\";\n\nconst UI = types\n    .model('UI', {\n        panels: types.map(Panel),\n        theme: Theme,\n        context: types.maybe(Context)\n    })\n    .volatile(self => ({\n        panelVariants: null,\n        layoutVariants: null\n    }))\n    .actions(self => ({\n        afterAttach: () => {\n            self.context = Context.create()\n        },\n\n        setPanelVariants: panels => {\n            self.panelVariants = panels;\n        },\n\n        setLayoutVariants: layouts => {\n            self.layoutVariants = layouts;\n        },\n\n        getPanelVariant: id => {\n            return self.panelVariants[id];\n        },\n\n        getLayoutVariant: id => {\n            if (self.layoutVariants[id]) {\n                return self.layoutVariants[id]\n            }else{\n                if(self.panelVariants) {\n                    console.error(`variant (${id}) could not be found. should be one of the following: (${Object.keys(self.panelVariants)})`)\n                } else {\n                    console.error(`no variants found!`)\n                }\n                    \n            }\n                \n            return;\n        },\n\n        getPanel: id => {\n            return self.panels.get(id);\n        }\n    }))\n\nexport default UI;","import _MacoWrapperComponent from './components/MacoWrapperComponent';\n\nimport _PanelComponent from './components/PanelComponent';\nimport { GenericPanel as _GenericPanel} from './components/PanelComponent';\nimport _TextComponent from './components/TextComponent';\nimport _ToolbarComponent from './components/ToolbarComponent';\nimport _ContextMenuComponent from './components/ContextMenuComponent';\nimport _ControlGroupComponent from './components/ControlGroupComponent';\nimport _SplitContainer from './components/SplitContainer';\nimport _LayoutContainer from './components/LayoutContainer';\nimport _PagesContainer from './components/PagesContainer';\n\nimport _InputBool from './components/input/InputBool';\nimport _InputFloat from './components/input/InputFloat';\nimport _InputSelect from './components/input/InputSelect';\nimport _InputSlider from './components/input/InputSlider';\nimport _InputColor from './components/input/InputColor';\n\nimport _ThemeContext from './ThemeContext';\n\n// STORES\nimport _ContextStore from './stores/Context';\nimport _LayoutStore from './stores/Layout';\nimport _PanelStore from './stores/Panel';\nimport _ThemeStore, { themes } from './stores/Theme';\nimport _UIStore from './stores/UI';\n\nexport let MacoWrapperComponent = _MacoWrapperComponent;\n\nexport let TextComponent = _TextComponent;\nexport let PanelComponent = _PanelComponent;\nexport let GenericPanel = _GenericPanel;\nexport let ToolbarComponent = _ToolbarComponent;\nexport let ContextMenuComponent = _ContextMenuComponent;\nexport let ControlGroupComponent = _ControlGroupComponent;\nexport let SplitContainer = _SplitContainer;\nexport let LayoutContainer = _LayoutContainer;\nexport let PagesContainer = _PagesContainer;\n\nexport let InputBool = _InputBool;\nexport let InputFloat = _InputFloat;\nexport let InputSelect = _InputSelect;\nexport let InputSlider = _InputSlider;\nexport let InputColor = _InputColor;\n\nexport let ThemeContext = _ThemeContext;\nexport let ThemeStore = _ThemeStore;\nexport let Themes = themes;\n\n// STORES\nexport let ContextStore = _ContextStore;\nexport let LayoutStore = _LayoutStore;\nexport let PanelStore = _PanelStore;\nexport let UIStore = _UIStore; // main store output\n"],"names":["themes","primary_color","secondary_color","tertiary_color","text_color","outline_color","accent_color","Theme","types","model","weyland","actions","self","setTheme","theme","setPrimaryColor","color","setSecondaryColor","setTertiaryColor","setTextColor","setOutlineColor","setAccentColor","ThemeContext","createContext","style","drawer","width","top","left","DropDown","observer","props","context","useContext","mainRef","useRef","useState","activeItem","setActiveItem","subDropDownOpen","setSubDropDownOpen","subDropDownId","setSubDropDownId","subDropDownPosition","setSubDropDownPosition","handleSubDropDown","e","index","item","onClick","toggle","bounds","currentTarget","getBoundingClientRect","id","openUp","height","bottom","openLeft","handleClickAway","current","contains","target","handleRef","onRef","handleContextMenu","useLayoutEffect","document","addEventListener","removeEventListener","open","position","classNames","styles","backgroundColor","items","Object","keys","map","k","i","dropDown","subDropDown","activeButton","label","disableHover","display","title","buttons","b","border","borderTop","borderBottom","borderLeftStyle","borderRightStyle","flexShrink","padding","defaultProps","propTypes","Toolbar","dropDownOpen","setDropDownOpen","dropDownId","setDropDownId","dropDownPosition","setDropDownPosition","setOpenUp","handleWheel","offset","Math","sign","deltaY","scroll","scrollLeft","at_start","at_end","offsetWidth","scrollWidth","useEffect","y","window","innerHeight","toolbar","borderColor","button","highlight","parent_bounds","_openUp","x","itemDecoration","DropDownComponent","ContextMenu","dropRef","dropDownOpenLeft","setDropDownOpenLeft","dropDownOpenUp","setDropDownOpenUp","handleClick","preventDefault","pageX","pageY","innerWidth","MacoWrapper","store","ui","setContextmenu","contextmenu","wrapper","ToolbarComponent","titlebar","ContextMenuComponent","children","Tooltip","show","setShow","setPosition","handleToggle","tooltip","tooltip_symbol","tooltip_content","content","Panel","wrapper_element","expanded","setExpanded","focused","setFocused","hover","setHover","handleResize","axis","handleMove","touches","p_bounds","w","h","onDimensionsChange","dimensions","handleMoveEnd","handleMoveStart","dragOff","onPositionChange","handleCenter","handleFullscreen","fullscreen","onFullscreen","onFloat","handleFloat","floating","handleFocus","onFocus","handleBlur","blur","onBlur","main_styling","hasTitle","showTitle","onRemove","collapsible","dblClickTitle","canFullscreen","canFloat","panel","collapsed","margin","gutters","gutterSize","zIndex","onContextMenu","onMouseEnter","onMouseLeave","onMouseOver","onMouseOut","title_bar","titleStyle","fontSize","canRemove","dragContainer","moveHandle","subtitle","indicators","indicator","flexBasis","panel_content","horizontal","vertical","footbar","resizeHandle","resizeSE","resizeE","resizeS","PropTypes","func","object","any","oneOfType","string","array","bool","number","GenericPanel","defaultWidth","onContextMenuCapture","setFloating","setDimensions","setFullscreen","Text","text","ControlGroup","name","React","Children","child","input_width","length","isValidElement","cloneElement","useObserver","callback","element","dependencies","observe","unobserve","resizeObserverOrPolyfill","ResizeObserver","Split","size","SplitContainer","distributeSplits","count","defaultSplits","filter","defaultsize","defaultSum","s","reduce","a","split","setSplit","isEmpty","setEmpty","wrapperElement","isVertical","setIsVertical","handleContainerResize","auto","useResizeObserver","handlePanelResize","pBounds","splitSum","slice","handleDetach","detachBool","updateFlag","onEmpty","wrapperClass","empty","isSplit","type","split_container","panel_container","hasHandle","detachable","onDetach","split_floating","drag_container","drag_handle_visible","drag_handle","alignSelf","textAlign","isRequired","LayoutContainer","layout","direction","pos","adjust","sibling","siblings","childIsLayout","filterOutFloats","filterOutEmptyLayouts","isFloating","layout_container","float_container","order","Pages","currentPage","setCurrentPage","handlePreviousPage","handleNextPage","buttonStyle","pagecontent","pagenav","InputBool","updateValue","onChange","checked","value","flexFlow","hLabel","wrapper_inner","base_value","InputFloat","handleChange","Number","handleDragStart","dragging","handleDrag","scalar","ctrlKey","shiftKey","x_offset","y_offset","min","max","output_value","step","floor","handleDragEnd","parseFloat","toFixed","defaultInputStyle","onDoubleClick","inputStyle","InputSelect","selectedOption","options","opt","slider_bounds","InputSlider","slider_element","console","log","handleFloatDrag","v","slider_track","sleeve","handle","InputColor","showValue","textInput","ContextMenuItem","identifier","frozen","late","Context","keylistener","tinykeys","keymap","setKeymap","removeKeymap","c","component_type","maybe","Layout","parent_layout","setLayout","f","toggleFloating","toggleFullscreen","p","d","getParent","removePanel","center","fitScreen","safeReference","panels","optional","enumeration","views","result","rootStore","afterAttach","getRoot","self_index","indexOf","adjusted_size","sum","setSize","distributeChildren","forEach","addPanel","panelVariants","create","put","push","clear","UI","layoutVariants","setPanelVariants","setLayoutVariants","layouts","getPanelVariant","getLayoutVariant","error","getPanel","get","MacoWrapperComponent","_MacoWrapperComponent","TextComponent","_TextComponent","PanelComponent","_PanelComponent","_GenericPanel","_ToolbarComponent","_ContextMenuComponent","ControlGroupComponent","_ControlGroupComponent","_SplitContainer","_LayoutContainer","PagesContainer","_PagesContainer","_InputBool","_InputFloat","_InputSelect","_InputSlider","_InputColor","_ThemeContext","ThemeStore","_ThemeStore","Themes","ContextStore","_ContextStore","LayoutStore","_LayoutStore","PanelStore","_PanelStore","UIStore","_UIStore"],"mappings":"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"}