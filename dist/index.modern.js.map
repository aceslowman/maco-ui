{"version":3,"file":"index.modern.js","sources":["../src/stores/Theme.js","../src/ThemeContext.js","../src/components/DropDownComponent.js","../src/components/ToolbarComponent.js","../src/components/ContextMenuComponent.js","../src/components/MacoWrapperComponent.js","../src/components/PanelComponent.js","../src/components/TextComponent.js","../src/components/ControlGroupComponent.js","../src/components/SplitContainer.js","../src/components/LayoutContainer.js","../src/components/PagesContainer.js","../src/components/input/InputBool.js","../src/components/input/InputFloat.js","../src/components/input/InputSelect.js","../src/components/input/InputSlider.js","../src/components/input/InputColor.js","../src/stores/Context.js","../src/stores/Panel.js","../src/stores/Layout.js","../src/stores/UI.js","../src/index.js"],"sourcesContent":["import { types } from \"mobx-state-tree\";\n\nexport const themes = {\n  'weyland': { // light\n    primary_color: '#ffffff',\n    secondary_color: '#C2C2C2',\n    tertiary_color: '#e0e0e0',\n    text_color: '#000000',\n    outline_color: '#aaaaaa',\n    accent_color: '#3fa3a3'\n  },\n  'yutani': { // dark\n    primary_color: '#000000',\n    secondary_color: '#202020',\n    tertiary_color: '#303030',\n    text_color: '#ffffff',\n    outline_color: '#474747',\n    accent_color: '#3fa3a3'\n  },\n  'powershell': { // blue\n    primary_color: '#012456',\n    secondary_color: '#304E78',\n    tertiary_color: '#233767',\n    text_color: '#ffffff',\n    outline_color: '#51578B',\n    accent_color: '#ffff00'\n  },\n  'sarah': {\n    primary_color: '#0D5439',\n    secondary_color: '#9D6C71',\n    tertiary_color: '#5b6b5c',\n    text_color: '#C9A6A6',\n    outline_color: '#aaaaaa',\n    accent_color: '#D3945A'\n  },\n};\n\nconst Theme = types\n    .model(\"Theme\", {\n        ...themes.weyland\n    })\n    .actions(self => ({\n      setTheme: (theme) => {\n        self.primary_color = theme.primary_color;\n        self.secondary_color = theme.secondary_color;\n        self.tertiary_color = theme.tertiary_color;\n        self.text_color = theme.text_color;\n        self.outline_color = theme.outline_color;\n        self.accent_color = theme.accent_color;\n      },\n      setPrimaryColor: color => self.primary_color = color,\n      setSecondaryColor: color => self.secondary_color = color,\n      setTertiaryColor: color => self.tertiary_color = color,\n      setTextColor: color => self.text_color = color,\n      setOutlineColor: color => self.outline_color = color,\n      setAccentColor: color => self.accent_color = color\n    }))\n\nexport default Theme;","import { createContext } from 'react';\n\nimport { themes } from \"./stores/Theme\";\n\nconst ThemeContext = createContext(themes.weyland)\n\nexport default ThemeContext","import React, { useState, useContext, useRef, useLayoutEffect, useEffect } from 'react';\nimport ThemeContext from '../ThemeContext';\nimport styles from './DropDownComponent.module.css';\nimport classNames from 'classnames';\nimport {observer} from 'mobx-react';\n\nlet style = {\n    drawer: {\n        width: \"0px\",\n        top: \"0px\",\n        left: \"0px\",\n    }\n}\n\nconst DropDown = observer((props) => {\n    const context = useContext(ThemeContext);\n    let mainRef = useRef(null);\n\n    const [activeItem, setActiveItem] = useState(null);\n    const [subDropDownOpen, setSubDropDownOpen] = useState(false);\n    const [subDropDownId, setSubDropDownId] = useState(null);\n    const [subDropDownPosition, setSubDropDownPosition] = useState({top:0,left:0});\n\n    const handleSubDropDown = (e, index, item) => {\n        if(item.onClick) item.onClick();\n        let toggle = index === activeItem ? !subDropDownOpen : true;\n\n        let bounds = e.currentTarget.getBoundingClientRect();\n\n        setActiveItem(toggle ? index : false);\n        setSubDropDownId(item.id)\n        setSubDropDownOpen(toggle);\n        setSubDropDownPosition({\n            top: !props.openUp ? -bounds.height : 'auto',\n            bottom: props.openUp ? 0 : 'auto', \n            left: props.openLeft ? -bounds.width : bounds.width\n        });\n    }\n\n    const handleClickAway = e => {\n        if (mainRef.current && !mainRef.current.contains(e.target)) {\n            setActiveItem(null);\n            setSubDropDownOpen(false);\n        }\n    }\n\n    function handleRef(e) {\n        mainRef.current = e;\n        if(props.onRef) props.onRef(mainRef)\n    }\n\n    function handleContextMenu(e) {\n        setSubDropDownOpen(false);\n    }\n\n    useLayoutEffect(() => {\n      document.addEventListener('click', (e) => handleClickAway(e));\n      document.addEventListener('contextmenu', (e) => handleContextMenu(e));\n\n      return () => {\n        document.removeEventListener('click', (e) => handleClickAway(e));\n        document.addEventListener('contextmenu', (e) => handleContextMenu(e));\n      }\n    }, []);\n\n    style = {\n      ...style,\n      drawer: {\n        width: props.open ? '150px' : '0px',\n        ...props.position\n      }\n    };\n\n    return(\n        <div \n            className = {\n              classNames(\n                styles.drawer, {\n                //   [styles.openLeft]: props.openLeft,\n                //   [styles.openUp]: props.openUp,\n                }\n              )\n            }\n            ref={(e)=>handleRef(e)}\n            style={{\n                ...style.drawer,\n                backgroundColor: context.secondary_color,\n                color: context.text_color\n            }}            \n        >\t\t\t\n            {props.items && Object.keys(props.items).map((k,i)=>{ \n                let item = props.items[k];\n\n                // if there is a subdropdown               \n                if(item.dropDown) {         \n                    return (\n                        <div \n                            key={item.id}\n                            className={styles.subDropDown}\n                            style = {\n                              {\n                                ...style.drawer,\n                                backgroundColor: context.secondary_color,\n                                color: context.text_color\n                              }\n                            }\n                        >\n                            <button\n                                key={'sub'+item.id}                                \n                                onClick={e=>handleSubDropDown(e,i,item)}\n                                className={\n                                    classNames(\n                                        {\n                                            [styles.activeButton]: i === activeItem,\n                                            [styles.openLeft]: props.openLeft,\n                                            [styles.openUp]: props.openUp,\n                                        }\n                                    )\n                                }\n                            >                                \n                                {item.label}      \n                                <span>{props.openLeft ? '<' : '>'}</span>\n                            </button>\n                            \n\n                            {/* \n                                this extra div helps ensure nested \n                                dropdowns are visible through hidden\n                                overflow\n                             */}\n                            {(i === activeItem && subDropDownId) && (\n                                <div key={item.id} style={{position:'fixed'}}>\n                                    <DropDown \n                                        key={item.id+'dd'}\n                                        open={props.open && subDropDownOpen}                                    \n                                        items={{...props.items[subDropDownId].dropDown}}\n                                        position={subDropDownPosition}       \n                                        openLeft={props.openLeft}   \n                                        openUp={props.openUp}                          \n                                    />\n                                </div>\n                            )}\n                        </div>                            \n                    )\n                }else{\n                    return (\n                        <div \n                            key={item.id}\n                            className = {\n                              classNames({\n                                [styles.activeButton]: i === activeItem,\n                                [styles.disableHover]: item.disableHover,\n                                [styles.openLeft]: props.openLeft,\n                                [styles.openUp]: props.openUp,\n                              })\n                            }\n                            style={{\n                                display:'flex',\n                                width:'100%'\n                            }}\n                        >\n                            <button\n                                key={'normal'+item.id}   \n                                title={item.title}                                            \n                                onClick={item.onClick}\n                            >\n                                {item.label}                                 \n                            </button>\n                            {item.buttons && Object.keys(item.buttons).map((k) => {\n                                let b = item.buttons[k];\n                                return (\n                                    <button\n                                        key={'button'+b.id}\n                                        onClick={b.onClick} \n                                        title={b.title}             \n                                        style={{\n                                            border: `1px solid ${context.outline_color}`,\n                                            borderTop: 'none',\n                                            borderBottom: 'none',\n                                            borderLeftStyle: !props.openLeft ? 'solid' : 'none',\n                                            borderRightStyle: props.openLeft ? 'solid' : 'none',\n                                            flexShrink: 10,\n                                            padding: 3\n                                        }}\n                                    ><small>{b.label}</small></button>\n                                )\n                            })}\n                        </div>                        \n                    )\n                }\n            })}\n        </div>\n    )\n})\n\nDropDown.defaultProps = {\n  openLeft: false,\n  openUp: false\n}\n\nDropDown.propTypes = {\n\n}\n\nexport default DropDown;","import React, { useState, useContext, useRef, useEffect } from 'react';\nimport styles from './ToolbarComponent.module.css';\nimport ThemeContext from '../ThemeContext';\nimport DropDownComponent from './DropDownComponent';\nimport classNames from 'classnames';\nimport {observer} from 'mobx-react';\n\nconst Toolbar = observer((props) => {\n    const context = useContext(ThemeContext);\n    const mainRef = useRef(null); \n\n    const [activeItem, setActiveItem] = useState(null);\n    const [dropDownOpen, setDropDownOpen] = useState(false);\n    const [dropDownId, setDropDownId] = useState(null);\n    const [dropDownPosition, setDropDownPosition] = useState({top:0,left:0});\n    const [openUp, setOpenUp] = useState(false);\n\n    const handleClickAway = (e) => {\n      if (mainRef.current && !mainRef.current.contains(e.target)) {\n        setActiveItem(null);\n        setDropDownOpen(false);\n      }\n    }\n\n    const handleWheel = (e) => {\n        let offset = (Math.sign(e.deltaY) * 5)\n        mainRef.current.scroll(mainRef.current.scrollLeft + offset, 0);\n            \n        let at_start = mainRef.current.scrollLeft === 0;\n        let at_end = mainRef.current.offsetWidth + mainRef.current.scrollLeft >= mainRef.current.scrollWidth;\n        \n        if(!at_start && !at_end && dropDownOpen) {            \n            setDropDownPosition({\n              top: dropDownPosition.top,\n              left: dropDownPosition.left - offset\n            });\n        }\n    }\n\n    useEffect(()=>{\n        document.addEventListener('click', (e) => handleClickAway(e));\n\n        let bounds = mainRef.current.getBoundingClientRect();\n        setOpenUp(bounds.y > (window.innerHeight - (window.innerHeight / 3)))\n\n        return (document.removeEventListener('click', (e) => handleClickAway(e)));\n    }, []);\n\n    return (\n        <div \n            className={styles.toolbar}\n            ref={mainRef}\n            style = {{\n                ...props.style,\n                backgroundColor: context.secondary_color || 'black',\n                color: context.text_color || 'white',\n            }}\n            onWheel={handleWheel}\n        >\n            {props.items && Object.keys(props.items).map((k,i)=>{\n                let item = props.items[k];\n                return (\n                    <button\n                        key={item.id}\n                        title={item.title}\n                        style={{\n                            ...item.style,\n                            borderColor: context.text_color\n                        }}\n                        className = {\n                          classNames(styles.button, {\n                            [styles.activeButton]: (item === activeItem) || (item.highlight),\n                            // [styles.disableHover]: (item.onClick === undefined) && !item.dropDown\n                            [styles.disableHover]: item.disableHover\n                          })\n                        }\n                        onClick={(e)=>{\n                            if(item.dropDown) {\n                                let toggle = item === activeItem ? !dropDownOpen : true;\n\n                                let parent_bounds = mainRef.current.getBoundingClientRect();\n                                let bounds = e.currentTarget.getBoundingClientRect();\n\n                                let _openUp = bounds.y > (window.innerHeight - (window.innerHeight / 3));\n                                setActiveItem(toggle ? item : null);\n                                setOpenUp(_openUp)\n                                setDropDownOpen(toggle);\n\n                                // this id is important so that the dropdowns to received DERIVED STATE!\n                                setDropDownId(item.id);\n                                setDropDownPosition({\n                                  top: !openUp ? bounds.height : 'auto',\n                                  bottom: openUp ? 0 : 'auto',\n                                  left: bounds.left - parent_bounds.x\n                                });\n                            }\n                            \n                            if(item.onClick) item.onClick();\n                        }}\n                    >\n                        {item.label}   \n                        {item.dropDown && (\n                            <span className={styles.itemDecoration}>\n                                {openUp ? '▲' : '▼'}\n                            </span>\n                        )}                         \n                    </button>\n                )\n            })}\n\n            <div style={{position:'fixed'}}>\n                {props.items[dropDownId] && (<DropDownComponent \n                    open={dropDownOpen}                                    \n                    items={{...props.items[dropDownId].dropDown}}\n                    position={dropDownPosition}\n                    openUp={openUp}\n                />)}\n            </div>\n            \n        </div>  \n    );\n});\n\nexport default Toolbar;","import React, { useState, useRef, useLayoutEffect } from 'react';\nimport DropDownComponent from './DropDownComponent';\nimport {observer} from 'mobx-react';\n\nconst ContextMenu = observer((props) => {\n    const mainRef = useRef(null);\n    let dropRef = useRef(null);\n\n    const [dropDownOpen, setDropDownOpen] = useState(false);\n    const [dropDownPosition, setDropDownPosition] = useState({top:0,left:0});\n    const [dropDownOpenLeft, setDropDownOpenLeft] = useState(false);\n    const [dropDownOpenUp, setDropDownOpenUp] = useState(false);\n\n    const handleClickAway = (e) => {\n        if (mainRef.current && !mainRef.current.contains(e.target)) {\n            setDropDownOpen(false);\n        }\n    }\n\n    const handleClick = (e) => {\n        e.preventDefault();\n\n        // keep open with right click.\n        setDropDownOpen(true);\n\n        // adjust to keep menu in frame\n        let x = e.pageX;\n        let y = e.pageY;\n\n        // 150 is the menu width, this shouldn't be hardcoded\n        // but it's not in bounding box when first clicked\n        if (e.pageX + 150 > window.innerWidth)\n            x -= 150\n        \n        let _openUp = y > (window.innerHeight - (window.innerHeight / 3));\n\n        setDropDownOpenUp(_openUp);\n        setDropDownOpenLeft(e.pageX > window.innerWidth / 2);\n        setDropDownPosition({\n            top: !_openUp ? y : 'auto',\n            bottom: _openUp ? (window.innerHeight - y) : 'auto',            \n            left:x\n        });\n         \n        return false;\n    }\n\n    const handleRef = (e) => {\n        dropRef = e;\n    }\n\n    useLayoutEffect(()=>{\n        document.addEventListener('click', (e) => handleClickAway(e), true);\n        document.addEventListener('contextmenu', (e) => handleClick(e), true);\n\n        return () => {\n            document.removeEventListener('click', (e) => handleClickAway(e), true);\n            document.removeEventListener('contextmenu', (e) => handleClick(e), true);\n        };\n    }, []);\n\n    return (\n        <div ref={mainRef}>\n            {/* <div style={{\n                position: 'absolute',\n                top: dropDownPosition.top,\n                left: dropDownPosition.left,\n                fontSize: '2em',\n                zIndex: 10000\n            }}>\n                ⌖\n            </div> */}\n            <DropDownComponent \n                open={dropDownOpen}                                    \n                items={props.items}\n                position={dropDownPosition}\n                onRef={handleRef}\n                openLeft={dropDownOpenLeft}\n                openUp={dropDownOpenUp}\n            />\n        </div>\n    );\n})\n\nexport default ContextMenu;","import React, { useState, useContext, useRef, useLayoutEffect } from 'react';\nimport styles from './MacoWrapperComponent.module.css';\nimport ThemeContext from '../ThemeContext';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport {observer} from 'mobx-react';\nimport ToolbarComponent from './ToolbarComponent';\nimport ContextMenuComponent from './ContextMenuComponent';\n\nconst MacoWrapper = observer((props) => {\n\tconst store = props.store;\n\n\tconst handleContextMenu = () => {\n\t  // prevents context menu anywhere that hasn't been\n\t  // explicitly allowed\n\t  store.ui.context.setContextmenu(props.contextmenu);\n\t};\n\n\treturn (\n\t\t<div className={styles.wrapper}>\n\t\t\t<ThemeContext.Provider value={store.ui.theme}>\n\t\t\t\t<ToolbarComponent items={props.titlebar} />\n\t\t\t\t<ContextMenuComponent items={store.ui.context.contextmenu} />\n\n\t\t\t\t<div \n\t\t\t\t\tstyle={{\n\t\t\t\t\t\twidth:'100%',\n\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\tbackgroundColor: store.ui.theme.tertiary_color\n\t\t\t\t\t}}\n\t\t\t\t\tonContextMenu={() => handleContextMenu()}\n\t\t\t\t></div>\n\n\t\t\t\t{props.children}\n\t\t\t</ThemeContext.Provider>\n\t\t</div>\n\t);\n});\n\nMacoWrapper.defaultProps = {\n\tcontextmenu: {},\n\ttitlebar: {}\n}\n\nexport default MacoWrapper;","import React, { useState, useContext, useRef, useLayoutEffect } from 'react';\nimport styles from './PanelComponent.module.css';\nimport ThemeContext from '../ThemeContext';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport {observer} from 'mobx-react';\n\nconst Tooltip = observer((props) => {\n\tconst context = useContext(ThemeContext);\n\tconst [show, setShow] = useState(false);\n\tconst [position, setPosition] = useState([0,0,0,0]);\n\n\tconst handleToggle = (e) => {\t\t\n\t\tlet x = e.pageX;\n\t\tlet y = e.pageY;\n\n\t\tif(x > (window.innerWidth-150))\t\n\t\t\tx = e.pageX - 150;\t\t\n\n\t\tif(y > (window.innerHeight-150))\n\t\t\ty = e.pageY - 150;\t\t\n\n\t\tsetPosition([x, y]);\n\t\tsetShow(!show);\n\t}\n\n\treturn (\n\t\t<div \n\t\t\tclassName={styles.tooltip}\t\t\t\n\t\t>\n\t\t\t<div \n\t\t\t\tclassName={styles.tooltip_symbol}\n\t\t\t\tonClick={(e)=>handleToggle(e)}\n\t\t\t>ℹ</div>\n\t\t\t<div \n\t\t\t\tclassName={styles.tooltip_content}\n\t\t\t\tstyle={{\n\t\t\t\t\tbackgroundColor: context.primary_color,\n\t\t\t\t\tborder: `1px solid ${context.outline_color}`,\t\t\t\t\t\n\t\t\t\t\tdisplay: show ? 'block' : 'none',\n\t\t\t\t\tleft: position[0],\n\t\t\t\t\ttop: position[1]\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{props.content}\n\t\t\t</div>\n\t\t</div>\n\t)\n})\n\nconst Panel = observer((props) => {\n\tconst context = useContext(ThemeContext);\n\n\tconst wrapper_element = useRef(null);\n\n\tconst [expanded, setExpanded] \t  = useState(props.expanded);\n\tconst [focused, setFocused] \t  = useState(props.focused);\n\tconst [hover, setHover]\t\t\t  = useState(false);\n\n\tconst handleResize = (e, axis = 'xy') => {\n\n\t\tfunction handleMove(e) {\n\t\t\tif (e.touches) e = e.touches[0]\n\n\t\t\tif (e.pageY) {\n\t\t\t\tconst p_bounds = wrapper_element.current.getBoundingClientRect();\n\n\t\t\t\tconst w = e.pageX - p_bounds.x + 10;\n\t\t\t\tconst h = e.pageY - p_bounds.y + 10;\n\n\t\t\t\tswitch (axis) {\n\t\t\t\t\tcase 'xy':\n\t\t\t\t\t\tprops.onDimensionsChange([w, h]);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'x': \n\t\t\t\t\t\tprops.onDimensionsChange([w, props.dimensions[1]]);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'y':\n\t\t\t\t\t\tprops.onDimensionsChange([props.dimensions[0], h]);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\t\t\t\t\n\t\t\t}\n\t\t}\n\n\t\tfunction handleMoveEnd(e) {\n\t\t\tif (e.touches && e.touches[0]) e = e.touches[0]\n\n\t\t\tif (e.pageY) {\n\t\t\t  const p_bounds = wrapper_element.current.getBoundingClientRect();\n\n\t\t\t  const w = e.pageX - p_bounds.x + 10;\n\t\t\t\tconst h = e.pageY - p_bounds.y + 10;\n\n\t\t\t\tswitch (axis) {\n\t\t\t\t\tcase 'xy':\n\t\t\t\t\t\tprops.onDimensionsChange([w, h]);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'x': \n\t\t\t\t\t\tprops.onDimensionsChange([w, props.dimensions[1]]);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'y':\n\t\t\t\t\t\tprops.onDimensionsChange([props.dimensions[0], h]);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\t\t\t\t\n\t\t\t}\n\n\t\t\tdocument.removeEventListener(\"mousemove\", handleMove);\n\t\t\tdocument.removeEventListener(\"mouseup\", handleMoveEnd);\n\t\t\tdocument.removeEventListener(\"touchmove\", handleMove);\n\t\t\tdocument.removeEventListener(\"touchend\", handleMoveEnd);\n\t\t}\n\n\t\tif (e.touches && e.touches[0]) e = e.touches[0]\n\n\t\tdocument.addEventListener(\"mousemove\", handleMove);\n\t\tdocument.addEventListener(\"mouseup\", handleMoveEnd);\n\t\tdocument.addEventListener(\"touchmove\", handleMove);\n\t\tdocument.addEventListener(\"touchend\", handleMoveEnd);\n\t}\n\n\tconst handleMoveStart = (e) => {\t\n\t\t/*\n\t\t\tthere are issues with drag events in firefox that make\n\t\t\tthe native 'drag' events less useful for this case. my \n\t\t\talternative was to use mouseEvents and create listeners \n\t\t\ton the document\n\t\t*/\n\n\t\tfunction handleMove(e) {\n\t\t  if(e.touches) e = e.touches[0]\n\t\t\t\n\t\t  if (e.pageY) {\n\t\t    const x = e.pageX - dragOff[0];\n\t\t    const y = e.pageY - dragOff[1];\n\n\t\t    // limits to upper left\n\t\t    props.onPositionChange([x >= 0 ? x : 0, y >= 0 ? y : 0])\n\t\t  }\n\t\t}\n\n\t\tfunction handleMoveEnd(e) {\n\t\t  if (e.touches && e.touches[0]) e = e.touches[0]\n\n\t\t  if (e.pageY) {\n\t\t    const x = e.pageX - dragOff[0];\n\t\t    const y = e.pageY - dragOff[1];\n\n\t\t    // limits to upper left\n\t\t    props.onPositionChange([x >= 0 ? x : 0, y >= 0 ? y : 0])\n\t\t  }\n\n\t\t  document.removeEventListener(\"mousemove\", handleMove);\n\t\t  document.removeEventListener(\"mouseup\", handleMoveEnd);\n\t\t  document.removeEventListener(\"touchmove\", handleMove);\n\t\t  document.removeEventListener(\"touchend\", handleMoveEnd);\n\t\t}\n\n\t\t// use first touch event if on mobile device\n\t\tif (e.touches) e = e.touches[0]\n\n\t\tconst p_bounds = wrapper_element.current.getBoundingClientRect();\n\t\tlet offset = { x: p_bounds.left, y: p_bounds.top };\n\n\t\tlet dragOff = [e.pageX - offset.x, e.pageY - offset.y];\n\n\t\tdocument.addEventListener(\"mousemove\", handleMove);\n\t\tdocument.addEventListener(\"mouseup\", handleMoveEnd);\n\t\tdocument.addEventListener(\"touchmove\", handleMove);\n\t\tdocument.addEventListener(\"touchend\", handleMoveEnd);\n\t}\n\n\tconst handleCenter = () => {\n\t\tif(!props.onPositionChange) return\n\t\tconst p_bounds = wrapper_element.current.getBoundingClientRect();\n\n\t\tconst x = (window.innerWidth/2) - (p_bounds.width/2);\n\t\tconst y = (window.innerHeight/2) - (p_bounds.height/2);\n\t\t\n\t\t// limits to upper left\n\t\tprops.onPositionChange([x >= 0 ? x : 0, y >= 0 ? y : 0])\n\t}\n\n\tconst handleFullscreen = () => {\n\t\tif (!props.fullscreen) handleCenter()\n\n\t\tprops.onFullscreen(!props.fullscreen);\n\t\tprops.onFloat(props.fullscreen)\n\t}\n\n\tconst handleFloat = () => {\n\t\tif(props.floating === null) {\n\t\t\t// get current width/height if it hasn't been detached before\n\t\t\tconst p_bounds = wrapper_element.current.getBoundingClientRect();\n\t\t\tif (props.onDimensionsChange) props.onDimensionsChange([p_bounds.width, p_bounds.height]);\n\t\t}\n\n\t\tif (props.onFloat) props.onFloat(!props.floating);\n\t}\n\n\t/*\n\t\tpositions the panel on top when hovered over\n\t*/\n\tconst handleFocus = (e) => {\n\t\tsetHover(true);\n\t\tsetFocused(true);\n\t\tif(props.onFocus) props.onFocus(e);\n\t}\n\n\tconst handleBlur = () => {\n\t\twrapper_element.current.blur();\n\t\tsetHover(false);\n\t\tsetFocused(false);\n\t\tif(props.onBlur) props.onBlur(false);\n\t}\n\t\n\tlet main_styling = {};\n\n\tif(props.floating && !props.fullscreen) {\n\t\tmain_styling = {\n\t\t\twidth: props.dimensions[0],\n\t\t\theight: expanded ? props.dimensions[1] : 'min-content',\n\t\t\tleft: props.position[0],\n\t\t\ttop: props.position[1],\t\t  \n\t\t}\n\t} else if(props.fullscreen) {\n\t\tmain_styling = {\n\t\t  width: '100%',\n\t\t  height: '100%',\n\t\t  left: 0,\n\t\t  top: 0,\n\t\t}\n\t}\n\n\tconst hasTitle = props.showTitle && (props.title || props.onRemove || props.collapsible || props.floating);\n\tconst borderColor = focused ? context.accent_color : context.outline_color;\n\t\n\tlet dblClickTitle = null;\n\n\tif(props.canFullscreen) {\n\t\tdblClickTitle = handleFullscreen;\n\t} else if(props.collapsible) {\n\t\tdblClickTitle = () => setExpanded(!expanded);\n\t} else if(props.canFloat) {\n\t\tdblClickTitle = handleFloat;\n\t}\n\n\t// questionable mix of controlled/uncontrolled\n\tuseLayoutEffect(() => {\n\t\tsetExpanded(props.expanded);\n\t}, [props.expanded])\n\n\treturn (\n\t\t<div \t\n\t\t\tref={wrapper_element}\t\t\t\t\t\t\n\t\t\tclassName={classNames(\n\t\t\t\tstyles.panel, \n\t\t\t\t{ \n\t\t\t\t\t[styles.fullscreen]: props.fullscreen,\n\t\t\t\t\t[styles.floating]: props.floating,\n\t\t\t\t\t[styles.collapsed]: !expanded,\n\t\t\t\t}\n\t\t\t)}\n\t\t\tstyle={{\n\t\t\t\tbackgroundColor: !props.fullscreen ? context.primary_color : 'transparent',\n\t\t\t\tcolor: context.text_color || 'white',\n\t\t\t\tborder: props.border && !props.fullscreen ? '1px solid '+borderColor : 'none',\n\t\t\t\theight: props.collapsible ? 'auto' : '100%',\n\t\t\t\tmargin: props.gutters ? props.gutterSize : 0,\n\t\t\t\tzIndex: hover ? 5 : 2,\n\t\t\t\t...main_styling,\n\t\t\t\t...props.style\n\t\t\t}}\t\t\t\n\t\t\tonFocus={handleFocus}\n\t\t\tonBlur={handleBlur}\n\t\t\tonContextMenu={props.onContextMenu}\n\t\t\tonMouseEnter={props.onMouseEnter}\n\t\t\tonMouseLeave={props.onMouseLeave}\n\t\t\tonMouseOver={props.onMouseOver}\n\t\t\tonMouseOut={props.onMouseOut}\n\t\t\ttabIndex=\"-1\"\n\t\t>\n\t\t\t{ hasTitle && (\n\t\t\t\t<div \n\t\t\t\t\tclassName={styles.title_bar} \n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tbackgroundColor: context.primary_color || 'black',\n\t\t\t\t\t\t...props.titleStyle\n\t\t\t\t\t}}\n\t\t\t\t>\n\n\t\t\t\t\t{props.canFullscreen && (\t\t\t\t\t\t \n\t\t\t\t\t\t<button \n\t\t\t\t\t\t\ttitle=\"fullscreen\"\n\t\t\t\t\t\t\tonClick={handleFullscreen}\n\t\t\t\t\t\t\tstyle={{fontSize:'0.9em'}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t✳\n\t\t\t\t\t\t</button>\t\t\t\t\t\n\t\t\t\t\t)}\n\n\t\t\t\t\t{ props.canRemove && (\n\t\t\t\t\t\t<button \n\t\t\t\t\t\t\ttitle=\"close\" \n\t\t\t\t\t\t\tonClick={props.onRemove}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tx\n\t\t\t\t\t\t</button>\n\t\t\t\t\t) }\n\n\t\t\t\t\t{ props.canFloat && (\n\t\t\t\t\t\t<button \n\t\t\t\t\t\t\ttitle={props.floating ? \"snap\" : \"float\"} \n\t\t\t\t\t\t\tonClick={handleFloat}\n\t\t\t\t\t\t\tstyle={{fontSize:'0.9em'}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t  props.floating ? '◧' : '❏'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t) }\n\n\t\t\t\t\t{ props.collapsible && (\n\t\t\t\t\t\t<button onClick={()=>setExpanded(!expanded)}>\n\t\t\t\t\t\t\t{expanded ? '▾' : '▸'}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t) }\n\n\t\t\t\t\t<div \n\t\t\t\t\t\tclassName={styles.dragContainer}\n\t\t\t\t\t\t\n\t\t\t\t\tonDoubleClick={dblClickTitle}\n\t\t\t\t\tonClick={props.collapsible && !props.canFullscreen ? () => setExpanded(!expanded) : null}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ props.floating && (\n\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\tclassName={styles.moveHandle}\n\t\t\t\t\t\t\t\tonTouchStart={handleMoveStart}\n\t\t\t\t\t\t\t\tonMouseDown={handleMoveStart}\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t<legend> \n\t\t\t\t\t\t\t<strong>{props.title}</strong>\n\t\t\t\t\t\t</legend>\n\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className={styles.subtitle}>{props.subtitle}</div>\n\t\t\t\t\t\n\t\t\t\t\t{props.indicators && (\n\t\t\t\t\t\t<div className={styles.indicators}>\n\t\t\t\t\t\t\t{props.indicators.map((e,i)=>{\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\tclassName={styles.indicator}\n\t\t\t\t\t\t\t\t\t\ttitle={e.title}\n\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\tcolor: context.primary_color,\n\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: e.color\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ e.label }\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</div>\t\t\n\t\t\t\t\t)}\t\n\n\t\t\t\t\t{props.tooltip && (\n\t\t\t\t\t\t<Tooltip content={props.tooltip}/>\t\t\n\t\t\t\t\t)}\t\t\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t                    \n\t\t\t{expanded && props.toolbar}\n\n\t\t\t{expanded && (\t\t\t\n\t\t\t\t<div \n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tborderColor: context.text_color,\n\t\t\t\t\t\tflexBasis: props.fullscreen ? \"0px\" : \"auto\"\n\t\t\t\t\t}} \t\t\t\t\t\n\t\t\t\t\tclassName = {\n\t\t\t\t\t  classNames(\n\t\t\t\t\t    styles.panel_content, {\n\t\t\t\t\t      [styles.horizontal]: props.horizontal,\n\t\t\t\t\t\t  [styles.vertical]: props.vertical\n\t\t\t\t\t    }\n\t\t\t\t\t  )\n\t\t\t\t\t}\n\t\t\t\t\tref={props.onRef}\n\t\t\t\t>\n\t\t\t\t\t{props.children}\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{expanded && props.footbar}\n\n\t\t\t{/* resize handles */}\n\t\t\t{(props.floating && !props.fullscreen && expanded)  && (\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t<div \n\t\t\t\t\t\tclassName={`${styles.resizeHandle} ${styles.resizeSE}`}\n\t\t\t\t\t\tonTouchStart={handleResize}\n\t\t\t\t\t\tonMouseDown={handleResize}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tborderColor: context.text_color,\n\t\t\t\t\t\t}} \n\t\t\t\t\t></div>\n\t\t\t\t\t<div \n\t\t\t\t\t\tclassName={`${styles.resizeHandle} ${styles.resizeE}`}\n\t\t\t\t\t\tonTouchStart={(e) => handleResize(e,'x')}\n\t\t\t\t\t\tonMouseDown={(e) => handleResize(e,'x')}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tborderColor: context.text_color,\n\t\t\t\t\t\t}} \n\t\t\t\t\t></div>\n\t\t\t\t\t<div \n\t\t\t\t\t\tclassName={`${styles.resizeHandle} ${styles.resizeS}`}\n\t\t\t\t\t\tonTouchStart={(e) => handleResize(e,'y')}\n\t\t\t\t\t\tonMouseDown={(e) => handleResize(e,'y')}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tborderColor: context.text_color,\n\t\t\t\t\t\t}} \n\t\t\t\t\t></div>\n\t\t\t\t</React.Fragment>\t\t\t\t\n\t\t\t)}\n\t\t\n\t\t</div>\n\t);\n});\n\nPanel.defaultProps = {\n\tfullscreen: false,\n\texpanded: true,\t\n\tborder: true,\n\tfocused: false,\n\tfloating: false,\n\tposition: [100,100],\n\tdimensions: [100,100],\n\tgutterSize: 5,\n\tshowTitle: true,\n\tonContextMenu: () => {}\n}\n\nPanel.propTypes = {\n\tonRemove: PropTypes.func,\n\tonFocus: PropTypes.func,\n\ttoolbar: PropTypes.object,\n\tchildren: PropTypes.any,\n\tstyle: PropTypes.object,\n\n\ttitleStyle: PropTypes.object,\n\ttitle: PropTypes.oneOfType([\n\t\tPropTypes.string,\n\t\tPropTypes.object\n\t]),\n\tindicators: PropTypes.array,\n\n\t//tooltip: PropTypes.string\n\n\thorizontal: PropTypes.bool,\n\tvertical: PropTypes.bool,\n\n\tcollapsible: PropTypes.bool,\n\tfullscreen: PropTypes.bool,\n\tfloating: PropTypes.bool,\n\t\n\tshowTitle: PropTypes.bool,\n\n\t// adds space around the panel, off by default\n\tgutters: PropTypes.bool,\n\tgutterSize: PropTypes.number,\n\n\tborder: PropTypes.bool,\n\n\tonFocus: PropTypes.func,\n}\n\nexport const GenericPanel = observer(props => (\n  <Panel\n    uuid={props.panel.id}\n\ttitle={props.title ?? props.panel.title}        \n\tsubtitle={props.subtitle ?? props.panel.subtitle}   \n\tcollapsible={props.collapsible ?? props.panel.collapsible} \n\tfullscreen={props.panel.fullscreen} \n\tcanFullscreen={props.panel.canFullscreen}\n\tfloating={props.panel.floating}\n\texpanded={props.expanded}\n\n\tshowTitle={props.showTitle ?? props.panel.showTitle}\n\t\n\tcanFloat={props.panel.canFloat}\n    defaultWidth={props.panel.defaultWidth}\n    defaultHeight={props.panel.defaultWidth}\n    position={props.panel.position}\n    dimensions={props.panel.dimensions}\n\ttoolbar={props.toolbar}\n\tfootbar={props.footbar}\n\tindicators={props.indicators}\n\ttooltip={props.tooltip}\n\n\tonRemove={props.onRemove ?? props.panel.onRemove}\n\tcanRemove={props.canRemove ?? props.panel.canRemove}\n\tstyle={props.style}\n\t\n\tonContextMenu={props.onContextMenu}\n\tonContextMenuCapture={props.onContextMenuCapture}\n\tonFocus={props.onFocus}\n\tonBlur={props.onBlur}\n\tonRef={props.onRef}\n\tonFloat={props.panel.setFloating}\n    onPositionChange={props.panel.setPosition}\n\tonDimensionsChange={props.panel.setDimensions}\n\tonFullscreen={props.panel.setFullscreen}\n  >\n    {props.children}\n  </Panel>\n));\n\nexport default Panel;","import React from 'react';\nimport styles from './TextComponent.module.css';\n\nconst Text = (props) => {\n\treturn(\n\t\t<div className={styles.text} style={props.style}>\n\t\t\t{props.children}\n\t\t</div>\t\n\t)\n}\n\nexport default Text;","import React, { useContext } from 'react';\nimport styles from './ControlGroupComponent.module.css';\nimport ThemeContext from '../ThemeContext';\n\nconst ControlGroup = (props) => {\n    const context = useContext(ThemeContext);\n\n    return (\n        <div className={styles.wrapper}>\n            <fieldset\n                style={{\n                    borderColor: context.outline_color\n                }}\n            >                \n                {props.name && (\n                    <legend\n                        style={{ \n                            padding: '2px 4px',\n                            backgroundColor: context.text_color,\n                            color: context.primary_color\n                        }}\n                    >\n                        <strong>{props.name}</strong>\n                    </legend>  \n                )}\n                                  \n                <div>\n                    {React.Children.map(props.children,(child)=>{\n                        let input_width = 100.0;\n\n                        if(props.children.length) {\n                            input_width = 100.0 / props.children.length;\n                        }\n                        \n                        if (React.isValidElement(child)) {\n                            return React.cloneElement(child, { style: {width:`${input_width}%`} })\n                        }\n\n                        return child;\n                    })}\n                </div>                    \n            </fieldset>  \n        </div>          \n    );\n}\n\nexport default ControlGroup;","import React, { useState, useContext, useRef, useEffect, useLayoutEffect } from 'react';\nimport classNames from 'classnames';\nimport styles from './SplitContainer.module.css';\nimport ThemeContext from '../ThemeContext';\nimport PropTypes from 'prop-types';\n\nclass Split {\n    constructor({\n        id = 0,\n        floating = false,\n        size = 100,\n    }) {\n        this.id = id;\n        this.floating = floating;\n        this.size = size;\n    } \n}\n\nconst SplitContainer = (props) => {\n    const context = useContext(ThemeContext);\n\n    const distributeSplits = () => {\n        let count = props.children.length;\n\n        // make a full length split if there is only one child\n        if(count <= 1) return [\n            new Split({\n                id: 0, \n                floating: false, \n                size: 100\n            })\n        ]; \n        \n        // get all splits with default size values\n        let default_splits = props.children\n            .filter((e) => e.props.defaultSize)\n            .map((e, i) => (\n                new Split({\n                    id: i,\n                    floating: false,\n                    size: e.props.defaultSize * 100.0\n                })\n            ));\n\n        // if defaults are defined, take them into account\n        if(default_splits.length) {\n            let default_sum = default_splits.filter(s => !s.floating).reduce((a, b) => a + b.size, 0);\n\n            // get default split sum\n            return props.children.map((e, i) => (\n                new Split({\n                    id: i,\n                    size: e.props.defaultSize ? \n                        e.props.defaultSize * 100.0 : \n                        (100.0 - default_sum) / (count - 1),      \n                    floating: false\n                })\n            ));\n        } else {\n            return props.children.map((e, i) => (\n              new Split({\n                id: i,\n                floating: false,\n                size: 100.0 / count\n              })\n            ));\n        }\n    }\n\n    const [split, setSplit] = useState(distributeSplits());\n    const [isEmpty, setEmpty] = useState(false);\n\n    const wrapper_element = useRef(null);\n\n    const handleResize = (e,i) => {\n        function handleMove(e) {\n          if (e.pageX) {\n            const p_bounds = wrapper_element.current.getBoundingClientRect();\n\n            let s;\n\n            if (props.vertical) {\n              s = (e.pageY - p_bounds.y) / (p_bounds.height);\n            } else {\n              s = (e.pageX - p_bounds.x) / (p_bounds.width);\n            }\n\n            let split_sum = i > 0 ? split.slice(0, i).filter(s => !s.floating).reduce((a, b) => a + b.size, 0) : 0;\n            split[i].size = s * 100 - (split_sum);\n\n            if (split[i].size > 100) split[i].size = 100;\n            if (split[i].size < 0) split[i].size = 0;\n\n            setSplit([...split]);\n          }\n        }\n\n        function handleMoveEnd(e) {\n          if (e.touches && e.touches[0]) e = e.touches[0]\n\n          if (e.pageX) {\n            const p_bounds = wrapper_element.current.getBoundingClientRect();\n\n            let s;\n\n            if (props.vertical) {\n              s = (e.pageY - p_bounds.y) / (p_bounds.height);\n            } else {\n              s = (e.pageX - p_bounds.x) / (p_bounds.width);\n            }\n\n            let split_sum = i > 0 ? split.slice(0, i).filter(s => !s.floating).reduce((a, b) => a + b.size, 0) : 0;\n            split[i].size = s * 100 - (split_sum);\n\n            if (split[i].size > 100) split[i].size = 100;\n            if (split[i].size < 0) split[i].size = 0;\n\n            setSplit([...split]);\n          }\n\n          document.removeEventListener(\"mousemove\", handleMove);\n          document.removeEventListener(\"mouseup\", handleMoveEnd);\n          document.removeEventListener(\"touchmove\", handleMove);\n          document.removeEventListener(\"touchend\", handleMoveEnd);\n        }\n\n        if (e.touches && e.touches[0]) e = e.touches[0]\n\n        document.addEventListener(\"mousemove\", handleMove);\n        document.addEventListener(\"mouseup\", handleMoveEnd);\n        document.addEventListener(\"touchmove\", handleMove);\n        document.addEventListener(\"touchend\", handleMoveEnd);\n    }\n\n    const handleDetach = (i,detach_bool) => {\n        if(i === split.length) return\n        split[i].floating = detach_bool;\n        setSplit([...split]);\n    }\n\n    useLayoutEffect((e)=>{\n        setSplit(distributeSplits())\n    }, [\n        props.children.length,\n        props.updateFlag\n    ]);\n\n    useEffect((e) => {\n        // if all empty\n        if (!split.filter(s => !s.floating).length && !isEmpty) {\n            setEmpty(true);\n            if (props.onEmpty) props.onEmpty(true)\n        }\n\n        // if empty and a new split has been changed\n        if (isEmpty) {\n          setEmpty(false)\n          if (props.onEmpty) props.onEmpty(false)\n        }\n    }, [split]);\n\n    const wrapper_class = classNames(\n        styles.wrapper, \n        {\n            [styles.vertical]: props.vertical,\n            [styles.horizontal]: !props.vertical,\n            [styles.empty]: isEmpty\n        }\n    );\n\n    return (\n        <div \n            className={wrapper_class}\n            style={{\n                backgroundColor: context.tertiary_color,\n            }}\n            ref={wrapper_element}\n        >\n            {props.children && React.Children.map(props.children, (child,i) => {\n                let isSplit = child.type.name === 'SplitContainer';\n\n                // if there is only one panel, make it full width and height\n                if(props.children.length === 1) return (\n                    <div \n                        style={props.vertical ? {height: '100%'} : {width: '100%'}} \n                        className={classNames({\n                            [styles.split_container]: isSplit,\n                            [styles.panel_container]: !isSplit\n                        })}\n                    >\n                        {child}                        \n                    </div>\n                );\n\n                let has_handle = i < props.children.length - 1;\n                \n                let w;\n                // for all panels up to the last\n                if (i < props.children.length - 1) {\n                    w = split[i] ? split[i].size : 0;\n                    w = split[i].floating ? 0 : w;\n                    if (split[i].floating) has_handle = false;    \n                } else { // sum all splits and get the final panel width\n                    // if last split is floating, remove handle\n                    if(split[i] && split[i].floating) {\n                        has_handle = false\n                        w = 0;                        \n                    } else {\n                        w = 100 - split.slice(0, -1).filter(s => !s.floating).reduce((a, b) => a + b.size, 0);\n                    }                    \n                }\n\n                if (split[i + 1] && split[i + 1].floating && i === split.length - 2) {\n                    w = 100 - split.slice(0,i).filter(s => !s.floating).reduce((a, b) => a + b.size, 0);\n                }\n\n                if (split[i] && !split[i].floating \n                     && split.filter(s => !s.floating).length === 1) {\n                    w = 100;\n                    has_handle = false; \n                }\n\n                /* \n                    attaches hook that watches for float\n                    (hopefully this isn't a performance hit)\n                */\n                if(child.props.detachable) {\n                    child = React.cloneElement(child, {\n                        ...child.props, \n                        onDetach: (b)=>handleDetach(i,b)\n                    })\n                }             \n                \n                /*\n                    if the child is a split, and the split is empty, make it shrink\n                */\n                if(isSplit) {\n                    child = React.cloneElement(child, {\n                        ...child.props, \n                        onEmpty: (b)=>handleDetach(i,b)\n                    })   \n                }\n\n                return (\n                    <React.Fragment>                        \n                        <div \n                            style={props.vertical ? {height: w + '%'} : {width: w + '%'}} \n                            className = {\n                                classNames(styles.panel_content, {\n                                    [styles.split_container]: isSplit,\n                                    [styles.panel_container]: !isSplit,\n                                    [styles.split_floating]: split[i] ? split[i].floating : false\n                                })\n                            }\n                        >\n                            {/* {`w: ${w}`} */}\n                            {child}                        \n                        </div>\n                        {has_handle && (\n                            <div                                 \n                                className = {\n                                    classNames( styles.drag_container, {\n                                        [styles.vertical]: props.vertical,\n                                        [styles.horizontal]: !props.vertical\n                                    })\n                                }\n                            >\n                                <div \n                                    className = {\n                                        classNames(styles.drag_handle_visible, {\n                                            [styles.vertical]: props.vertical,\n                                            [styles.horizontal]: !props.vertical\n                                        })\n                                    }\n                                    style={{\n                                        backgroundColor: context.accent_color,\n                                        borderColor: context.primary_color,\n                                    }}\n                                >\n                                    <div \n                                        className = {\n                                            classNames(styles.drag_handle, {\n                                                [styles.vertical]: props.vertical,\n                                                [styles.horizontal]: !props.vertical\n                                            })\n                                        }\n                                        onTouchStart={(e) => handleResize(e,i)}\n                                        onMouseDown={(e) => handleResize(e,i)}\n                                    ></div>\n                                </div>                                \n                            </div>\n                        )}\n                    </React.Fragment>                    \n                );\n            })}\n\n            {props.children.length === 0  && (\n                <p style={{\n                    alignSelf: 'center',\n                    textAlign: 'center'\n                }}><small>no panel in split!</small></p>\n            )}\n        </div>\n    );\n}\n\nSplitContainer.defaultProps = {\n    updateFlag: false,\n    defaultSize: null\n}\n\nSplitContainer.propTypes = {\n    children: PropTypes.any.isRequired,\n    horizontal: PropTypes.bool,\n    vertical: PropTypes.bool,\n    split: PropTypes.array,\n    updateFlag: PropTypes.bool\n}\n\nexport default SplitContainer;","import React, { useContext, useRef } from 'react';\nimport classNames from 'classnames';\nimport styles from './LayoutContainer.module.css';\nimport ThemeContext from '../ThemeContext';\nimport { observer } from 'mobx-react';\n\nconst LayoutContainer = observer((props) => {\n    const context = useContext(ThemeContext);\n\n    let isVertical = props.layout.direction === 'VERTICAL';\n    \n    let isEmpty = props.layout.isEmpty;\n\n    const wrapper_element = useRef(null);\n\n    const handleResize = (e, layout) => {\n      function handleMove(e) {\n        if (e.touches) e = e.touches[0]\n\n        if (e.pageX) {\n          const bounds = wrapper_element.current.getBoundingClientRect();\n\n          let pos;\n          if (isVertical) {\n            pos = (e.pageY - bounds.y) / (bounds.height);\n          } else {\n            pos = (e.pageX - bounds.x) / (bounds.width);\n          }\n\n          layout.adjust(pos);\n        }\n      }\n\n      function handleMoveEnd(e) {\n        if (e.touches && e.touches[0]) e = e.touches[0]\n\n        if (e.pageX) {\n          const bounds = wrapper_element.current.getBoundingClientRect();\n\n          let pos;\n          if (isVertical) {\n            pos = (e.pageY - bounds.y) / (bounds.height);\n          } else {\n            pos = (e.pageX - bounds.x) / (bounds.width);\n          }\n\n          layout.adjust(pos);\n        }\n\n        document.removeEventListener(\"mousemove\", handleMove);\n        document.removeEventListener(\"mouseup\", handleMoveEnd);\n        document.removeEventListener(\"touchmove\", handleMove);\n        document.removeEventListener(\"touchend\", handleMoveEnd);\n      }\n\n      if (e.touches && e.touches[0]) e = e.touches[0]\n\n      document.addEventListener(\"mousemove\", handleMove);\n      document.addEventListener(\"mouseup\", handleMoveEnd);\n      document.addEventListener(\"touchmove\", handleMove);\n      document.addEventListener(\"touchend\", handleMoveEnd);\n    }\n\n    const handleContextMenu = (e, layout) => {\n        if(props.onContextMenu) props.onContextMenu(e,layout)\n    }\n\n    return (\n        <div \n            ref={wrapper_element}  \n            style={{\n                backgroundColor: context.tertiary_color,\n            }}  \n            className={\n                classNames(styles.wrapper, {\n                    [styles.vertical]: isVertical,\n                    [styles.horizontal]: !isVertical,\n                    [styles.empty]: isEmpty\n                })\n            }\n        >\n            {props.layout.children.map((sibling,i) => {\n                let siblings = props.layout.children;\n                let hasHandle = i < props.layout.children.length - 1;\n                let childIsLayout = sibling.children.length;\n                let size = 0; \n\n                let filterOutFloats = s => !s.panel || (s.panel && !s.panel.floating);\n                let filterOutEmptyLayouts = s => !s.isEmpty;           \n                let empty = sibling.children.length && (sibling.children.filter(filterOutFloats).length === 0);  \n\n                /*\n                    the benefit of applying the size calculations here\n                    is that floating panels will retain their width. \n                */\n                let isFloating = sibling.panel && sibling.panel.floating;\n\n                // for all panels up to the last\n                if (i < siblings.length - 1) {\n                    size = sibling ? sibling.size : 0;                    \n                    \n                    // if the next panel is floating, absorb it\n                    if (siblings[i + 1].panel && siblings[i + 1].panel.floating) {\n                        // while right sibling is floating... TODO: might still need to finish this\n                        // let _i = i;\n                        // while (siblings[_i + 1] && siblings[_i + 1].panel.floating) {\n                        //     size += props.layout.children[_i + 1].size;\n                        //     _i++;\n                        // }\n                        size += props.layout.children[i + 1].size;\n                        // removes handle (and fixes overflow issue)\n                        if(i===siblings.length-2) hasHandle = false;\n                    }\n\n                    if(isFloating) {\n                        hasHandle = false;\n                        size = 0;\n                    }\n                } else {\n                    // sum all splits and get the final panel width\n                    if (isFloating || empty) {\n                        hasHandle = false;\n                        size = 0;\n                    } else {\n                        size = 1 - siblings.slice(0, -1)\n                            .filter(filterOutFloats)\n                            .filter(filterOutEmptyLayouts)\n                            .reduce((a, b) => a + b.size, 0);\n                    }\n                }\n\n                if (i < siblings.length - 1 && siblings[i + 1].floating && i === siblings.length - 2) {\n                    size = 1 - siblings.slice(0, i)\n                        .filter(filterOutFloats)\n                        .filter(filterOutEmptyLayouts)\n                        .reduce((a, b) => a + b.size, 0);\n                }\n\n                if (sibling && !isFloating && !empty &&\n                    siblings\n                        .filter(filterOutFloats).filter(filterOutEmptyLayouts).length === 1) {\n                    size = 1;\n                    hasHandle = false;\n                }\n\n                size *= 100;\n\n                return (\n                    <React.Fragment key={sibling.id}>                        \n                        <div \n                            style={isVertical ? {height: size + '%'} : {width: size + '%'}} \n                            className={\n                                classNames(styles.panel_content, {\n                                    [styles.layout_container]: childIsLayout,\n                                    [styles.panel_container]: !childIsLayout,\n                                    [styles.float_container]: isFloating\n                                })\n                            }\n                        >\n                            {/* <div className={styles.debug}>\n                                {size}\n                            </div> */}\n                            {sibling.children.length ? (\n                                <LayoutContainer layout={sibling}>\n                                    {props.children}\n                                </LayoutContainer>\n                            ) : props.children.filter(child => {\n                                \n                                if(child.props.panel) {\n                                    return child.props.panel.id === sibling.id;\n                                } else {\n                                    return child.props.id === sibling.id;\n                                }\n                            })\n                        }                            \n                        </div>                        \n                        {hasHandle && (\n                            <div               \n                                onContextMenu={handleContextMenu}                                \n                                className = {\n                                    classNames( styles.drag_container, {\n                                        [styles.vertical]: isVertical,\n                                        [styles.horizontal]: !isVertical\n                                    })\n                                }\n                            >\n                                <div \n                                    className = {\n                                        classNames(styles.drag_handle, {\n                                            [styles.vertical]: isVertical,\n                                            [styles.horizontal]: !isVertical\n                                        })\n                                    }\n                                    style={{\n                                        backgroundColor: context.accent_color,\n                                        borderColor: context.primary_color,\n                                    }}\n                                    onTouchStart={(e) => handleResize(e,sibling)}\n                                    onMouseDown={(e) => handleResize(e,sibling)}\n                                >\n                                </div>                                \n                            </div>\n                        )}\n                    </React.Fragment>\n                )\n            })}\n        </div>\n    );\n})\n\nLayoutContainer.defaultProps = {\n    size: 100,\n    order: 0\n}\n\nLayoutContainer.propTypes = {\n\n}\n\nexport default LayoutContainer;\n\n","import React, { useState, useContext } from 'react';\nimport styles from './PagesContainer.module.css';\nimport ThemeContext from '../ThemeContext';\n\nconst Pages = (props) => {\n\tconst [currentPage, setCurrentPage] = useState(0);\n\tconst context = useContext(ThemeContext);\n\n\tconst handlePreviousPage = () => {\n\t\tif (currentPage > 0)\n\t\t\tsetCurrentPage(currentPage-1);\n\t}\n\n\tconst handleNextPage = () => {\n\t\tif(currentPage + 1 < props.children.length)\n\t\t\tsetCurrentPage(currentPage+1);\n\t}\t\n\n\tconst buttonStyle = {\n\t\tbackgroundColor: context.secondary_color,\n\t\tcolor: context.text_color\n\t}\n\t\n\treturn(\n\t\t<div className={styles.wrapper} style={props.style}>\n\t\t\t<div className={styles.pagecontent}>\n\t\t\t\t{props.children[currentPage]}\n\t\t\t</div>\n\t\t\t<div className={styles.pagenav}>\n\t\t\t\t<button style={buttonStyle} onClick={handlePreviousPage}>{'<'}</button>\t\t\t\t\n\t\t\t\t<button style={buttonStyle} onClick={handleNextPage}>{'>'}</button>\t\t\t\t\n\t\t\t\t<span>{`${currentPage+1} of ${props.children.length}`}</span>\n\t\t\t</div>\n\t\t</div>\t\n\t)\n}\n\nexport default Pages;","import React, { useContext } from 'react';\nimport styles from './InputBool.module.css';\nimport ThemeContext from '../../ThemeContext';\nimport {observer} from 'mobx-react';\n\nconst InputBool = observer((props) => {    \n    const context = useContext(ThemeContext);\n    const updateValue = e => props.onChange(e.target.checked, e.target.value);\n\n    return (\n        <div \n            className={styles.wrapper}\n            style={{\n                ...props.style,\n                backgroundColor: props.focused ? context.accent_color : context.secondary_color,\n                flexFlow: props.hLabel && props.label ? 'row' : 'column'\n            }}\n        >\n            {props.label && (\n                <label\n                    style={{\n                        backgroundColor: props.focused ? context.accent_color : context.text_color,\n                        color: context.primary_color\n                    }}\n                >\n                    {props.label}:\n                </label>\n            )}\n            <div\n                className={styles.wrapper_inner}\n            >\n                <input \n                    style={props.style}\n                    type=\"checkbox\"         \n                    value={props.value}\n                    checked={props.checked}\n                    onChange={updateValue}\n                    onContextMenu={props.onContextMenu}\n                />\n            </div>                                                           \n        </div>\n    );\n});\n\nexport default InputBool;","import React, { useContext } from 'react';\nimport styles from './InputFloat.module.css';\nimport ThemeContext from '../../ThemeContext';\nimport {observer} from 'mobx-react';\nimport PropTypes from 'prop-types';\n\nlet position = [0, 0];\nlet base_value = 0;\n\n/*\n    ISSUES:\n\n        should be able to drag input outside of browser window\n        but the solution in js is not immediately obvious\n\n        there is a possible lead here:\n        https://stackoverflow.com/questions/1685326/responding-to-the-onmousemove-event-outside-of-the-browser-window-in-ie\n*/\n\nconst InputFloat = observer((props) => {\n    const context = useContext(ThemeContext);\n\n    const handleChange = e => props.onChange(Number(e.target.value));\n\n    const handleDragStart = e => {\n        let dragging = false;\n\n        function handleDrag(e) {\n            e.preventDefault();\n            dragging = true;\n            /*\n                conditional fixes issue where last frame of\n                drag results in a 'jump' in value, as pageY\n                is 0. \n            */\n            if (e.pageY) {\n                // fine control w shift / large control w ctrl\n                let scalar = e.ctrlKey ? 100 : e.shiftKey ? 20000 : 1000;\n\n                let x_offset = e.pageX - position[0];\n                let y_offset = (position[1] - e.pageY);\n\n                x_offset = Math.min(Math.max(x_offset, 1), 100);\n\n                let output_value = base_value + (y_offset * x_offset / scalar);\n\n                // factor in step size\n                if (props.step) {\n                    output_value /= props.step;\n                    output_value = Math.floor(output_value);\n                    output_value *= props.step;\n                }\n\n                props.onChange(output_value);\n            }\n        }\n\n        function handleDragEnd(e) {\n            if(dragging) {\n                // fine control w shift / large control w ctrl\n                let scalar = e.ctrlKey ? 100 : e.shiftKey ? 20000 : 1000;\n\n                let x_offset = e.pageX - position[0];\n                let y_offset = position[1] - e.pageY;\n\n                x_offset = Math.min(Math.max(x_offset, 1), 100);\n\n                let output_value = base_value + (y_offset * x_offset / scalar);\n\n                // factor in step size\n                if (props.step) {\n                    output_value /= props.step;\n                    output_value = Math.floor(output_value);\n                    output_value *= props.step;\n                }\n\n                props.onChange(output_value);\n            } \n\n            document.removeEventListener(\"mousemove\", handleDrag);\n            document.removeEventListener(\"mouseup\", handleDragEnd);\n            document.removeEventListener(\"touchmove\", handleDrag);\n            document.removeEventListener(\"touchend\", handleDragEnd);\n\n            dragging = false;\n        }\n\n        if (e.touches && e.touches[0]) e = e.touches[0]\n\n        position = [e.pageX, e.pageY];\n        base_value = props.value;\n\n        document.addEventListener(\"mousemove\", handleDrag);\n        document.addEventListener(\"mouseup\", handleDragEnd);\n        document.addEventListener(\"touchmove\", handleDrag);\n        document.addEventListener(\"touchend\", handleDragEnd);\n    }\n\n    const value = parseFloat(props.value).toFixed(2);\n\n    const defaultInputStyle = {\n        backgroundColor: context.secondary_color,\n        color: context.text_color\n    }\n\n    return (\n        <div \n            className={styles.wrapper}\n            style={{\n                ...props.style,\n                backgroundColor: props.focused ? context.accent_color : context.secondary_color,\n            }}\n        >\n            {props.label && (\n                <label\n                    style={{\n                        backgroundColor: props.focused ? context.accent_color : context.text_color,\n                        color: context.primary_color\n                    }}\n                >\n                    {props.label}:\n                </label>\n            )}\n            <div\n                className={styles.wrapper_inner}\n            >\n                <input                 \n                    type=\"number\" \n                    step={props.step}\n                    value={Number(value)}                    \n                    onChange={handleChange} \n                    \n                    onClick={props.onClick}\n                    onTouchStart={handleDragStart}\n\t\t\t\t\tonMouseDown={handleDragStart}\n                    onDoubleClick={props.onDoubleClick}      \n                    onContextMenu={props.onContextMenu}\n\n                    style={{                        \n                        ...defaultInputStyle,\n                        ...props.inputStyle,\n                    }}                  \n                />   \n            </div>                                                           \n        </div>\n    );\n});\n\nInputFloat.defaultProps = {\n    value: 0,\n    step: 0.1,\n    focused: false,\n}\n\nInputFloat.propTypes = {\n    label: PropTypes.string,\n    value: PropTypes.oneOfType([\n        PropTypes.number,\n        PropTypes.string\n    ]),\n    step: PropTypes.number,\n    focused: PropTypes.bool,\n    \n    onChange: PropTypes.func,\n    onDoubleClick: PropTypes.func,\n    inputStyle: PropTypes.object\n}\n\nexport default InputFloat;\n","import React, { useContext } from 'react';\nimport styles from './InputSelect.module.css';\nimport ThemeContext from '../../ThemeContext';\n\nconst InputSelect = (props) => {\n    const context = useContext(ThemeContext);\n\n    const handleChange = e => props.onChange(e.target.value);\n\n    return (\n        <div \n            className={styles.wrapper}\n            style={{\n                ...props.style,\n                backgroundColor: props.focused ? context.accent_color : context.secondary_color,\n            }}\n        >\n            {props.label && (\n                <label\n                    style={{\n                        backgroundColor: props.focused ? context.accent_color : context.text_color,\n                        color: context.primary_color\n                    }}\n                >\n                    {props.label}:\n                </label>\n            )}\n            <div\n                className={styles.wrapper_inner}\n            >\n                <select \n                    onChange={handleChange} \n                    onContextMenu={props.onContextMenu}\n                    style={{\n                        backgroundColor: context.secondary_color,\n                        color: context.text_color,\n                    }}\n                >\n                    {props.options.map((opt,i)=>(\n                        <option key={i} value={opt.value}>\n                            {opt.label}\n                        </option> \n                    ))}                   \n                </select>   \n            </div>                                             \n        </div>\n    );\n}\n\nexport default InputSelect;\n","import React, { useContext, useRef } from 'react';\nimport styles from './InputSlider.module.css';\nimport InputFloat from './InputFloat';\nimport ThemeContext from '../../ThemeContext';\nimport PropTypes from 'prop-types';\n\nlet slider_bounds = null;   \n\nconst InputSlider = (props) => {\n    const context = useContext(ThemeContext);\n\n    const slider_element = useRef(null);\n\n    const handleDragStart = e => {\n        function handleDrag(e) {\n            if (e.touches) e = e.touches[0]\n          /*\n              conditional fixes issue where last frame of\n              drag results in a 'jump' in value, as pageY\n              is 0. \n          */\n          if (e.pageY) {\n            let x = e.pageX + 2;\n            let position = (x - slider_bounds.x) / slider_bounds.width;\n\n            let value = (position * (props.max - props.min)) + props.min;\n\n            if (position <= 0.00) value = props.min\n            if (position >= 1.00) value = props.max\n\n            props.onChange(Math.floor(value / props.step) * props.step)\n          }\n        }\n\n        function handleDragEnd(e) {\n            if (e.touches && e.touches[0]) e = e.touches[0]\n\n            let x = e.pageX + 2;\n            let position = (x - slider_bounds.x) / slider_bounds.width;\n            let value = (position * (props.max - props.min)) + props.min;\n\n            if (position >= 0.00 && position <= 1.0) {\n                props.onChange(Math.floor(value / props.step) * props.step)\n            }\n\n            document.removeEventListener(\"mousemove\", handleDrag);\n            document.removeEventListener(\"mouseup\", handleDragEnd);\n            document.removeEventListener(\"touchmove\", handleDrag);\n            document.removeEventListener(\"touchend\", handleDragEnd);\n        }\n\n        if (e.touches && e.touches[0]) e = e.touches[0]\n\n        slider_bounds = slider_element.current.getBoundingClientRect();\n        let x = e.pageX + 2;\n        let position = (x - slider_bounds.x) / slider_bounds.width;\n\n        let value = (position * (props.max-props.min)) + props.min;\n        console.log([props.min,props.max])\n        console.log('position',position)\n        console.log('value',value)\n\n        if (position >= 0.00 && position <= 1.0) {\n            props.onChange(Math.floor(value / props.step) * props.step) // floor to step\n        }\n\n        document.addEventListener(\"mousemove\", handleDrag);\n        document.addEventListener(\"mouseup\", handleDragEnd);\n        document.addEventListener(\"touchmove\", handleDrag);\n        document.addEventListener(\"touchend\", handleDragEnd);\n    }\n\n    const handleFloatDrag = v => {\n        props.onChange(v)\n    }\n\n    return (\n        <div \n            className={styles.wrapper + ' ' + styles.horizontal}\n            style={props.style}\n            onContextMenu={props.onContextMenu}\n        >\n            <InputFloat \n                value={props.value}\n                onChange={handleFloatDrag}\n                step={props.step || 0.1}\n            />\n            <div \n                ref={slider_element}\t\t\t\n                className={styles.slider_track}    \n                onTouchStart={handleDragStart}\n                onMouseDown={handleDragStart}  \n                style={{\n                    backgroundColor: context.secondary_color\n                }}                        \n            >\n                <div \n                    className={styles.sleeve}\n                    style={{\n                        width: ((props.value-props.min)/(props.max-props.min)*100) + '%',\n                        backgroundColor: context.accent_color\n                    }}\n                >                        \n                </div>\n                <div\n                    className={styles.handle}\n                    style={{\n                        left: ((props.value-props.min)/(props.max-props.min)*100) + '%',\n                        backgroundColor: context.accent_color\n                    }}                    \n                ></div>                        \n            </div>                                               \n        </div>\n    );\n}\n\nInputSlider.propTypes = {\n    min: PropTypes.number,\n    max: PropTypes.number,\n    value: PropTypes.number,\n    style: PropTypes.object,\n}\n\nexport default InputSlider;","import React, { useContext } from 'react';\nimport styles from './InputColor.module.css';\nimport ThemeContext from '../../ThemeContext';\n\nconst InputColor = (props) => {\n    const context = useContext(ThemeContext);\n\n    const handleChange = (e) => props.onChange(e.target.value);\n\n    return (\n        <div \n            className={styles.wrapper}\n            style={{\n                ...props.style,\n                backgroundColor: props.focused ? context.accent_color : context.secondary_color,\n            }}\n        >\n            {props.label && (\n                <label\n                    style={{\n                        backgroundColor: props.focused ? context.accent_color : context.text_color,\n                        color: context.primary_color\n                    }}\n                >\n                    {props.label}:\n                </label>\n            )}\n            <div\n                className={styles.wrapper_inner}\n            >\n            \n                {props.showValue && (\n                    <input \n                        type=\"string\"\n                        className={styles.textInput}\n                        value={props.value}\n                        onChange={handleChange}\n                        style={{\n                            backgroundColor: context.text_color,\n                            color: context.secondary_color\n                        }}\n                    />                     \n                )}   \n\n                    <input \n                        type=\"color\"\n                        value={props.value}\n                        onChange={handleChange}\n                        onContextMenu={props.onContextMenu}\n                        style={{\n                            backgroundColor: context.secondary_color,\n                            color: context.secondary_color                        \n                        }}\n                    /> \n            </div>                                                    \n        </div>\n    );\n}\n\nexport default InputColor;","import { types } from \"mobx-state-tree\";\nimport tinykeys from \"tinykeys\";\nimport { observable } from \"mobx\";\n\nexport const ContextMenuItem = types\n  .model(\"ContextMenuItem\", {\n    id: types.identifier,\n    label: types.frozen(),\n    buttons: types.frozen(),\n    dropDown: types.map(types.late(() => ContextMenuItem))\n  })\n  .volatile(self => ({\n    onClick: () => {}\n  }));\n\nconst Context = types\n  .model(\"Context\", {})\n  .volatile(self => ({\n    contextmenu: {},\n    keylistener: tinykeys(window, {}),\n    keymap: null\n  }))\n  .actions(self => ({\n    setKeymap: keymap => {\n      if (self.keylistener) self.keylistener();\n\n      self.keymap = keymap;\n      self.keylistener = tinykeys(window, self.keymap);\n    },\n    removeKeymap: () => self.keylistener(),\n    setContextmenu: c => {\n      self.contextmenu = c;\n    }\n  }));\n\nexport default Context;","import { types, getParent } from \"mobx-state-tree\";\nimport Layout from './Layout';\n\nconst Panel = types\n    .model(\"Panel\", {\n        id: types.identifier,\n        component_type: \"\",\n        title: types.maybe(types.string),\n        subtitle: types.maybe(types.string),\n        showTitle: true,\n        floating: false,\n        fullscreen: false,\n        canFloat: false,\n        canRemove: false,\n        canFullscreen: false,\n        dimensions: types.array(types.number),\n        position: types.array(types.number),\n        layout: types.maybe(types.late(() => Layout))\n    })\n    .volatile(self => ({\n        parent_layout: null\n    }))\n    .actions(self => ({\n        setLayout: layout => {\n          self.layout = layout;\n        },\n\n        setFloating: f => {\n          self.floating = f;\n        },\n\n        toggleFloating: () => {\n          self.floating = !self.floating;\n        },\n\n        toggleFullscreen: () => {\n          self.fullscreen = !self.fullscreen;\n        },\n\n        setPosition: (p) => {\n          // TEMP: hack to keep away from title, use safe areas instead\n          if (p[1] < 24) p[1] = 24;\n\n          self.position = p;\n\n          // EXPERIMENT: Limit position to max bounds\n          if (p[0] + self.dimensions[0] > window.innerWidth) \n            self.position[0] = window.innerWidth - self.dimensions[0];\n          \n          if (p[1] + self.dimensions[1] > window.innerHeight)\n            self.position[1] = window.innerHeight - self.dimensions[1];\n        },\n\n        setDimensions: (d) => {\n          self.dimensions = d;\n\n          // EXPERIMENT: Limit position to max bounds\n          if (d[0] + self.position[0] > window.innerWidth)\n            self.dimensions[0] = window.innerWidth - self.position[0];\n\n          if (d[1] + self.position[1] > window.innerHeight)\n            self.dimensions[1] = window.innerHeight - self.position[1];\n        },\n\n        setFullscreen: (f) => {\n          self.fullscreen = f;\n        },\n\n        onRemove: () => {\n          self.parent_layout = getParent(self, 2); // ERROR HERE, cant remove\n          self.parent_layout.removePanel(self);\n        },\n\n        center: () => {\n          self.position[0] = window.innerWidth / 2 - self.dimensions[0] / 2;\n          self.position[1] = window.innerHeight / 2 - self.dimensions[1] / 2;\n        },\n\n        fitScreen: () => {\n          if (self.position[0] <= 0) self.position[0] = 0;\n\n          if (self.position[1] <= 0) self.position[1] = 0;\n\n          // if (self.dimensions[0] + self.position[0] >= window.innerWidth)\n          // self.dimensions[0] = window.innerWidth - self.position[0];\n\n          // if (self.dimensions[1] + self.position[1] >= window.innerHeight)\n          // self.dimensions[1] = window.innerHeight - self.position[1];\n        }\n    }))\n\nexport default Panel;","import {\n  types,\n  getParent,\n  getRoot\n} from \"mobx-state-tree\";\nimport Panel from \"./Panel\";\n\nconst Layout = types\n  .model(\"Layout\", {\n    id: types.identifier,\n    title: \"Layout\",\n    size: 0,\n    panel: types.maybe(types.safeReference(Panel)),\n    children: types.array(types.late(() => Layout)),\n    panels: types.maybe(types.map(Panel)),\n    direction: types.optional(\n      types.enumeration([\"VERTICAL\", \"HORIZONTAL\"]),\n      \"HORIZONTAL\"\n    )\n  })\n  .views(self => ({\n    get isEmpty() {\n      let result =\n        self.children.length &&\n        self.children.filter(\n          s => (!s.panel && !s.isEmpty) || (s.panel && !s.panel.floating)\n        ).length === 0;\n      return result;\n    }\n  }))\n  .volatile(self => ({\n    siblings: null,\n    rootStore: null\n  }))\n  .actions(self => ({\n\n    afterAttach: () => {\n      self.siblings = getParent(self);\n      self.rootStore = getRoot(self);\n    },\n\n    adjust: (size) => {\n      let self_index = self.siblings.indexOf(self);\n\n      let adjusted_size = size;\n\n      let sum =\n        self_index > 0 ?\n        self.siblings\n        .slice(0, self_index)\n        .filter(s => !s.floating)\n        .reduce((a, b) => a + b.size, 0) :\n        0;\n\n      adjusted_size = size - sum;\n\n      if (adjusted_size > 100) adjusted_size = 100;\n      if (adjusted_size < 0) adjusted_size = 0;\n\n      self.setSize(adjusted_size);\n    },\n\n    distributeChildren: () => {\n      self.children.forEach((e, i) => {\n        console.log(i, (i + 1) / self.children.length);\n        e.setSize(1 / self.children.length);\n      });\n    },\n\n    setSize: (size) => {\n      self.size = size;\n    },\n\n    addPanel: (panel) => {\n      // if panel is a string, look it up from list of defaults\n      if (typeof panel === \"string\" && self.rootStore.panelVariants[panel]) {\n        panel = self.rootStore.panelVariants[panel];\n      }\n\n      let layout = Layout.create({\n        id: panel.id,\n        panel: panel.id,\n        size: 1 / self.children.length\n      });\n\n      self.panels.put(panel);\n      self.children.push(layout);\n\n      //       console.log(\"self\", self);\n\n      //       self.distributeChildren();\n    },\n\n    removePanel: (panel) => {\n      if (self.panels) self.panels.delete(panel);\n      if (self.children) {\n        self.children = self.children.filter(e => e.panel !== panel);\n\n        self.children.forEach(e => {\n          e.removePanel(panel);\n        });\n\n        // console.log(\"SELF\", getSnapshot(self));\n\n        // TODO: if all panels are gone, remove this layout\n        // if(!self.children.length) {\n        //     console.log(getParent(self,1))\n        //     let parent = getParent(self, 1);\n        //     parent.children.filter(e => e !== self)\n        // }\n      }\n    },\n\n    clear: () => {\n      if (self.panels && self.children) {\n        self.panels.clear();\n        self.children = [];\n      }\n    },\n\n    // removeLayout: (layout) => {\n    //     if(self.children) self.children.filter(e => e !== layout);\n    // }\n\n  }))\n\nexport default Layout;\n","import { types } from \"mobx-state-tree\";\nimport Context from \"./Context\";\n\nimport Panel from \"./Panel\";\nimport Theme from \"./Theme\";\n\nconst UI = types\n    .model('UI', {\n        panels: types.map(Panel),\n        theme: Theme,\n        context: types.maybe(Context)\n    })\n    .volatile(self => ({\n        panelVariants: null,\n        layoutVariants: null\n    }))\n    .actions(self => ({\n        afterAttach: () => {\n            self.context = Context.create()\n        },\n\n        setPanelVariants: panels => {\n            self.panelVariants = panels;\n        },\n\n        setLayoutVariants: layouts => {\n            self.layoutVariants = layouts;\n        },\n\n        getPanelVariant: id => {\n            return self.panelVariants[id];\n        },\n\n        getLayoutVariant: id => {\n            if (self.layoutVariants[id]) {\n                return self.layoutVariants[id]\n            }else{\n                if(self.panelVariants) {\n                    console.error(`variant (${id}) could not be found. should be one of the following: (${Object.keys(self.panelVariants)})`)\n                } else {\n                    console.error(`no variants found!`)\n                }\n                    \n            }\n                \n            return;\n        },\n\n        getPanel: id => {\n            return self.panels.get(id);\n        }\n    }))\n\nexport default UI;","import _MacoWrapperComponent from './components/MacoWrapperComponent';\n\nimport _PanelComponent from './components/PanelComponent';\nimport { GenericPanel as _GenericPanel} from './components/PanelComponent';\nimport _TextComponent from './components/TextComponent';\nimport _ToolbarComponent from './components/ToolbarComponent';\nimport _ContextMenuComponent from './components/ContextMenuComponent';\nimport _ControlGroupComponent from './components/ControlGroupComponent';\nimport _SplitContainer from './components/SplitContainer';\nimport _LayoutContainer from './components/LayoutContainer';\nimport _PagesContainer from './components/PagesContainer';\n\nimport _InputBool from './components/input/InputBool';\nimport _InputFloat from './components/input/InputFloat';\nimport _InputSelect from './components/input/InputSelect';\nimport _InputSlider from './components/input/InputSlider';\nimport _InputColor from './components/input/InputColor';\n\nimport _ThemeContext from './ThemeContext';\n\n// STORES\nimport _ContextStore from './stores/Context';\nimport _LayoutStore from './stores/Layout';\nimport _PanelStore from './stores/Panel';\nimport _ThemeStore, { themes } from './stores/Theme';\nimport _UIStore from './stores/UI';\n\nexport let MacoWrapperComponent = _MacoWrapperComponent;\n\nexport let TextComponent = _TextComponent;\nexport let PanelComponent = _PanelComponent;\nexport let GenericPanel = _GenericPanel;\nexport let ToolbarComponent = _ToolbarComponent;\nexport let ContextMenuComponent = _ContextMenuComponent;\nexport let ControlGroupComponent = _ControlGroupComponent;\nexport let SplitContainer = _SplitContainer;\nexport let LayoutContainer = _LayoutContainer;\nexport let PagesContainer = _PagesContainer;\n\nexport let InputBool = _InputBool;\nexport let InputFloat = _InputFloat;\nexport let InputSelect = _InputSelect;\nexport let InputSlider = _InputSlider;\nexport let InputColor = _InputColor;\n\nexport let ThemeContext = _ThemeContext;\nexport let ThemeStore = _ThemeStore;\nexport let Themes = themes;\n\n// STORES\nexport let ContextStore = _ContextStore;\nexport let LayoutStore = _LayoutStore;\nexport let PanelStore = _PanelStore;\nexport let UIStore = _UIStore; // main store output\n"],"names":["themes","primary_color","secondary_color","tertiary_color","text_color","outline_color","accent_color","Theme","types","model","weyland","actions","self","setTheme","theme","setPrimaryColor","color","setSecondaryColor","setTertiaryColor","setTextColor","setOutlineColor","setAccentColor","ThemeContext","createContext","style","drawer","width","top","left","DropDown","observer","props","context","useContext","mainRef","useRef","activeItem","setActiveItem","useState","subDropDownOpen","setSubDropDownOpen","subDropDownId","setSubDropDownId","subDropDownPosition","setSubDropDownPosition","handleSubDropDown","e","index","item","onClick","toggle","bounds","currentTarget","getBoundingClientRect","id","openUp","height","bottom","openLeft","handleClickAway","current","contains","target","handleRef","onRef","handleContextMenu","useLayoutEffect","document","addEventListener","removeEventListener","open","position","classNames","styles","backgroundColor","items","Object","keys","map","k","i","dropDown","subDropDown","activeButton","label","disableHover","display","title","buttons","b","border","borderTop","borderBottom","borderLeftStyle","borderRightStyle","flexShrink","padding","defaultProps","propTypes","Toolbar","dropDownOpen","setDropDownOpen","dropDownId","setDropDownId","dropDownPosition","setDropDownPosition","setOpenUp","handleWheel","offset","Math","sign","deltaY","scroll","scrollLeft","at_start","at_end","offsetWidth","scrollWidth","useEffect","y","window","innerHeight","toolbar","borderColor","button","highlight","parent_bounds","_openUp","x","itemDecoration","DropDownComponent","ContextMenu","dropRef","dropDownOpenLeft","setDropDownOpenLeft","dropDownOpenUp","setDropDownOpenUp","handleClick","preventDefault","pageX","pageY","innerWidth","MacoWrapper","store","ui","setContextmenu","contextmenu","wrapper","ToolbarComponent","titlebar","ContextMenuComponent","children","Tooltip","show","setShow","setPosition","handleToggle","tooltip","tooltip_symbol","tooltip_content","content","Panel","wrapper_element","expanded","setExpanded","focused","setFocused","hover","setHover","handleResize","axis","handleMove","touches","p_bounds","w","h","onDimensionsChange","dimensions","handleMoveEnd","handleMoveStart","dragOff","onPositionChange","handleCenter","handleFullscreen","fullscreen","onFullscreen","onFloat","handleFloat","floating","handleFocus","onFocus","handleBlur","blur","onBlur","main_styling","hasTitle","showTitle","onRemove","collapsible","dblClickTitle","canFullscreen","canFloat","panel","collapsed","margin","gutters","gutterSize","zIndex","onContextMenu","onMouseEnter","onMouseLeave","onMouseOver","onMouseOut","title_bar","titleStyle","fontSize","canRemove","dragContainer","moveHandle","subtitle","indicators","indicator","flexBasis","panel_content","horizontal","vertical","footbar","resizeHandle","resizeSE","resizeE","resizeS","PropTypes","func","object","any","oneOfType","string","array","bool","number","GenericPanel","defaultWidth","onContextMenuCapture","setFloating","setDimensions","setFullscreen","Text","text","ControlGroup","name","React","Children","child","input_width","length","isValidElement","cloneElement","Split","constructor","size","SplitContainer","distributeSplits","count","default_splits","filter","defaultSize","default_sum","s","reduce","a","split","setSplit","isEmpty","setEmpty","split_sum","slice","handleDetach","detach_bool","updateFlag","onEmpty","wrapper_class","empty","isSplit","type","split_container","panel_container","has_handle","detachable","onDetach","split_floating","drag_container","drag_handle_visible","drag_handle","alignSelf","textAlign","isRequired","LayoutContainer","isVertical","layout","direction","pos","adjust","sibling","siblings","hasHandle","childIsLayout","filterOutFloats","filterOutEmptyLayouts","isFloating","layout_container","float_container","order","Pages","currentPage","setCurrentPage","handlePreviousPage","handleNextPage","buttonStyle","pagecontent","pagenav","InputBool","updateValue","onChange","checked","value","flexFlow","hLabel","wrapper_inner","base_value","InputFloat","handleChange","Number","handleDragStart","dragging","handleDrag","scalar","ctrlKey","shiftKey","x_offset","y_offset","min","max","output_value","step","floor","handleDragEnd","parseFloat","toFixed","defaultInputStyle","onDoubleClick","inputStyle","InputSelect","options","opt","slider_bounds","InputSlider","slider_element","console","log","handleFloatDrag","v","slider_track","sleeve","handle","InputColor","showValue","textInput","ContextMenuItem","identifier","frozen","late","volatile","Context","keylistener","tinykeys","keymap","setKeymap","removeKeymap","c","component_type","maybe","Layout","parent_layout","setLayout","f","toggleFloating","toggleFullscreen","p","d","getParent","removePanel","center","fitScreen","safeReference","panels","optional","enumeration","views","result","rootStore","afterAttach","getRoot","self_index","indexOf","adjusted_size","sum","setSize","distributeChildren","forEach","addPanel","panelVariants","create","put","push","delete","clear","UI","layoutVariants","setPanelVariants","setLayoutVariants","layouts","getPanelVariant","getLayoutVariant","error","getPanel","get","MacoWrapperComponent","_MacoWrapperComponent","TextComponent","_TextComponent","PanelComponent","_PanelComponent","_GenericPanel","_ToolbarComponent","_ContextMenuComponent","ControlGroupComponent","_ControlGroupComponent","_SplitContainer","_LayoutContainer","PagesContainer","_PagesContainer","_InputBool","_InputFloat","_InputSelect","_InputSlider","_InputColor","_ThemeContext","ThemeStore","_ThemeStore","Themes","ContextStore","_ContextStore","LayoutStore","_LayoutStore","PanelStore","_PanelStore","UIStore","_UIStore"],"mappings":"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"}