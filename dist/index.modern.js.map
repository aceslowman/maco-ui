{"version":3,"file":"index.modern.js","sources":["../src/UIContext.js","../src/components/DropDownComponent.js","../src/components/ToolbarComponent.js","../src/components/ContextMenuComponent.js","../src/components/MacoWrapperComponent.js","../src/components/PanelComponent.js","../src/components/TextComponent.js","../src/components/ControlGroupComponent.js","../src/components/hooks/ResizeHook.js","../src/components/SplitContainer.js","../src/components/LayoutContainer.js","../src/components/PagesContainer.js","../src/components/input/InputBool.js","../src/components/input/InputFloat.js","../src/components/input/InputSelect.js","../src/components/input/InputSlider.js","../src/components/input/InputColor.js","../src/stores/Context.js","../src/stores/Panel.js","../src/stores/Layout.js","../src/stores/Theme.js","../src/stores/UI.js","../src/index.js"],"sourcesContent":["import React from 'react'\r\n\r\nconst UIContext = React.createContext({})\r\n\r\nexport const UIProvider = UIContext.Provider\r\nexport const UIConsumer = UIContext.Consumer\r\nexport default UIContext","import React, { useState, useContext, useRef, useLayoutEffect } from 'react'\nimport UIContext from '../UIContext'\nimport styles from './DropDownComponent.module.css'\nimport classNames from 'classnames'\nimport { observer } from 'mobx-react'\n\nlet style = {\n  drawer: {\n    width: '0px',\n    top: '0px',\n    left: '0px'\n  }\n}\n\nconst DropDown = observer((props) => {\n  const context = useContext(UIContext).theme\n  const mainRef = useRef(null)\n\n  const [activeItem, setActiveItem] = useState(null)\n  const [subDropDownOpen, setSubDropDownOpen] = useState(false)\n  const [subDropDownId, setSubDropDownId] = useState(null)\n  const [subDropDownPosition, setSubDropDownPosition] = useState({\n    top: 0,\n    left: 0\n  })\n\n  const handleSubDropDown = (e, index, item) => {\n    if (item.onClick) item.onClick()\n    const toggle = index === activeItem ? !subDropDownOpen : true\n\n    const bounds = e.currentTarget.getBoundingClientRect()\n\n    setActiveItem(toggle ? index : false)\n    setSubDropDownId(item.id)\n    setSubDropDownOpen(toggle)\n    setSubDropDownPosition({\n      top: !props.openUp ? -bounds.height : 'auto',\n      bottom: props.openUp ? 0 : 'auto',\n      left: props.openLeft ? -bounds.width : bounds.width\n    })\n  }\n\n  const handleClickAway = (e) => {\n    if (mainRef.current && !mainRef.current.contains(e.target)) {\n      setActiveItem(null)\n      setSubDropDownOpen(false)\n    }\n  }\n\n  function handleRef(e) {\n    mainRef.current = e\n    if (props.onRef) props.onRef(mainRef)\n  }\n\n  function handleContextMenu(e) {\n    setSubDropDownOpen(false)\n  }\n\n  useLayoutEffect(() => {\n    document.addEventListener('click', (e) => handleClickAway(e))\n    document.addEventListener('contextmenu', (e) => handleContextMenu(e))\n\n    return () => {\n      document.removeEventListener('click', (e) => handleClickAway(e))\n      document.addEventListener('contextmenu', (e) => handleContextMenu(e))\n    }\n  }, [])\n\n  style = {\n    ...style,\n    drawer: {\n      width: props.open ? '150px' : '0px',\n      ...props.position\n    }\n  }\n\n  return (\n    <div\n      className={classNames(styles.drawer, {\n        //   [styles.openLeft]: props.openLeft,\n        //   [styles.openUp]: props.openUp,\n      })}\n      ref={(e) => handleRef(e)}\n      style={{\n        ...style.drawer,\n        backgroundColor: context.secondary_color,\n        color: context.text_color\n      }}\n    >\n      {props.items &&\n        Object.keys(props.items).map((k, i) => {\n          const item = props.items[k]\n\n          // if there is a subdropdown\n          if (item.dropDown) {\n            return (\n              <div\n                key={item.id}\n                className={styles.subDropDown}\n                style={{\n                  ...style.drawer,\n                  backgroundColor: context.secondary_color,\n                  color: context.text_color\n                }}\n              >\n                <button\n                  key={'sub' + item.id}\n                  onClick={(e) => handleSubDropDown(e, i, item)}\n                  className={classNames({\n                    [styles.activeButton]: item.active ?? i === activeItem,\n                    [styles.openLeft]: props.openLeft,\n                    [styles.openUp]: props.openUp\n                  })}\n                >\n                  {item.label}\n                  <span>{props.openLeft ? '<' : '>'}</span>\n                </button>\n\n                {/* \n                                this extra div helps ensure nested \n                                dropdowns are visible through hidden\n                                overflow\n                             */}\n                {i === activeItem && subDropDownId && (\n                  <div key={item.id} style={{ position: 'fixed' }}>\n                    <DropDown\n                      key={item.id + 'dd'}\n                      open={props.open && subDropDownOpen}\n                      items={{ ...props.items[subDropDownId].dropDown }}\n                      position={subDropDownPosition}\n                      openLeft={props.openLeft}\n                      openUp={props.openUp}\n                    />\n                  </div>\n                )}\n              </div>\n            )\n          } else {\n            return (\n              <div\n                key={item.id}\n                className={classNames({\n                  [styles.activeButton]: item.active ?? i === activeItem,\n                  [styles.disableHover]: item.disableHover,\n                  [styles.openLeft]: props.openLeft,\n                  [styles.openUp]: props.openUp\n                })}\n                style={{\n                  display: 'flex',\n                  width: '100%'\n                }}\n              >\n                <button\n                  key={'normal' + item.id}\n                  title={item.title}\n                  onClick={item.onClick}\n                >\n                  {item.label}\n                </button>\n                {item.buttons &&\n                  Object.keys(item.buttons).map((k) => {\n                    const b = item.buttons[k]\n                    return (\n                      <button\n                        key={'button' + b.id}\n                        onClick={b.onClick}\n                        title={b.title}\n                        style={{\n                          border: `1px solid ${context.outline_color}`,\n                          borderTop: 'none',\n                          borderBottom: 'none',\n                          borderLeftStyle: !props.openLeft ? 'solid' : 'none',\n                          borderRightStyle: props.openLeft ? 'solid' : 'none',\n                          flexShrink: 10,\n                          padding: 3\n                        }}\n                      >\n                        <small>{b.label}</small>\n                      </button>\n                    )\n                  })}\n              </div>\n            )\n          }\n        })}\n    </div>\n  )\n})\n\nDropDown.defaultProps = {\n  openLeft: false,\n  openUp: false\n}\n\nDropDown.propTypes = {}\n\nexport default DropDown\n","import React, { useState, useContext, useRef, useEffect } from 'react'\nimport styles from './ToolbarComponent.module.css'\nimport UIContext from '../UIContext'\nimport DropDownComponent from './DropDownComponent'\nimport classNames from 'classnames'\nimport { observer } from 'mobx-react'\n\nconst Toolbar = observer((props) => {\n  const context = useContext(UIContext).theme\n  const mainRef = useRef(null)\n\n  const [activeItem, setActiveItem] = useState(null)\n  const [dropDownOpen, setDropDownOpen] = useState(false)\n  const [dropDownId, setDropDownId] = useState(null)\n  const [dropDownPosition, setDropDownPosition] = useState({ top: 0, left: 0 })\n  const [openUp, setOpenUp] = useState(false)\n\n  const handleClickAway = (e) => {\n    if (mainRef.current && !mainRef.current.contains(e.target)) {\n      setActiveItem(null)\n      setDropDownOpen(false)\n    }\n  }\n\n  const handleWheel = (e) => {\n    let offset = Math.sign(e.deltaY) * 5\n    mainRef.current.scroll(mainRef.current.scrollLeft + offset, 0)\n\n    let at_start = mainRef.current.scrollLeft === 0\n    let at_end =\n      mainRef.current.offsetWidth + mainRef.current.scrollLeft >=\n      mainRef.current.scrollWidth\n\n    if (!at_start && !at_end && dropDownOpen) {\n      setDropDownPosition({\n        top: dropDownPosition.top,\n        left: dropDownPosition.left - offset\n      })\n    }\n  }\n\n  useEffect(() => {\n    document.addEventListener('click', (e) => handleClickAway(e))\n\n    let bounds = mainRef.current.getBoundingClientRect()\n    setOpenUp(bounds.y > window.innerHeight - window.innerHeight / 3)\n\n    return document.removeEventListener('click', (e) => handleClickAway(e))\n  }, [])\n\n  return (\n    <div\n      className={styles.toolbar}\n      ref={mainRef}\n      style={{\n        ...props.style,\n        backgroundColor: context.secondary_color || 'black',\n        color: context.text_color || 'white'\n      }}\n      onWheel={handleWheel}\n    >\n      {props.items &&\n        Object.keys(props.items).map((k, i) => {\n          let item = props.items[k]\n          return (\n            <button\n              key={item.id}\n              title={item.title}\n              style={{\n                ...item.style,\n                borderColor: context.text_color\n              }}\n              className={classNames(styles.button, {\n                [styles.activeButton]: item === activeItem || item.highlight,\n                // [styles.disableHover]: (item.onClick === undefined) && !item.dropDown\n                [styles.disableHover]: item.disableHover\n              })}\n              onClick={(e) => {\n                if (item.dropDown) {\n                  let toggle = item === activeItem ? !dropDownOpen : true\n\n                  let parent_bounds = mainRef.current.getBoundingClientRect()\n                  let bounds = e.currentTarget.getBoundingClientRect()\n\n                  let _openUp =\n                    bounds.y > window.innerHeight - window.innerHeight / 3\n                  setActiveItem(toggle ? item : null)\n                  setOpenUp(_openUp)\n                  setDropDownOpen(toggle)\n\n                  // this id is important so that the dropdowns to received DERIVED STATE!\n                  setDropDownId(item.id)\n                  setDropDownPosition({\n                    top: !openUp ? bounds.height : 'auto',\n                    bottom: openUp ? 0 : 'auto',\n                    left: bounds.left - parent_bounds.x\n                  })\n                }\n\n                if (item.onClick) item.onClick()\n              }}\n            >\n              {item.label}\n              {item.dropDown && (\n                <span className={styles.itemDecoration}>\n                  {openUp ? '▲' : '▼'}\n                </span>\n              )}\n            </button>\n          )\n        })}\n\n      <div style={{ position: 'fixed' }}>\n        {props.items[dropDownId] && (\n          <DropDownComponent\n            open={dropDownOpen}\n            items={{ ...props.items[dropDownId].dropDown }}\n            position={dropDownPosition}\n            openUp={openUp}\n          />\n        )}\n      </div>\n    </div>\n  )\n})\n\nexport default Toolbar\n","import React, { useState, useRef, useLayoutEffect } from 'react'\nimport DropDownComponent from './DropDownComponent'\nimport { observer } from 'mobx-react'\n\nconst ContextMenu = observer((props) => {\n  const mainRef = useRef(null)\n  let dropRef = useRef(null)\n\n  const [dropDownOpen, setDropDownOpen] = useState(false)\n  const [dropDownPosition, setDropDownPosition] = useState({ top: 0, left: 0 })\n  const [dropDownOpenLeft, setDropDownOpenLeft] = useState(false)\n  const [dropDownOpenUp, setDropDownOpenUp] = useState(false)\n\n  const handleClickAway = (e) => {\n    if (mainRef.current && !mainRef.current.contains(e.target)) {\n      setDropDownOpen(false)\n    }\n  }\n\n  const handleClick = (e) => {\n    e.preventDefault()\n\n    // keep open with right click.\n    setDropDownOpen(true)\n\n    // adjust to keep menu in frame\n    let x = e.pageX\n    let y = e.pageY\n\n    // 150 is the menu width, this shouldn't be hardcoded\n    // but it's not in bounding box when first clicked\n    if (e.pageX + 150 > window.innerWidth) x -= 150\n\n    let _openUp = y > window.innerHeight - window.innerHeight / 3\n\n    setDropDownOpenUp(_openUp)\n    setDropDownOpenLeft(e.pageX > window.innerWidth / 2)\n    setDropDownPosition({\n      top: !_openUp ? y : 'auto',\n      bottom: _openUp ? window.innerHeight - y : 'auto',\n      left: x\n    })\n\n    return false\n  }\n\n  const handleRef = (e) => {\n    dropRef = e\n  }\n\n  useLayoutEffect(() => {\n    document.addEventListener('click', (e) => handleClickAway(e), true)\n    document.addEventListener('contextmenu', (e) => handleClick(e), true)\n\n    return () => {\n      document.removeEventListener('click', (e) => handleClickAway(e), true)\n      document.removeEventListener('contextmenu', (e) => handleClick(e), true)\n    }\n  }, [])\n\n  return (\n    <div ref={mainRef}>\n      {/* <div style={{\n                position: 'absolute',\n                top: dropDownPosition.top,\n                left: dropDownPosition.left,\n                fontSize: '2em',\n                zIndex: 10000\n            }}>\n                ⌖\n            </div> */}\n      <DropDownComponent\n        open={dropDownOpen}\n        items={props.items}\n        position={dropDownPosition}\n        onRef={handleRef}\n        openLeft={dropDownOpenLeft}\n        openUp={dropDownOpenUp}\n      />\n    </div>\n  )\n})\n\nexport default ContextMenu\n","import React from 'react'\nimport styles from './MacoWrapperComponent.module.css'\nimport { observer } from 'mobx-react'\nimport ToolbarComponent from './ToolbarComponent'\nimport ContextMenuComponent from './ContextMenuComponent'\nimport UIContext from '../UIContext'\n\nconst MacoWrapper = observer((props) => {\n  const store = props.store\n\n  const handleContextMenu = () => {\n    // prevents context menu anywhere that hasn't been\n    // explicitly allowed\n    store.ui.context.setContextmenu(props.contextmenu)\n  }\n\n  return (\n    <div className={styles.wrapper}>\n      <UIContext.Provider value={store.ui}>\n        <ToolbarComponent items={props.titlebar} />\n        <ContextMenuComponent items={store.ui.context.contextmenu} />\n\n        <div\n          className={props.className}\n          style={{\n            width: '100%',\n            height: '100%',\n            position: 'absolute',\n            backgroundColor: store.ui.theme.tertiary_color,\n            ...props.style\n          }}\n          onContextMenu={() => handleContextMenu()}\n        />\n\n        {props.children}\n      </UIContext.Provider>\n    </div>\n  )\n})\n\nMacoWrapper.defaultProps = {\n  contextmenu: {},\n  titlebar: {}\n}\n\nexport default MacoWrapper\n","import React, { useState, useContext, useRef, useLayoutEffect } from 'react'\nimport styles from './PanelComponent.module.css'\nimport UIContext from '../UIContext'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport { observer } from 'mobx-react'\n\nconst Tooltip = observer((props) => {\n  const context = useContext(UIContext).theme\n  const [show, setShow] = useState(false)\n  const [position, setPosition] = useState([0, 0, 0, 0])\n\n  const handleToggle = (e) => {\n    let x = e.pageX\n    let y = e.pageY\n\n    if (x > window.innerWidth - 150) x = e.pageX - 150\n\n    if (y > window.innerHeight - 150) y = e.pageY - 150\n\n    setPosition([x, y])\n    setShow(!show)\n  }\n\n  return (\n    <div className={styles.tooltip}>\n      <div className={styles.tooltip_symbol} onClick={(e) => handleToggle(e)}>\n        ℹ\n      </div>\n      <div\n        className={styles.tooltip_content}\n        style={{\n          backgroundColor: context.primary_color,\n          border: `1px solid ${context.outline_color}`,\n          display: show ? 'block' : 'none',\n          left: position[0],\n          top: position[1]\n        }}\n      >\n        {props.content}\n      </div>\n    </div>\n  )\n})\n\nconst Panel = observer((props) => {\n  const context = useContext(UIContext).theme\n  const ui = useContext(UIContext)\n\n  const wrapperElement = useRef(null)\n\n  const [expanded, setExpanded] = useState(props.expanded)\n  const [focused, setFocused] = useState(props.focused)\n\n  const handleResize = (e, direction = 'xy') => {\n    let dragging = true\n\n    const pBounds = wrapperElement.current.getBoundingClientRect()\n    const initialDimensions = [pBounds.width, pBounds.height]\n    const initialPosition = [pBounds.x, pBounds.y]\n\n    const handleMove = (e) => {\n      if (e.touches) e = e.touches[0]\n\n      if (e.pageY && dragging) {\n        const pBounds = wrapperElement.current.getBoundingClientRect()\n\n        let w, h\n        let x, y\n\n        switch (direction) {\n          case 'se':\n            w = e.pageX - pBounds.x\n            h = e.pageY - pBounds.y\n            props.onDimensionsChange([w, h])\n            break\n          case 'e':\n            w = e.pageX - pBounds.x\n            h = props.dimensions[1]\n            props.onDimensionsChange([w, h])\n            break\n          case 's':\n            w = props.dimensions[0]\n            h = e.pageY - pBounds.y\n            props.onDimensionsChange([w, h])\n            break\n          case 'sw':\n            w = initialDimensions[0] + (initialPosition[0] - e.pageX)\n            h = e.pageY - pBounds.y\n            x = e.pageX\n            y = pBounds.y\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          case 'w':\n            w = initialDimensions[0] + (initialPosition[0] - e.pageX)\n            h = props.dimensions[1]\n            x = e.pageX\n            y = pBounds.y\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          case 'n':\n            w = props.dimensions[0]\n            h = initialDimensions[1] + (initialPosition[1] - e.pageY)\n            x = pBounds.x\n            y = e.pageY\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          case 'nw':\n            w = initialDimensions[0] + (initialPosition[0] - e.pageX)\n            h = initialDimensions[1] + (initialPosition[1] - e.pageY)\n            x = e.pageX\n            y = e.pageY\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          case 'ne':\n            w = e.pageX - pBounds.x\n            h = initialDimensions[1] + (initialPosition[1] - e.pageY)\n            x = pBounds.x\n            y = e.pageY\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          default:\n            break\n        }\n      }\n    }\n\n    const handleMoveEnd = (e) => {\n      dragging = false\n      if (e.touches && e.touches[0]) e = e.touches[0]\n\n      if (e.pageY) {\n        const pBounds = wrapperElement.current.getBoundingClientRect()\n\n        let w, h\n        let x, y\n\n        switch (direction) {\n          case 'se':\n            w = e.pageX - pBounds.x\n            h = e.pageY - pBounds.y\n            props.onDimensionsChange([w, h])\n            break\n          case 'e':\n            w = e.pageX - pBounds.x\n            h = props.dimensions[1]\n            props.onDimensionsChange([w, h])\n            break\n          case 's':\n            w = props.dimensions[0]\n            h = e.pageY - pBounds.y\n            props.onDimensionsChange([w, h])\n            break\n          case 'sw':\n            w = initialDimensions[0] + (initialPosition[0] - e.pageX)\n            h = e.pageY - pBounds.y\n            x = e.pageX\n            y = pBounds.y\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          case 'w':\n            w = initialDimensions[0] + (initialPosition[0] - e.pageX)\n            h = props.dimensions[1]\n            x = e.pageX\n            y = pBounds.y\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          case 'n':\n            w = props.dimensions[0]\n            h = initialDimensions[1] + (initialPosition[1] - e.pageY)\n            x = pBounds.x\n            y = e.pageY\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          case 'nw':\n            w = initialDimensions[0] + (initialPosition[0] - e.pageX)\n            h = initialDimensions[1] + (initialPosition[1] - e.pageY)\n            x = e.pageX\n            y = e.pageY\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          case 'ne':\n            w = e.pageX - pBounds.x\n            h = initialDimensions[1] + (initialPosition[1] - e.pageY)\n            x = pBounds.x\n            y = e.pageY\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          default:\n            break\n        }\n      }\n\n      document.removeEventListener('mousemove', handleMove)\n      document.removeEventListener('mouseup', handleMoveEnd)\n      document.removeEventListener('touchmove', handleMove)\n      document.removeEventListener('touchend', handleMoveEnd)\n    }\n\n    if (e.touches && e.touches[0]) e = e.touches[0]\n\n    document.addEventListener('mousemove', handleMove)\n    document.addEventListener('mouseup', handleMoveEnd)\n    document.addEventListener('touchmove', handleMove)\n    document.addEventListener('touchend', handleMoveEnd)\n  }\n\n  const handleMoveStart = (e) => {\n    /*\n\t\t\tthere are issues with drag events in firefox that make\n\t\t\tthe native 'drag' events less useful for this case. my \n\t\t\talternative was to use mouseEvents and create listeners \n\t\t\ton the document\n\t\t*/\n\n    function handleMove(e) {\n      if (e.touches) e = e.touches[0]\n\n      if (e.pageY) {\n        const x = e.pageX - dragOff[0]\n        const y = e.pageY - dragOff[1]\n\n        // limits to upper left\n        props.onPositionChange([x >= 0 ? x : 0, y >= 0 ? y : 0])\n      }\n    }\n\n    function handleMoveEnd(e) {\n      if (e.touches && e.touches[0]) e = e.touches[0]\n\n      if (e.pageY) {\n        const x = e.pageX - dragOff[0]\n        const y = e.pageY - dragOff[1]\n\n        // limits to upper left\n        props.onPositionChange([x >= 0 ? x : 0, y >= 0 ? y : 0])\n      }\n\n      document.removeEventListener('mousemove', handleMove)\n      document.removeEventListener('mouseup', handleMoveEnd)\n      document.removeEventListener('touchmove', handleMove)\n      document.removeEventListener('touchend', handleMoveEnd)\n    }\n\n    // use first touch event if on mobile device\n    if (e.touches) e = e.touches[0]\n\n    const pBounds = wrapperElement.current.getBoundingClientRect()\n    const offset = { x: pBounds.left, y: pBounds.top }\n\n    const dragOff = [e.pageX - offset.x, e.pageY - offset.y]\n\n    document.addEventListener('mousemove', handleMove)\n    document.addEventListener('mouseup', handleMoveEnd)\n    document.addEventListener('touchmove', handleMove)\n    document.addEventListener('touchend', handleMoveEnd)\n  }\n\n  const handleCenter = () => {\n    if (!props.onPositionChange) return\n    const pBounds = wrapperElement.current.getBoundingClientRect()\n\n    const x = window.innerWidth / 2 - pBounds.width / 2\n    const y = window.innerHeight / 2 - pBounds.height / 2\n\n    // limits to upper left\n    props.onPositionChange([x >= 0 ? x : 0, y >= 0 ? y : 0])\n  }\n\n  const handleFullscreen = () => {\n    if (!props.fullscreen) handleCenter()\n\n    props.onFullscreen(!props.fullscreen)\n    props.onFloat(props.fullscreen)\n  }\n\n  const handleFloat = () => {\n    if (props.floating === null) {\n      // get current width/height if it hasn't been detached before\n      const pBounds = wrapperElement.current.getBoundingClientRect()\n      if (props.onDimensionsChange)\n        props.onDimensionsChange([pBounds.width, pBounds.height])\n    }\n\n    if (props.onFloat) props.onFloat(!props.floating)\n  }\n\n  /*\n\t\tpositions the panel on top when hovered over\n\n    TODO \n    it's still not possible for parent elements to display\n    overtop the child element\n\n    if the parent element is currently focused, make this element \n    temporarily parentElement.zIndex - 1\n\t*/\n  const handleFocus = (e) => {\n    // this prevents the child and parent elements from focusing at once\n    e.stopPropagation()\n    // console.log('props', props)\n    // console.log('focusing', wrapperElement.current)\n    setFocused(true)\n    if (props.onFocus) props.onFocus(e)\n  }\n\n  const handleBlur = () => {\n    wrapperElement.current.blur()\n    setFocused(false)\n    if (props.onBlur) props.onBlur(false)\n  }\n\n  let mainStyling = {}\n\n  if (props.floating && !props.fullscreen) {\n    mainStyling = {\n      width: props.dimensions[0],\n      height: expanded ? props.dimensions[1] : 'min-content',\n      left: props.position[0],\n      top: props.position[1]\n    }\n  } else if (props.fullscreen) {\n    mainStyling = {\n      width: '100%',\n      height: '100%',\n      left: 0,\n      top: 0\n    }\n  }\n\n  const hasTitle =\n    props.showTitle &&\n    (props.title || props.onRemove || props.collapsible || props.floating)\n  const borderColor = focused ? context.accent_color : context.outline_color\n\n  // let dblClickTitle = null\n\n  // if (props.canFullscreen) {\n  //   dblClickTitle = handleFullscreen\n  // } else if (props.collapsible) {\n  //   dblClickTitle = () => setExpanded(!expanded)\n  // } else if (props.canFloat) {\n  //   dblClickTitle = handleFloat\n  // }\n\n  // questionable mix of controlled/uncontrolled\n  useLayoutEffect(() => {\n    setExpanded(props.expanded)\n  }, [props.expanded])\n\n  return (\n    <div\n      ref={wrapperElement}\n      className={classNames(styles.panel, {\n        [styles.fullscreen]: props.fullscreen,\n        [styles.floating]: props.floating,\n        [styles.collapsed]: !expanded\n      })}\n      style={{\n        backgroundColor: !props.fullscreen\n          ? context.primary_color\n          : 'transparent',\n        color: context.text_color || 'white',\n        border:\n          props.border && !props.fullscreen\n            ? '1px solid ' + borderColor\n            : 'none',\n        height: props.collapsible ? 'auto' : '100%',\n        margin: props.gutters ? props.gutterSize : 0,\n        /* TODO if the outside layout is currently focused,\n        then make the zIndex = -1 */\n        // zIndex: focused ? 5 : 2,\n        zIndex: focused ? 5 : 2,\n        ...mainStyling,\n        ...props.style\n      }}\n      onFocus={handleFocus}\n      onBlur={handleBlur}\n      onContextMenu={props.onContextMenu}\n      onMouseEnter={props.onMouseEnter}\n      onMouseLeave={props.onMouseLeave}\n      onMouseOver={props.onMouseOver}\n      onMouseOut={props.onMouseOut}\n      tabIndex='-1'\n    >\n      {hasTitle && (\n        <div\n          className={styles.title_bar}\n          style={{\n            backgroundColor: context.primary_color || 'black',\n            ...props.titleStyle\n          }}\n        >\n          {props.canFullscreen && (\n            <button\n              title='fullscreen'\n              onClick={handleFullscreen}\n              style={{ fontSize: '0.9em' }}\n            >\n              ✳\n            </button>\n          )}\n\n          {props.canRemove && (\n            <button title='close' onClick={props.onRemove}>\n              x\n            </button>\n          )}\n\n          {props.canFloat && (\n            <button\n              title={props.floating ? 'snap' : 'float'}\n              onClick={handleFloat}\n              style={{ fontSize: '0.9em' }}\n            >\n              {props.floating ? '◧' : '❏'}\n            </button>\n          )}\n\n          {props.collapsible && (\n            <button onClick={() => setExpanded(!expanded)}>\n              {expanded ? '▾' : '▸'}\n            </button>\n          )}\n\n          <div\n            className={styles.dragContainer}\n            // NOTE: double click temporarily disabled\n            // because it gets in the way of panel select\n            // onDoubleClick={dblClickTitle}\n            onClick={\n              props.collapsible && !props.canFullscreen\n                ? () => setExpanded(!expanded)\n                : null\n            }\n          >\n            {props.floating && (\n              <div\n                className={styles.moveHandle}\n                onTouchStart={handleMoveStart}\n                onMouseDown={handleMoveStart}\n              />\n            )}\n\n            {props.onPanelSelect !== undefined ? (\n              <select\n                title='select the panel to display'\n                className={styles.panelSelect}\n                onChange={props.onPanelSelect}\n                defaultValue={props.uuid}\n              >\n                {Object.values(ui.panelVariants).map((e) => (\n                  <option key={e.id} value={e.id}>\n                    {e.title}\n                  </option>\n                ))}\n              </select>\n            ) : (\n              <legend>\n                <strong>{props.title}</strong>\n              </legend>\n            )}\n          </div>\n\n          <div className={styles.subtitle}>{props.subtitle}</div>\n\n          {props.indicators && (\n            <div className={styles.indicators}>\n              {props.indicators.map((e, i) => {\n                return (\n                  <div\n                    key={i}\n                    className={styles.indicator}\n                    title={e.title}\n                    style={{\n                      color: context.primary_color,\n                      backgroundColor: e.color\n                    }}\n                  >\n                    {e.label}\n                  </div>\n                )\n              })}\n            </div>\n          )}\n\n          {props.tooltip && <Tooltip content={props.tooltip} />}\n        </div>\n      )}\n\n      {expanded && props.toolbar}\n\n      {expanded && (\n        <div\n          style={{\n            borderColor: context.text_color,\n            flexBasis: props.fullscreen ? '0px' : 'auto'\n          }}\n          className={classNames(styles.panel_content, {\n            [styles.horizontal]: props.horizontal,\n            [styles.vertical]: props.vertical\n          })}\n          ref={props.onRef}\n        >\n          {props.children}\n        </div>\n      )}\n\n      {expanded && props.footbar}\n\n      {/* resize handles */}\n      {props.floating && !props.fullscreen && expanded && (\n        <React.Fragment>\n          <div\n            className={`${styles.resizeHandle} ${styles.resizeSE}`}\n            onTouchStart={(e) => handleResize(e, 'se')}\n            onMouseDown={(e) => handleResize(e, 'se')}\n            style={{\n              borderColor: context.text_color\n            }}\n          />\n          <div\n            className={`${styles.resizeHandle} ${styles.resizeE}`}\n            onTouchStart={(e) => handleResize(e, 'e')}\n            onMouseDown={(e) => handleResize(e, 'e')}\n            style={{\n              borderColor: context.text_color\n            }}\n          />\n          <div\n            className={`${styles.resizeHandle} ${styles.resizeS}`}\n            onTouchStart={(e) => handleResize(e, 's')}\n            onMouseDown={(e) => handleResize(e, 's')}\n            style={{\n              borderColor: context.text_color\n            }}\n          />\n          <div\n            className={`${styles.resizeHandle} ${styles.resizeSW}`}\n            onTouchStart={(e) => handleResize(e, 'sw')}\n            onMouseDown={(e) => handleResize(e, 'sw')}\n            style={{\n              borderColor: context.text_color\n            }}\n          />\n          <div\n            className={`${styles.resizeHandle} ${styles.resizeW}`}\n            onTouchStart={(e) => handleResize(e, 'w')}\n            onMouseDown={(e) => handleResize(e, 'w')}\n            style={{\n              borderColor: context.text_color\n            }}\n          />\n          <div\n            className={`${styles.resizeHandle} ${styles.resizeN}`}\n            onTouchStart={(e) => handleResize(e, 'n')}\n            onMouseDown={(e) => handleResize(e, 'n')}\n            style={{\n              borderColor: context.text_color\n            }}\n          />\n          <div\n            className={`${styles.resizeHandle} ${styles.resizeNE}`}\n            onTouchStart={(e) => handleResize(e, 'ne')}\n            onMouseDown={(e) => handleResize(e, 'ne')}\n            style={{\n              borderColor: context.text_color\n            }}\n          />\n          <div\n            className={`${styles.resizeHandle} ${styles.resizeNW}`}\n            onTouchStart={(e) => handleResize(e, 'nw')}\n            onMouseDown={(e) => handleResize(e, 'nw')}\n            style={{\n              borderColor: context.text_color\n            }}\n          />\n        </React.Fragment>\n      )}\n    </div>\n  )\n})\n\nPanel.defaultProps = {\n  fullscreen: false,\n  expanded: true,\n  border: true,\n  focused: false,\n  floating: false,\n  position: [100, 100],\n  dimensions: [100, 100],\n  gutterSize: 5,\n  showTitle: true,\n  onContextMenu: () => {}\n}\n\nPanel.propTypes = {\n  onRemove: PropTypes.func,\n  onFocus: PropTypes.func,\n  toolbar: PropTypes.object,\n  children: PropTypes.any,\n  style: PropTypes.object,\n  titleStyle: PropTypes.object,\n  title: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  indicators: PropTypes.array,\n  horizontal: PropTypes.bool,\n  vertical: PropTypes.bool,\n  collapsible: PropTypes.bool,\n  fullscreen: PropTypes.bool,\n  floating: PropTypes.bool,\n  showTitle: PropTypes.bool,\n  // adds space around the panel, off by default\n  gutters: PropTypes.bool,\n  gutterSize: PropTypes.number,\n  border: PropTypes.bool\n}\n\nexport const GenericPanel = observer((props) => (\n  <Panel\n    uuid={props.panel.id}\n    title={props.title ?? props.panel.title}\n    subtitle={props.subtitle ?? props.panel.subtitle}\n    collapsible={props.collapsible ?? props.panel.collapsible}\n    fullscreen={props.panel.fullscreen}\n    canFullscreen={props.panel.canFullscreen}\n    floating={props.panel.floating}\n    expanded={props.expanded}\n    showTitle={props.showTitle ?? props.panel.showTitle}\n    canFloat={props.panel.canFloat}\n    defaultWidth={props.panel.defaultWidth}\n    defaultHeight={props.panel.defaultWidth}\n    position={props.panel.position}\n    dimensions={props.panel.dimensions}\n    toolbar={props.toolbar}\n    footbar={props.footbar}\n    indicators={props.indicators}\n    tooltip={props.tooltip}\n    onRemove={props.onRemove ?? props.panel.onRemove}\n    canRemove={props.canRemove ?? props.panel.canRemove}\n    style={props.style}\n    onContextMenu={props.onContextMenu}\n    onContextMenuCapture={props.onContextMenuCapture}\n    onFocus={props.onFocus}\n    onBlur={props.onBlur}\n    onRef={props.onRef}\n    onFloat={props.panel.setFloating}\n    onPositionChange={props.panel.setPosition}\n    onDimensionsChange={props.panel.setDimensions}\n    onFullscreen={props.panel.setFullscreen}\n    onPanelSelect={props.onPanelSelect}\n  >\n    {props.children}\n  </Panel>\n))\n\nexport default Panel\n","import React from 'react'\nimport styles from './TextComponent.module.css'\n\nconst Text = (props) => {\n  return (\n    <div className={styles.text} style={props.style}>\n      {props.children}\n    </div>\n  )\n}\n\nexport default Text\n","import React, { useContext } from 'react'\nimport styles from './ControlGroupComponent.module.css'\nimport UIContext from '../UIContext'\n\nconst ControlGroup = (props) => {\n  const context = useContext(UIContext).theme\n\n  return (\n    <div className={styles.wrapper}>\n      <fieldset\n        style={{\n          borderColor: context.outline_color\n        }}\n      >\n        {props.name && (\n          <legend\n            style={{\n              padding: '2px 4px',\n              backgroundColor: context.text_color,\n              color: context.primary_color\n            }}\n          >\n            <strong>{props.name}</strong>\n          </legend>\n        )}\n\n        <div>\n          {React.Children.map(props.children, (child) => {\n            let inputWidth = 100.0\n\n            if (props.children.length) {\n              inputWidth = 100.0 / props.children.length\n            }\n\n            if (React.isValidElement(child)) {\n              return React.cloneElement(child, {\n                style: { width: `${inputWidth}%` }\n              })\n            }\n\n            return child\n          })}\n        </div>\n      </fieldset>\n    </div>\n  )\n}\n\nexport default ControlGroup\n","import { useLayoutEffect, useRef } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport ResizeObserver from 'resize-observer-polyfill'\r\n\r\nconst useObserver = (callback, element, dependencies = []) => {\r\n  const observer = useRef(null)\r\n  \r\n  useLayoutEffect(() => {\r\n    const observe = () => {\r\n      if (element && element.current && observer.current) {\r\n        observer.current.observe(element.current)\r\n      }\r\n    }\r\n\r\n    const current = element.current\r\n\r\n    // if we are already observing old element\r\n    if (observer && observer.current && current) {\r\n      observer.current.unobserve(current)\r\n    }\r\n    const resizeObserverOrPolyfill = ResizeObserver\r\n\r\n    observer.current = new resizeObserverOrPolyfill(callback)\r\n    observe()\r\n\r\n    return () => {\r\n      if (observer && observer.current && current) {\r\n        observer.current.unobserve(current)\r\n      }\r\n    }\r\n  }, [callback, element, observer, ...dependencies])\r\n}\r\n\r\nuseObserver.propTypes = {\r\n  element: PropTypes.object,\r\n  callback: PropTypes.func\r\n  //   dependencies\r\n}\r\n\r\nexport default useObserver\r\n","import React, {\n  useState,\n  useContext,\n  useRef,\n  useEffect,\n  useLayoutEffect\n} from 'react'\nimport useResizeObserver from './hooks/ResizeHook'\nimport classNames from 'classnames'\nimport styles from './SplitContainer.module.css'\nimport UIContext from '../UIContext'\nimport PropTypes from 'prop-types'\n\nclass Split {\n  constructor({ id = 0, floating = false, size = 100 }) {\n    this.id = id\n    this.floating = floating\n    this.size = size\n  }\n}\n\nconst SplitContainer = (props) => {\n  const context = useContext(UIContext).theme\n\n  const distributeSplits = () => {\n    const count = props.children.length\n\n    // make a full length split if there is only one child\n    if (count <= 1)\n      return [\n        new Split({\n          id: 0,\n          floating: false,\n          size: 100\n        })\n      ]\n\n    // get all splits with default size values\n    const defaultSplits = props.children\n      .filter((e) => e.props.defaultsize)\n      .map(\n        (e, i) =>\n          new Split({\n            id: i,\n            floating: false,\n            size: e.props.defaultsize * 100.0\n          })\n      )\n\n    // if defaults are defined, take them into account\n    if (defaultSplits.length) {\n      const defaultSum = defaultSplits\n        .filter((s) => !s.floating)\n        .reduce((a, b) => a + b.size, 0)\n\n      // get default split sum\n      return props.children.map(\n        (e, i) =>\n          new Split({\n            id: i,\n            size: e.props.defaultsize\n              ? e.props.defaultsize * 100.0\n              : (100.0 - defaultSum) / (count - 1),\n            floating: false\n          })\n      )\n    } else {\n      return props.children.map(\n        (e, i) =>\n          new Split({\n            id: i,\n            floating: false,\n            size: 100.0 / count\n          })\n      )\n    }\n  }\n\n  const [split, setSplit] = useState(distributeSplits())\n  const [isEmpty, setEmpty] = useState(false)\n\n  const wrapperElement = useRef(null)\n\n  // if the split is set to auto, decide whether or not its vertical based on\n  // wrapper dimensions / aspect ratio\n  const [isVertical, setIsVertical] = useState(\n    props.vertical || !props.horizontal\n  )\n\n  const handleContainerResize = (e) => {\n    if (props.auto) {\n      const bounds = wrapperElement.current.getBoundingClientRect()\n      setIsVertical(bounds.width < bounds.height)\n    }\n  }\n\n  // TO DO this causes way too many redraws!\n  useResizeObserver(handleContainerResize, wrapperElement, [\n    props.auto,\n    isVertical\n  ])\n\n  const handlePanelResize = (e, i) => {\n    function handleMove(e) {\n      if (e.pageX) {\n        const pBounds = wrapperElement.current.getBoundingClientRect()\n\n        let s\n\n        if (isVertical) {\n          s = (e.pageY - pBounds.y) / pBounds.height\n        } else {\n          s = (e.pageX - pBounds.x) / pBounds.width\n        }\n\n        const splitSum =\n          i > 0\n            ? split\n                .slice(0, i)\n                .filter((s) => !s.floating)\n                .reduce((a, b) => a + b.size, 0)\n            : 0\n        split[i].size = s * 100 - splitSum\n\n        if (split[i].size > 100) split[i].size = 100\n        if (split[i].size < 0) split[i].size = 0\n\n        setSplit([...split])\n      }\n    }\n\n    function handleMoveEnd(e) {\n      if (e.touches && e.touches[0]) e = e.touches[0]\n\n      if (e.pageX) {\n        const pBounds = wrapperElement.current.getBoundingClientRect()\n\n        let s\n\n        if (isVertical) {\n          s = (e.pageY - pBounds.y) / pBounds.height\n        } else {\n          s = (e.pageX - pBounds.x) / pBounds.width\n        }\n\n        const splitSum =\n          i > 0\n            ? split\n                .slice(0, i)\n                .filter((s) => !s.floating)\n                .reduce((a, b) => a + b.size, 0)\n            : 0\n        split[i].size = s * 100 - splitSum\n\n        if (split[i].size > 100) split[i].size = 100\n        if (split[i].size < 0) split[i].size = 0\n\n        setSplit([...split])\n      }\n\n      document.removeEventListener('mousemove', handleMove)\n      document.removeEventListener('mouseup', handleMoveEnd)\n      document.removeEventListener('touchmove', handleMove)\n      document.removeEventListener('touchend', handleMoveEnd)\n    }\n\n    if (e.touches && e.touches[0]) e = e.touches[0]\n\n    document.addEventListener('mousemove', handleMove)\n    document.addEventListener('mouseup', handleMoveEnd)\n    document.addEventListener('touchmove', handleMove)\n    document.addEventListener('touchend', handleMoveEnd)\n  }\n\n  const handleDetach = (i, detachBool) => {\n    if (i === split.length) return\n    split[i].floating = detachBool\n    setSplit([...split])\n  }\n\n  useLayoutEffect(\n    (e) => {\n      setSplit(distributeSplits())\n    },\n    [props.children.length, props.updateFlag]\n  )\n\n  useEffect(\n    (e) => {\n      // if all empty\n      if (!split.filter((s) => !s.floating).length && !isEmpty) {\n        setEmpty(true)\n        if (props.onEmpty) props.onEmpty(true)\n      }\n\n      // if empty and a new split has been changed\n      if (isEmpty) {\n        setEmpty(false)\n        if (props.onEmpty) props.onEmpty(false)\n      }\n    },\n    [split]\n  )\n\n  const wrapperClass = classNames(styles.wrapper, {\n    [styles.vertical]: isVertical,\n    [styles.horizontal]: !isVertical,\n    [styles.empty]: isEmpty\n  })\n\n  return (\n    <div\n      className={wrapperClass}\n      ref={wrapperElement}\n      style={{\n        backgroundColor: context.tertiary_color\n      }}\n    >\n      {props.children &&\n        React.Children.map(props.children, (child, i) => {\n          const isSplit = child.type.name === 'SplitContainer'\n\n          // if there is only one panel, make it full width and height\n          if (props.children.length === 1)\n            return (\n              <div\n                style={isVertical ? { height: '100%' } : { width: '100%' }}\n                className={classNames({\n                  [styles.split_container]: isSplit,\n                  [styles.panel_container]: !isSplit\n                })}\n              >\n                {child}\n              </div>\n            )\n\n          let hasHandle = i < props.children.length - 1\n\n          let w\n          // for all panels up to the last\n          if (i < props.children.length - 1) {\n            w = split[i] ? split[i].size : 0\n            w = split[i].floating ? 0 : w\n            if (split[i].floating) hasHandle = false\n          } else {\n            // sum all splits and get the final panel width\n            // if last split is floating, remove handle\n            if (split[i] && split[i].floating) {\n              hasHandle = false\n              w = 0\n            } else {\n              w =\n                100 -\n                split\n                  .slice(0, -1)\n                  .filter((s) => !s.floating)\n                  .reduce((a, b) => a + b.size, 0)\n            }\n          }\n\n          if (split[i + 1] && split[i + 1].floating && i === split.length - 2) {\n            w =\n              100 -\n              split\n                .slice(0, i)\n                .filter((s) => !s.floating)\n                .reduce((a, b) => a + b.size, 0)\n          }\n\n          if (\n            split[i] &&\n            !split[i].floating &&\n            split.filter((s) => !s.floating).length === 1\n          ) {\n            w = 100\n            hasHandle = false\n          }\n\n          /* \n            attaches hook that watches for float\n            (hopefully this isn't a performance hit)\n          */\n          if (child.props.detachable) {\n            child = React.cloneElement(child, {\n              ...child.props,\n              onDetach: (b) => handleDetach(i, b)\n            })\n          }\n\n          /*\n            if the child is a split, and the split is empty, make it shrink\n          */\n          if (isSplit) {\n            child = React.cloneElement(child, {\n              ...child.props,\n              onEmpty: (b) => handleDetach(i, b)\n            })\n          }\n\n          return (\n            <React.Fragment>\n              <div\n                style={isVertical ? { height: w + '%' } : { width: w + '%' }}\n                className={classNames(styles.panel_content, {\n                  [styles.split_container]: isSplit,\n                  [styles.panel_container]: !isSplit,\n                  [styles.split_floating]: split[i] ? split[i].floating : false\n                })}\n              >\n                {/* {`w: ${w}`} */}\n                {child}\n              </div>\n              {hasHandle && (\n                <div\n                  className={classNames(styles.drag_container, {\n                    [styles.vertical]: isVertical,\n                    [styles.horizontal]: !isVertical\n                  })}\n                >\n                  <div\n                    className={classNames(styles.drag_handle_visible, {\n                      [styles.vertical]: isVertical,\n                      [styles.horizontal]: !isVertical\n                    })}\n                    style={{\n                      // backgroundColor: context.accent_color,\n                      borderColor: context.accent_color\n                    }}\n                    onTouchStart={(e) => handlePanelResize(e, i)}\n                    onMouseDown={(e) => handlePanelResize(e, i)}\n                  >\n                    <div\n                      className={classNames(styles.drag_handle, {\n                        [styles.vertical]: isVertical,\n                        [styles.horizontal]: !isVertical\n                      })}\n                      style={{\n                        // backgroundColor: context.accent_color,\n                        borderColor: context.outline_color\n                      }}\n                    />\n                  </div>\n                </div>\n              )}\n            </React.Fragment>\n          )\n        })}\n\n      {props.children.length === 0 && (\n        <p\n          style={{\n            alignSelf: 'center',\n            textAlign: 'center'\n          }}\n        >\n          <small>no panel in split!</small>\n        </p>\n      )}\n    </div>\n  )\n}\n\nSplitContainer.defaultProps = {\n  updateFlag: false\n}\n\n// the children can have a defaultsize prop\n\nSplitContainer.propTypes = {\n  children: PropTypes.any.isRequired,\n  horizontal: PropTypes.bool,\n  vertical: PropTypes.bool,\n  auto: PropTypes.bool, // used to automatically choose from horizontal or vertical\n  split: PropTypes.array,\n  updateFlag: PropTypes.bool\n}\n\nexport default SplitContainer\n","import React, { useContext, useRef } from 'react'\nimport classNames from 'classnames'\nimport styles from './LayoutContainer.module.css'\nimport UIContext from '../UIContext'\nimport { GenericPanel } from './PanelComponent'\nimport { observer } from 'mobx-react'\n\nconst LayoutContainer = observer((props) => {\n  const context = useContext(UIContext).theme\n  const ui = useContext(UIContext)\n\n  const isVertical = props.layout.direction === 'VERTICAL'\n\n  const isEmpty = props.layout.isEmpty\n\n  const wrapperElement = useRef(null)\n\n  const handleResize = (e, layout) => {\n    function handleMove(e) {\n      if (e.touches) e = e.touches[0]\n\n      if (e.pageX) {\n        const bounds = wrapperElement.current.getBoundingClientRect()\n\n        let pos\n        if (isVertical) {\n          pos = (e.pageY - bounds.y) / bounds.height\n        } else {\n          pos = (e.pageX - bounds.x) / bounds.width\n        }\n\n        layout.adjust(pos)\n      }\n    }\n\n    function handleMoveEnd(e) {\n      if (e.touches && e.touches[0]) e = e.touches[0]\n\n      if (e.pageX) {\n        const bounds = wrapperElement.current.getBoundingClientRect()\n\n        let pos\n        if (isVertical) {\n          pos = (e.pageY - bounds.y) / bounds.height\n        } else {\n          pos = (e.pageX - bounds.x) / bounds.width\n        }\n\n        layout.adjust(pos)\n      }\n\n      document.removeEventListener('mousemove', handleMove)\n      document.removeEventListener('mouseup', handleMoveEnd)\n      document.removeEventListener('touchmove', handleMove)\n      document.removeEventListener('touchend', handleMoveEnd)\n    }\n\n    if (e.touches && e.touches[0]) e = e.touches[0]\n\n    document.addEventListener('mousemove', handleMove)\n    document.addEventListener('mouseup', handleMoveEnd)\n    document.addEventListener('touchmove', handleMove)\n    document.addEventListener('touchend', handleMoveEnd)\n  }\n\n  const handleContextMenu = (e, layout) => {\n    let addPanels = {}\n    let addHorizontalPanels = {}\n    let addVerticalPanels = {}\n\n    Object.values(ui.panelVariants).forEach((panel) => {\n      addPanels = {\n        ...addPanels,\n        [panel.id]: {\n          id: panel.id,\n          label: panel.title,\n          onClick: () => {\n            props.layout.addPanel(panel, layout)\n          }\n        }\n      }\n      addHorizontalPanels = {\n        ...addHorizontalPanels,\n        [panel.id]: {\n          id: panel.id,\n          label: panel.title,\n          onClick: () => {\n            props.layout.addPanel(panel, layout, 'HORIZONTAL')\n          }\n        }\n      }\n      addVerticalPanels = {\n        ...addVerticalPanels,\n        [panel.id]: {\n          id: panel.id,\n          label: panel.title,\n          onClick: () => {\n            props.layout.addPanel(panel, layout, 'VERTICAL')\n          }\n        }\n      }\n    })\n\n    ui.context.setContextmenu({\n      addPanel: {\n        id: 'addPanel',\n        label: 'add panel',\n        dropDown: addPanels\n      },\n      addLayout: {\n        id: 'addLayout',\n        label: 'add split layout',\n        dropDown: {\n          horizontal: {\n            id: 'horizontal',\n            label: 'horizontal',\n            dropDown: addHorizontalPanels\n            // onClick: () => {\n            //   props.layout.addLayout('HORIZONTAL', layout)\n            // }\n          },\n          vertical: {\n            id: 'vertical',\n            label: 'vertical',\n            dropDown: addVerticalPanels\n            // onClick: () => {\n            //   props.layout.addLayout('VERTICAL', layout)\n            // }\n          }\n        }\n      },\n      changeOrientation: {\n        id: 'changeOrientation',\n        label: 'layout direction',\n        dropDown: {\n          horizontal: {\n            id: 'horizontal',\n            label: 'horizontal',\n            active: props.layout.direction === 'HORIZONTAL',\n            onClick: () => {\n              props.layout.setDirection('HORIZONTAL')\n              ui.context.setContextmenu() // removes menu\n            }\n          },\n          vertical: {\n            id: 'vertical',\n            label: 'vertical',\n            active: props.layout.direction === 'VERTICAL',\n            onClick: () => {\n              props.layout.setDirection('VERTICAL')\n              ui.context.setContextmenu() // removes menu\n            }\n          }\n        }\n      },\n      distributeLayout: {\n        id: 'DistributeLayout',\n        label: 'distribute layout',\n        onClick: props.layout.distributeChildren\n      }\n    })\n\n    if (props.onContextMenu) props.onContextMenu(e, layout)\n  }\n\n  const handlePanelSelect = (e, sibling) => {\n    sibling.setPanel(e.target.value)\n  }\n\n  const handlePanelRemove = (layout) => {\n    props.layout.removePanel(layout)\n  }\n\n  const generateLayout = () => {\n    let elements = []\n    elements = props.layout.children.map((sibling, i) => {\n      /* \n          this will loop through all of the components passed as\n          children, and if it is another layout, it will nest another \n          layout inside\n        */\n      const siblings = props.layout.children\n      const childIsLayout = sibling.children.length && sibling.direction\n\n      let hasHandle = i < props.layout.children.length - 1\n      let size = 0\n\n      const filterOutFloats = (s) => !s.panel || (s.panel && !s.panel.floating)\n\n      const isFirst = i === 0\n      const isLast = i === siblings.length - 1\n\n      const isEmpty = (layout) => {\n        return (\n          layout.children.length &&\n          layout.children.filter(filterOutFloats).length === 0\n        )\n      }\n      /*\n          the benefit of applying the size calculations here\n          is that floating panels will retain their width. \n\n          this is for the most part why there is resizing \n          logic here AND in Layout.js. The layout holds on\n          to the width even when something is floating, and\n          then it can restore to it's original dimensions.\n      */\n      const isFloating = (layout) => {\n        return isEmpty(layout) || (layout.panel && layout.panel.floating)\n      }\n\n      if (isFloating(sibling)) {\n        hasHandle = false\n        size = 0\n      } else {\n        size = sibling.size\n\n        /*  \n            scan to the left for any floats to absorb\n          */\n        for (let j = i - 1; j >= 0; j--) {\n          if (isFloating(siblings[j])) {\n            size += siblings[j].size\n          } else {\n            break\n          }\n        }\n\n        /*\n          check to see if there are floats that extend all of the\n          way to the right\n        */\n        let tSum = 0\n        for (let j = i + 1; j < siblings.length; j++) {\n          if (isFloating(siblings[j])) {\n            tSum += siblings[j].size\n            // if we make it to the end, absorb all.\n            // otherwise, another panel will take care of it\n            if (j === siblings.length - 1) size += tSum\n          } else {\n            break\n          }\n        }\n      }\n\n      size *= 100\n\n      const matchingChild = !childIsLayout\n        ? props.children.filter((child) => {\n            // console.log(child.props)\n            /* \n          this grabs the id that corresponds with the \n          panel.id\n        */\n            if (child.props.panel) {\n              return child.props.panel.id === sibling.panel.id\n            } else {\n              return child.props.id === sibling.panel.id\n            }\n          })[0]\n        : undefined\n\n      return (\n        <React.Fragment key={sibling.id}>\n          {/* \n            insert handle at the START of series. \n            no resize but should have a contextmenu \n            to insert elements\n          */}\n          {isFirst && (\n            <div\n              onContextMenu={(e) => handleContextMenu(e, null)}\n              className={classNames(styles.drag_container, {\n                [styles.vertical]: isVertical,\n                [styles.horizontal]: !isVertical\n              })}\n            >\n              <div\n                className={classNames(styles.drag_handle, styles.firstDrag, {\n                  [styles.vertical]: isVertical,\n                  [styles.horizontal]: !isVertical\n                })}\n                style={{\n                  backgroundColor: context.accent_color,\n                  borderColor: context.primary_color\n                }}\n              />\n            </div>\n          )}\n          {/* this div element contains each individual frame */}\n          <div\n            style={isVertical ? { height: size + '%' } : { width: size + '%' }}\n            className={classNames(styles.panel_content, {\n              [styles.layout_container]: childIsLayout,\n              [styles.panel_container]: !childIsLayout,\n              [styles.float_container]: isFloating(sibling)\n            })}\n          >\n            <div className={styles.debug}>{size}</div>\n            {/*  \n                if the current sibling has children, render layout,\n                otherwise display panel\n              */}\n            {sibling.children.length ? (\n              <LayoutContainer layout={sibling}>\n                {props.children}\n              </LayoutContainer>\n            ) : (\n              <GenericPanel\n                panel={sibling.panel}\n                onPanelSelect={(e) => handlePanelSelect(e, sibling)}\n                onRemove={() => handlePanelRemove(sibling)}\n              >\n                {/* \n                    this is the main panel that surrounds the child\n                    it scans through the props.children for matching\n                    components\n                  */}\n                {matchingChild &&\n                  React.cloneElement(matchingChild, [\n                    { panel: sibling.panel } // trying this as a fix to setDimensions problem\n                  ])}\n              </GenericPanel>\n            )}\n          </div>\n\n          {hasHandle && (\n            <div\n              onContextMenu={(e) => handleContextMenu(e, sibling)}\n              className={classNames(styles.drag_container, {\n                [styles.vertical]: isVertical,\n                [styles.horizontal]: !isVertical\n              })}\n              onTouchStart={(e) => handleResize(e, sibling)}\n              onMouseDown={(e) => handleResize(e, sibling)}\n            >\n              <div\n                className={classNames(styles.drag_handle, {\n                  [styles.vertical]: isVertical,\n                  [styles.horizontal]: !isVertical\n                })}\n                style={{\n                  backgroundColor: context.accent_color,\n                  borderColor: context.primary_color\n                }}\n              />\n            </div>\n          )}\n          {/* \n            insert handle at the very end of series. \n            no resize but should have a contextmenu \n            to insert elements\n          */}\n          {isLast && (\n            <div\n              onContextMenu={(e) => handleContextMenu(e, sibling)}\n              className={classNames(styles.drag_container, {\n                [styles.vertical]: isVertical,\n                [styles.horizontal]: !isVertical\n              })}\n            >\n              <div\n                className={classNames(styles.drag_handle, styles.lastDrag, {\n                  [styles.vertical]: isVertical,\n                  [styles.horizontal]: !isVertical\n                })}\n                style={{\n                  backgroundColor: context.accent_color,\n                  borderColor: context.primary_color\n                }}\n              />\n            </div>\n          )}\n        </React.Fragment>\n      )\n    })\n\n    return elements\n  }\n\n  return (\n    <div\n      ref={wrapperElement}\n      style={{\n        backgroundColor: context.tertiary_color\n      }}\n      className={classNames(styles.wrapper, {\n        [styles.vertical]: isVertical,\n        [styles.horizontal]: !isVertical,\n        [styles.empty]: isEmpty\n      })}\n    >\n      {generateLayout()}\n    </div>\n  )\n})\n\nLayoutContainer.defaultProps = {\n  size: 100,\n  order: 0\n}\n\nLayoutContainer.propTypes = {}\n\nexport default LayoutContainer\n","import React, { useState, useContext } from 'react'\nimport styles from './PagesContainer.module.css'\nimport UIContext from '../UIContext'\n\nconst Pages = (props) => {\n  const [currentPage, setCurrentPage] = useState(0)\n  const context = useContext(UIContext).theme\n\n  const handlePreviousPage = () => {\n    if (currentPage > 0) setCurrentPage(currentPage - 1)\n  }\n\n  const handleNextPage = () => {\n    if (currentPage + 1 < props.children.length) setCurrentPage(currentPage + 1)\n  }\n\n  const buttonStyle = {\n    backgroundColor: context.secondary_color,\n    color: context.text_color\n  }\n\n  return (\n    <div className={styles.wrapper} style={props.style}>\n      <div className={styles.pagecontent}>{props.children[currentPage]}</div>\n      <div className={styles.pagenav}>\n        <button style={buttonStyle} onClick={handlePreviousPage}>\n          {'<'}\n        </button>\n        <button style={buttonStyle} onClick={handleNextPage}>\n          {'>'}\n        </button>\n        <span>{`${currentPage + 1} of ${props.children.length}`}</span>\n      </div>\n    </div>\n  )\n}\n\nexport default Pages\n","import React, { useContext } from 'react'\nimport styles from './InputBool.module.css'\nimport UIContext from '../../UIContext'\nimport { observer } from 'mobx-react'\n\nconst InputBool = observer((props) => {\n  const context = useContext(UIContext).theme\n  const updateValue = (e) => props.onChange(e.target.checked, e.target.value)\n\n  return (\n    <div\n      className={styles.wrapper}\n      style={{\n        ...props.style,\n        backgroundColor: props.focused\n          ? context.accent_color\n          : context.secondary_color,\n        flexFlow: props.hLabel && props.label ? 'row' : 'column'\n      }}\n    >\n      {props.label && (\n        <label\n          style={{\n            backgroundColor: props.focused\n              ? context.accent_color\n              : context.text_color,\n            color: context.primary_color\n          }}\n        >\n          {props.label}:\n        </label>\n      )}\n      <div className={styles.wrapper_inner}>\n        <input\n          style={props.style}\n          type='checkbox'\n          value={props.value}\n          checked={props.checked}\n          onChange={updateValue}\n          onContextMenu={props.onContextMenu}\n        />\n      </div>\n    </div>\n  )\n})\n\nexport default InputBool\n","import React, { useContext } from 'react'\nimport styles from './InputFloat.module.css'\nimport UIContext from '../../UIContext'\nimport { observer } from 'mobx-react'\nimport PropTypes from 'prop-types'\n\nlet position = [0, 0]\nlet base_value = 0\n\n/*\n    ISSUES:\n\n        should be able to drag input outside of browser window\n        but the solution in js is not immediately obvious\n\n        there is a possible lead here:\n        https://stackoverflow.com/questions/1685326/responding-to-the-onmousemove-event-outside-of-the-browser-window-in-ie\n*/\n\nconst InputFloat = observer((props) => {\n  const context = useContext(UIContext).theme\n\n  const handleChange = (e) => props.onChange(Number(e.target.value))\n\n  const handleDragStart = (e) => {\n    let dragging = false\n\n    function handleDrag(e) {\n      e.preventDefault()\n      dragging = true\n      /*\n                conditional fixes issue where last frame of\n                drag results in a 'jump' in value, as pageY\n                is 0. \n            */\n      if (e.pageY) {\n        // fine control w shift / large control w ctrl\n        let scalar = e.ctrlKey ? 100 : e.shiftKey ? 20000 : 1000\n\n        let x_offset = e.pageX - position[0]\n        let y_offset = position[1] - e.pageY\n\n        x_offset = Math.min(Math.max(x_offset, 1), 100)\n\n        let output_value = base_value + (y_offset * x_offset) / scalar\n\n        // factor in step size\n        if (props.step) {\n          output_value /= props.step\n          output_value = Math.floor(output_value)\n          output_value *= props.step\n        }\n\n        props.onChange(output_value)\n      }\n    }\n\n    function handleDragEnd(e) {\n      if (dragging) {\n        // fine control w shift / large control w ctrl\n        let scalar = e.ctrlKey ? 100 : e.shiftKey ? 20000 : 1000\n\n        let x_offset = e.pageX - position[0]\n        let y_offset = position[1] - e.pageY\n\n        x_offset = Math.min(Math.max(x_offset, 1), 100)\n\n        let output_value = base_value + (y_offset * x_offset) / scalar\n\n        // factor in step size\n        if (props.step) {\n          output_value /= props.step\n          output_value = Math.floor(output_value)\n          output_value *= props.step\n        }\n\n        props.onChange(output_value)\n      }\n\n      document.removeEventListener('mousemove', handleDrag)\n      document.removeEventListener('mouseup', handleDragEnd)\n      document.removeEventListener('touchmove', handleDrag)\n      document.removeEventListener('touchend', handleDragEnd)\n\n      dragging = false\n    }\n\n    if (e.touches && e.touches[0]) e = e.touches[0]\n\n    position = [e.pageX, e.pageY]\n    base_value = props.value\n\n    document.addEventListener('mousemove', handleDrag)\n    document.addEventListener('mouseup', handleDragEnd)\n    document.addEventListener('touchmove', handleDrag)\n    document.addEventListener('touchend', handleDragEnd)\n  }\n\n  const value = parseFloat(props.value).toFixed(2)\n\n  const defaultInputStyle = {\n    backgroundColor: context.secondary_color,\n    color: context.text_color\n  }\n\n  return (\n    <div\n      className={styles.wrapper}\n      style={{\n        ...props.style,\n        backgroundColor: props.focused\n          ? context.accent_color\n          : context.secondary_color\n      }}\n    >\n      {props.label && (\n        <label\n          style={{\n            backgroundColor: props.focused\n              ? context.accent_color\n              : context.text_color,\n            color: context.primary_color\n          }}\n        >\n          {props.label}:\n        </label>\n      )}\n      <div className={styles.wrapper_inner}>\n        <input\n          type='number'\n          step={props.step}\n          value={Number(value)}\n          onChange={handleChange}\n          onClick={props.onClick}\n          onTouchStart={handleDragStart}\n          onMouseDown={handleDragStart}\n          onDoubleClick={props.onDoubleClick}\n          onContextMenu={props.onContextMenu}\n          style={{\n            ...defaultInputStyle,\n            ...props.inputStyle\n          }}\n        />\n      </div>\n    </div>\n  )\n})\n\nInputFloat.defaultProps = {\n  value: 0,\n  step: 0.1,\n  focused: false\n}\n\nInputFloat.propTypes = {\n  label: PropTypes.string,\n  value: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  step: PropTypes.number,\n  focused: PropTypes.bool,\n\n  onChange: PropTypes.func,\n  onDoubleClick: PropTypes.func,\n  inputStyle: PropTypes.object\n}\n\nexport default InputFloat\n","import React, { useContext } from 'react'\nimport styles from './InputSelect.module.css'\nimport UIContext from '../../UIContext'\n\nconst InputSelect = (props) => {\n  const context = useContext(UIContext).theme\n\n  const handleChange = (e) => props.onChange(e.target.value)\n\n  return (\n    <div\n      className={styles.wrapper}\n      style={{\n        ...props.style,\n        backgroundColor: props.focused\n          ? context.accent_color\n          : context.secondary_color\n      }}\n    >\n      {props.label && (\n        <label\n          style={{\n            backgroundColor: props.focused\n              ? context.accent_color\n              : context.text_color,\n            color: context.primary_color\n          }}\n        >\n          {props.label}:\n        </label>\n      )}\n      <div className={styles.wrapper_inner}>\n        <select\n          defaultValue={props.selectedOption}\n          onChange={handleChange}\n          onContextMenu={props.onContextMenu}\n          style={{\n            backgroundColor: context.secondary_color,\n            color: context.text_color\n          }}\n        >\n          {props.options.map((opt, i) => (\n            <option key={i} value={opt.value}>\n              {opt.label}\n            </option>\n          ))}\n        </select>\n      </div>\n    </div>\n  )\n}\n\nexport default InputSelect\n","import React, { useContext, useRef } from 'react'\nimport styles from './InputSlider.module.css'\nimport InputFloat from './InputFloat'\nimport UIContext from '../../UIContext'\nimport PropTypes from 'prop-types'\n\nlet slider_bounds = null\n\nconst InputSlider = (props) => {\n  const context = useContext(UIContext).theme\n\n  const slider_element = useRef(null)\n\n  const handleDragStart = (e) => {\n    function handleDrag(e) {\n      if (e.touches) e = e.touches[0]\n      /*\n              conditional fixes issue where last frame of\n              drag results in a 'jump' in value, as pageY\n              is 0. \n          */\n      if (e.pageY) {\n        let x = e.pageX + 2\n        let position = (x - slider_bounds.x) / slider_bounds.width\n\n        let value = position * (props.max - props.min) + props.min\n\n        if (position <= 0.0) value = props.min\n        if (position >= 1.0) value = props.max\n\n        props.onChange(Math.floor(value / props.step) * props.step)\n      }\n    }\n\n    function handleDragEnd(e) {\n      if (e.touches && e.touches[0]) e = e.touches[0]\n\n      let x = e.pageX + 2\n      let position = (x - slider_bounds.x) / slider_bounds.width\n      let value = position * (props.max - props.min) + props.min\n\n      if (position >= 0.0 && position <= 1.0) {\n        props.onChange(Math.floor(value / props.step) * props.step)\n      }\n\n      document.removeEventListener('mousemove', handleDrag)\n      document.removeEventListener('mouseup', handleDragEnd)\n      document.removeEventListener('touchmove', handleDrag)\n      document.removeEventListener('touchend', handleDragEnd)\n    }\n\n    if (e.touches && e.touches[0]) e = e.touches[0]\n\n    slider_bounds = slider_element.current.getBoundingClientRect()\n    let x = e.pageX + 2\n    let position = (x - slider_bounds.x) / slider_bounds.width\n\n    let value = position * (props.max - props.min) + props.min\n    console.log([props.min, props.max])\n    console.log('position', position)\n    console.log('value', value)\n\n    if (position >= 0.0 && position <= 1.0) {\n      props.onChange(Math.floor(value / props.step) * props.step) // floor to step\n    }\n\n    document.addEventListener('mousemove', handleDrag)\n    document.addEventListener('mouseup', handleDragEnd)\n    document.addEventListener('touchmove', handleDrag)\n    document.addEventListener('touchend', handleDragEnd)\n  }\n\n  const handleFloatDrag = (v) => {\n    props.onChange(v)\n  }\n\n  return (\n    <div\n      className={styles.wrapper + ' ' + styles.horizontal}\n      style={props.style}\n      onContextMenu={props.onContextMenu}\n    >\n      <InputFloat\n        value={props.value}\n        onChange={handleFloatDrag}\n        step={props.step || 0.1}\n      />\n      <div\n        ref={slider_element}\n        className={styles.slider_track}\n        onTouchStart={handleDragStart}\n        onMouseDown={handleDragStart}\n        style={{\n          backgroundColor: context.secondary_color\n        }}\n      >\n        <div\n          className={styles.sleeve}\n          style={{\n            width:\n              ((props.value - props.min) / (props.max - props.min)) * 100 + '%',\n            backgroundColor: context.accent_color\n          }}\n        ></div>\n        <div\n          className={styles.handle}\n          style={{\n            left:\n              ((props.value - props.min) / (props.max - props.min)) * 100 + '%',\n            backgroundColor: context.accent_color\n          }}\n        ></div>\n      </div>\n    </div>\n  )\n}\n\nInputSlider.propTypes = {\n  min: PropTypes.number,\n  max: PropTypes.number,\n  value: PropTypes.number,\n  style: PropTypes.object\n}\n\nexport default InputSlider\n","import React, { useContext } from 'react'\nimport styles from './InputColor.module.css'\nimport UIContext from '../../UIContext'\n\nconst InputColor = (props) => {\n  const context = useContext(UIContext).theme\n\n  const handleChange = (e) => props.onChange(e.target.value)\n\n  return (\n    <div\n      className={styles.wrapper}\n      style={{\n        ...props.style,\n        backgroundColor: props.focused\n          ? context.accent_color\n          : context.secondary_color\n      }}\n    >\n      {props.label && (\n        <label\n          style={{\n            backgroundColor: props.focused\n              ? context.accent_color\n              : context.text_color,\n            color: context.primary_color\n          }}\n        >\n          {props.label}:\n        </label>\n      )}\n      <div className={styles.wrapper_inner}>\n        {props.showValue && (\n          <input\n            type='string'\n            className={styles.textInput}\n            value={props.value}\n            onChange={handleChange}\n            style={{\n              backgroundColor: context.text_color,\n              color: context.secondary_color\n            }}\n          />\n        )}\n\n        <input\n          type='color'\n          value={props.value}\n          onChange={handleChange}\n          onContextMenu={props.onContextMenu}\n          style={{\n            backgroundColor: context.secondary_color,\n            color: context.secondary_color\n          }}\n        />\n      </div>\n    </div>\n  )\n}\n\nexport default InputColor\n","import { types } from 'mobx-state-tree'\nimport tinykeys from 'tinykeys'\n\nexport const ContextMenuItem = types\n  .model('ContextMenuItem', {\n    id: types.identifier,\n    label: types.frozen(),\n    buttons: types.frozen(),\n    dropDown: types.map(types.late(() => ContextMenuItem))\n  })\n  .volatile((self) => ({\n    onClick: () => {}\n  }))\n\nconst Context = types\n  .model('Context', {})\n  .volatile((self) => ({\n    contextmenu: {},\n    keylistener: tinykeys(window, {}),\n    keymap: null\n  }))\n  .actions((self) => ({\n    setKeymap: (keymap) => {\n      if (self.keylistener) self.keylistener()\n\n      self.keymap = keymap\n      self.keylistener = tinykeys(window, self.keymap)\n    },\n    removeKeymap: () => self.keylistener(),\n    setContextmenu: (c) => {\n      self.contextmenu = c\n    }\n  }))\n\nexport default Context\n","import { types, getParent, clone } from 'mobx-state-tree'\nimport Layout from './Layout'\n\nconst Panel = types\n  .model('Panel', {\n    id: types.identifier,\n    component_type: '',\n    title: types.maybe(types.string),\n    subtitle: types.maybe(types.string),\n    showTitle: true,\n    floating: false,\n    fullscreen: false,\n    canFloat: false,\n    canRemove: false,\n    canFullscreen: false,\n    dimensions: types.array(types.number),\n    position: types.array(types.number),\n    // layout: types.maybe(types.safeReference(types.late(() => Layout)))\n    layout: types.maybe(types.late(() => Layout))\n  })\n  .volatile((self) => ({\n    parent_layout: null\n  }))\n  .actions((self) => ({\n    setLayout: (layout) => {\n      const newLayout = clone(layout)\n      self.layout = newLayout\n    },\n\n    setFloating: (f) => {\n      self.floating = f\n    },\n\n    toggleFloating: () => {\n      self.floating = !self.floating\n    },\n\n    toggleFullscreen: () => {\n      self.fullscreen = !self.fullscreen\n    },\n\n    setPosition: (p) => {\n      // TEMP: hack to keep away from title, use safe areas instead\n      if (p[1] < 24) p[1] = 24\n\n      self.position = p\n\n      // EXPERIMENT: Limit position to max bounds\n      if (p[0] + self.dimensions[0] > window.innerWidth)\n        self.position[0] = window.innerWidth - self.dimensions[0]\n\n      if (p[1] + self.dimensions[1] > window.innerHeight)\n        self.position[1] = window.innerHeight - self.dimensions[1]\n    },\n\n    setDimensions: (d) => {\n      self.dimensions = d\n\n      // EXPERIMENT: Limit position to max bounds\n      if (d[0] + self.position[0] > window.innerWidth)\n        self.dimensions[0] = window.innerWidth - self.position[0]\n\n      if (d[1] + self.position[1] > window.innerHeight)\n        self.dimensions[1] = window.innerHeight - self.position[1]\n    },\n\n    setFullscreen: (f) => {\n      self.fullscreen = f\n    },\n\n    onRemove: () => {\n      self.parent_layout = getParent(self, 2) // ERROR HERE, cant remove\n      self.parent_layout.removePanel(self)\n    },\n\n    center: () => {\n      self.position[0] = window.innerWidth / 2 - self.dimensions[0] / 2\n      self.position[1] = window.innerHeight / 2 - self.dimensions[1] / 2\n    },\n\n    fitScreen: () => {\n      if (self.position[0] <= 0) self.position[0] = 0\n\n      if (self.position[1] <= 0) self.position[1] = 0\n\n      // if (self.dimensions[0] + self.position[0] >= window.innerWidth)\n      // self.dimensions[0] = window.innerWidth - self.position[0];\n\n      // if (self.dimensions[1] + self.position[1] >= window.innerHeight)\n      // self.dimensions[1] = window.innerHeight - self.position[1];\n    }\n  }))\n\nexport default Panel\n","import { types, getParent, getRoot, getSnapshot } from 'mobx-state-tree'\nimport { nanoid } from 'nanoid'\nimport Panel from './Panel'\n\nconst Layout = types\n  .model('Layout', {\n    id: types.identifier,\n    title: 'Layout',\n    size: 0,\n    panel: types.maybe(Panel),\n    children: types.array(types.late(() => Layout)),\n    direction: types.optional(\n      types.enumeration(['VERTICAL', 'HORIZONTAL']),\n      'HORIZONTAL'\n    )\n  })\n  .views((self) => ({\n    get isEmpty() {\n      const result =\n        self.children.length &&\n        self.children.filter(\n          (s) => (!s.panel && !s.isEmpty) || (s.panel && !s.panel.floating)\n        ).length === 0\n      return result\n    }\n  }))\n  .volatile((self) => ({\n    siblings: null,\n    rootStore: null\n  }))\n  .actions((self) => ({\n    afterAttach: () => {\n      self.siblings = getParent(self)\n      self.rootStore = getRoot(self)\n    },\n\n    adjust: (position) => {\n      const selfIndex = getParent(self).indexOf(self)\n\n      /* \n        the sum is all panels (except for those floating) \n        *leading up to* the one we are resizing\n      */\n      let sum = 0\n      for (let i = 0; i < selfIndex; i++) {\n        sum += getParent(self)[i].size\n      }\n\n      const previousSize = self.size\n      const adjustedSize = position - sum\n\n      self.setSize(adjustedSize)\n\n      const nextSibling = getParent(self)[selfIndex + 1]\n      nextSibling.setSize(nextSibling.size + (previousSize - adjustedSize))\n    },\n\n    distributeChildren: () => {\n      self.children.forEach((e, i) => {\n        e.setSize(1 / self.children.length)\n      })\n    },\n\n    setSize: (size) => {\n      self.size = size\n    },\n\n    setDirection: (direction) => {\n      self.direction = direction\n    },\n\n    setPanel: (panelId) => {\n      /*  \n        TODO \n          I think that this can be simplified in some way, \n          mainly I think there too many serialized fields\n          a new panel is really just a different 'component_type'\n          field\n\n          until I figure out a better way to do this I am going to\n          make sure that it retains floating, dimensions, and position\n      */\n      const newpanel = {\n        ...getRoot(self).ui.panelVariants[panelId],\n        floating: self.panel.floating,\n        dimensions: [...self.panel.dimensions],\n        position: [...self.panel.position]\n      }\n\n      self.panel = newpanel\n      self.title = getRoot(self).ui.panelVariants[panelId].title\n    },\n\n    /* NOTE not currently in use */\n    addLayout: (orientation, after) => {\n      /* \n        look for the 'after' node and insert 'panel'\n        after it\n        \n        if after is null, then insert at the very beginning (-1)\n       */\n      const insertAfter = after ? self.children.indexOf(after) : -1\n\n      self.children.splice(\n        insertAfter + 1,\n        0,\n        Layout.create({\n          id: nanoid(),\n          children: [\n            Layout.create({\n              id: nanoid() + '_child',\n              // panel: panel,\n              panel: {\n                id: nanoid() + '_sub_child',\n                title: 'New Layout'\n              },\n              size: 1\n            })\n          ],\n          direction: orientation,\n          size: 1 / self.children.length\n        })\n      )\n\n      self.distributeChildren()\n    },\n\n    addPanel: (panel, after, direction) => {\n      /* \n        look for the 'after' node and insert 'panel'\n        after it\n        \n        if after is null, then insert at the very beginning (-1)\n       */\n      const insertAfter = after ? self.children.indexOf(after) : -1\n\n      /* if direction is defined, treat it as a new layout */\n      if (direction) {\n        self.children.splice(\n          insertAfter + 1,\n          0,\n          Layout.create({\n            id: nanoid(),\n            children: [\n              Layout.create({\n                id: nanoid() + '_child',\n                panel: panel,\n                size: 1\n              })\n            ],\n            direction: direction,\n            size: 1 / self.children.length\n          })\n        )\n      } else {\n        self.children.splice(\n          insertAfter + 1,\n          0,\n          Layout.create({\n            id: nanoid(),\n            panel: panel,\n            size: 1 / self.children.length\n          })\n        )\n      }\n\n      self.distributeChildren()\n    },\n\n    removePanel: (panel) => {\n      if (self.children) {\n        self.children = self.children.filter((child) => child !== panel)\n\n        // if all panels are gone, remove this layout\n        if (self.children.length === 0) {\n          if (getParent(self, 2).removePanel)\n            getParent(self, 2).removePanel(self)\n        }\n      }\n\n      // TODO factor in the size of the removed panel\n      // into the panel to its left and right\n\n      self.distributeChildren()\n    },\n\n    clear: () => {\n      if (self.panels && self.children) {\n        self.panels.clear()\n        self.children = []\n      }\n    }\n  }))\n\nexport default Layout\n","import { types } from \"mobx-state-tree\";\n\nexport const themes = {\n  'weyland': { // light\n    primary_color: '#ffffff',\n    secondary_color: '#C2C2C2',\n    tertiary_color: '#e0e0e0',\n    text_color: '#000000',\n    outline_color: '#aaaaaa',\n    accent_color: '#3fa3a3'\n  },\n  'yutani': { // dark\n    primary_color: '#000000',\n    secondary_color: '#202020',\n    tertiary_color: '#303030',\n    text_color: '#ffffff',\n    outline_color: '#474747',\n    accent_color: '#3fa3a3'\n  },\n  'powershell': { // blue\n    primary_color: '#012456',\n    secondary_color: '#304E78',\n    tertiary_color: '#233767',\n    text_color: '#ffffff',\n    outline_color: '#51578B',\n    accent_color: '#ffff00'\n  },\n  'sarah': {\n    primary_color: '#0D5439',\n    secondary_color: '#9D6C71',\n    tertiary_color: '#5b6b5c',\n    text_color: '#C9A6A6',\n    outline_color: '#aaaaaa',\n    accent_color: '#D3945A'\n  },\n};\n\nconst Theme = types\n    .model(\"Theme\", {\n        ...themes.weyland\n    })\n    .actions(self => ({\n      setTheme: (theme) => {\n        self.primary_color = theme.primary_color;\n        self.secondary_color = theme.secondary_color;\n        self.tertiary_color = theme.tertiary_color;\n        self.text_color = theme.text_color;\n        self.outline_color = theme.outline_color;\n        self.accent_color = theme.accent_color;\n      },\n      setPrimaryColor: color => self.primary_color = color,\n      setSecondaryColor: color => self.secondary_color = color,\n      setTertiaryColor: color => self.tertiary_color = color,\n      setTextColor: color => self.text_color = color,\n      setOutlineColor: color => self.outline_color = color,\n      setAccentColor: color => self.accent_color = color\n    }))\n\nexport default Theme;","import { types, onSnapshot, getSnapshot, applySnapshot } from 'mobx-state-tree'\nimport Context from './Context'\nimport { nanoid } from 'nanoid'\n\nimport Panel from './Panel'\nimport Theme from './Theme'\nimport Layout from './Layout'\n\n/*  \n  TODO\n    some of the names for variable should be made a little more\n    clear, in particular names for layouts.\n\n    Layouts are a structure that hold panels and other sublayouts,\n    and these can be saved. the member variable 'layouts' though\n    refers to custom layouts that are saved and recalled, and that\n    requires actually grabbing the whole outer panel. So it's not\n    as much a layout as it is a panel, but not sure of the right \n    words to make that clear.\n*/\n\nconst UI = types\n  .model('UI', {\n    panels: types.map(Panel),\n    theme: Theme,\n    layouts: types.map(Panel),\n    context: types.maybe(Context)\n  })\n  .volatile((self) => ({\n    panelVariants: null\n  }))\n  .actions((self) => ({\n    afterAttach: () => {\n      self.context = Context.create()\n\n      // restore layout from local storage\n      // whenever theme is changed, save in local storage\n      onSnapshot(self.theme, () => {\n        console.log('saving theme')\n        window.localStorage.setItem(\n          'theme',\n          JSON.stringify(getSnapshot(self.theme))\n        )\n      })\n\n      // if theme exists in local storage, load it up\n      if (window.localStorage.getItem('theme')) {\n        self.theme.setTheme(JSON.parse(window.localStorage.getItem('theme')))\n      }\n\n      // whenever layouts are changed, save in local storage\n      // onSnapshot(self.layouts, () => {\n      //   console.log('saving layouts')\n      //   if (window.localStorage.getItem('layouts'))\n      //     window.localStorage.setItem(\n      //       'layouts',\n      //       JSON.stringify(getSnapshot(self.layouts))\n      //     )\n      // })\n\n      // if layouts exist in local storage, load them up\n      if (window.localStorage.getItem('layouts')) {\n        self.setCustomLayouts(JSON.parse(window.localStorage.getItem('layouts')))\n      }\n    },\n\n    setPanelVariants: (panels) => {\n      self.panelVariants = panels\n    },\n\n    setCustomLayouts: (layouts) => {\n      for (const l in layouts) {\n        self.layouts.put(layouts[l])\n      }\n    },\n\n    saveCustomLayouts: () => {\n      console.log('saving layouts')\n      window.localStorage.setItem(\n        'layouts',\n        JSON.stringify(getSnapshot(self.layouts))\n      )\n    },\n\n    addNewMainLayout: (layout, title) => {\n      const newId = nanoid(4)\n      self.layouts.put({ ...layout, id: newId, title: title || newId })\n      self.saveCustomLayouts()\n    },\n\n    removeLayout: (layout) => {\n      self.layouts.delete(layout.id)\n      self.saveCustomLayouts()\n    },\n\n    getPanelVariant: (id) => {\n      return self.panelVariants[id]\n    },\n\n    getLayout: (id) => {\n      if (self.layouts.has(id)) {\n        return self.layouts.get(id)\n      }\n    },\n\n    getPanel: (id) => {\n      return self.panels.get(id)\n    },\n\n    applyLayoutToMainPanel: (panel) => {\n      const main = self.panels.get('MAIN')\n      const snap = getSnapshot(panel)\n\n      applySnapshot(main, { ...main, ...snap, id: 'MAIN', title: main.title })\n    }\n  }))\n\nexport default UI\n","import _MacoWrapperComponent from './components/MacoWrapperComponent'\n\nimport _PanelComponent, {\n  GenericPanel as _GenericPanel\n} from './components/PanelComponent'\nimport _TextComponent from './components/TextComponent'\nimport _ToolbarComponent from './components/ToolbarComponent'\nimport _ContextMenuComponent from './components/ContextMenuComponent'\nimport _ControlGroupComponent from './components/ControlGroupComponent'\nimport _SplitContainer from './components/SplitContainer'\nimport _LayoutContainer from './components/LayoutContainer'\nimport _PagesContainer from './components/PagesContainer'\n\nimport _InputBool from './components/input/InputBool'\nimport _InputFloat from './components/input/InputFloat'\nimport _InputSelect from './components/input/InputSelect'\nimport _InputSlider from './components/input/InputSlider'\nimport _InputColor from './components/input/InputColor'\n\nimport _UIContext from './UIContext'\n\n// STORES\nimport _ContextStore from './stores/Context'\nimport _LayoutStore from './stores/Layout'\nimport _PanelStore from './stores/Panel'\nimport { themes } from './stores/Theme'\nimport _UIStore from './stores/UI'\n\nexport const MacoWrapperComponent = _MacoWrapperComponent\n\nexport const TextComponent = _TextComponent\nexport const PanelComponent = _PanelComponent\nexport const GenericPanel = _GenericPanel\nexport const ToolbarComponent = _ToolbarComponent\nexport const ContextMenuComponent = _ContextMenuComponent\nexport const ControlGroupComponent = _ControlGroupComponent\nexport const SplitContainer = _SplitContainer\nexport const LayoutContainer = _LayoutContainer\nexport const PagesContainer = _PagesContainer\n\nexport const InputBool = _InputBool\nexport const InputFloat = _InputFloat\nexport const InputSelect = _InputSelect\nexport const InputSlider = _InputSlider\nexport const InputColor = _InputColor\n\nexport const UIContext = _UIContext\n\nexport const Themes = themes\n\n// STORES\nexport const ContextStore = _ContextStore\nexport const LayoutStore = _LayoutStore\nexport const PanelStore = _PanelStore\nexport const UIStore = _UIStore // main store output\n"],"names":["UIContext","React","createContext","style","drawer","width","top","left","DropDown","observer","props","context","useContext","theme","mainRef","useRef","activeItem","setActiveItem","useState","subDropDownOpen","setSubDropDownOpen","subDropDownId","setSubDropDownId","subDropDownPosition","setSubDropDownPosition","handleSubDropDown","e","index","item","onClick","toggle","bounds","currentTarget","getBoundingClientRect","id","openUp","height","bottom","openLeft","handleClickAway","current","contains","target","handleRef","onRef","handleContextMenu","useLayoutEffect","document","addEventListener","removeEventListener","open","position","classNames","styles","backgroundColor","secondary_color","color","text_color","items","Object","keys","map","k","i","dropDown","subDropDown","activeButton","active","label","disableHover","display","title","buttons","b","border","outline_color","borderTop","borderBottom","borderLeftStyle","borderRightStyle","flexShrink","padding","defaultProps","propTypes","Toolbar","dropDownOpen","setDropDownOpen","dropDownId","setDropDownId","dropDownPosition","setDropDownPosition","setOpenUp","handleWheel","offset","Math","sign","deltaY","scroll","scrollLeft","at_start","at_end","offsetWidth","scrollWidth","useEffect","y","window","innerHeight","toolbar","borderColor","button","highlight","parent_bounds","_openUp","x","itemDecoration","DropDownComponent","ContextMenu","dropRef","dropDownOpenLeft","setDropDownOpenLeft","dropDownOpenUp","setDropDownOpenUp","handleClick","preventDefault","pageX","pageY","innerWidth","MacoWrapper","store","ui","setContextmenu","contextmenu","wrapper","ToolbarComponent","titlebar","ContextMenuComponent","className","tertiary_color","children","Tooltip","show","setShow","setPosition","handleToggle","tooltip","tooltip_symbol","tooltip_content","primary_color","content","Panel","wrapperElement","expanded","setExpanded","focused","setFocused","handleResize","direction","dragging","pBounds","initialDimensions","initialPosition","handleMove","touches","w","h","onDimensionsChange","dimensions","onPositionChange","handleMoveEnd","handleMoveStart","dragOff","handleCenter","handleFullscreen","fullscreen","onFullscreen","onFloat","handleFloat","floating","handleFocus","stopPropagation","onFocus","handleBlur","blur","onBlur","mainStyling","hasTitle","showTitle","onRemove","collapsible","accent_color","panel","collapsed","margin","gutters","gutterSize","zIndex","onContextMenu","onMouseEnter","onMouseLeave","onMouseOver","onMouseOut","title_bar","titleStyle","canFullscreen","fontSize","canRemove","canFloat","dragContainer","moveHandle","onPanelSelect","undefined","panelSelect","uuid","values","panelVariants","subtitle","indicators","indicator","flexBasis","panel_content","horizontal","vertical","footbar","resizeHandle","resizeSE","resizeE","resizeS","resizeSW","resizeW","resizeN","resizeNE","resizeNW","PropTypes","func","object","any","oneOfType","string","array","bool","number","GenericPanel","defaultWidth","onContextMenuCapture","setFloating","setDimensions","setFullscreen","Text","text","ControlGroup","name","Children","child","inputWidth","length","isValidElement","cloneElement","useObserver","callback","element","dependencies","observe","unobserve","resizeObserverOrPolyfill","ResizeObserver","Split","constructor","size","SplitContainer","distributeSplits","count","defaultSplits","filter","defaultsize","defaultSum","s","reduce","a","split","setSplit","isEmpty","setEmpty","isVertical","setIsVertical","handleContainerResize","auto","useResizeObserver","handlePanelResize","splitSum","slice","handleDetach","detachBool","updateFlag","onEmpty","wrapperClass","empty","isSplit","type","split_container","panel_container","hasHandle","detachable","onDetach","split_floating","drag_container","drag_handle_visible","drag_handle","alignSelf","textAlign","isRequired","LayoutContainer","layout","pos","adjust","addPanels","addHorizontalPanels","addVerticalPanels","forEach","addPanel","addLayout","changeOrientation","setDirection","distributeLayout","distributeChildren","handlePanelSelect","sibling","setPanel","value","handlePanelRemove","removePanel","generateLayout","elements","siblings","childIsLayout","filterOutFloats","isFirst","isLast","isFloating","j","tSum","matchingChild","firstDrag","layout_container","float_container","debug","lastDrag","order","Pages","currentPage","setCurrentPage","handlePreviousPage","handleNextPage","buttonStyle","pagecontent","pagenav","InputBool","updateValue","onChange","checked","flexFlow","hLabel","wrapper_inner","base_value","InputFloat","handleChange","Number","handleDragStart","handleDrag","scalar","ctrlKey","shiftKey","x_offset","y_offset","min","max","output_value","step","floor","handleDragEnd","parseFloat","toFixed","defaultInputStyle","onDoubleClick","inputStyle","InputSelect","selectedOption","options","opt","slider_bounds","InputSlider","slider_element","console","log","handleFloatDrag","v","slider_track","sleeve","handle","InputColor","showValue","textInput","ContextMenuItem","types","model","identifier","frozen","late","volatile","self","Context","keylistener","tinykeys","keymap","actions","setKeymap","removeKeymap","c","component_type","maybe","Layout","parent_layout","setLayout","newLayout","clone","f","toggleFloating","toggleFullscreen","p","d","getParent","center","fitScreen","optional","enumeration","views","result","rootStore","afterAttach","getRoot","selfIndex","indexOf","sum","previousSize","adjustedSize","setSize","nextSibling","panelId","newpanel","orientation","after","insertAfter","splice","create","nanoid","clear","panels","themes","Theme","weyland","setTheme","setPrimaryColor","setSecondaryColor","setTertiaryColor","setTextColor","setOutlineColor","setAccentColor","UI","layouts","onSnapshot","localStorage","setItem","JSON","stringify","getSnapshot","getItem","parse","setCustomLayouts","setPanelVariants","l","put","saveCustomLayouts","addNewMainLayout","newId","removeLayout","delete","getPanelVariant","getLayout","has","get","getPanel","applyLayoutToMainPanel","main","snap","applySnapshot","MacoWrapperComponent","_MacoWrapperComponent","TextComponent","_TextComponent","PanelComponent","_PanelComponent","_GenericPanel","_ToolbarComponent","_ContextMenuComponent","ControlGroupComponent","_ControlGroupComponent","_SplitContainer","_LayoutContainer","PagesContainer","_PagesContainer","_InputBool","_InputFloat","_InputSelect","_InputSlider","_InputColor","_UIContext","Themes","ContextStore","_ContextStore","LayoutStore","_LayoutStore","PanelStore","_PanelStore","UIStore","_UIStore"],"mappings":"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"}