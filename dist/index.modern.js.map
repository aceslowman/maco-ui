{"version":3,"file":"index.modern.js","sources":["../src/UIContext.js","../src/components/DropDownComponent.js","../src/components/ToolbarComponent.js","../src/components/ContextMenuComponent.js","../src/components/MacoWrapperComponent.js","../src/components/PanelComponent.js","../src/components/TextComponent.js","../src/components/ControlGroupComponent.js","../src/components/hooks/ResizeHook.js","../src/components/SplitContainer.js","../src/components/LayoutContainer.js","../src/components/PagesContainer.js","../src/components/input/InputBool.js","../src/components/input/InputFloat.js","../src/components/input/InputSelect.js","../src/components/input/InputSlider.js","../src/components/input/InputColor.js","../src/stores/Context.js","../src/stores/Panel.js","../src/stores/Layout.js","../src/stores/Theme.js","../src/stores/UI.js","../src/index.js"],"sourcesContent":["import React from 'react'\r\n\r\nconst UIContext = React.createContext({})\r\n\r\nexport const UIProvider = UIContext.Provider\r\nexport const UIConsumer = UIContext.Consumer\r\nexport default UIContext","import React, { useState, useContext, useRef, useLayoutEffect } from 'react'\nimport UIContext from '../UIContext'\nimport styles from './DropDownComponent.module.css'\nimport classNames from 'classnames'\nimport { observer } from 'mobx-react'\n\nlet style = {\n  drawer: {\n    width: '0px',\n    top: '0px',\n    left: '0px'\n  }\n}\n\nconst DropDown = observer((props) => {\n  const context = useContext(UIContext).theme\n  const mainRef = useRef(null)\n\n  const [activeItem, setActiveItem] = useState(null)\n  const [subDropDownOpen, setSubDropDownOpen] = useState(false)\n  const [subDropDownId, setSubDropDownId] = useState(null)\n  const [subDropDownPosition, setSubDropDownPosition] = useState({\n    top: 0,\n    left: 0\n  })\n\n  const handleSubDropDown = (e, index, item) => {\n    if (item.onClick) item.onClick()\n    const toggle = index === activeItem ? !subDropDownOpen : true\n\n    const bounds = e.currentTarget.getBoundingClientRect()\n\n    setActiveItem(toggle ? index : false)\n    setSubDropDownId(item.id)\n    setSubDropDownOpen(toggle)\n    setSubDropDownPosition({\n      top: !props.openUp ? -bounds.height : 'auto',\n      bottom: props.openUp ? 0 : 'auto',\n      left: props.openLeft ? -bounds.width : bounds.width\n    })\n  }\n\n  const handleClickAway = (e) => {\n    if (mainRef.current && !mainRef.current.contains(e.target)) {\n      setActiveItem(null)\n      setSubDropDownOpen(false)\n    }\n  }\n\n  function handleRef(e) {\n    mainRef.current = e\n    if (props.onRef) props.onRef(mainRef)\n  }\n\n  function handleContextMenu(e) {\n    setSubDropDownOpen(false)\n  }\n\n  useLayoutEffect(() => {\n    document.addEventListener('click', (e) => handleClickAway(e))\n    document.addEventListener('contextmenu', (e) => handleContextMenu(e))\n\n    return () => {\n      document.removeEventListener('click', (e) => handleClickAway(e))\n      document.addEventListener('contextmenu', (e) => handleContextMenu(e))\n    }\n  }, [])\n\n  style = {\n    ...style,\n    drawer: {\n      width: props.open ? '150px' : '0px',\n      ...props.position\n    }\n  }\n\n  return (\n    <div\n      className={classNames(styles.drawer, {\n        //   [styles.openLeft]: props.openLeft,\n        //   [styles.openUp]: props.openUp,\n      })}\n      ref={(e) => handleRef(e)}\n      style={{\n        ...style.drawer,\n        backgroundColor: context.secondary_color,\n        color: context.text_color\n      }}\n    >\n      {props.items &&\n        Object.keys(props.items).map((k, i) => {\n          const item = props.items[k]\n\n          // if there is a subdropdown\n          if (item.dropDown) {\n            return (\n              <div\n                key={item.id}\n                className={styles.subDropDown}\n                style={{\n                  ...style.drawer,\n                  backgroundColor: context.secondary_color,\n                  color: context.text_color\n                }}\n              >\n                <button\n                  key={'sub' + item.id}\n                  onClick={(e) => handleSubDropDown(e, i, item)}\n                  className={classNames({\n                    [styles.activeButton]: i === activeItem,\n                    [styles.openLeft]: props.openLeft,\n                    [styles.openUp]: props.openUp\n                  })}\n                >\n                  {item.label}\n                  <span>{props.openLeft ? '<' : '>'}</span>\n                </button>\n\n                {/* \n                                this extra div helps ensure nested \n                                dropdowns are visible through hidden\n                                overflow\n                             */}\n                {i === activeItem && subDropDownId && (\n                  <div key={item.id} style={{ position: 'fixed' }}>\n                    <DropDown\n                      key={item.id + 'dd'}\n                      open={props.open && subDropDownOpen}\n                      items={{ ...props.items[subDropDownId].dropDown }}\n                      position={subDropDownPosition}\n                      openLeft={props.openLeft}\n                      openUp={props.openUp}\n                    />\n                  </div>\n                )}\n              </div>\n            )\n          } else {\n            return (\n              <div\n                key={item.id}\n                className={classNames({\n                  [styles.activeButton]: i === activeItem,\n                  [styles.disableHover]: item.disableHover,\n                  [styles.openLeft]: props.openLeft,\n                  [styles.openUp]: props.openUp\n                })}\n                style={{\n                  display: 'flex',\n                  width: '100%'\n                }}\n              >\n                <button\n                  key={'normal' + item.id}\n                  title={item.title}\n                  onClick={item.onClick}\n                >\n                  {item.label}\n                </button>\n                {item.buttons &&\n                  Object.keys(item.buttons).map((k) => {\n                    const b = item.buttons[k]\n                    return (\n                      <button\n                        key={'button' + b.id}\n                        onClick={b.onClick}\n                        title={b.title}\n                        style={{\n                          border: `1px solid ${context.outline_color}`,\n                          borderTop: 'none',\n                          borderBottom: 'none',\n                          borderLeftStyle: !props.openLeft ? 'solid' : 'none',\n                          borderRightStyle: props.openLeft ? 'solid' : 'none',\n                          flexShrink: 10,\n                          padding: 3\n                        }}\n                      >\n                        <small>{b.label}</small>\n                      </button>\n                    )\n                  })}\n              </div>\n            )\n          }\n        })}\n    </div>\n  )\n})\n\nDropDown.defaultProps = {\n  openLeft: false,\n  openUp: false\n}\n\nDropDown.propTypes = {}\n\nexport default DropDown\n","import React, { useState, useContext, useRef, useEffect } from 'react'\nimport styles from './ToolbarComponent.module.css'\nimport UIContext from '../UIContext'\nimport DropDownComponent from './DropDownComponent'\nimport classNames from 'classnames'\nimport { observer } from 'mobx-react'\n\nconst Toolbar = observer((props) => {\n  const context = useContext(UIContext).theme\n  const mainRef = useRef(null)\n\n  const [activeItem, setActiveItem] = useState(null)\n  const [dropDownOpen, setDropDownOpen] = useState(false)\n  const [dropDownId, setDropDownId] = useState(null)\n  const [dropDownPosition, setDropDownPosition] = useState({ top: 0, left: 0 })\n  const [openUp, setOpenUp] = useState(false)\n\n  const handleClickAway = (e) => {\n    if (mainRef.current && !mainRef.current.contains(e.target)) {\n      setActiveItem(null)\n      setDropDownOpen(false)\n    }\n  }\n\n  const handleWheel = (e) => {\n    let offset = Math.sign(e.deltaY) * 5\n    mainRef.current.scroll(mainRef.current.scrollLeft + offset, 0)\n\n    let at_start = mainRef.current.scrollLeft === 0\n    let at_end =\n      mainRef.current.offsetWidth + mainRef.current.scrollLeft >=\n      mainRef.current.scrollWidth\n\n    if (!at_start && !at_end && dropDownOpen) {\n      setDropDownPosition({\n        top: dropDownPosition.top,\n        left: dropDownPosition.left - offset\n      })\n    }\n  }\n\n  useEffect(() => {\n    document.addEventListener('click', (e) => handleClickAway(e))\n\n    let bounds = mainRef.current.getBoundingClientRect()\n    setOpenUp(bounds.y > window.innerHeight - window.innerHeight / 3)\n\n    return document.removeEventListener('click', (e) => handleClickAway(e))\n  }, [])\n\n  return (\n    <div\n      className={styles.toolbar}\n      ref={mainRef}\n      style={{\n        ...props.style,\n        backgroundColor: context.secondary_color || 'black',\n        color: context.text_color || 'white'\n      }}\n      onWheel={handleWheel}\n    >\n      {props.items &&\n        Object.keys(props.items).map((k, i) => {\n          let item = props.items[k]\n          return (\n            <button\n              key={item.id}\n              title={item.title}\n              style={{\n                ...item.style,\n                borderColor: context.text_color\n              }}\n              className={classNames(styles.button, {\n                [styles.activeButton]: item === activeItem || item.highlight,\n                // [styles.disableHover]: (item.onClick === undefined) && !item.dropDown\n                [styles.disableHover]: item.disableHover\n              })}\n              onClick={(e) => {\n                if (item.dropDown) {\n                  let toggle = item === activeItem ? !dropDownOpen : true\n\n                  let parent_bounds = mainRef.current.getBoundingClientRect()\n                  let bounds = e.currentTarget.getBoundingClientRect()\n\n                  let _openUp =\n                    bounds.y > window.innerHeight - window.innerHeight / 3\n                  setActiveItem(toggle ? item : null)\n                  setOpenUp(_openUp)\n                  setDropDownOpen(toggle)\n\n                  // this id is important so that the dropdowns to received DERIVED STATE!\n                  setDropDownId(item.id)\n                  setDropDownPosition({\n                    top: !openUp ? bounds.height : 'auto',\n                    bottom: openUp ? 0 : 'auto',\n                    left: bounds.left - parent_bounds.x\n                  })\n                }\n\n                if (item.onClick) item.onClick()\n              }}\n            >\n              {item.label}\n              {item.dropDown && (\n                <span className={styles.itemDecoration}>\n                  {openUp ? '▲' : '▼'}\n                </span>\n              )}\n            </button>\n          )\n        })}\n\n      <div style={{ position: 'fixed' }}>\n        {props.items[dropDownId] && (\n          <DropDownComponent\n            open={dropDownOpen}\n            items={{ ...props.items[dropDownId].dropDown }}\n            position={dropDownPosition}\n            openUp={openUp}\n          />\n        )}\n      </div>\n    </div>\n  )\n})\n\nexport default Toolbar\n","import React, { useState, useRef, useLayoutEffect } from 'react';\nimport DropDownComponent from './DropDownComponent';\nimport {observer} from 'mobx-react';\n\nconst ContextMenu = observer((props) => {\n    const mainRef = useRef(null);\n    let dropRef = useRef(null);\n\n    const [dropDownOpen, setDropDownOpen] = useState(false);\n    const [dropDownPosition, setDropDownPosition] = useState({top:0,left:0});\n    const [dropDownOpenLeft, setDropDownOpenLeft] = useState(false);\n    const [dropDownOpenUp, setDropDownOpenUp] = useState(false);\n\n    const handleClickAway = (e) => {\n        if (mainRef.current && !mainRef.current.contains(e.target)) {\n            setDropDownOpen(false);\n        }\n    }\n\n    const handleClick = (e) => {\n        e.preventDefault();\n\n        // keep open with right click.\n        setDropDownOpen(true);\n\n        // adjust to keep menu in frame\n        let x = e.pageX;\n        let y = e.pageY;\n\n        // 150 is the menu width, this shouldn't be hardcoded\n        // but it's not in bounding box when first clicked\n        if (e.pageX + 150 > window.innerWidth)\n            x -= 150\n        \n        let _openUp = y > (window.innerHeight - (window.innerHeight / 3));\n\n        setDropDownOpenUp(_openUp);\n        setDropDownOpenLeft(e.pageX > window.innerWidth / 2);\n        setDropDownPosition({\n            top: !_openUp ? y : 'auto',\n            bottom: _openUp ? (window.innerHeight - y) : 'auto',            \n            left:x\n        });\n         \n        return false;\n    }\n\n    const handleRef = (e) => {\n        dropRef = e;\n    }\n\n    useLayoutEffect(()=>{\n        document.addEventListener('click', (e) => handleClickAway(e), true);\n        document.addEventListener('contextmenu', (e) => handleClick(e), true);\n\n        return () => {\n            document.removeEventListener('click', (e) => handleClickAway(e), true);\n            document.removeEventListener('contextmenu', (e) => handleClick(e), true);\n        };\n    }, []);\n\n    return (\n        <div ref={mainRef}>\n            {/* <div style={{\n                position: 'absolute',\n                top: dropDownPosition.top,\n                left: dropDownPosition.left,\n                fontSize: '2em',\n                zIndex: 10000\n            }}>\n                ⌖\n            </div> */}\n            <DropDownComponent \n                open={dropDownOpen}                                    \n                items={props.items}\n                position={dropDownPosition}\n                onRef={handleRef}\n                openLeft={dropDownOpenLeft}\n                openUp={dropDownOpenUp}\n            />\n        </div>\n    );\n})\n\nexport default ContextMenu;","import React from 'react'\nimport styles from './MacoWrapperComponent.module.css'\nimport { observer } from 'mobx-react'\nimport ToolbarComponent from './ToolbarComponent'\nimport ContextMenuComponent from './ContextMenuComponent'\nimport UIContext from '../UIContext'\n\nconst MacoWrapper = observer((props) => {\n  const store = props.store\n\n  const handleContextMenu = () => {\n    // prevents context menu anywhere that hasn't been\n    // explicitly allowed\n    store.ui.context.setContextmenu(props.contextmenu)\n  }\n\n  return (\n    <div className={styles.wrapper}>\n      <UIContext.Provider value={store.ui}>\n        <ToolbarComponent items={props.titlebar} />\n        <ContextMenuComponent items={store.ui.context.contextmenu} />\n\n        <div\n          className={props.className}\n          style={{\n            width: '100%',\n            height: '100%',\n            position: 'absolute',\n            backgroundColor: store.ui.theme.tertiary_color,\n            ...props.style\n          }}\n          onContextMenu={() => handleContextMenu()}\n        />\n\n        {props.children}\n      </UIContext.Provider>\n    </div>\n  )\n})\n\nMacoWrapper.defaultProps = {\n  contextmenu: {},\n  titlebar: {}\n}\n\nexport default MacoWrapper\n","import React, { useState, useContext, useRef, useLayoutEffect } from 'react'\nimport styles from './PanelComponent.module.css'\nimport UIContext from '../UIContext'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport { observer } from 'mobx-react'\n\nconst Tooltip = observer((props) => {\n  const context = useContext(UIContext).theme\n  const [show, setShow] = useState(false)\n  const [position, setPosition] = useState([0, 0, 0, 0])\n\n  const handleToggle = (e) => {\n    let x = e.pageX\n    let y = e.pageY\n\n    if (x > window.innerWidth - 150) x = e.pageX - 150\n\n    if (y > window.innerHeight - 150) y = e.pageY - 150\n\n    setPosition([x, y])\n    setShow(!show)\n  }\n\n  return (\n    <div className={styles.tooltip}>\n      <div className={styles.tooltip_symbol} onClick={(e) => handleToggle(e)}>\n        ℹ\n      </div>\n      <div\n        className={styles.tooltip_content}\n        style={{\n          backgroundColor: context.primary_color,\n          border: `1px solid ${context.outline_color}`,\n          display: show ? 'block' : 'none',\n          left: position[0],\n          top: position[1]\n        }}\n      >\n        {props.content}\n      </div>\n    </div>\n  )\n})\n\nconst Panel = observer((props) => {\n  const context = useContext(UIContext).theme\n  const ui = useContext(UIContext)\n\n  const wrapperElement = useRef(null)\n\n  const [expanded, setExpanded] = useState(props.expanded)\n  const [focused, setFocused] = useState(props.focused)\n  const [hover, setHover] = useState(false)\n\n  const handleResize = (e, direction = 'xy') => {\n    let dragging = true\n\n    const pBounds = wrapperElement.current.getBoundingClientRect()\n    const initialDimensions = [pBounds.width, pBounds.height]\n    const initialPosition = [pBounds.x, pBounds.y]\n\n    const handleMove = (e) => {\n      if (e.touches) e = e.touches[0]\n\n      if (e.pageY && dragging) {\n        const pBounds = wrapperElement.current.getBoundingClientRect()\n\n        let w, h\n        let x, y\n\n        switch (direction) {\n          case 'se':\n            w = e.pageX - pBounds.x\n            h = e.pageY - pBounds.y\n            props.onDimensionsChange([w, h])\n            break\n          case 'e':\n            w = e.pageX - pBounds.x\n            h = props.dimensions[1]\n            props.onDimensionsChange([w, h])\n            break\n          case 's':\n            w = props.dimensions[0]\n            h = e.pageY - pBounds.y\n            props.onDimensionsChange([w, h])\n            break\n          case 'sw':\n            w = initialDimensions[0] + (initialPosition[0] - e.pageX)\n            h = e.pageY - pBounds.y\n            x = e.pageX\n            y = pBounds.y\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          case 'w':\n            w = initialDimensions[0] + (initialPosition[0] - e.pageX)\n            h = props.dimensions[1]\n            x = e.pageX\n            y = pBounds.y\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          case 'n':\n            w = props.dimensions[0]\n            h = initialDimensions[1] + (initialPosition[1] - e.pageY)\n            x = pBounds.x\n            y = e.pageY\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          case 'nw':\n            w = initialDimensions[0] + (initialPosition[0] - e.pageX)\n            h = initialDimensions[1] + (initialPosition[1] - e.pageY)\n            x = e.pageX\n            y = e.pageY\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          case 'ne':\n            w = e.pageX - pBounds.x\n            h = initialDimensions[1] + (initialPosition[1] - e.pageY)\n            x = pBounds.x\n            y = e.pageY\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          default:\n            break\n        }\n      }\n    }\n\n    const handleMoveEnd = (e) => {\n      dragging = false\n      if (e.touches && e.touches[0]) e = e.touches[0]\n\n      if (e.pageY) {\n        const pBounds = wrapperElement.current.getBoundingClientRect()\n\n        let w, h\n        let x, y\n\n        switch (direction) {\n          case 'se':\n            w = e.pageX - pBounds.x\n            h = e.pageY - pBounds.y\n            props.onDimensionsChange([w, h])\n            break\n          case 'e':\n            w = e.pageX - pBounds.x\n            h = props.dimensions[1]\n            props.onDimensionsChange([w, h])\n            break\n          case 's':\n            w = props.dimensions[0]\n            h = e.pageY - pBounds.y\n            props.onDimensionsChange([w, h])\n            break\n          case 'sw':\n            w = initialDimensions[0] + (initialPosition[0] - e.pageX)\n            h = e.pageY - pBounds.y\n            x = e.pageX\n            y = pBounds.y\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          case 'w':\n            w = initialDimensions[0] + (initialPosition[0] - e.pageX)\n            h = props.dimensions[1]\n            x = e.pageX\n            y = pBounds.y\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          case 'n':\n            w = props.dimensions[0]\n            h = initialDimensions[1] + (initialPosition[1] - e.pageY)\n            x = pBounds.x\n            y = e.pageY\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          case 'nw':\n            w = initialDimensions[0] + (initialPosition[0] - e.pageX)\n            h = initialDimensions[1] + (initialPosition[1] - e.pageY)\n            x = e.pageX\n            y = e.pageY\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          case 'ne':\n            w = e.pageX - pBounds.x\n            h = initialDimensions[1] + (initialPosition[1] - e.pageY)\n            x = pBounds.x\n            y = e.pageY\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          default:\n            break\n        }\n      }\n\n      document.removeEventListener('mousemove', handleMove)\n      document.removeEventListener('mouseup', handleMoveEnd)\n      document.removeEventListener('touchmove', handleMove)\n      document.removeEventListener('touchend', handleMoveEnd)\n    }\n\n    if (e.touches && e.touches[0]) e = e.touches[0]\n\n    document.addEventListener('mousemove', handleMove)\n    document.addEventListener('mouseup', handleMoveEnd)\n    document.addEventListener('touchmove', handleMove)\n    document.addEventListener('touchend', handleMoveEnd)\n  }\n\n  const handleMoveStart = (e) => {\n    /*\n\t\t\tthere are issues with drag events in firefox that make\n\t\t\tthe native 'drag' events less useful for this case. my \n\t\t\talternative was to use mouseEvents and create listeners \n\t\t\ton the document\n\t\t*/\n\n    function handleMove(e) {\n      if (e.touches) e = e.touches[0]\n\n      if (e.pageY) {\n        const x = e.pageX - dragOff[0]\n        const y = e.pageY - dragOff[1]\n\n        // limits to upper left\n        props.onPositionChange([x >= 0 ? x : 0, y >= 0 ? y : 0])\n      }\n    }\n\n    function handleMoveEnd(e) {\n      if (e.touches && e.touches[0]) e = e.touches[0]\n\n      if (e.pageY) {\n        const x = e.pageX - dragOff[0]\n        const y = e.pageY - dragOff[1]\n\n        // limits to upper left\n        props.onPositionChange([x >= 0 ? x : 0, y >= 0 ? y : 0])\n      }\n\n      document.removeEventListener('mousemove', handleMove)\n      document.removeEventListener('mouseup', handleMoveEnd)\n      document.removeEventListener('touchmove', handleMove)\n      document.removeEventListener('touchend', handleMoveEnd)\n    }\n\n    // use first touch event if on mobile device\n    if (e.touches) e = e.touches[0]\n\n    const pBounds = wrapperElement.current.getBoundingClientRect()\n    const offset = { x: pBounds.left, y: pBounds.top }\n\n    const dragOff = [e.pageX - offset.x, e.pageY - offset.y]\n\n    document.addEventListener('mousemove', handleMove)\n    document.addEventListener('mouseup', handleMoveEnd)\n    document.addEventListener('touchmove', handleMove)\n    document.addEventListener('touchend', handleMoveEnd)\n  }\n\n  const handleCenter = () => {\n    if (!props.onPositionChange) return\n    const pBounds = wrapperElement.current.getBoundingClientRect()\n\n    const x = window.innerWidth / 2 - pBounds.width / 2\n    const y = window.innerHeight / 2 - pBounds.height / 2\n\n    // limits to upper left\n    props.onPositionChange([x >= 0 ? x : 0, y >= 0 ? y : 0])\n  }\n\n  const handleFullscreen = () => {\n    if (!props.fullscreen) handleCenter()\n\n    props.onFullscreen(!props.fullscreen)\n    props.onFloat(props.fullscreen)\n  }\n\n  const handleFloat = () => {\n    if (props.floating === null) {\n      // get current width/height if it hasn't been detached before\n      const pBounds = wrapperElement.current.getBoundingClientRect()\n      if (props.onDimensionsChange)\n        props.onDimensionsChange([pBounds.width, pBounds.height])\n    }\n\n    if (props.onFloat) props.onFloat(!props.floating)\n  }\n\n  /*\n\t\tpositions the panel on top when hovered over\n\t*/\n  const handleFocus = (e) => {\n    setHover(true)\n    setFocused(true)\n    if (props.onFocus) props.onFocus(e)\n  }\n\n  const handleBlur = () => {\n    wrapperElement.current.blur()\n    setHover(false)\n    setFocused(false)\n    if (props.onBlur) props.onBlur(false)\n  }\n\n  let mainStyling = {}\n\n  if (props.floating && !props.fullscreen) {\n    mainStyling = {\n      width: props.dimensions[0],\n      height: expanded ? props.dimensions[1] : 'min-content',\n      left: props.position[0],\n      top: props.position[1]\n    }\n  } else if (props.fullscreen) {\n    mainStyling = {\n      width: '100%',\n      height: '100%',\n      left: 0,\n      top: 0\n    }\n  }\n\n  const hasTitle =\n    props.showTitle &&\n    (props.title || props.onRemove || props.collapsible || props.floating)\n  const borderColor = focused ? context.accent_color : context.outline_color\n\n  // let dblClickTitle = null\n\n  // if (props.canFullscreen) {\n  //   dblClickTitle = handleFullscreen\n  // } else if (props.collapsible) {\n  //   dblClickTitle = () => setExpanded(!expanded)\n  // } else if (props.canFloat) {\n  //   dblClickTitle = handleFloat\n  // }\n\n  // questionable mix of controlled/uncontrolled\n  useLayoutEffect(() => {\n    setExpanded(props.expanded)\n  }, [props.expanded])\n\n  return (\n    <div\n      ref={wrapperElement}\n      className={classNames(styles.panel, {\n        [styles.fullscreen]: props.fullscreen,\n        [styles.floating]: props.floating,\n        [styles.collapsed]: !expanded\n      })}\n      style={{\n        backgroundColor: !props.fullscreen\n          ? context.primary_color\n          : 'transparent',\n        color: context.text_color || 'white',\n        border:\n          props.border && !props.fullscreen\n            ? '1px solid ' + borderColor\n            : 'none',\n        height: props.collapsible ? 'auto' : '100%',\n        margin: props.gutters ? props.gutterSize : 0,\n        zIndex: hover ? 5 : 2,\n        ...mainStyling,\n        ...props.style\n      }}\n      onFocus={handleFocus}\n      onBlur={handleBlur}\n      onContextMenu={props.onContextMenu}\n      onMouseEnter={props.onMouseEnter}\n      onMouseLeave={props.onMouseLeave}\n      onMouseOver={props.onMouseOver}\n      onMouseOut={props.onMouseOut}\n      tabIndex='-1'\n    >\n      {hasTitle && (\n        <div\n          className={styles.title_bar}\n          style={{\n            backgroundColor: context.primary_color || 'black',\n            ...props.titleStyle\n          }}\n        >\n          {props.canFullscreen && (\n            <button\n              title='fullscreen'\n              onClick={handleFullscreen}\n              style={{ fontSize: '0.9em' }}\n            >\n              ✳\n            </button>\n          )}\n\n          {props.canRemove && (\n            <button title='close' onClick={props.onRemove}>\n              x\n            </button>\n          )}\n\n          {props.canFloat && (\n            <button\n              title={props.floating ? 'snap' : 'float'}\n              onClick={handleFloat}\n              style={{ fontSize: '0.9em' }}\n            >\n              {props.floating ? '◧' : '❏'}\n            </button>\n          )}\n\n          {props.collapsible && (\n            <button onClick={() => setExpanded(!expanded)}>\n              {expanded ? '▾' : '▸'}\n            </button>\n          )}\n\n          <div\n            className={styles.dragContainer}\n            // NOTE: double click temporarily disabled\n            // because it gets in the way of panel select\n            // onDoubleClick={dblClickTitle}\n            onClick={\n              props.collapsible && !props.canFullscreen\n                ? () => setExpanded(!expanded)\n                : null\n            }\n          >\n            {props.floating && (\n              <div\n                className={styles.moveHandle}\n                onTouchStart={handleMoveStart}\n                onMouseDown={handleMoveStart}\n              />\n            )}\n\n            {props.onPanelSelect !== undefined ? (\n              <select\n                title='select the panel to display'\n                className={styles.panelSelect}\n                onChange={props.onPanelSelect}\n                defaultValue={props.uuid}\n              >\n                {Object.values(ui.panelVariants).map((e) => (\n                  <option key={e.id} value={e.id}>\n                    {e.title}\n                  </option>\n                ))}\n              </select>\n            ) : (\n              <legend>\n                <strong>{props.title}</strong>\n              </legend>\n            )}\n          </div>\n\n          <div className={styles.subtitle}>{props.subtitle}</div>\n\n          {props.indicators && (\n            <div className={styles.indicators}>\n              {props.indicators.map((e, i) => {\n                return (\n                  <div\n                    key={i}\n                    className={styles.indicator}\n                    title={e.title}\n                    style={{\n                      color: context.primary_color,\n                      backgroundColor: e.color\n                    }}\n                  >\n                    {e.label}\n                  </div>\n                )\n              })}\n            </div>\n          )}\n\n          {props.tooltip && <Tooltip content={props.tooltip} />}\n        </div>\n      )}\n\n      {expanded && props.toolbar}\n\n      {expanded && (\n        <div\n          style={{\n            borderColor: context.text_color,\n            flexBasis: props.fullscreen ? '0px' : 'auto'\n          }}\n          className={classNames(styles.panel_content, {\n            [styles.horizontal]: props.horizontal,\n            [styles.vertical]: props.vertical\n          })}\n          ref={props.onRef}\n        >\n          {props.children}\n        </div>\n      )}\n\n      {expanded && props.footbar}\n\n      {/* resize handles */}\n      {props.floating && !props.fullscreen && expanded && (\n        <React.Fragment>\n          <div\n            className={`${styles.resizeHandle} ${styles.resizeSE}`}\n            onTouchStart={(e) => handleResize(e, 'se')}\n            onMouseDown={(e) => handleResize(e, 'se')}\n            style={{\n              borderColor: context.text_color\n            }}\n          />\n          <div\n            className={`${styles.resizeHandle} ${styles.resizeE}`}\n            onTouchStart={(e) => handleResize(e, 'e')}\n            onMouseDown={(e) => handleResize(e, 'e')}\n            style={{\n              borderColor: context.text_color\n            }}\n          />\n          <div\n            className={`${styles.resizeHandle} ${styles.resizeS}`}\n            onTouchStart={(e) => handleResize(e, 's')}\n            onMouseDown={(e) => handleResize(e, 's')}\n            style={{\n              borderColor: context.text_color\n            }}\n          />\n          <div\n            className={`${styles.resizeHandle} ${styles.resizeSW}`}\n            onTouchStart={(e) => handleResize(e, 'sw')}\n            onMouseDown={(e) => handleResize(e, 'sw')}\n            style={{\n              borderColor: context.text_color\n            }}\n          />\n          <div\n            className={`${styles.resizeHandle} ${styles.resizeW}`}\n            onTouchStart={(e) => handleResize(e, 'w')}\n            onMouseDown={(e) => handleResize(e, 'w')}\n            style={{\n              borderColor: context.text_color\n            }}\n          />\n          <div\n            className={`${styles.resizeHandle} ${styles.resizeN}`}\n            onTouchStart={(e) => handleResize(e, 'n')}\n            onMouseDown={(e) => handleResize(e, 'n')}\n            style={{\n              borderColor: context.text_color\n            }}\n          />\n          <div\n            className={`${styles.resizeHandle} ${styles.resizeNE}`}\n            onTouchStart={(e) => handleResize(e, 'ne')}\n            onMouseDown={(e) => handleResize(e, 'ne')}\n            style={{\n              borderColor: context.text_color\n            }}\n          />\n          <div\n            className={`${styles.resizeHandle} ${styles.resizeNW}`}\n            onTouchStart={(e) => handleResize(e, 'nw')}\n            onMouseDown={(e) => handleResize(e, 'nw')}\n            style={{\n              borderColor: context.text_color\n            }}\n          />\n        </React.Fragment>\n      )}\n    </div>\n  )\n})\n\nPanel.defaultProps = {\n  fullscreen: false,\n  expanded: true,\n  border: true,\n  focused: false,\n  floating: false,\n  position: [100, 100],\n  dimensions: [100, 100],\n  gutterSize: 5,\n  showTitle: true,\n  onContextMenu: () => {}\n}\n\nPanel.propTypes = {\n  onRemove: PropTypes.func,\n  onFocus: PropTypes.func,\n  toolbar: PropTypes.object,\n  children: PropTypes.any,\n  style: PropTypes.object,\n  titleStyle: PropTypes.object,\n  title: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  indicators: PropTypes.array,\n  horizontal: PropTypes.bool,\n  vertical: PropTypes.bool,\n  collapsible: PropTypes.bool,\n  fullscreen: PropTypes.bool,\n  floating: PropTypes.bool,\n  showTitle: PropTypes.bool,\n  // adds space around the panel, off by default\n  gutters: PropTypes.bool,\n  gutterSize: PropTypes.number,\n  border: PropTypes.bool\n}\n\nexport const GenericPanel = observer((props) => (\n  <Panel\n    uuid={props.panel.id}\n    title={props.title ?? props.panel.title}\n    subtitle={props.subtitle ?? props.panel.subtitle}\n    collapsible={props.collapsible ?? props.panel.collapsible}\n    fullscreen={props.panel.fullscreen}\n    canFullscreen={props.panel.canFullscreen}\n    floating={props.panel.floating}\n    expanded={props.expanded}\n    showTitle={props.showTitle ?? props.panel.showTitle}\n    canFloat={props.panel.canFloat}\n    defaultWidth={props.panel.defaultWidth}\n    defaultHeight={props.panel.defaultWidth}\n    position={props.panel.position}\n    dimensions={props.panel.dimensions}\n    toolbar={props.toolbar}\n    footbar={props.footbar}\n    indicators={props.indicators}\n    tooltip={props.tooltip}\n    onRemove={props.onRemove ?? props.panel.onRemove}\n    canRemove={props.canRemove ?? props.panel.canRemove}\n    style={props.style}\n    onContextMenu={props.onContextMenu}\n    onContextMenuCapture={props.onContextMenuCapture}\n    onFocus={props.onFocus}\n    onBlur={props.onBlur}\n    onRef={props.onRef}\n    onFloat={props.panel.setFloating}\n    onPositionChange={props.panel.setPosition}\n    onDimensionsChange={props.panel.setDimensions}\n    onFullscreen={props.panel.setFullscreen}\n    onPanelSelect={props.onPanelSelect}\n  >\n    {props.children}\n  </Panel>\n))\n\nexport default Panel\n","import React from 'react'\nimport styles from './TextComponent.module.css'\n\nconst Text = (props) => {\n  return (\n    <div className={styles.text} style={props.style}>\n      {props.children}\n    </div>\n  )\n}\n\nexport default Text\n","import React, { useContext } from 'react'\nimport styles from './ControlGroupComponent.module.css'\nimport UIContext from '../UIContext'\n\nconst ControlGroup = (props) => {\n  const context = useContext(UIContext).theme\n\n  return (\n    <div className={styles.wrapper}>\n      <fieldset\n        style={{\n          borderColor: context.outline_color\n        }}\n      >\n        {props.name && (\n          <legend\n            style={{\n              padding: '2px 4px',\n              backgroundColor: context.text_color,\n              color: context.primary_color\n            }}\n          >\n            <strong>{props.name}</strong>\n          </legend>\n        )}\n\n        <div>\n          {React.Children.map(props.children, (child) => {\n            let inputWidth = 100.0\n\n            if (props.children.length) {\n              inputWidth = 100.0 / props.children.length\n            }\n\n            if (React.isValidElement(child)) {\n              return React.cloneElement(child, {\n                style: { width: `${inputWidth}%` }\n              })\n            }\n\n            return child\n          })}\n        </div>\n      </fieldset>\n    </div>\n  )\n}\n\nexport default ControlGroup\n","import { useLayoutEffect, useRef } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport ResizeObserver from 'resize-observer-polyfill'\r\n\r\nconst useObserver = (callback, element, dependencies = []) => {\r\n  const observer = useRef(null)\r\n  \r\n  useLayoutEffect(() => {\r\n    const observe = () => {\r\n      if (element && element.current && observer.current) {\r\n        observer.current.observe(element.current)\r\n      }\r\n    }\r\n\r\n    const current = element.current\r\n\r\n    // if we are already observing old element\r\n    if (observer && observer.current && current) {\r\n      observer.current.unobserve(current)\r\n    }\r\n    const resizeObserverOrPolyfill = ResizeObserver\r\n\r\n    observer.current = new resizeObserverOrPolyfill(callback)\r\n    observe()\r\n\r\n    return () => {\r\n      if (observer && observer.current && current) {\r\n        observer.current.unobserve(current)\r\n      }\r\n    }\r\n  }, [callback, element, observer, ...dependencies])\r\n}\r\n\r\nuseObserver.propTypes = {\r\n  element: PropTypes.object,\r\n  callback: PropTypes.func\r\n  //   dependencies\r\n}\r\n\r\nexport default useObserver\r\n","import React, {\n  useState,\n  useContext,\n  useRef,\n  useEffect,\n  useLayoutEffect\n} from 'react'\nimport useResizeObserver from './hooks/ResizeHook'\nimport classNames from 'classnames'\nimport styles from './SplitContainer.module.css'\nimport UIContext from '../UIContext'\nimport PropTypes from 'prop-types'\n\nclass Split {\n  constructor({ id = 0, floating = false, size = 100 }) {\n    this.id = id\n    this.floating = floating\n    this.size = size\n  }\n}\n\nconst SplitContainer = (props) => {\n  const context = useContext(UIContext).theme\n\n  const distributeSplits = () => {\n    const count = props.children.length\n\n    // make a full length split if there is only one child\n    if (count <= 1)\n      return [\n        new Split({\n          id: 0,\n          floating: false,\n          size: 100\n        })\n      ]\n\n    // get all splits with default size values\n    const defaultSplits = props.children\n      .filter((e) => e.props.defaultsize)\n      .map(\n        (e, i) =>\n          new Split({\n            id: i,\n            floating: false,\n            size: e.props.defaultsize * 100.0\n          })\n      )\n\n    // if defaults are defined, take them into account\n    if (defaultSplits.length) {\n      const defaultSum = defaultSplits\n        .filter((s) => !s.floating)\n        .reduce((a, b) => a + b.size, 0)\n\n      // get default split sum\n      return props.children.map(\n        (e, i) =>\n          new Split({\n            id: i,\n            size: e.props.defaultsize\n              ? e.props.defaultsize * 100.0\n              : (100.0 - defaultSum) / (count - 1),\n            floating: false\n          })\n      )\n    } else {\n      return props.children.map(\n        (e, i) =>\n          new Split({\n            id: i,\n            floating: false,\n            size: 100.0 / count\n          })\n      )\n    }\n  }\n\n  const [split, setSplit] = useState(distributeSplits())\n  const [isEmpty, setEmpty] = useState(false)\n\n  const wrapperElement = useRef(null)\n\n  // if the split is set to auto, decide whether or not its vertical based on\n  // wrapper dimensions / aspect ratio\n  const [isVertical, setIsVertical] = useState(\n    props.vertical || !props.horizontal\n  )\n\n  const handleContainerResize = (e) => {\n    if (props.auto) {\n      const bounds = wrapperElement.current.getBoundingClientRect()\n      setIsVertical(bounds.width < bounds.height)\n    }\n  }\n\n  // TO DO this causes way too many redraws!\n  useResizeObserver(handleContainerResize, wrapperElement, [\n    props.auto,\n    isVertical\n  ])\n\n  const handlePanelResize = (e, i) => {\n    function handleMove(e) {\n      if (e.pageX) {\n        const pBounds = wrapperElement.current.getBoundingClientRect()\n\n        let s\n\n        if (isVertical) {\n          s = (e.pageY - pBounds.y) / pBounds.height\n        } else {\n          s = (e.pageX - pBounds.x) / pBounds.width\n        }\n\n        const splitSum =\n          i > 0\n            ? split\n                .slice(0, i)\n                .filter((s) => !s.floating)\n                .reduce((a, b) => a + b.size, 0)\n            : 0\n        split[i].size = s * 100 - splitSum\n\n        if (split[i].size > 100) split[i].size = 100\n        if (split[i].size < 0) split[i].size = 0\n\n        setSplit([...split])\n      }\n    }\n\n    function handleMoveEnd(e) {\n      if (e.touches && e.touches[0]) e = e.touches[0]\n\n      if (e.pageX) {\n        const pBounds = wrapperElement.current.getBoundingClientRect()\n\n        let s\n\n        if (isVertical) {\n          s = (e.pageY - pBounds.y) / pBounds.height\n        } else {\n          s = (e.pageX - pBounds.x) / pBounds.width\n        }\n\n        const splitSum =\n          i > 0\n            ? split\n                .slice(0, i)\n                .filter((s) => !s.floating)\n                .reduce((a, b) => a + b.size, 0)\n            : 0\n        split[i].size = s * 100 - splitSum\n\n        if (split[i].size > 100) split[i].size = 100\n        if (split[i].size < 0) split[i].size = 0\n\n        setSplit([...split])\n      }\n\n      document.removeEventListener('mousemove', handleMove)\n      document.removeEventListener('mouseup', handleMoveEnd)\n      document.removeEventListener('touchmove', handleMove)\n      document.removeEventListener('touchend', handleMoveEnd)\n    }\n\n    if (e.touches && e.touches[0]) e = e.touches[0]\n\n    document.addEventListener('mousemove', handleMove)\n    document.addEventListener('mouseup', handleMoveEnd)\n    document.addEventListener('touchmove', handleMove)\n    document.addEventListener('touchend', handleMoveEnd)\n  }\n\n  const handleDetach = (i, detachBool) => {\n    if (i === split.length) return\n    split[i].floating = detachBool\n    setSplit([...split])\n  }\n\n  useLayoutEffect(\n    (e) => {\n      setSplit(distributeSplits())\n    },\n    [props.children.length, props.updateFlag]\n  )\n\n  useEffect(\n    (e) => {\n      // if all empty\n      if (!split.filter((s) => !s.floating).length && !isEmpty) {\n        setEmpty(true)\n        if (props.onEmpty) props.onEmpty(true)\n      }\n\n      // if empty and a new split has been changed\n      if (isEmpty) {\n        setEmpty(false)\n        if (props.onEmpty) props.onEmpty(false)\n      }\n    },\n    [split]\n  )\n\n  const wrapperClass = classNames(styles.wrapper, {\n    [styles.vertical]: isVertical,\n    [styles.horizontal]: !isVertical,\n    [styles.empty]: isEmpty\n  })\n\n  return (\n    <div\n      className={wrapperClass}\n      ref={wrapperElement}\n      style={{\n        backgroundColor: context.tertiary_color\n      }}\n    >\n      {props.children &&\n        React.Children.map(props.children, (child, i) => {\n          const isSplit = child.type.name === 'SplitContainer'\n\n          // if there is only one panel, make it full width and height\n          if (props.children.length === 1)\n            return (\n              <div\n                style={isVertical ? { height: '100%' } : { width: '100%' }}\n                className={classNames({\n                  [styles.split_container]: isSplit,\n                  [styles.panel_container]: !isSplit\n                })}\n              >\n                {child}\n              </div>\n            )\n\n          let hasHandle = i < props.children.length - 1\n\n          let w\n          // for all panels up to the last\n          if (i < props.children.length - 1) {\n            w = split[i] ? split[i].size : 0\n            w = split[i].floating ? 0 : w\n            if (split[i].floating) hasHandle = false\n          } else {\n            // sum all splits and get the final panel width\n            // if last split is floating, remove handle\n            if (split[i] && split[i].floating) {\n              hasHandle = false\n              w = 0\n            } else {\n              w =\n                100 -\n                split\n                  .slice(0, -1)\n                  .filter((s) => !s.floating)\n                  .reduce((a, b) => a + b.size, 0)\n            }\n          }\n\n          if (split[i + 1] && split[i + 1].floating && i === split.length - 2) {\n            w =\n              100 -\n              split\n                .slice(0, i)\n                .filter((s) => !s.floating)\n                .reduce((a, b) => a + b.size, 0)\n          }\n\n          if (\n            split[i] &&\n            !split[i].floating &&\n            split.filter((s) => !s.floating).length === 1\n          ) {\n            w = 100\n            hasHandle = false\n          }\n\n          /* \n            attaches hook that watches for float\n            (hopefully this isn't a performance hit)\n          */\n          if (child.props.detachable) {\n            child = React.cloneElement(child, {\n              ...child.props,\n              onDetach: (b) => handleDetach(i, b)\n            })\n          }\n\n          /*\n            if the child is a split, and the split is empty, make it shrink\n          */\n          if (isSplit) {\n            child = React.cloneElement(child, {\n              ...child.props,\n              onEmpty: (b) => handleDetach(i, b)\n            })\n          }\n\n          return (\n            <React.Fragment>\n              <div\n                style={isVertical ? { height: w + '%' } : { width: w + '%' }}\n                className={classNames(styles.panel_content, {\n                  [styles.split_container]: isSplit,\n                  [styles.panel_container]: !isSplit,\n                  [styles.split_floating]: split[i] ? split[i].floating : false\n                })}\n              >\n                {/* {`w: ${w}`} */}\n                {child}\n              </div>\n              {hasHandle && (\n                <div\n                  className={classNames(styles.drag_container, {\n                    [styles.vertical]: isVertical,\n                    [styles.horizontal]: !isVertical\n                  })}\n                >\n                  <div\n                    className={classNames(styles.drag_handle_visible, {\n                      [styles.vertical]: isVertical,\n                      [styles.horizontal]: !isVertical\n                    })}\n                    style={{\n                      // backgroundColor: context.accent_color,\n                      borderColor: context.accent_color\n                    }}\n                    onTouchStart={(e) => handlePanelResize(e, i)}\n                    onMouseDown={(e) => handlePanelResize(e, i)}\n                  >\n                    <div\n                      className={classNames(styles.drag_handle, {\n                        [styles.vertical]: isVertical,\n                        [styles.horizontal]: !isVertical\n                      })}\n                      style={{\n                        // backgroundColor: context.accent_color,\n                        borderColor: context.outline_color\n                      }}\n                    />\n                  </div>\n                </div>\n              )}\n            </React.Fragment>\n          )\n        })}\n\n      {props.children.length === 0 && (\n        <p\n          style={{\n            alignSelf: 'center',\n            textAlign: 'center'\n          }}\n        >\n          <small>no panel in split!</small>\n        </p>\n      )}\n    </div>\n  )\n}\n\nSplitContainer.defaultProps = {\n  updateFlag: false\n}\n\n// the children can have a defaultsize prop\n\nSplitContainer.propTypes = {\n  children: PropTypes.any.isRequired,\n  horizontal: PropTypes.bool,\n  vertical: PropTypes.bool,\n  auto: PropTypes.bool, // used to automatically choose from horizontal or vertical\n  split: PropTypes.array,\n  updateFlag: PropTypes.bool\n}\n\nexport default SplitContainer\n","import React, { useContext, useRef } from 'react'\nimport classNames from 'classnames'\nimport styles from './LayoutContainer.module.css'\nimport UIContext from '../UIContext'\nimport { GenericPanel } from './PanelComponent'\nimport { observer } from 'mobx-react'\n\nconst LayoutContainer = observer((props) => {\n  const context = useContext(UIContext).theme\n  const ui = useContext(UIContext)\n\n  const isVertical = props.layout.direction === 'VERTICAL'\n\n  const isEmpty = props.layout.isEmpty\n\n  const wrapperElement = useRef(null)\n\n  const handleResize = (e, layout) => {\n    function handleMove(e) {\n      if (e.touches) e = e.touches[0]\n\n      if (e.pageX) {\n        const bounds = wrapperElement.current.getBoundingClientRect()\n\n        let pos\n        if (isVertical) {\n          pos = (e.pageY - bounds.y) / bounds.height\n        } else {\n          pos = (e.pageX - bounds.x) / bounds.width\n        }\n\n        layout.adjust(pos)\n      }\n    }\n\n    function handleMoveEnd(e) {\n      if (e.touches && e.touches[0]) e = e.touches[0]\n\n      if (e.pageX) {\n        const bounds = wrapperElement.current.getBoundingClientRect()\n\n        let pos\n        if (isVertical) {\n          pos = (e.pageY - bounds.y) / bounds.height\n        } else {\n          pos = (e.pageX - bounds.x) / bounds.width\n        }\n\n        layout.adjust(pos)\n      }\n\n      document.removeEventListener('mousemove', handleMove)\n      document.removeEventListener('mouseup', handleMoveEnd)\n      document.removeEventListener('touchmove', handleMove)\n      document.removeEventListener('touchend', handleMoveEnd)\n    }\n\n    if (e.touches && e.touches[0]) e = e.touches[0]\n\n    document.addEventListener('mousemove', handleMove)\n    document.addEventListener('mouseup', handleMoveEnd)\n    document.addEventListener('touchmove', handleMove)\n    document.addEventListener('touchend', handleMoveEnd)\n  }\n\n  const handleContextMenu = (e, layout) => {\n    let result = {}\n\n    Object.values(ui.panelVariants).forEach((panel) => {\n      result = {\n        ...result,\n        [panel.id]: {\n          id: panel.id,\n          label: panel.title,\n          onClick: () => {\n            props.layout.addPanel(panel, layout)\n          }\n        }\n      }\n    })\n\n    ui.context.setContextmenu({\n      addPanel: {\n        id: 'addPanel',\n        label: 'add panel',\n        dropDown: result\n      },\n      distributeLayout: {\n        id: 'DistributeLayout',\n        label: 'distribute layout',\n        onClick: props.layout.distributeChildren\n      }\n      /* TODO reset layout */\n    })\n\n    if (props.onContextMenu) props.onContextMenu(e, layout)\n  }\n\n  const handlePanelSelect = (e, sibling) => {\n    sibling.setPanel(e.target.value)\n  }\n\n  const handlePanelRemove = (layout) => {\n    props.layout.removePanel(layout)\n  }\n\n  const generateLayout = () => {\n    let elements = []\n    elements = props.layout.children.map((sibling, i) => {\n      /* \n          this will loop through all of the components passed as\n          children, and if it is another layout, it will nest another \n          layout inside\n        */\n      const siblings = props.layout.children\n      const childIsLayout = sibling.children.length\n      // TODO should remove the '- 1' but it causes an overflow issue\n      let hasHandle = i < props.layout.children.length - 1\n      let size = 0\n\n      const filterOutFloats = (s) => !s.panel || (s.panel && !s.panel.floating)\n\n      const isEmpty = (layout) => {\n        return (\n          layout.children.length &&\n          layout.children.filter(filterOutFloats).length === 0\n        )\n      }\n      /*\n          the benefit of applying the size calculations here\n          is that floating panels will retain their width. \n\n          this is for the most part why there is resizing \n          logic here AND in Layout.js. The layout holds on\n          to the width even when something is floating, and\n          then it can restore to it's original dimensions.\n      */\n      const isFloating = (layout) => {\n        return isEmpty(layout) || (layout.panel && layout.panel.floating)\n      }\n\n      if (isFloating(sibling)) {\n        console.log(sibling.id + ' is floating')\n        hasHandle = false\n        size = 0\n      } else {\n        size = sibling.size\n\n        /*  \n            scan to the left for any floats to absorb\n          */\n        for (let j = i - 1; j >= 0; j--) {\n          if (isFloating(siblings[j])) {\n            size += siblings[j].size\n          } else {\n            break\n          }\n        }\n\n        /*\n          check to see if there are floats that extend all of the\n          way to the right\n        */\n        let tSum = 0\n        for (let j = i + 1; j < siblings.length; j++) {\n          if (isFloating(siblings[j])) {\n            tSum += siblings[j].size\n            // if we make it to the end, absorb all.\n            // otherwise, another panel will take care of it\n            if (j === siblings.length - 1) size += tSum\n          } else {\n            break\n          }\n        }\n      }\n\n      size *= 100\n\n      return (\n        <React.Fragment key={sibling.id}>\n          {/* this div element contains each individual frame */}\n          <div\n            style={isVertical ? { height: size + '%' } : { width: size + '%' }}\n            className={classNames(styles.panel_content, {\n              [styles.layout_container]: childIsLayout,\n              [styles.panel_container]: !childIsLayout,\n              [styles.float_container]: isFloating(sibling)\n            })}\n          >\n            <div className={styles.debug}>{size}</div>\n            {/*  \n                if the current sibling has children, render layout,\n                otherwise display panel\n              */}\n            {sibling.children.length ? (\n              <LayoutContainer layout={sibling}>\n                {props.children}\n              </LayoutContainer>\n            ) : (\n              <GenericPanel\n                panel={sibling.panel}\n                onPanelSelect={(e) => handlePanelSelect(e, sibling)}\n                onRemove={() => handlePanelRemove(sibling)}\n              >\n                {/* \n                    this is the main panel that surrounds the child\n                    it scans through the props.children for matching\n                    components\n                  */}\n                {props.children.filter((child) => {\n                  /* \n                      this grabs the id that corresponds with the \n                      panel.id\n                    */\n                  if (child.props.panel) {\n                    return child.props.panel.id === sibling.panel.id\n                  } else {\n                    // return child.props.id === sibling.id\n                  }\n                })}\n              </GenericPanel>\n            )}\n          </div>\n          {hasHandle && (\n            <div\n              onContextMenu={(e) => handleContextMenu(e, sibling)}\n              className={classNames(styles.drag_container, {\n                [styles.vertical]: isVertical,\n                [styles.horizontal]: !isVertical\n              })}\n              onTouchStart={(e) => handleResize(e, sibling)}\n              onMouseDown={(e) => handleResize(e, sibling)}\n            >\n              <div\n                className={classNames(styles.drag_handle, {\n                  [styles.vertical]: isVertical,\n                  [styles.horizontal]: !isVertical\n                })}\n                style={{\n                  backgroundColor: context.accent_color,\n                  borderColor: context.primary_color\n                }}\n                \n              />\n            </div>\n          )}\n        </React.Fragment>\n      )\n    })\n\n    return elements\n  }\n\n  return (\n    <div\n      ref={wrapperElement}\n      style={{\n        backgroundColor: context.tertiary_color\n      }}\n      className={classNames(styles.wrapper, {\n        [styles.vertical]: isVertical,\n        [styles.horizontal]: !isVertical,\n        [styles.empty]: isEmpty\n      })}\n    >\n      {generateLayout()}\n    </div>\n  )\n})\n\nLayoutContainer.defaultProps = {\n  size: 100,\n  order: 0\n}\n\nLayoutContainer.propTypes = {}\n\nexport default LayoutContainer\n","import React, { useState, useContext } from 'react'\nimport styles from './PagesContainer.module.css'\nimport UIContext from '../UIContext'\n\nconst Pages = (props) => {\n  const [currentPage, setCurrentPage] = useState(0)\n  const context = useContext(UIContext).theme\n\n  const handlePreviousPage = () => {\n    if (currentPage > 0) setCurrentPage(currentPage - 1)\n  }\n\n  const handleNextPage = () => {\n    if (currentPage + 1 < props.children.length) setCurrentPage(currentPage + 1)\n  }\n\n  const buttonStyle = {\n    backgroundColor: context.secondary_color,\n    color: context.text_color\n  }\n\n  return (\n    <div className={styles.wrapper} style={props.style}>\n      <div className={styles.pagecontent}>{props.children[currentPage]}</div>\n      <div className={styles.pagenav}>\n        <button style={buttonStyle} onClick={handlePreviousPage}>\n          {'<'}\n        </button>\n        <button style={buttonStyle} onClick={handleNextPage}>\n          {'>'}\n        </button>\n        <span>{`${currentPage + 1} of ${props.children.length}`}</span>\n      </div>\n    </div>\n  )\n}\n\nexport default Pages\n","import React, { useContext } from 'react'\nimport styles from './InputBool.module.css'\nimport UIContext from '../../UIContext'\nimport { observer } from 'mobx-react'\n\nconst InputBool = observer((props) => {\n  const context = useContext(UIContext).theme\n  const updateValue = (e) => props.onChange(e.target.checked, e.target.value)\n\n  return (\n    <div\n      className={styles.wrapper}\n      style={{\n        ...props.style,\n        backgroundColor: props.focused\n          ? context.accent_color\n          : context.secondary_color,\n        flexFlow: props.hLabel && props.label ? 'row' : 'column'\n      }}\n    >\n      {props.label && (\n        <label\n          style={{\n            backgroundColor: props.focused\n              ? context.accent_color\n              : context.text_color,\n            color: context.primary_color\n          }}\n        >\n          {props.label}:\n        </label>\n      )}\n      <div className={styles.wrapper_inner}>\n        <input\n          style={props.style}\n          type='checkbox'\n          value={props.value}\n          checked={props.checked}\n          onChange={updateValue}\n          onContextMenu={props.onContextMenu}\n        />\n      </div>\n    </div>\n  )\n})\n\nexport default InputBool\n","import React, { useContext } from 'react'\nimport styles from './InputFloat.module.css'\nimport UIContext from '../../UIContext'\nimport { observer } from 'mobx-react'\nimport PropTypes from 'prop-types'\n\nlet position = [0, 0]\nlet base_value = 0\n\n/*\n    ISSUES:\n\n        should be able to drag input outside of browser window\n        but the solution in js is not immediately obvious\n\n        there is a possible lead here:\n        https://stackoverflow.com/questions/1685326/responding-to-the-onmousemove-event-outside-of-the-browser-window-in-ie\n*/\n\nconst InputFloat = observer((props) => {\n  const context = useContext(UIContext).theme\n\n  const handleChange = (e) => props.onChange(Number(e.target.value))\n\n  const handleDragStart = (e) => {\n    let dragging = false\n\n    function handleDrag(e) {\n      e.preventDefault()\n      dragging = true\n      /*\n                conditional fixes issue where last frame of\n                drag results in a 'jump' in value, as pageY\n                is 0. \n            */\n      if (e.pageY) {\n        // fine control w shift / large control w ctrl\n        let scalar = e.ctrlKey ? 100 : e.shiftKey ? 20000 : 1000\n\n        let x_offset = e.pageX - position[0]\n        let y_offset = position[1] - e.pageY\n\n        x_offset = Math.min(Math.max(x_offset, 1), 100)\n\n        let output_value = base_value + (y_offset * x_offset) / scalar\n\n        // factor in step size\n        if (props.step) {\n          output_value /= props.step\n          output_value = Math.floor(output_value)\n          output_value *= props.step\n        }\n\n        props.onChange(output_value)\n      }\n    }\n\n    function handleDragEnd(e) {\n      if (dragging) {\n        // fine control w shift / large control w ctrl\n        let scalar = e.ctrlKey ? 100 : e.shiftKey ? 20000 : 1000\n\n        let x_offset = e.pageX - position[0]\n        let y_offset = position[1] - e.pageY\n\n        x_offset = Math.min(Math.max(x_offset, 1), 100)\n\n        let output_value = base_value + (y_offset * x_offset) / scalar\n\n        // factor in step size\n        if (props.step) {\n          output_value /= props.step\n          output_value = Math.floor(output_value)\n          output_value *= props.step\n        }\n\n        props.onChange(output_value)\n      }\n\n      document.removeEventListener('mousemove', handleDrag)\n      document.removeEventListener('mouseup', handleDragEnd)\n      document.removeEventListener('touchmove', handleDrag)\n      document.removeEventListener('touchend', handleDragEnd)\n\n      dragging = false\n    }\n\n    if (e.touches && e.touches[0]) e = e.touches[0]\n\n    position = [e.pageX, e.pageY]\n    base_value = props.value\n\n    document.addEventListener('mousemove', handleDrag)\n    document.addEventListener('mouseup', handleDragEnd)\n    document.addEventListener('touchmove', handleDrag)\n    document.addEventListener('touchend', handleDragEnd)\n  }\n\n  const value = parseFloat(props.value).toFixed(2)\n\n  const defaultInputStyle = {\n    backgroundColor: context.secondary_color,\n    color: context.text_color\n  }\n\n  return (\n    <div\n      className={styles.wrapper}\n      style={{\n        ...props.style,\n        backgroundColor: props.focused\n          ? context.accent_color\n          : context.secondary_color\n      }}\n    >\n      {props.label && (\n        <label\n          style={{\n            backgroundColor: props.focused\n              ? context.accent_color\n              : context.text_color,\n            color: context.primary_color\n          }}\n        >\n          {props.label}:\n        </label>\n      )}\n      <div className={styles.wrapper_inner}>\n        <input\n          type='number'\n          step={props.step}\n          value={Number(value)}\n          onChange={handleChange}\n          onClick={props.onClick}\n          onTouchStart={handleDragStart}\n          onMouseDown={handleDragStart}\n          onDoubleClick={props.onDoubleClick}\n          onContextMenu={props.onContextMenu}\n          style={{\n            ...defaultInputStyle,\n            ...props.inputStyle\n          }}\n        />\n      </div>\n    </div>\n  )\n})\n\nInputFloat.defaultProps = {\n  value: 0,\n  step: 0.1,\n  focused: false\n}\n\nInputFloat.propTypes = {\n  label: PropTypes.string,\n  value: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  step: PropTypes.number,\n  focused: PropTypes.bool,\n\n  onChange: PropTypes.func,\n  onDoubleClick: PropTypes.func,\n  inputStyle: PropTypes.object\n}\n\nexport default InputFloat\n","import React, { useContext } from 'react'\nimport styles from './InputSelect.module.css'\nimport UIContext from '../../UIContext'\n\nconst InputSelect = (props) => {\n  const context = useContext(UIContext).theme\n\n  const handleChange = (e) => props.onChange(e.target.value)\n\n  return (\n    <div\n      className={styles.wrapper}\n      style={{\n        ...props.style,\n        backgroundColor: props.focused\n          ? context.accent_color\n          : context.secondary_color\n      }}\n    >\n      {props.label && (\n        <label\n          style={{\n            backgroundColor: props.focused\n              ? context.accent_color\n              : context.text_color,\n            color: context.primary_color\n          }}\n        >\n          {props.label}:\n        </label>\n      )}\n      <div className={styles.wrapper_inner}>\n        <select\n          defaultValue={props.selectedOption}\n          onChange={handleChange}\n          onContextMenu={props.onContextMenu}\n          style={{\n            backgroundColor: context.secondary_color,\n            color: context.text_color\n          }}\n        >\n          {props.options.map((opt, i) => (\n            <option key={i} value={opt.value}>\n              {opt.label}\n            </option>\n          ))}\n        </select>\n      </div>\n    </div>\n  )\n}\n\nexport default InputSelect\n","import React, { useContext, useRef } from 'react'\nimport styles from './InputSlider.module.css'\nimport InputFloat from './InputFloat'\nimport UIContext from '../../UIContext'\nimport PropTypes from 'prop-types'\n\nlet slider_bounds = null\n\nconst InputSlider = (props) => {\n  const context = useContext(UIContext).theme\n\n  const slider_element = useRef(null)\n\n  const handleDragStart = (e) => {\n    function handleDrag(e) {\n      if (e.touches) e = e.touches[0]\n      /*\n              conditional fixes issue where last frame of\n              drag results in a 'jump' in value, as pageY\n              is 0. \n          */\n      if (e.pageY) {\n        let x = e.pageX + 2\n        let position = (x - slider_bounds.x) / slider_bounds.width\n\n        let value = position * (props.max - props.min) + props.min\n\n        if (position <= 0.0) value = props.min\n        if (position >= 1.0) value = props.max\n\n        props.onChange(Math.floor(value / props.step) * props.step)\n      }\n    }\n\n    function handleDragEnd(e) {\n      if (e.touches && e.touches[0]) e = e.touches[0]\n\n      let x = e.pageX + 2\n      let position = (x - slider_bounds.x) / slider_bounds.width\n      let value = position * (props.max - props.min) + props.min\n\n      if (position >= 0.0 && position <= 1.0) {\n        props.onChange(Math.floor(value / props.step) * props.step)\n      }\n\n      document.removeEventListener('mousemove', handleDrag)\n      document.removeEventListener('mouseup', handleDragEnd)\n      document.removeEventListener('touchmove', handleDrag)\n      document.removeEventListener('touchend', handleDragEnd)\n    }\n\n    if (e.touches && e.touches[0]) e = e.touches[0]\n\n    slider_bounds = slider_element.current.getBoundingClientRect()\n    let x = e.pageX + 2\n    let position = (x - slider_bounds.x) / slider_bounds.width\n\n    let value = position * (props.max - props.min) + props.min\n    console.log([props.min, props.max])\n    console.log('position', position)\n    console.log('value', value)\n\n    if (position >= 0.0 && position <= 1.0) {\n      props.onChange(Math.floor(value / props.step) * props.step) // floor to step\n    }\n\n    document.addEventListener('mousemove', handleDrag)\n    document.addEventListener('mouseup', handleDragEnd)\n    document.addEventListener('touchmove', handleDrag)\n    document.addEventListener('touchend', handleDragEnd)\n  }\n\n  const handleFloatDrag = (v) => {\n    props.onChange(v)\n  }\n\n  return (\n    <div\n      className={styles.wrapper + ' ' + styles.horizontal}\n      style={props.style}\n      onContextMenu={props.onContextMenu}\n    >\n      <InputFloat\n        value={props.value}\n        onChange={handleFloatDrag}\n        step={props.step || 0.1}\n      />\n      <div\n        ref={slider_element}\n        className={styles.slider_track}\n        onTouchStart={handleDragStart}\n        onMouseDown={handleDragStart}\n        style={{\n          backgroundColor: context.secondary_color\n        }}\n      >\n        <div\n          className={styles.sleeve}\n          style={{\n            width:\n              ((props.value - props.min) / (props.max - props.min)) * 100 + '%',\n            backgroundColor: context.accent_color\n          }}\n        ></div>\n        <div\n          className={styles.handle}\n          style={{\n            left:\n              ((props.value - props.min) / (props.max - props.min)) * 100 + '%',\n            backgroundColor: context.accent_color\n          }}\n        ></div>\n      </div>\n    </div>\n  )\n}\n\nInputSlider.propTypes = {\n  min: PropTypes.number,\n  max: PropTypes.number,\n  value: PropTypes.number,\n  style: PropTypes.object\n}\n\nexport default InputSlider\n","import React, { useContext } from 'react'\nimport styles from './InputColor.module.css'\nimport UIContext from '../../UIContext'\n\nconst InputColor = (props) => {\n  const context = useContext(UIContext).theme\n\n  const handleChange = (e) => props.onChange(e.target.value)\n\n  return (\n    <div\n      className={styles.wrapper}\n      style={{\n        ...props.style,\n        backgroundColor: props.focused\n          ? context.accent_color\n          : context.secondary_color\n      }}\n    >\n      {props.label && (\n        <label\n          style={{\n            backgroundColor: props.focused\n              ? context.accent_color\n              : context.text_color,\n            color: context.primary_color\n          }}\n        >\n          {props.label}:\n        </label>\n      )}\n      <div className={styles.wrapper_inner}>\n        {props.showValue && (\n          <input\n            type='string'\n            className={styles.textInput}\n            value={props.value}\n            onChange={handleChange}\n            style={{\n              backgroundColor: context.text_color,\n              color: context.secondary_color\n            }}\n          />\n        )}\n\n        <input\n          type='color'\n          value={props.value}\n          onChange={handleChange}\n          onContextMenu={props.onContextMenu}\n          style={{\n            backgroundColor: context.secondary_color,\n            color: context.secondary_color\n          }}\n        />\n      </div>\n    </div>\n  )\n}\n\nexport default InputColor\n","import { types } from 'mobx-state-tree'\nimport tinykeys from 'tinykeys'\n\nexport const ContextMenuItem = types\n  .model('ContextMenuItem', {\n    id: types.identifier,\n    label: types.frozen(),\n    buttons: types.frozen(),\n    dropDown: types.map(types.late(() => ContextMenuItem))\n  })\n  .volatile((self) => ({\n    onClick: () => {}\n  }))\n\nconst Context = types\n  .model('Context', {})\n  .volatile((self) => ({\n    contextmenu: {},\n    keylistener: tinykeys(window, {}),\n    keymap: null\n  }))\n  .actions((self) => ({\n    setKeymap: (keymap) => {\n      if (self.keylistener) self.keylistener()\n\n      self.keymap = keymap\n      self.keylistener = tinykeys(window, self.keymap)\n    },\n    removeKeymap: () => self.keylistener(),\n    setContextmenu: (c) => {\n      self.contextmenu = c\n    }\n  }))\n\nexport default Context\n","import { types, getParent } from 'mobx-state-tree'\nimport Layout from './Layout'\n\nconst Panel = types\n  .model('Panel', {\n    id: types.identifier,\n    component_type: '',\n    title: types.maybe(types.string),\n    subtitle: types.maybe(types.string),\n    showTitle: true,\n    floating: false,\n    fullscreen: false,\n    canFloat: false,\n    canRemove: false,\n    canFullscreen: false,\n    dimensions: types.array(types.number),\n    position: types.array(types.number),\n    layout: types.maybe(types.late(() => Layout))\n  })\n  .volatile((self) => ({\n    parent_layout: null\n  }))\n  .actions((self) => ({\n    setLayout: (layout) => {\n      self.layout = layout\n    },\n\n    setFloating: (f) => {\n      self.floating = f\n    },\n\n    toggleFloating: () => {\n      self.floating = !self.floating\n    },\n\n    toggleFullscreen: () => {\n      self.fullscreen = !self.fullscreen\n    },\n\n    setPosition: (p) => {\n      // TEMP: hack to keep away from title, use safe areas instead\n      if (p[1] < 24) p[1] = 24\n\n      self.position = p\n\n      // EXPERIMENT: Limit position to max bounds\n      if (p[0] + self.dimensions[0] > window.innerWidth)\n        self.position[0] = window.innerWidth - self.dimensions[0]\n\n      if (p[1] + self.dimensions[1] > window.innerHeight)\n        self.position[1] = window.innerHeight - self.dimensions[1]\n    },\n\n    setDimensions: (d) => {\n      self.dimensions = d\n\n      // EXPERIMENT: Limit position to max bounds\n      if (d[0] + self.position[0] > window.innerWidth)\n        self.dimensions[0] = window.innerWidth - self.position[0]\n\n      if (d[1] + self.position[1] > window.innerHeight)\n        self.dimensions[1] = window.innerHeight - self.position[1]\n    },\n\n    setFullscreen: (f) => {\n      self.fullscreen = f\n    },\n\n    onRemove: () => {\n      self.parent_layout = getParent(self, 2) // ERROR HERE, cant remove\n      self.parent_layout.removePanel(self)\n    },\n\n    center: () => {\n      self.position[0] = window.innerWidth / 2 - self.dimensions[0] / 2\n      self.position[1] = window.innerHeight / 2 - self.dimensions[1] / 2\n    },\n\n    fitScreen: () => {\n      if (self.position[0] <= 0) self.position[0] = 0\n\n      if (self.position[1] <= 0) self.position[1] = 0\n\n      // if (self.dimensions[0] + self.position[0] >= window.innerWidth)\n      // self.dimensions[0] = window.innerWidth - self.position[0];\n\n      // if (self.dimensions[1] + self.position[1] >= window.innerHeight)\n      // self.dimensions[1] = window.innerHeight - self.position[1];\n    }\n  }))\n\nexport default Panel\n","import { types, getParent, getRoot } from 'mobx-state-tree'\nimport { nanoid } from 'nanoid'\nimport Panel from './Panel'\n\nconst Layout = types\n  .model('Layout', {\n    id: types.identifier,\n    title: 'Layout',\n    size: 0,\n    panel: types.maybe(Panel),\n    children: types.array(types.late(() => Layout)),\n    direction: types.optional(\n      types.enumeration(['VERTICAL', 'HORIZONTAL']),\n      'HORIZONTAL'\n    )\n  })\n  .views((self) => ({\n    get isEmpty() {\n      const result =\n        self.children.length &&\n        self.children.filter(\n          (s) => (!s.panel && !s.isEmpty) || (s.panel && !s.panel.floating)\n        ).length === 0\n      return result\n    }\n  }))\n  .volatile((self) => ({\n    siblings: null,\n    rootStore: null\n  }))\n  .actions((self) => ({\n    afterAttach: () => {\n      self.siblings = getParent(self)\n      self.rootStore = getRoot(self)\n    },\n\n    adjust: (position) => {\n      const selfIndex = self.siblings.indexOf(self)\n\n      /* \n        the sum is all panels (except for those floating) \n        *leading up to* the one we are resizing\n      */\n      let sum = 0\n      for (let i = 0; i < selfIndex; i++) {\n        sum += self.siblings[i].size\n      }\n\n      const previousSize = self.size\n      const adjustedSize = position - sum\n\n      self.setSize(adjustedSize)\n\n      const nextSibling = self.siblings[selfIndex + 1]\n      nextSibling.setSize(nextSibling.size + (previousSize - adjustedSize))\n    },\n\n    distributeChildren: () => {\n      self.children.forEach((e, i) => {\n        console.log(i, (i + 1) / self.children.length)\n        e.setSize(1 / self.children.length)\n      })\n    },\n\n    setSize: (size) => {\n      self.size = size\n    },\n\n    setPanel: (panelId) => {\n      /*  \n        TODO \n          I think that this can be simplified in some way, \n          mainly I think there too many serialized fields\n          a new panel is really just a different 'component_type'\n          field\n\n          until I figure out a better way to do this I am going to\n          make sure that it retains floating, dimensions, and position\n      */\n      const newpanel = {\n        ...self.rootStore.ui.panelVariants[panelId],\n        floating: self.panel.floating,\n        dimensions: [...self.panel.dimensions],\n        position: [...self.panel.position]\n      }\n\n      self.panel = newpanel\n      self.title = self.rootStore.ui.panelVariants[panelId].title\n    },\n\n    addPanel: (panel, after) => {\n      /* \n        look for the 'after' node and insert 'panel'\n        after it \n       */\n      const insertAfter = self.children.indexOf(after)\n\n      self.children.splice(\n        insertAfter + 1,\n        0,\n        Layout.create({\n          id: nanoid(),\n          panel: panel,\n          size: 1 / self.children.length\n        })\n      )\n\n      self.distributeChildren()\n    },\n\n    removePanel: (panel) => {\n      if (self.children) {\n        self.children = self.children.filter((child) => child !== panel)\n\n        // if all panels are gone, remove this layout\n        if (self.children.length === 0) {\n          if (getParent(self, 2).removePanel)\n            getParent(self, 2).removePanel(self)\n        }\n      }\n\n      // TODO factor in the size of the removed panel\n      // into the panel to its left and right\n\n      self.distributeChildren()\n    },\n\n    clear: () => {\n      if (self.panels && self.children) {\n        self.panels.clear()\n        self.children = []\n      }\n    }\n  }))\n\nexport default Layout\n","import { types } from \"mobx-state-tree\";\n\nexport const themes = {\n  'weyland': { // light\n    primary_color: '#ffffff',\n    secondary_color: '#C2C2C2',\n    tertiary_color: '#e0e0e0',\n    text_color: '#000000',\n    outline_color: '#aaaaaa',\n    accent_color: '#3fa3a3'\n  },\n  'yutani': { // dark\n    primary_color: '#000000',\n    secondary_color: '#202020',\n    tertiary_color: '#303030',\n    text_color: '#ffffff',\n    outline_color: '#474747',\n    accent_color: '#3fa3a3'\n  },\n  'powershell': { // blue\n    primary_color: '#012456',\n    secondary_color: '#304E78',\n    tertiary_color: '#233767',\n    text_color: '#ffffff',\n    outline_color: '#51578B',\n    accent_color: '#ffff00'\n  },\n  'sarah': {\n    primary_color: '#0D5439',\n    secondary_color: '#9D6C71',\n    tertiary_color: '#5b6b5c',\n    text_color: '#C9A6A6',\n    outline_color: '#aaaaaa',\n    accent_color: '#D3945A'\n  },\n};\n\nconst Theme = types\n    .model(\"Theme\", {\n        ...themes.weyland\n    })\n    .actions(self => ({\n      setTheme: (theme) => {\n        self.primary_color = theme.primary_color;\n        self.secondary_color = theme.secondary_color;\n        self.tertiary_color = theme.tertiary_color;\n        self.text_color = theme.text_color;\n        self.outline_color = theme.outline_color;\n        self.accent_color = theme.accent_color;\n      },\n      setPrimaryColor: color => self.primary_color = color,\n      setSecondaryColor: color => self.secondary_color = color,\n      setTertiaryColor: color => self.tertiary_color = color,\n      setTextColor: color => self.text_color = color,\n      setOutlineColor: color => self.outline_color = color,\n      setAccentColor: color => self.accent_color = color\n    }))\n\nexport default Theme;","import { types } from 'mobx-state-tree'\nimport Context from './Context'\n\nimport Panel from './Panel'\nimport Theme from './Theme'\n\nconst UI = types\n  .model('UI', {\n    panels: types.map(Panel),\n    theme: Theme,\n    context: types.maybe(Context)\n  })\n  .volatile((self) => ({\n    panelVariants: null,\n    layoutVariants: null\n  }))\n  .actions((self) => ({\n    afterAttach: () => {\n      self.context = Context.create()\n    },\n\n    setPanelVariants: (panels) => {\n      self.panelVariants = panels\n    },\n\n    setLayoutVariants: (layouts) => {\n      self.layoutVariants = layouts\n    },\n\n    getPanelVariant: (id) => {\n      return self.panelVariants[id]\n    },\n\n    getLayoutVariant: (id) => {\n      if (self.layoutVariants[id]) {\n        return self.layoutVariants[id]\n      } else {\n        if (self.panelVariants) {\n          console.error(\n            `variant (${id}) could not be found. should be one of the following: (${Object.keys(\n              self.panelVariants\n            )})`\n          )\n        } else {\n          console.error(`no variants found!`)\n        }\n      }\n    },\n\n    getPanel: (id) => {\n      return self.panels.get(id)\n    }\n  }))\n\nexport default UI\n","import _MacoWrapperComponent from './components/MacoWrapperComponent'\n\nimport _PanelComponent from './components/PanelComponent'\nimport { GenericPanel as _GenericPanel } from './components/PanelComponent'\nimport _TextComponent from './components/TextComponent'\nimport _ToolbarComponent from './components/ToolbarComponent'\nimport _ContextMenuComponent from './components/ContextMenuComponent'\nimport _ControlGroupComponent from './components/ControlGroupComponent'\nimport _SplitContainer from './components/SplitContainer'\nimport _LayoutContainer from './components/LayoutContainer'\nimport _PagesContainer from './components/PagesContainer'\n\nimport _InputBool from './components/input/InputBool'\nimport _InputFloat from './components/input/InputFloat'\nimport _InputSelect from './components/input/InputSelect'\nimport _InputSlider from './components/input/InputSlider'\nimport _InputColor from './components/input/InputColor'\n\nimport _UIContext from './UIContext'\n\n// STORES\nimport _ContextStore from './stores/Context'\nimport _LayoutStore from './stores/Layout'\nimport _PanelStore from './stores/Panel'\nimport _ThemeStore, { themes } from './stores/Theme'\nimport _UIStore from './stores/UI'\n\nexport let MacoWrapperComponent = _MacoWrapperComponent\n\nexport let TextComponent = _TextComponent\nexport let PanelComponent = _PanelComponent\nexport let GenericPanel = _GenericPanel\nexport let ToolbarComponent = _ToolbarComponent\nexport let ContextMenuComponent = _ContextMenuComponent\nexport let ControlGroupComponent = _ControlGroupComponent\nexport let SplitContainer = _SplitContainer\nexport let LayoutContainer = _LayoutContainer\nexport let PagesContainer = _PagesContainer\n\nexport let InputBool = _InputBool\nexport let InputFloat = _InputFloat\nexport let InputSelect = _InputSelect\nexport let InputSlider = _InputSlider\nexport let InputColor = _InputColor\n\nexport let UIContext = _UIContext\n\nexport let Themes = themes\n\n// STORES\nexport let ContextStore = _ContextStore\nexport let LayoutStore = _LayoutStore\nexport let PanelStore = _PanelStore\nexport let UIStore = _UIStore // main store output\n"],"names":["UIContext","React","createContext","style","drawer","width","top","left","DropDown","observer","props","context","useContext","theme","mainRef","useRef","activeItem","setActiveItem","useState","subDropDownOpen","setSubDropDownOpen","subDropDownId","setSubDropDownId","subDropDownPosition","setSubDropDownPosition","handleSubDropDown","e","index","item","onClick","toggle","bounds","currentTarget","getBoundingClientRect","id","openUp","height","bottom","openLeft","handleClickAway","current","contains","target","handleRef","onRef","handleContextMenu","useLayoutEffect","document","addEventListener","removeEventListener","open","position","classNames","styles","backgroundColor","secondary_color","color","text_color","items","Object","keys","map","k","i","dropDown","subDropDown","activeButton","label","disableHover","display","title","buttons","b","border","outline_color","borderTop","borderBottom","borderLeftStyle","borderRightStyle","flexShrink","padding","defaultProps","propTypes","Toolbar","dropDownOpen","setDropDownOpen","dropDownId","setDropDownId","dropDownPosition","setDropDownPosition","setOpenUp","handleWheel","offset","Math","sign","deltaY","scroll","scrollLeft","at_start","at_end","offsetWidth","scrollWidth","useEffect","y","window","innerHeight","toolbar","borderColor","button","highlight","parent_bounds","_openUp","x","itemDecoration","DropDownComponent","ContextMenu","dropRef","dropDownOpenLeft","setDropDownOpenLeft","dropDownOpenUp","setDropDownOpenUp","handleClick","preventDefault","pageX","pageY","innerWidth","MacoWrapper","store","ui","setContextmenu","contextmenu","wrapper","ToolbarComponent","titlebar","ContextMenuComponent","className","tertiary_color","children","Tooltip","show","setShow","setPosition","handleToggle","tooltip","tooltip_symbol","tooltip_content","primary_color","content","Panel","wrapperElement","expanded","setExpanded","focused","setFocused","hover","setHover","handleResize","direction","dragging","pBounds","initialDimensions","initialPosition","handleMove","touches","w","h","onDimensionsChange","dimensions","onPositionChange","handleMoveEnd","handleMoveStart","dragOff","handleCenter","handleFullscreen","fullscreen","onFullscreen","onFloat","handleFloat","floating","handleFocus","onFocus","handleBlur","blur","onBlur","mainStyling","hasTitle","showTitle","onRemove","collapsible","accent_color","panel","collapsed","margin","gutters","gutterSize","zIndex","onContextMenu","onMouseEnter","onMouseLeave","onMouseOver","onMouseOut","title_bar","titleStyle","canFullscreen","fontSize","canRemove","canFloat","dragContainer","moveHandle","onPanelSelect","undefined","panelSelect","uuid","values","panelVariants","subtitle","indicators","indicator","flexBasis","panel_content","horizontal","vertical","footbar","resizeHandle","resizeSE","resizeE","resizeS","resizeSW","resizeW","resizeN","resizeNE","resizeNW","PropTypes","func","object","any","oneOfType","string","array","bool","number","GenericPanel","defaultWidth","onContextMenuCapture","setFloating","setDimensions","setFullscreen","Text","text","ControlGroup","name","Children","child","inputWidth","length","isValidElement","cloneElement","useObserver","callback","element","dependencies","observe","unobserve","resizeObserverOrPolyfill","ResizeObserver","Split","constructor","size","SplitContainer","distributeSplits","count","defaultSplits","filter","defaultsize","defaultSum","s","reduce","a","split","setSplit","isEmpty","setEmpty","isVertical","setIsVertical","handleContainerResize","auto","useResizeObserver","handlePanelResize","splitSum","slice","handleDetach","detachBool","updateFlag","onEmpty","wrapperClass","empty","isSplit","type","split_container","panel_container","hasHandle","detachable","onDetach","split_floating","drag_container","drag_handle_visible","drag_handle","alignSelf","textAlign","isRequired","LayoutContainer","layout","pos","adjust","result","forEach","addPanel","distributeLayout","distributeChildren","handlePanelSelect","sibling","setPanel","value","handlePanelRemove","removePanel","generateLayout","elements","siblings","childIsLayout","filterOutFloats","isFloating","console","log","j","tSum","layout_container","float_container","debug","order","Pages","currentPage","setCurrentPage","handlePreviousPage","handleNextPage","buttonStyle","pagecontent","pagenav","InputBool","updateValue","onChange","checked","flexFlow","hLabel","wrapper_inner","base_value","InputFloat","handleChange","Number","handleDragStart","handleDrag","scalar","ctrlKey","shiftKey","x_offset","y_offset","min","max","output_value","step","floor","handleDragEnd","parseFloat","toFixed","defaultInputStyle","onDoubleClick","inputStyle","InputSelect","selectedOption","options","opt","slider_bounds","InputSlider","slider_element","handleFloatDrag","v","slider_track","sleeve","handle","InputColor","showValue","textInput","ContextMenuItem","types","model","identifier","frozen","late","volatile","self","Context","keylistener","tinykeys","keymap","actions","setKeymap","removeKeymap","c","component_type","maybe","Layout","parent_layout","setLayout","f","toggleFloating","toggleFullscreen","p","d","getParent","center","fitScreen","optional","enumeration","views","rootStore","afterAttach","getRoot","selfIndex","indexOf","sum","previousSize","adjustedSize","setSize","nextSibling","panelId","newpanel","after","insertAfter","splice","create","nanoid","clear","panels","themes","Theme","weyland","setTheme","setPrimaryColor","setSecondaryColor","setTertiaryColor","setTextColor","setOutlineColor","setAccentColor","UI","layoutVariants","setPanelVariants","setLayoutVariants","layouts","getPanelVariant","getLayoutVariant","error","getPanel","get","MacoWrapperComponent","_MacoWrapperComponent","TextComponent","_TextComponent","PanelComponent","_PanelComponent","_GenericPanel","_ToolbarComponent","_ContextMenuComponent","ControlGroupComponent","_ControlGroupComponent","_SplitContainer","_LayoutContainer","PagesContainer","_PagesContainer","_InputBool","_InputFloat","_InputSelect","_InputSlider","_InputColor","_UIContext","Themes","ContextStore","_ContextStore","LayoutStore","_LayoutStore","PanelStore","_PanelStore","UIStore","_UIStore"],"mappings":";;;;;;;;;;;;;AAEA,MAAMA,SAAS,GAAGC,KAAK,CAACC,aAAN,CAAoB,EAApB,CAAlB;;;;ACIA,IAAIC,KAAK,GAAG;AACVC,EAAAA,MAAM,EAAE;AACNC,IAAAA,KAAK,EAAE,KADD;AAENC,IAAAA,GAAG,EAAE,KAFC;AAGNC,IAAAA,IAAI,EAAE;AAHA;AADE,CAAZ;AAQA,MAAMC,QAAQ,GAAGC,QAAQ,CAAEC,KAAD,IAAW;AACnC,QAAMC,OAAO,GAAGC,UAAU,CAACZ,SAAD,CAAV,CAAsBa,KAAtC;AACA,QAAMC,OAAO,GAAGC,MAAM,CAAC,IAAD,CAAtB;AAEA,QAAM,CAACC,UAAD,EAAaC,aAAb,IAA8BC,QAAQ,CAAC,IAAD,CAA5C;AACA,QAAM,CAACC,eAAD,EAAkBC,kBAAlB,IAAwCF,QAAQ,CAAC,KAAD,CAAtD;AACA,QAAM,CAACG,aAAD,EAAgBC,gBAAhB,IAAoCJ,QAAQ,CAAC,IAAD,CAAlD;AACA,QAAM,CAACK,mBAAD,EAAsBC,sBAAtB,IAAgDN,QAAQ,CAAC;AAC7DZ,IAAAA,GAAG,EAAE,CADwD;AAE7DC,IAAAA,IAAI,EAAE;AAFuD,GAAD,CAA9D;;AAKA,QAAMkB,iBAAiB,GAAG,CAACC,CAAD,EAAIC,KAAJ,EAAWC,IAAX,KAAoB;AAC5C,QAAIA,IAAI,CAACC,OAAT,EAAkBD,IAAI,CAACC,OAAL;AAClB,UAAMC,MAAM,GAAGH,KAAK,KAAKX,UAAV,GAAuB,CAACG,eAAxB,GAA0C,IAAzD;AAEA,UAAMY,MAAM,GAAGL,CAAC,CAACM,aAAF,CAAgBC,qBAAhB,EAAf;AAEAhB,IAAAA,aAAa,CAACa,MAAM,GAAGH,KAAH,GAAW,KAAlB,CAAb;AACAL,IAAAA,gBAAgB,CAACM,IAAI,CAACM,EAAN,CAAhB;AACAd,IAAAA,kBAAkB,CAACU,MAAD,CAAlB;AACAN,IAAAA,sBAAsB,CAAC;AACrBlB,MAAAA,GAAG,EAAE,CAACI,KAAK,CAACyB,MAAP,GAAgB,CAACJ,MAAM,CAACK,MAAxB,GAAiC,MADjB;AAErBC,MAAAA,MAAM,EAAE3B,KAAK,CAACyB,MAAN,GAAe,CAAf,GAAmB,MAFN;AAGrB5B,MAAAA,IAAI,EAAEG,KAAK,CAAC4B,QAAN,GAAiB,CAACP,MAAM,CAAC1B,KAAzB,GAAiC0B,MAAM,CAAC1B;AAHzB,KAAD,CAAtB;AAKD,GAdD;;AAgBA,QAAMkC,eAAe,GAAIb,CAAD,IAAO;AAC7B,QAAIZ,OAAO,CAAC0B,OAAR,IAAmB,CAAC1B,OAAO,CAAC0B,OAAR,CAAgBC,QAAhB,CAAyBf,CAAC,CAACgB,MAA3B,CAAxB,EAA4D;AAC1DzB,MAAAA,aAAa,CAAC,IAAD,CAAb;AACAG,MAAAA,kBAAkB,CAAC,KAAD,CAAlB;AACD;AACF,GALD;;AAOA,WAASuB,SAAT,CAAmBjB,CAAnB,EAAsB;AACpBZ,IAAAA,OAAO,CAAC0B,OAAR,GAAkBd,CAAlB;AACA,QAAIhB,KAAK,CAACkC,KAAV,EAAiBlC,KAAK,CAACkC,KAAN,CAAY9B,OAAZ;AAClB;;AAED,WAAS+B,iBAAT,CAA2BnB,CAA3B,EAA8B;AAC5BN,IAAAA,kBAAkB,CAAC,KAAD,CAAlB;AACD;;AAED0B,EAAAA,eAAe,CAAC,MAAM;AACpBC,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,OAA1B,EAAoCtB,CAAD,IAAOa,eAAe,CAACb,CAAD,CAAzD;AACAqB,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,aAA1B,EAA0CtB,CAAD,IAAOmB,iBAAiB,CAACnB,AAAD,CAAjE;AAEA,WAAO,MAAM;AACXqB,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,OAA7B,EAAuCvB,CAAD,IAAOa,eAAe,CAACb,CAAD,CAA5D;AACAqB,MAAAA,QAAQ,CAACC,gBAAT,CAA0B,aAA1B,EAA0CtB,CAAD,IAAOmB,iBAAiB,CAACnB,AAAD,CAAjE;AACD,KAHD;AAID,GARc,EAQZ,EARY,CAAf;AAUAvB,EAAAA,KAAK,GAAG,EACN,GAAGA,KADG;AAENC,IAAAA,MAAM,EAAE;AACNC,MAAAA,KAAK,EAAEK,KAAK,CAACwC,IAAN,GAAa,OAAb,GAAuB,KADxB;AAEN,SAAGxC,KAAK,CAACyC;AAFH;AAFF,GAAR;AAQA,sBACE;AACE,IAAA,SAAS,EAAEC,UAAU,CAACC,QAAM,CAACjD,MAAR,EAAgB,EAAhB,CADvB;AAKE,IAAA,GAAG,EAAGsB,CAAD,IAAOiB,SAAS,CAACjB,CAAD,CALvB;AAME,IAAA,KAAK,EAAE,EACL,GAAGvB,KAAK,CAACC,MADJ;AAELkD,MAAAA,eAAe,EAAE3C,OAAO,CAAC4C,eAFpB;AAGLC,MAAAA,KAAK,EAAE7C,OAAO,CAAC8C;AAHV;AANT,KAYG/C,KAAK,CAACgD,KAAN,IACCC,MAAM,CAACC,IAAP,CAAYlD,KAAK,CAACgD,KAAlB,EAAyBG,GAAzB,CAA6B,CAACC,CAAD,EAAIC,CAAJ,KAAU;AACrC,UAAMnC,IAAI,GAAGlB,KAAK,CAACgD,KAAN,CAAYI,CAAZ,CAAb;;AAGA,QAAIlC,IAAI,CAACoC,QAAT,EAAmB;AACjB,0BACE;AACE,QAAA,GAAG,EAAEpC,IAAI,CAACM,EADZ;AAEE,QAAA,SAAS,EAAEmB,QAAM,CAACY,WAFpB;AAGE,QAAA,KAAK,EAAE,EACL,GAAG9D,KAAK,CAACC,MADJ;AAELkD,UAAAA,eAAe,EAAE3C,OAAO,CAAC4C,eAFpB;AAGLC,UAAAA,KAAK,EAAE7C,OAAO,CAAC8C;AAHV;AAHT,sBASE;AACE,QAAA,GAAG,EAAE,QAAQ7B,IAAI,CAACM,EADpB;AAEE,QAAA,OAAO,EAAGR,CAAD,IAAOD,iBAAiB,CAACC,CAAD,EAAIqC,CAAJ,EAAOnC,IAAP,CAFnC;AAGE,QAAA,SAAS,EAAEwB,UAAU,CAAC;AACpB,WAACC,QAAM,CAACa,YAAR,GAAuBH,CAAC,KAAK/C,UADT;AAEpB,WAACqC,QAAM,CAACf,QAAR,GAAmB5B,KAAK,CAAC4B,QAFL;AAGpB,WAACe,QAAM,CAAClB,MAAR,GAAiBzB,KAAK,CAACyB;AAHH,SAAD;AAHvB,SASGP,IAAI,CAACuC,KATR,eAUE,kCAAOzD,KAAK,CAAC4B,QAAN,GAAiB,GAAjB,GAAuB,GAA9B,CAVF,CATF,EA2BGyB,CAAC,KAAK/C,UAAN,IAAoBK,aAApB,iBACC;AAAK,QAAA,GAAG,EAAEO,IAAI,CAACM,EAAf;AAAmB,QAAA,KAAK,EAAE;AAAEiB,UAAAA,QAAQ,EAAE;AAAZ;AAA1B,sBACE,oBAAC,QAAD;AACE,QAAA,GAAG,EAAEvB,IAAI,CAACM,EAAL,GAAU,IADjB;AAEE,QAAA,IAAI,EAAExB,KAAK,CAACwC,IAAN,IAAc/B,eAFtB;AAGE,QAAA,KAAK,EAAE,EAAE,GAAGT,KAAK,CAACgD,KAAN,CAAYrC,aAAZ,EAA2B2C;AAAhC,SAHT;AAIE,QAAA,QAAQ,EAAEzC,mBAJZ;AAKE,QAAA,QAAQ,EAAEb,KAAK,CAAC4B,QALlB;AAME,QAAA,MAAM,EAAE5B,KAAK,CAACyB;AANhB,QADF,CA5BJ,CADF;AA0CD,KA3CD,MA2CO;AACL,0BACE;AACE,QAAA,GAAG,EAAEP,IAAI,CAACM,EADZ;AAEE,QAAA,SAAS,EAAEkB,UAAU,CAAC;AACpB,WAACC,QAAM,CAACa,YAAR,GAAuBH,CAAC,KAAK/C,UADT;AAEpB,WAACqC,QAAM,CAACe,YAAR,GAAuBxC,IAAI,CAACwC,YAFR;AAGpB,WAACf,QAAM,CAACf,QAAR,GAAmB5B,KAAK,CAAC4B,QAHL;AAIpB,WAACe,QAAM,CAAClB,MAAR,GAAiBzB,KAAK,CAACyB;AAJH,SAAD,CAFvB;AAQE,QAAA,KAAK,EAAE;AACLkC,UAAAA,OAAO,EAAE,MADJ;AAELhE,UAAAA,KAAK,EAAE;AAFF;AART,sBAaE;AACE,QAAA,GAAG,EAAE,WAAWuB,IAAI,CAACM,EADvB;AAEE,QAAA,KAAK,EAAEN,IAAI,CAAC0C,KAFd;AAGE,QAAA,OAAO,EAAE1C,IAAI,CAACC;AAHhB,SAKGD,IAAI,CAACuC,KALR,CAbF,EAoBGvC,IAAI,CAAC2C,OAAL,IACCZ,MAAM,CAACC,IAAP,CAAYhC,IAAI,CAAC2C,OAAjB,EAA0BV,GAA1B,CAA+BC,CAAD,IAAO;AACnC,cAAMU,CAAC,GAAG5C,IAAI,CAAC2C,OAAL,CAAaT,CAAb,CAAV;AACA,4BACE;AACE,UAAA,GAAG,EAAE,WAAWU,CAAC,CAACtC,EADpB;AAEE,UAAA,OAAO,EAAEsC,CAAC,CAAC3C,OAFb;AAGE,UAAA,KAAK,EAAE2C,CAAC,CAACF,KAHX;AAIE,UAAA,KAAK,EAAE;AACLG,YAAAA,MAAM,EAAG,aAAY9D,OAAO,CAAC+D,aAAc,EADtC;AAELC,YAAAA,SAAS,EAAE,MAFN;AAGLC,YAAAA,YAAY,EAAE,MAHT;AAILC,YAAAA,eAAe,EAAE,CAACnE,KAAK,CAAC4B,QAAP,GAAkB,OAAlB,GAA4B,MAJxC;AAKLwC,YAAAA,gBAAgB,EAAEpE,KAAK,CAAC4B,QAAN,GAAiB,OAAjB,GAA2B,MALxC;AAMLyC,YAAAA,UAAU,EAAE,EANP;AAOLC,YAAAA,OAAO,EAAE;AAPJ;AAJT,wBAcE,mCAAQR,CAAC,CAACL,KAAV,CAdF,CADF;AAkBD,OApBD,CArBJ,CADF;AA6CD;AACF,GA9FD,CAbJ,CADF;AA+GD,CA7KwB,CAAzB;AA+KA3D,QAAQ,CAACyE,YAAT,GAAwB;AACtB3C,EAAAA,QAAQ,EAAE,KADY;AAEtBH,EAAAA,MAAM,EAAE;AAFc,CAAxB;AAKA3B,QAAQ,CAAC0E,SAAT,GAAqB,EAArB;;AC3LA,MAAMC,OAAO,GAAG1E,QAAQ,CAAEC,KAAD,IAAW;AAClC,QAAMC,OAAO,GAAGC,UAAU,CAACZ,SAAD,CAAV,CAAsBa,KAAtC;AACA,QAAMC,OAAO,GAAGC,MAAM,CAAC,IAAD,CAAtB;AAEA,QAAM,CAACC,UAAD,EAAaC,aAAb,IAA8BC,QAAQ,CAAC,IAAD,CAA5C;AACA,QAAM,CAACkE,YAAD,EAAeC,eAAf,IAAkCnE,QAAQ,CAAC,KAAD,CAAhD;AACA,QAAM,CAACoE,UAAD,EAAaC,aAAb,IAA8BrE,QAAQ,CAAC,IAAD,CAA5C;AACA,QAAM,CAACsE,gBAAD,EAAmBC,mBAAnB,IAA0CvE,QAAQ,CAAC;AAAEZ,IAAAA,GAAG,EAAE,CAAP;AAAUC,IAAAA,IAAI,EAAE;AAAhB,GAAD,CAAxD;AACA,QAAM,CAAC4B,MAAD,EAASuD,SAAT,IAAsBxE,QAAQ,CAAC,KAAD,CAApC;;AAEA,QAAMqB,eAAe,GAAIb,CAAD,IAAO;AAC7B,QAAIZ,OAAO,CAAC0B,OAAR,IAAmB,CAAC1B,OAAO,CAAC0B,OAAR,CAAgBC,QAAhB,CAAyBf,CAAC,CAACgB,MAA3B,CAAxB,EAA4D;AAC1DzB,MAAAA,aAAa,CAAC,IAAD,CAAb;AACAoE,MAAAA,eAAe,CAAC,KAAD,CAAf;AACD;AACF,GALD;;AAOA,QAAMM,WAAW,GAAIjE,CAAD,IAAO;AACzB,QAAIkE,MAAM,GAAGC,IAAI,CAACC,IAAL,CAAUpE,CAAC,CAACqE,MAAZ,IAAsB,CAAnC;AACAjF,IAAAA,OAAO,CAAC0B,OAAR,CAAgBwD,MAAhB,CAAuBlF,OAAO,CAAC0B,OAAR,CAAgByD,UAAhB,GAA6BL,MAApD,EAA4D,CAA5D;AAEA,QAAIM,QAAQ,GAAGpF,OAAO,CAAC0B,OAAR,CAAgByD,UAAhB,KAA+B,CAA9C;AACA,QAAIE,MAAM,GACRrF,OAAO,CAAC0B,OAAR,CAAgB4D,WAAhB,GAA8BtF,OAAO,CAAC0B,OAAR,CAAgByD,UAA9C,IACAnF,OAAO,CAAC0B,OAAR,CAAgB6D,WAFlB;;AAIA,QAAI,CAACH,QAAD,IAAa,CAACC,MAAd,IAAwBf,YAA5B,EAA0C;AACxCK,MAAAA,mBAAmB,CAAC;AAClBnF,QAAAA,GAAG,EAAEkF,gBAAgB,CAAClF,GADJ;AAElBC,QAAAA,IAAI,EAAEiF,gBAAgB,CAACjF,IAAjB,GAAwBqF;AAFZ,OAAD,CAAnB;AAID;AACF,GAfD;;AAiBAU,EAAAA,SAAS,CAAC,MAAM;AACdvD,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,OAA1B,EAAoCtB,CAAD,IAAOa,eAAe,CAACb,CAAD,CAAzD;AAEA,QAAIK,MAAM,GAAGjB,OAAO,CAAC0B,OAAR,CAAgBP,qBAAhB,EAAb;AACAyD,IAAAA,SAAS,CAAC3D,MAAM,CAACwE,CAAP,GAAWC,MAAM,CAACC,WAAP,GAAqBD,MAAM,CAACC,WAAP,GAAqB,CAAtD,CAAT;AAEA,WAAO1D,QAAQ,CAACE,mBAAT,CAA6B,OAA7B,EAAuCvB,CAAD,IAAOa,eAAe,CAACb,CAAD,CAA5D,CAAP;AACD,GAPQ,EAON,EAPM,CAAT;AASA,sBACE;AACE,IAAA,SAAS,EAAE2B,QAAM,CAACqD,OADpB;AAEE,IAAA,GAAG,EAAE5F,OAFP;AAGE,IAAA,KAAK,EAAE,EACL,GAAGJ,KAAK,CAACP,KADJ;AAELmD,MAAAA,eAAe,EAAE3C,OAAO,CAAC4C,eAAR,IAA2B,OAFvC;AAGLC,MAAAA,KAAK,EAAE7C,OAAO,CAAC8C,UAAR,IAAsB;AAHxB,KAHT;AAQE,IAAA,OAAO,EAAEkC;AARX,KAUGjF,KAAK,CAACgD,KAAN,IACCC,MAAM,CAACC,IAAP,CAAYlD,KAAK,CAACgD,KAAlB,EAAyBG,GAAzB,CAA6B,CAACC,CAAD,EAAIC,CAAJ,KAAU;AACrC,QAAInC,IAAI,GAAGlB,KAAK,CAACgD,KAAN,CAAYI,CAAZ,CAAX;AACA,wBACE;AACE,MAAA,GAAG,EAAElC,IAAI,CAACM,EADZ;AAEE,MAAA,KAAK,EAAEN,IAAI,CAAC0C,KAFd;AAGE,MAAA,KAAK,EAAE,EACL,GAAG1C,IAAI,CAACzB,KADH;AAELwG,QAAAA,WAAW,EAAEhG,OAAO,CAAC8C;AAFhB,OAHT;AAOE,MAAA,SAAS,EAAEL,UAAU,CAACC,QAAM,CAACuD,MAAR,EAAgB;AACnC,SAACvD,QAAM,CAACa,YAAR,GAAuBtC,IAAI,KAAKZ,UAAT,IAAuBY,IAAI,CAACiF,SADhB;AAGnC,SAACxD,QAAM,CAACe,YAAR,GAAuBxC,IAAI,CAACwC;AAHO,OAAhB,CAPvB;AAYE,MAAA,OAAO,EAAG1C,CAAD,IAAO;AACd,YAAIE,IAAI,CAACoC,QAAT,EAAmB;AACjB,cAAIlC,MAAM,GAAGF,IAAI,KAAKZ,UAAT,GAAsB,CAACoE,YAAvB,GAAsC,IAAnD;AAEA,cAAI0B,aAAa,GAAGhG,OAAO,CAAC0B,OAAR,CAAgBP,qBAAhB,EAApB;AACA,cAAIF,MAAM,GAAGL,CAAC,CAACM,aAAF,CAAgBC,qBAAhB,EAAb;;AAEA,cAAI8E,OAAO,GACThF,MAAM,CAACwE,CAAP,GAAWC,MAAM,CAACC,WAAP,GAAqBD,MAAM,CAACC,WAAP,GAAqB,CADvD;;AAEAxF,UAAAA,aAAa,CAACa,MAAM,GAAGF,IAAH,GAAU,IAAjB,CAAb;AACA8D,UAAAA,SAAS,CAACqB,OAAD,CAAT;AACA1B,UAAAA,eAAe,CAACvD,MAAD,CAAf;AAGAyD,UAAAA,aAAa,CAAC3D,IAAI,CAACM,EAAN,CAAb;AACAuD,UAAAA,mBAAmB,CAAC;AAClBnF,YAAAA,GAAG,EAAE,CAAC6B,MAAD,GAAUJ,MAAM,CAACK,MAAjB,GAA0B,MADb;AAElBC,YAAAA,MAAM,EAAEF,MAAM,GAAG,CAAH,GAAO,MAFH;AAGlB5B,YAAAA,IAAI,EAAEwB,MAAM,CAACxB,IAAP,GAAcuG,aAAa,CAACE;AAHhB,WAAD,CAAnB;AAKD;;AAED,YAAIpF,IAAI,CAACC,OAAT,EAAkBD,IAAI,CAACC,OAAL;AACnB;AAnCH,OAqCGD,IAAI,CAACuC,KArCR,EAsCGvC,IAAI,CAACoC,QAAL,iBACC;AAAM,MAAA,SAAS,EAAEX,QAAM,CAAC4D;AAAxB,OACG9E,MAAM,GAAG,GAAH,GAAS,GADlB,CAvCJ,CADF;AA8CD,GAhDD,CAXJ,eA6DE;AAAK,IAAA,KAAK,EAAE;AAAEgB,MAAAA,QAAQ,EAAE;AAAZ;AAAZ,KACGzC,KAAK,CAACgD,KAAN,CAAY4B,UAAZ,kBACC,oBAAC4B,QAAD;AACE,IAAA,IAAI,EAAE9B,YADR;AAEE,IAAA,KAAK,EAAE,EAAE,GAAG1E,KAAK,CAACgD,KAAN,CAAY4B,UAAZ,EAAwBtB;AAA7B,KAFT;AAGE,IAAA,QAAQ,EAAEwB,gBAHZ;AAIE,IAAA,MAAM,EAAErD;AAJV,IAFJ,CA7DF,CADF;AA0ED,CArHuB,CAAxB;;ACHA,MAAMgF,WAAW,GAAG1G,QAAQ,CAAEC,KAAD,IAAW;AACpC,QAAMI,OAAO,GAAGC,MAAM,CAAC,IAAD,CAAtB;AACA,MAAIqG,OAAO,GAAGrG,MAAM,CAAC,IAAD,CAApB;AAEA,QAAM,CAACqE,YAAD,EAAeC,eAAf,IAAkCnE,QAAQ,CAAC,KAAD,CAAhD;AACA,QAAM,CAACsE,gBAAD,EAAmBC,mBAAnB,IAA0CvE,QAAQ,CAAC;AAACZ,IAAAA,GAAG,EAAC,CAAL;AAAOC,IAAAA,IAAI,EAAC;AAAZ,GAAD,CAAxD;AACA,QAAM,CAAC8G,gBAAD,EAAmBC,mBAAnB,IAA0CpG,QAAQ,CAAC,KAAD,CAAxD;AACA,QAAM,CAACqG,cAAD,EAAiBC,iBAAjB,IAAsCtG,QAAQ,CAAC,KAAD,CAApD;;AAEA,QAAMqB,eAAe,GAAIb,CAAD,IAAO;AAC3B,QAAIZ,OAAO,CAAC0B,OAAR,IAAmB,CAAC1B,OAAO,CAAC0B,OAAR,CAAgBC,QAAhB,CAAyBf,CAAC,CAACgB,MAA3B,CAAxB,EAA4D;AACxD2C,MAAAA,eAAe,CAAC,KAAD,CAAf;AACH;AACJ,GAJD;;AAMA,QAAMoC,WAAW,GAAI/F,CAAD,IAAO;AACvBA,IAAAA,CAAC,CAACgG,cAAF;AAGArC,IAAAA,eAAe,CAAC,IAAD,CAAf;AAGA,QAAI2B,CAAC,GAAGtF,CAAC,CAACiG,KAAV;AACA,QAAIpB,CAAC,GAAG7E,CAAC,CAACkG,KAAV;AAIA,QAAIlG,CAAC,CAACiG,KAAF,GAAU,GAAV,GAAgBnB,MAAM,CAACqB,UAA3B,EACIb,CAAC,IAAI,GAAL;;AAEJ,QAAID,OAAO,GAAGR,CAAC,GAAIC,MAAM,CAACC,WAAP,GAAsBD,MAAM,CAACC,WAAP,GAAqB,CAA9D;;AAEAe,IAAAA,iBAAiB,CAACT,OAAD,CAAjB;AACAO,IAAAA,mBAAmB,CAAC5F,CAAC,CAACiG,KAAF,GAAUnB,MAAM,CAACqB,UAAP,GAAoB,CAA/B,CAAnB;AACApC,IAAAA,mBAAmB,CAAC;AAChBnF,MAAAA,GAAG,EAAE,CAACyG,OAAD,GAAWR,CAAX,GAAe,MADJ;AAEhBlE,MAAAA,MAAM,EAAE0E,OAAO,GAAIP,MAAM,CAACC,WAAP,GAAqBF,CAAzB,GAA8B,MAF7B;AAGhBhG,MAAAA,IAAI,EAACyG;AAHW,KAAD,CAAnB;AAMA,WAAO,KAAP;AACH,GA1BD;;AA4BA,QAAMrE,SAAS,GAAIjB,CAAD,IAAO;AACrB0F,IAAAA,OAAO,GAAG1F,CAAV;AACH,GAFD;;AAIAoB,EAAAA,eAAe,CAAC,MAAI;AAChBC,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,OAA1B,EAAoCtB,CAAD,IAAOa,eAAe,CAACb,CAAD,CAAzD,EAA8D,IAA9D;AACAqB,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,aAA1B,EAA0CtB,CAAD,IAAO+F,WAAW,CAAC/F,CAAD,CAA3D,EAAgE,IAAhE;AAEA,WAAO,MAAM;AACTqB,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,OAA7B,EAAuCvB,CAAD,IAAOa,eAAe,CAACb,CAAD,CAA5D,EAAiE,IAAjE;AACAqB,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,aAA7B,EAA6CvB,CAAD,IAAO+F,WAAW,CAAC/F,CAAD,CAA9D,EAAmE,IAAnE;AACH,KAHD;AAIH,GARc,EAQZ,EARY,CAAf;AAUA,sBACI;AAAK,IAAA,GAAG,EAAEZ;AAAV,kBAUI,oBAACoG,QAAD;AACI,IAAA,IAAI,EAAE9B,YADV;AAEI,IAAA,KAAK,EAAE1E,KAAK,CAACgD,KAFjB;AAGI,IAAA,QAAQ,EAAE8B,gBAHd;AAII,IAAA,KAAK,EAAE7C,SAJX;AAKI,IAAA,QAAQ,EAAE0E,gBALd;AAMI,IAAA,MAAM,EAAEE;AANZ,IAVJ,CADJ;AAqBH,CA9E2B,CAA5B;;ACGA,MAAMO,WAAW,GAAGrH,QAAQ,CAAEC,KAAD,IAAW;AACtC,QAAMqH,KAAK,GAAGrH,KAAK,CAACqH,KAApB;;AAEA,QAAMlF,iBAAiB,GAAG,MAAM;AAG9BkF,IAAAA,KAAK,CAACC,EAAN,CAASrH,OAAT,CAAiBsH,cAAjB,CAAgCvH,KAAK,CAACwH,WAAtC;AACD,GAJD;;AAMA,sBACE;AAAK,IAAA,SAAS,EAAE7E,MAAM,CAAC8E;AAAvB,kBACE,oBAAC,SAAD,CAAW,QAAX;AAAoB,IAAA,KAAK,EAAEJ,KAAK,CAACC;AAAjC,kBACE,oBAACI,OAAD;AAAkB,IAAA,KAAK,EAAE1H,KAAK,CAAC2H;AAA/B,IADF,eAEE,oBAACC,WAAD;AAAsB,IAAA,KAAK,EAAEP,KAAK,CAACC,EAAN,CAASrH,OAAT,CAAiBuH;AAA9C,IAFF,eAIE;AACE,IAAA,SAAS,EAAExH,KAAK,CAAC6H,SADnB;AAEE,IAAA,KAAK,EAAE;AACLlI,MAAAA,KAAK,EAAE,MADF;AAEL+B,MAAAA,MAAM,EAAE,MAFH;AAGLe,MAAAA,QAAQ,EAAE,UAHL;AAILG,MAAAA,eAAe,EAAEyE,KAAK,CAACC,EAAN,CAASnH,KAAT,CAAe2H,cAJ3B;AAKL,SAAG9H,KAAK,CAACP;AALJ,KAFT;AASE,IAAA,aAAa,EAAE,MAAM0C,iBAAiB;AATxC,IAJF,EAgBGnC,KAAK,CAAC+H,QAhBT,CADF,CADF;AAsBD,CA/B2B,CAA5B;AAiCAX,WAAW,CAAC7C,YAAZ,GAA2B;AACzBiD,EAAAA,WAAW,EAAE,EADY;AAEzBG,EAAAA,QAAQ,EAAE;AAFe,CAA3B;;;;ACjCA,MAAMK,OAAO,GAAGjI,QAAQ,CAAEC,KAAD,IAAW;AAClC,QAAMC,OAAO,GAAGC,UAAU,CAACZ,SAAD,CAAV,CAAsBa,KAAtC;AACA,QAAM,CAAC8H,IAAD,EAAOC,OAAP,IAAkB1H,QAAQ,CAAC,KAAD,CAAhC;AACA,QAAM,CAACiC,QAAD,EAAW0F,WAAX,IAA0B3H,QAAQ,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAD,CAAxC;;AAEA,QAAM4H,YAAY,GAAIpH,CAAD,IAAO;AAC1B,QAAIsF,CAAC,GAAGtF,CAAC,CAACiG,KAAV;AACA,QAAIpB,CAAC,GAAG7E,CAAC,CAACkG,KAAV;AAEA,QAAIZ,CAAC,GAAGR,MAAM,CAACqB,UAAP,GAAoB,GAA5B,EAAiCb,CAAC,GAAGtF,CAAC,CAACiG,KAAF,GAAU,GAAd;AAEjC,QAAIpB,CAAC,GAAGC,MAAM,CAACC,WAAP,GAAqB,GAA7B,EAAkCF,CAAC,GAAG7E,CAAC,CAACkG,KAAF,GAAU,GAAd;AAElCiB,IAAAA,WAAW,CAAC,CAAC7B,CAAD,EAAIT,CAAJ,CAAD,CAAX;AACAqC,IAAAA,OAAO,CAAC,CAACD,IAAF,CAAP;AACD,GAVD;;AAYA,sBACE;AAAK,IAAA,SAAS,EAAEtF,QAAM,CAAC0F;AAAvB,kBACE;AAAK,IAAA,SAAS,EAAE1F,QAAM,CAAC2F,cAAvB;AAAuC,IAAA,OAAO,EAAGtH,CAAD,IAAOoH,YAAY,CAACpH,CAAD;AAAnE,cADF,eAIE;AACE,IAAA,SAAS,EAAE2B,QAAM,CAAC4F,eADpB;AAEE,IAAA,KAAK,EAAE;AACL3F,MAAAA,eAAe,EAAE3C,OAAO,CAACuI,aADpB;AAELzE,MAAAA,MAAM,EAAG,aAAY9D,OAAO,CAAC+D,aAAc,EAFtC;AAGLL,MAAAA,OAAO,EAAEsE,IAAI,GAAG,OAAH,GAAa,MAHrB;AAILpI,MAAAA,IAAI,EAAE4C,QAAQ,CAAC,CAAD,CAJT;AAKL7C,MAAAA,GAAG,EAAE6C,QAAQ,CAAC,CAAD;AALR;AAFT,KAUGzC,KAAK,CAACyI,OAVT,CAJF,CADF;AAmBD,CApCuB,CAAxB;AAsCA,MAAMC,KAAK,GAAG3I,QAAQ,CAAEC,KAAD,IAAW;AAChC,QAAMC,OAAO,GAAGC,UAAU,CAACZ,SAAD,CAAV,CAAsBa,KAAtC;AACA,QAAMmH,EAAE,GAAGpH,UAAU,CAACZ,SAAD,CAArB;AAEA,QAAMqJ,cAAc,GAAGtI,MAAM,CAAC,IAAD,CAA7B;AAEA,QAAM,CAACuI,QAAD,EAAWC,WAAX,IAA0BrI,QAAQ,CAACR,KAAK,CAAC4I,QAAP,CAAxC;AACA,QAAM,CAACE,OAAD,EAAUC,UAAV,IAAwBvI,QAAQ,CAACR,KAAK,CAAC8I,OAAP,CAAtC;AACA,QAAM,CAACE,KAAD,EAAQC,QAAR,IAAoBzI,QAAQ,CAAC,KAAD,CAAlC;;AAEA,QAAM0I,YAAY,GAAG,CAAClI,CAAD,EAAImI,SAAS,GAAG,IAAhB,KAAyB;AAC5C,QAAIC,QAAQ,GAAG,IAAf;AAEA,UAAMC,OAAO,GAAGV,cAAc,CAAC7G,OAAf,CAAuBP,qBAAvB,EAAhB;AACA,UAAM+H,iBAAiB,GAAG,CAACD,OAAO,CAAC1J,KAAT,EAAgB0J,OAAO,CAAC3H,MAAxB,CAA1B;AACA,UAAM6H,eAAe,GAAG,CAACF,OAAO,CAAC/C,CAAT,EAAY+C,OAAO,CAACxD,CAApB,CAAxB;;AAEA,UAAM2D,UAAU,GAAIxI,CAAD,IAAO;AACxB,UAAIA,CAAC,CAACyI,OAAN,EAAezI,CAAC,GAAGA,CAAC,CAACyI,OAAF,CAAU,CAAV,CAAJ;;AAEf,UAAIzI,CAAC,CAACkG,KAAF,IAAWkC,QAAf,EAAyB;AACvB,cAAMC,OAAO,GAAGV,cAAc,CAAC7G,OAAf,CAAuBP,qBAAvB,EAAhB;AAEA,YAAImI,CAAJ,EAAOC,CAAP;AACA,YAAIrD,CAAJ,EAAOT,CAAP;;AAEA,gBAAQsD,SAAR;AACE,eAAK,IAAL;AACEO,YAAAA,CAAC,GAAG1I,CAAC,CAACiG,KAAF,GAAUoC,OAAO,CAAC/C,CAAtB;AACAqD,YAAAA,CAAC,GAAG3I,CAAC,CAACkG,KAAF,GAAUmC,OAAO,CAACxD,CAAtB;AACA7F,YAAAA,KAAK,CAAC4J,kBAAN,CAAyB,CAACF,CAAD,EAAIC,CAAJ,CAAzB;AACA;;AACF,eAAK,GAAL;AACED,YAAAA,CAAC,GAAG1I,CAAC,CAACiG,KAAF,GAAUoC,OAAO,CAAC/C,CAAtB;AACAqD,YAAAA,CAAC,GAAG3J,KAAK,CAAC6J,UAAN,CAAiB,CAAjB,CAAJ;AACA7J,YAAAA,KAAK,CAAC4J,kBAAN,CAAyB,CAACF,CAAD,EAAIC,CAAJ,CAAzB;AACA;;AACF,eAAK,GAAL;AACED,YAAAA,CAAC,GAAG1J,KAAK,CAAC6J,UAAN,CAAiB,CAAjB,CAAJ;AACAF,YAAAA,CAAC,GAAG3I,CAAC,CAACkG,KAAF,GAAUmC,OAAO,CAACxD,CAAtB;AACA7F,YAAAA,KAAK,CAAC4J,kBAAN,CAAyB,CAACF,CAAD,EAAIC,CAAJ,CAAzB;AACA;;AACF,eAAK,IAAL;AACED,YAAAA,CAAC,GAAGJ,iBAAiB,CAAC,CAAD,CAAjB,IAAwBC,eAAe,CAAC,CAAD,CAAf,GAAqBvI,CAAC,CAACiG,KAA/C,CAAJ;AACA0C,YAAAA,CAAC,GAAG3I,CAAC,CAACkG,KAAF,GAAUmC,OAAO,CAACxD,CAAtB;AACAS,YAAAA,CAAC,GAAGtF,CAAC,CAACiG,KAAN;AACApB,YAAAA,CAAC,GAAGwD,OAAO,CAACxD,CAAZ;AACA7F,YAAAA,KAAK,CAAC8J,gBAAN,CAAuB,CAACxD,CAAD,EAAIT,CAAJ,CAAvB;AACA7F,YAAAA,KAAK,CAAC4J,kBAAN,CAAyB,CAACF,CAAD,EAAIC,CAAJ,CAAzB;AACA;;AACF,eAAK,GAAL;AACED,YAAAA,CAAC,GAAGJ,iBAAiB,CAAC,CAAD,CAAjB,IAAwBC,eAAe,CAAC,CAAD,CAAf,GAAqBvI,CAAC,CAACiG,KAA/C,CAAJ;AACA0C,YAAAA,CAAC,GAAG3J,KAAK,CAAC6J,UAAN,CAAiB,CAAjB,CAAJ;AACAvD,YAAAA,CAAC,GAAGtF,CAAC,CAACiG,KAAN;AACApB,YAAAA,CAAC,GAAGwD,OAAO,CAACxD,CAAZ;AACA7F,YAAAA,KAAK,CAAC8J,gBAAN,CAAuB,CAACxD,CAAD,EAAIT,CAAJ,CAAvB;AACA7F,YAAAA,KAAK,CAAC4J,kBAAN,CAAyB,CAACF,CAAD,EAAIC,CAAJ,CAAzB;AACA;;AACF,eAAK,GAAL;AACED,YAAAA,CAAC,GAAG1J,KAAK,CAAC6J,UAAN,CAAiB,CAAjB,CAAJ;AACAF,YAAAA,CAAC,GAAGL,iBAAiB,CAAC,CAAD,CAAjB,IAAwBC,eAAe,CAAC,CAAD,CAAf,GAAqBvI,CAAC,CAACkG,KAA/C,CAAJ;AACAZ,YAAAA,CAAC,GAAG+C,OAAO,CAAC/C,CAAZ;AACAT,YAAAA,CAAC,GAAG7E,CAAC,CAACkG,KAAN;AACAlH,YAAAA,KAAK,CAAC8J,gBAAN,CAAuB,CAACxD,CAAD,EAAIT,CAAJ,CAAvB;AACA7F,YAAAA,KAAK,CAAC4J,kBAAN,CAAyB,CAACF,CAAD,EAAIC,CAAJ,CAAzB;AACA;;AACF,eAAK,IAAL;AACED,YAAAA,CAAC,GAAGJ,iBAAiB,CAAC,CAAD,CAAjB,IAAwBC,eAAe,CAAC,CAAD,CAAf,GAAqBvI,CAAC,CAACiG,KAA/C,CAAJ;AACA0C,YAAAA,CAAC,GAAGL,iBAAiB,CAAC,CAAD,CAAjB,IAAwBC,eAAe,CAAC,CAAD,CAAf,GAAqBvI,CAAC,CAACkG,KAA/C,CAAJ;AACAZ,YAAAA,CAAC,GAAGtF,CAAC,CAACiG,KAAN;AACApB,YAAAA,CAAC,GAAG7E,CAAC,CAACkG,KAAN;AACAlH,YAAAA,KAAK,CAAC8J,gBAAN,CAAuB,CAACxD,CAAD,EAAIT,CAAJ,CAAvB;AACA7F,YAAAA,KAAK,CAAC4J,kBAAN,CAAyB,CAACF,CAAD,EAAIC,CAAJ,CAAzB;AACA;;AACF,eAAK,IAAL;AACED,YAAAA,CAAC,GAAG1I,CAAC,CAACiG,KAAF,GAAUoC,OAAO,CAAC/C,CAAtB;AACAqD,YAAAA,CAAC,GAAGL,iBAAiB,CAAC,CAAD,CAAjB,IAAwBC,eAAe,CAAC,CAAD,CAAf,GAAqBvI,CAAC,CAACkG,KAA/C,CAAJ;AACAZ,YAAAA,CAAC,GAAG+C,OAAO,CAAC/C,CAAZ;AACAT,YAAAA,CAAC,GAAG7E,CAAC,CAACkG,KAAN;AACAlH,YAAAA,KAAK,CAAC8J,gBAAN,CAAuB,CAACxD,CAAD,EAAIT,CAAJ,CAAvB;AACA7F,YAAAA,KAAK,CAAC4J,kBAAN,CAAyB,CAACF,CAAD,EAAIC,CAAJ,CAAzB;AACA;AAvDJ;AA2DD;AACF,KArED;;AAuEA,UAAMI,aAAa,GAAI/I,CAAD,IAAO;AAC3BoI,MAAAA,QAAQ,GAAG,KAAX;AACA,UAAIpI,CAAC,CAACyI,OAAF,IAAazI,CAAC,CAACyI,OAAF,CAAU,CAAV,CAAjB,EAA+BzI,CAAC,GAAGA,CAAC,CAACyI,OAAF,CAAU,CAAV,CAAJ;;AAE/B,UAAIzI,CAAC,CAACkG,KAAN,EAAa;AACX,cAAMmC,OAAO,GAAGV,cAAc,CAAC7G,OAAf,CAAuBP,qBAAvB,EAAhB;AAEA,YAAImI,CAAJ,EAAOC,CAAP;AACA,YAAIrD,CAAJ,EAAOT,CAAP;;AAEA,gBAAQsD,SAAR;AACE,eAAK,IAAL;AACEO,YAAAA,CAAC,GAAG1I,CAAC,CAACiG,KAAF,GAAUoC,OAAO,CAAC/C,CAAtB;AACAqD,YAAAA,CAAC,GAAG3I,CAAC,CAACkG,KAAF,GAAUmC,OAAO,CAACxD,CAAtB;AACA7F,YAAAA,KAAK,CAAC4J,kBAAN,CAAyB,CAACF,CAAD,EAAIC,CAAJ,CAAzB;AACA;;AACF,eAAK,GAAL;AACED,YAAAA,CAAC,GAAG1I,CAAC,CAACiG,KAAF,GAAUoC,OAAO,CAAC/C,CAAtB;AACAqD,YAAAA,CAAC,GAAG3J,KAAK,CAAC6J,UAAN,CAAiB,CAAjB,CAAJ;AACA7J,YAAAA,KAAK,CAAC4J,kBAAN,CAAyB,CAACF,CAAD,EAAIC,CAAJ,CAAzB;AACA;;AACF,eAAK,GAAL;AACED,YAAAA,CAAC,GAAG1J,KAAK,CAAC6J,UAAN,CAAiB,CAAjB,CAAJ;AACAF,YAAAA,CAAC,GAAG3I,CAAC,CAACkG,KAAF,GAAUmC,OAAO,CAACxD,CAAtB;AACA7F,YAAAA,KAAK,CAAC4J,kBAAN,CAAyB,CAACF,CAAD,EAAIC,CAAJ,CAAzB;AACA;;AACF,eAAK,IAAL;AACED,YAAAA,CAAC,GAAGJ,iBAAiB,CAAC,CAAD,CAAjB,IAAwBC,eAAe,CAAC,CAAD,CAAf,GAAqBvI,CAAC,CAACiG,KAA/C,CAAJ;AACA0C,YAAAA,CAAC,GAAG3I,CAAC,CAACkG,KAAF,GAAUmC,OAAO,CAACxD,CAAtB;AACAS,YAAAA,CAAC,GAAGtF,CAAC,CAACiG,KAAN;AACApB,YAAAA,CAAC,GAAGwD,OAAO,CAACxD,CAAZ;AACA7F,YAAAA,KAAK,CAAC8J,gBAAN,CAAuB,CAACxD,CAAD,EAAIT,CAAJ,CAAvB;AACA7F,YAAAA,KAAK,CAAC4J,kBAAN,CAAyB,CAACF,CAAD,EAAIC,CAAJ,CAAzB;AACA;;AACF,eAAK,GAAL;AACED,YAAAA,CAAC,GAAGJ,iBAAiB,CAAC,CAAD,CAAjB,IAAwBC,eAAe,CAAC,CAAD,CAAf,GAAqBvI,CAAC,CAACiG,KAA/C,CAAJ;AACA0C,YAAAA,CAAC,GAAG3J,KAAK,CAAC6J,UAAN,CAAiB,CAAjB,CAAJ;AACAvD,YAAAA,CAAC,GAAGtF,CAAC,CAACiG,KAAN;AACApB,YAAAA,CAAC,GAAGwD,OAAO,CAACxD,CAAZ;AACA7F,YAAAA,KAAK,CAAC8J,gBAAN,CAAuB,CAACxD,CAAD,EAAIT,CAAJ,CAAvB;AACA7F,YAAAA,KAAK,CAAC4J,kBAAN,CAAyB,CAACF,CAAD,EAAIC,CAAJ,CAAzB;AACA;;AACF,eAAK,GAAL;AACED,YAAAA,CAAC,GAAG1J,KAAK,CAAC6J,UAAN,CAAiB,CAAjB,CAAJ;AACAF,YAAAA,CAAC,GAAGL,iBAAiB,CAAC,CAAD,CAAjB,IAAwBC,eAAe,CAAC,CAAD,CAAf,GAAqBvI,CAAC,CAACkG,KAA/C,CAAJ;AACAZ,YAAAA,CAAC,GAAG+C,OAAO,CAAC/C,CAAZ;AACAT,YAAAA,CAAC,GAAG7E,CAAC,CAACkG,KAAN;AACAlH,YAAAA,KAAK,CAAC8J,gBAAN,CAAuB,CAACxD,CAAD,EAAIT,CAAJ,CAAvB;AACA7F,YAAAA,KAAK,CAAC4J,kBAAN,CAAyB,CAACF,CAAD,EAAIC,CAAJ,CAAzB;AACA;;AACF,eAAK,IAAL;AACED,YAAAA,CAAC,GAAGJ,iBAAiB,CAAC,CAAD,CAAjB,IAAwBC,eAAe,CAAC,CAAD,CAAf,GAAqBvI,CAAC,CAACiG,KAA/C,CAAJ;AACA0C,YAAAA,CAAC,GAAGL,iBAAiB,CAAC,CAAD,CAAjB,IAAwBC,eAAe,CAAC,CAAD,CAAf,GAAqBvI,CAAC,CAACkG,KAA/C,CAAJ;AACAZ,YAAAA,CAAC,GAAGtF,CAAC,CAACiG,KAAN;AACApB,YAAAA,CAAC,GAAG7E,CAAC,CAACkG,KAAN;AACAlH,YAAAA,KAAK,CAAC8J,gBAAN,CAAuB,CAACxD,CAAD,EAAIT,CAAJ,CAAvB;AACA7F,YAAAA,KAAK,CAAC4J,kBAAN,CAAyB,CAACF,CAAD,EAAIC,CAAJ,CAAzB;AACA;;AACF,eAAK,IAAL;AACED,YAAAA,CAAC,GAAG1I,CAAC,CAACiG,KAAF,GAAUoC,OAAO,CAAC/C,CAAtB;AACAqD,YAAAA,CAAC,GAAGL,iBAAiB,CAAC,CAAD,CAAjB,IAAwBC,eAAe,CAAC,CAAD,CAAf,GAAqBvI,CAAC,CAACkG,KAA/C,CAAJ;AACAZ,YAAAA,CAAC,GAAG+C,OAAO,CAAC/C,CAAZ;AACAT,YAAAA,CAAC,GAAG7E,CAAC,CAACkG,KAAN;AACAlH,YAAAA,KAAK,CAAC8J,gBAAN,CAAuB,CAACxD,CAAD,EAAIT,CAAJ,CAAvB;AACA7F,YAAAA,KAAK,CAAC4J,kBAAN,CAAyB,CAACF,CAAD,EAAIC,CAAJ,CAAzB;AACA;AAvDJ;AA2DD;;AAEDtH,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,WAA7B,EAA0CiH,UAA1C;AACAnH,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,SAA7B,EAAwCwH,aAAxC;AACA1H,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,WAA7B,EAA0CiH,UAA1C;AACAnH,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,UAA7B,EAAyCwH,aAAzC;AACD,KA3ED;AA+EA1H,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,WAA1B,EAAuCkH,UAAvC;AACAnH,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,SAA1B,EAAqCyH,aAArC;AACA1H,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,WAA1B,EAAuCkH,UAAvC;AACAnH,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,UAA1B,EAAsCyH,aAAtC;AACD,GAjKD;;AAmKA,QAAMC,eAAe,GAAIhJ,CAAD,IAAO;AAQ7B,aAASwI,UAAT,CAAoBxI,CAApB,EAAuB;AACrB,UAAIA,CAAC,CAACyI,OAAN,EAAezI,CAAC,GAAGA,CAAC,CAACyI,OAAF,CAAU,CAAV,CAAJ;;AAEf,UAAIzI,CAAC,CAACkG,KAAN,EAAa;AACX,cAAMZ,CAAC,GAAGtF,CAAC,CAACiG,KAAF,GAAUgD,OAAO,CAAC,CAAD,CAA3B;AACA,cAAMpE,CAAC,GAAG7E,CAAC,CAACkG,KAAF,GAAU+C,OAAO,CAAC,CAAD,CAA3B;AAGAjK,QAAAA,KAAK,CAAC8J,gBAAN,CAAuB,CAACxD,CAAC,IAAI,CAAL,GAASA,CAAT,GAAa,CAAd,EAAiBT,CAAC,IAAI,CAAL,GAASA,CAAT,GAAa,CAA9B,CAAvB;AACD;AACF;;AAED,aAASkE,aAAT,CAAuB/I,CAAvB,EAA0B;AACxB,UAAIA,CAAC,CAACyI,OAAF,IAAazI,CAAC,CAACyI,OAAF,CAAU,CAAV,CAAjB,EAA+BzI,CAAC,GAAGA,CAAC,CAACyI,OAAF,CAAU,CAAV,CAAJ;;AAE/B,UAAIzI,CAAC,CAACkG,KAAN,EAAa;AACX,cAAMZ,CAAC,GAAGtF,CAAC,CAACiG,KAAF,GAAUgD,OAAO,CAAC,CAAD,CAA3B;AACA,cAAMpE,CAAC,GAAG7E,CAAC,CAACkG,KAAF,GAAU+C,OAAO,CAAC,CAAD,CAA3B;AAGAjK,QAAAA,KAAK,CAAC8J,gBAAN,CAAuB,CAACxD,CAAC,IAAI,CAAL,GAASA,CAAT,GAAa,CAAd,EAAiBT,CAAC,IAAI,CAAL,GAASA,CAAT,GAAa,CAA9B,CAAvB;AACD;;AAEDxD,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,WAA7B,EAA0CiH,UAA1C;AACAnH,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,SAA7B,EAAwCwH,aAAxC;AACA1H,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,WAA7B,EAA0CiH,UAA1C;AACAnH,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,UAA7B,EAAyCwH,aAAzC;AACD;;AAGD,QAAI/I,CAAC,CAACyI,OAAN,EAAezI,CAAC,GAAGA,CAAC,CAACyI,OAAF,CAAU,CAAV,CAAJ;AAEf,UAAMJ,OAAO,GAAGV,cAAc,CAAC7G,OAAf,CAAuBP,qBAAvB,EAAhB;AACA,UAAM2D,MAAM,GAAG;AAAEoB,MAAAA,CAAC,EAAE+C,OAAO,CAACxJ,IAAb;AAAmBgG,MAAAA,CAAC,EAAEwD,OAAO,CAACzJ;AAA9B,KAAf;AAEA,UAAMqK,OAAO,GAAG,CAACjJ,CAAC,CAACiG,KAAF,GAAU/B,MAAM,CAACoB,CAAlB,EAAqBtF,CAAC,CAACkG,KAAF,GAAUhC,MAAM,CAACW,CAAtC,CAAhB;AAEAxD,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,WAA1B,EAAuCkH,UAAvC;AACAnH,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,SAA1B,EAAqCyH,aAArC;AACA1H,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,WAA1B,EAAuCkH,UAAvC;AACAnH,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,UAA1B,EAAsCyH,aAAtC;AACD,GAjDD;;AAmDA,QAAMG,YAAY,GAAG,MAAM;AACzB,QAAI,CAAClK,KAAK,CAAC8J,gBAAX,EAA6B;AAC7B,UAAMT,OAAO,GAAGV,cAAc,CAAC7G,OAAf,CAAuBP,qBAAvB,EAAhB;AAEA,UAAM+E,CAAC,GAAGR,MAAM,CAACqB,UAAP,GAAoB,CAApB,GAAwBkC,OAAO,CAAC1J,KAAR,GAAgB,CAAlD;AACA,UAAMkG,CAAC,GAAGC,MAAM,CAACC,WAAP,GAAqB,CAArB,GAAyBsD,OAAO,CAAC3H,MAAR,GAAiB,CAApD;AAGA1B,IAAAA,KAAK,CAAC8J,gBAAN,CAAuB,CAACxD,CAAC,IAAI,CAAL,GAASA,CAAT,GAAa,CAAd,EAAiBT,CAAC,IAAI,CAAL,GAASA,CAAT,GAAa,CAA9B,CAAvB;AACD,GATD;;AAWA,QAAMsE,gBAAgB,GAAG,MAAM;AAC7B,QAAI,CAACnK,KAAK,CAACoK,UAAX,EAAuBF,YAAY;AAEnClK,IAAAA,KAAK,CAACqK,YAAN,CAAmB,CAACrK,KAAK,CAACoK,UAA1B;AACApK,IAAAA,KAAK,CAACsK,OAAN,CAActK,KAAK,CAACoK,UAApB;AACD,GALD;;AAOA,QAAMG,WAAW,GAAG,MAAM;AACxB,QAAIvK,KAAK,CAACwK,QAAN,KAAmB,IAAvB,EAA6B;AAE3B,YAAMnB,OAAO,GAAGV,cAAc,CAAC7G,OAAf,CAAuBP,qBAAvB,EAAhB;AACA,UAAIvB,KAAK,CAAC4J,kBAAV,EACE5J,KAAK,CAAC4J,kBAAN,CAAyB,CAACP,OAAO,CAAC1J,KAAT,EAAgB0J,OAAO,CAAC3H,MAAxB,CAAzB;AACH;;AAED,QAAI1B,KAAK,CAACsK,OAAV,EAAmBtK,KAAK,CAACsK,OAAN,CAAc,CAACtK,KAAK,CAACwK,QAArB;AACpB,GATD;;AAcA,QAAMC,WAAW,GAAIzJ,CAAD,IAAO;AACzBiI,IAAAA,QAAQ,CAAC,IAAD,CAAR;AACAF,IAAAA,UAAU,CAAC,IAAD,CAAV;AACA,QAAI/I,KAAK,CAAC0K,OAAV,EAAmB1K,KAAK,CAAC0K,OAAN,CAAc1J,CAAd;AACpB,GAJD;;AAMA,QAAM2J,UAAU,GAAG,MAAM;AACvBhC,IAAAA,cAAc,CAAC7G,OAAf,CAAuB8I,IAAvB;AACA3B,IAAAA,QAAQ,CAAC,KAAD,CAAR;AACAF,IAAAA,UAAU,CAAC,KAAD,CAAV;AACA,QAAI/I,KAAK,CAAC6K,MAAV,EAAkB7K,KAAK,CAAC6K,MAAN,CAAa,KAAb;AACnB,GALD;;AAOA,MAAIC,WAAW,GAAG,EAAlB;;AAEA,MAAI9K,KAAK,CAACwK,QAAN,IAAkB,CAACxK,KAAK,CAACoK,UAA7B,EAAyC;AACvCU,IAAAA,WAAW,GAAG;AACZnL,MAAAA,KAAK,EAAEK,KAAK,CAAC6J,UAAN,CAAiB,CAAjB,CADK;AAEZnI,MAAAA,MAAM,EAAEkH,QAAQ,GAAG5I,KAAK,CAAC6J,UAAN,CAAiB,CAAjB,CAAH,GAAyB,aAF7B;AAGZhK,MAAAA,IAAI,EAAEG,KAAK,CAACyC,QAAN,CAAe,CAAf,CAHM;AAIZ7C,MAAAA,GAAG,EAAEI,KAAK,CAACyC,QAAN,CAAe,CAAf;AAJO,KAAd;AAMD,GAPD,MAOO,IAAIzC,KAAK,CAACoK,UAAV,EAAsB;AAC3BU,IAAAA,WAAW,GAAG;AACZnL,MAAAA,KAAK,EAAE,MADK;AAEZ+B,MAAAA,MAAM,EAAE,MAFI;AAGZ7B,MAAAA,IAAI,EAAE,CAHM;AAIZD,MAAAA,GAAG,EAAE;AAJO,KAAd;AAMD;;AAED,QAAMmL,QAAQ,GACZ/K,KAAK,CAACgL,SAAN,KACChL,KAAK,CAAC4D,KAAN,IAAe5D,KAAK,CAACiL,QAArB,IAAiCjL,KAAK,CAACkL,WAAvC,IAAsDlL,KAAK,CAACwK,QAD7D,CADF;AAGA,QAAMvE,WAAW,GAAG6C,OAAO,GAAG7I,OAAO,CAACkL,YAAX,GAA0BlL,OAAO,CAAC+D,aAA7D;AAaA5B,EAAAA,eAAe,CAAC,MAAM;AACpByG,IAAAA,WAAW,CAAC7I,KAAK,CAAC4I,QAAP,CAAX;AACD,GAFc,EAEZ,CAAC5I,KAAK,CAAC4I,QAAP,CAFY,CAAf;AAIA,sBACE;AACE,IAAA,GAAG,EAAED,cADP;AAEE,IAAA,SAAS,EAAEjG,UAAU,CAACC,QAAM,CAACyI,KAAR,EAAe;AAClC,OAACzI,QAAM,CAACyH,UAAR,GAAqBpK,KAAK,CAACoK,UADO;AAElC,OAACzH,QAAM,CAAC6H,QAAR,GAAmBxK,KAAK,CAACwK,QAFS;AAGlC,OAAC7H,QAAM,CAAC0I,SAAR,GAAoB,CAACzC;AAHa,KAAf,CAFvB;AAOE,IAAA,KAAK,EAAE;AACLhG,MAAAA,eAAe,EAAE,CAAC5C,KAAK,CAACoK,UAAP,GACbnK,OAAO,CAACuI,aADK,GAEb,aAHC;AAIL1F,MAAAA,KAAK,EAAE7C,OAAO,CAAC8C,UAAR,IAAsB,OAJxB;AAKLgB,MAAAA,MAAM,EACJ/D,KAAK,CAAC+D,MAAN,IAAgB,CAAC/D,KAAK,CAACoK,UAAvB,GACI,eAAenE,WADnB,GAEI,MARD;AASLvE,MAAAA,MAAM,EAAE1B,KAAK,CAACkL,WAAN,GAAoB,MAApB,GAA6B,MAThC;AAULI,MAAAA,MAAM,EAAEtL,KAAK,CAACuL,OAAN,GAAgBvL,KAAK,CAACwL,UAAtB,GAAmC,CAVtC;AAWLC,MAAAA,MAAM,EAAEzC,KAAK,GAAG,CAAH,GAAO,CAXf;AAYL,SAAG8B,WAZE;AAaL,SAAG9K,KAAK,CAACP;AAbJ,KAPT;AAsBE,IAAA,OAAO,EAAEgL,WAtBX;AAuBE,IAAA,MAAM,EAAEE,UAvBV;AAwBE,IAAA,aAAa,EAAE3K,KAAK,CAAC0L,aAxBvB;AAyBE,IAAA,YAAY,EAAE1L,KAAK,CAAC2L,YAzBtB;AA0BE,IAAA,YAAY,EAAE3L,KAAK,CAAC4L,YA1BtB;AA2BE,IAAA,WAAW,EAAE5L,KAAK,CAAC6L,WA3BrB;AA4BE,IAAA,UAAU,EAAE7L,KAAK,CAAC8L,UA5BpB;AA6BE,IAAA,QAAQ,EAAC;AA7BX,KA+BGf,QAAQ,iBACP;AACE,IAAA,SAAS,EAAEpI,QAAM,CAACoJ,SADpB;AAEE,IAAA,KAAK,EAAE;AACLnJ,MAAAA,eAAe,EAAE3C,OAAO,CAACuI,aAAR,IAAyB,OADrC;AAEL,SAAGxI,KAAK,CAACgM;AAFJ;AAFT,KAOGhM,KAAK,CAACiM,aAAN,iBACC;AACE,IAAA,KAAK,EAAC,YADR;AAEE,IAAA,OAAO,EAAE9B,gBAFX;AAGE,IAAA,KAAK,EAAE;AAAE+B,MAAAA,QAAQ,EAAE;AAAZ;AAHT,cARJ,EAiBGlM,KAAK,CAACmM,SAAN,iBACC;AAAQ,IAAA,KAAK,EAAC,OAAd;AAAsB,IAAA,OAAO,EAAEnM,KAAK,CAACiL;AAArC,SAlBJ,EAuBGjL,KAAK,CAACoM,QAAN,iBACC;AACE,IAAA,KAAK,EAAEpM,KAAK,CAACwK,QAAN,GAAiB,MAAjB,GAA0B,OADnC;AAEE,IAAA,OAAO,EAAED,WAFX;AAGE,IAAA,KAAK,EAAE;AAAE2B,MAAAA,QAAQ,EAAE;AAAZ;AAHT,KAKGlM,KAAK,CAACwK,QAAN,GAAiB,GAAjB,GAAuB,GAL1B,CAxBJ,EAiCGxK,KAAK,CAACkL,WAAN,iBACC;AAAQ,IAAA,OAAO,EAAE,MAAMrC,WAAW,CAAC,CAACD,QAAF;AAAlC,KACGA,QAAQ,GAAG,GAAH,GAAS,GADpB,CAlCJ,eAuCE;AACE,IAAA,SAAS,EAAEjG,QAAM,CAAC0J,aADpB;AAKE,IAAA,OAAO,EACLrM,KAAK,CAACkL,WAAN,IAAqB,CAAClL,KAAK,CAACiM,aAA5B,GACI,MAAMpD,WAAW,CAAC,CAACD,QAAF,CADrB,GAEI;AARR,KAWG5I,KAAK,CAACwK,QAAN,iBACC;AACE,IAAA,SAAS,EAAE7H,QAAM,CAAC2J,UADpB;AAEE,IAAA,YAAY,EAAEtC,eAFhB;AAGE,IAAA,WAAW,EAAEA;AAHf,IAZJ,EAmBGhK,KAAK,CAACuM,aAAN,KAAwBC,SAAxB,gBACC;AACE,IAAA,KAAK,EAAC,6BADR;AAEE,IAAA,SAAS,EAAE7J,QAAM,CAAC8J,WAFpB;AAGE,IAAA,QAAQ,EAAEzM,KAAK,CAACuM,aAHlB;AAIE,IAAA,YAAY,EAAEvM,KAAK,CAAC0M;AAJtB,KAMGzJ,MAAM,CAAC0J,MAAP,CAAcrF,EAAE,CAACsF,aAAjB,EAAgCzJ,GAAhC,CAAqCnC,CAAD,iBACnC;AAAQ,IAAA,GAAG,EAAEA,CAAC,CAACQ,EAAf;AAAmB,IAAA,KAAK,EAAER,CAAC,CAACQ;AAA5B,KACGR,CAAC,CAAC4C,KADL,CADD,CANH,CADD,gBAcC,iDACE,oCAAS5D,KAAK,CAAC4D,KAAf,CADF,CAjCJ,CAvCF,eA8EE;AAAK,IAAA,SAAS,EAAEjB,QAAM,CAACkK;AAAvB,KAAkC7M,KAAK,CAAC6M,QAAxC,CA9EF,EAgFG7M,KAAK,CAAC8M,UAAN,iBACC;AAAK,IAAA,SAAS,EAAEnK,QAAM,CAACmK;AAAvB,KACG9M,KAAK,CAAC8M,UAAN,CAAiB3J,GAAjB,CAAqB,CAACnC,CAAD,EAAIqC,CAAJ,KAAU;AAC9B,wBACE;AACE,MAAA,GAAG,EAAEA,CADP;AAEE,MAAA,SAAS,EAAEV,QAAM,CAACoK,SAFpB;AAGE,MAAA,KAAK,EAAE/L,CAAC,CAAC4C,KAHX;AAIE,MAAA,KAAK,EAAE;AACLd,QAAAA,KAAK,EAAE7C,OAAO,CAACuI,aADV;AAEL5F,QAAAA,eAAe,EAAE5B,CAAC,CAAC8B;AAFd;AAJT,OASG9B,CAAC,CAACyC,KATL,CADF;AAaD,GAdA,CADH,CAjFJ,EAoGGzD,KAAK,CAACqI,OAAN,iBAAiB,oBAAC,OAAD;AAAS,IAAA,OAAO,EAAErI,KAAK,CAACqI;AAAxB,IApGpB,CAhCJ,EAwIGO,QAAQ,IAAI5I,KAAK,CAACgG,OAxIrB,EA0IG4C,QAAQ,iBACP;AACE,IAAA,KAAK,EAAE;AACL3C,MAAAA,WAAW,EAAEhG,OAAO,CAAC8C,UADhB;AAELiK,MAAAA,SAAS,EAAEhN,KAAK,CAACoK,UAAN,GAAmB,KAAnB,GAA2B;AAFjC,KADT;AAKE,IAAA,SAAS,EAAE1H,UAAU,CAACC,QAAM,CAACsK,aAAR,EAAuB;AAC1C,OAACtK,QAAM,CAACuK,UAAR,GAAqBlN,KAAK,CAACkN,UADe;AAE1C,OAACvK,QAAM,CAACwK,QAAR,GAAmBnN,KAAK,CAACmN;AAFiB,KAAvB,CALvB;AASE,IAAA,GAAG,EAAEnN,KAAK,CAACkC;AATb,KAWGlC,KAAK,CAAC+H,QAXT,CA3IJ,EA0JGa,QAAQ,IAAI5I,KAAK,CAACoN,OA1JrB,EA6JGpN,KAAK,CAACwK,QAAN,IAAkB,CAACxK,KAAK,CAACoK,UAAzB,IAAuCxB,QAAvC,iBACC,oBAAC,KAAD,CAAO,QAAP,qBACE;AACE,IAAA,SAAS,EAAG,GAAEjG,QAAM,CAAC0K,YAAa,IAAG1K,QAAM,CAAC2K,QAAS,EADvD;AAEE,IAAA,YAAY,EAAGtM,CAAD,IAAOkI,YAAY,CAAClI,CAAD,EAAI,IAAJ,CAFnC;AAGE,IAAA,WAAW,EAAGA,CAAD,IAAOkI,YAAY,CAAClI,CAAD,EAAI,IAAJ,CAHlC;AAIE,IAAA,KAAK,EAAE;AACLiF,MAAAA,WAAW,EAAEhG,OAAO,CAAC8C;AADhB;AAJT,IADF,eASE;AACE,IAAA,SAAS,EAAG,GAAEJ,QAAM,CAAC0K,YAAa,IAAG1K,QAAM,CAAC4K,OAAQ,EADtD;AAEE,IAAA,YAAY,EAAGvM,CAAD,IAAOkI,YAAY,CAAClI,CAAD,EAAI,GAAJ,CAFnC;AAGE,IAAA,WAAW,EAAGA,CAAD,IAAOkI,YAAY,CAAClI,CAAD,EAAI,GAAJ,CAHlC;AAIE,IAAA,KAAK,EAAE;AACLiF,MAAAA,WAAW,EAAEhG,OAAO,CAAC8C;AADhB;AAJT,IATF,eAiBE;AACE,IAAA,SAAS,EAAG,GAAEJ,QAAM,CAAC0K,YAAa,IAAG1K,QAAM,CAAC6K,OAAQ,EADtD;AAEE,IAAA,YAAY,EAAGxM,CAAD,IAAOkI,YAAY,CAAClI,CAAD,EAAI,GAAJ,CAFnC;AAGE,IAAA,WAAW,EAAGA,CAAD,IAAOkI,YAAY,CAAClI,CAAD,EAAI,GAAJ,CAHlC;AAIE,IAAA,KAAK,EAAE;AACLiF,MAAAA,WAAW,EAAEhG,OAAO,CAAC8C;AADhB;AAJT,IAjBF,eAyBE;AACE,IAAA,SAAS,EAAG,GAAEJ,QAAM,CAAC0K,YAAa,IAAG1K,QAAM,CAAC8K,QAAS,EADvD;AAEE,IAAA,YAAY,EAAGzM,CAAD,IAAOkI,YAAY,CAAClI,CAAD,EAAI,IAAJ,CAFnC;AAGE,IAAA,WAAW,EAAGA,CAAD,IAAOkI,YAAY,CAAClI,CAAD,EAAI,IAAJ,CAHlC;AAIE,IAAA,KAAK,EAAE;AACLiF,MAAAA,WAAW,EAAEhG,OAAO,CAAC8C;AADhB;AAJT,IAzBF,eAiCE;AACE,IAAA,SAAS,EAAG,GAAEJ,QAAM,CAAC0K,YAAa,IAAG1K,QAAM,CAAC+K,OAAQ,EADtD;AAEE,IAAA,YAAY,EAAG1M,CAAD,IAAOkI,YAAY,CAAClI,CAAD,EAAI,GAAJ,CAFnC;AAGE,IAAA,WAAW,EAAGA,CAAD,IAAOkI,YAAY,CAAClI,CAAD,EAAI,GAAJ,CAHlC;AAIE,IAAA,KAAK,EAAE;AACLiF,MAAAA,WAAW,EAAEhG,OAAO,CAAC8C;AADhB;AAJT,IAjCF,eAyCE;AACE,IAAA,SAAS,EAAG,GAAEJ,QAAM,CAAC0K,YAAa,IAAG1K,QAAM,CAACgL,OAAQ,EADtD;AAEE,IAAA,YAAY,EAAG3M,CAAD,IAAOkI,YAAY,CAAClI,CAAD,EAAI,GAAJ,CAFnC;AAGE,IAAA,WAAW,EAAGA,CAAD,IAAOkI,YAAY,CAAClI,CAAD,EAAI,GAAJ,CAHlC;AAIE,IAAA,KAAK,EAAE;AACLiF,MAAAA,WAAW,EAAEhG,OAAO,CAAC8C;AADhB;AAJT,IAzCF,eAiDE;AACE,IAAA,SAAS,EAAG,GAAEJ,QAAM,CAAC0K,YAAa,IAAG1K,QAAM,CAACiL,QAAS,EADvD;AAEE,IAAA,YAAY,EAAG5M,CAAD,IAAOkI,YAAY,CAAClI,CAAD,EAAI,IAAJ,CAFnC;AAGE,IAAA,WAAW,EAAGA,CAAD,IAAOkI,YAAY,CAAClI,CAAD,EAAI,IAAJ,CAHlC;AAIE,IAAA,KAAK,EAAE;AACLiF,MAAAA,WAAW,EAAEhG,OAAO,CAAC8C;AADhB;AAJT,IAjDF,eAyDE;AACE,IAAA,SAAS,EAAG,GAAEJ,QAAM,CAAC0K,YAAa,IAAG1K,QAAM,CAACkL,QAAS,EADvD;AAEE,IAAA,YAAY,EAAG7M,CAAD,IAAOkI,YAAY,CAAClI,CAAD,EAAI,IAAJ,CAFnC;AAGE,IAAA,WAAW,EAAGA,CAAD,IAAOkI,YAAY,CAAClI,CAAD,EAAI,IAAJ,CAHlC;AAIE,IAAA,KAAK,EAAE;AACLiF,MAAAA,WAAW,EAAEhG,OAAO,CAAC8C;AADhB;AAJT,IAzDF,CA9JJ,CADF;AAoOD,CAvhBqB,CAAtB;AAyhBA2F,KAAK,CAACnE,YAAN,GAAqB;AACnB6F,EAAAA,UAAU,EAAE,KADO;AAEnBxB,EAAAA,QAAQ,EAAE,IAFS;AAGnB7E,EAAAA,MAAM,EAAE,IAHW;AAInB+E,EAAAA,OAAO,EAAE,KAJU;AAKnB0B,EAAAA,QAAQ,EAAE,KALS;AAMnB/H,EAAAA,QAAQ,EAAE,CAAC,GAAD,EAAM,GAAN,CANS;AAOnBoH,EAAAA,UAAU,EAAE,CAAC,GAAD,EAAM,GAAN,CAPO;AAQnB2B,EAAAA,UAAU,EAAE,CARO;AASnBR,EAAAA,SAAS,EAAE,IATQ;AAUnBU,EAAAA,aAAa,EAAE,MAAM;AAVF,CAArB;AAaAhD,KAAK,CAAClE,SAAN,GAAkB;AAChByG,EAAAA,QAAQ,EAAE6C,SAAS,CAACC,IADJ;AAEhBrD,EAAAA,OAAO,EAAEoD,SAAS,CAACC,IAFH;AAGhB/H,EAAAA,OAAO,EAAE8H,SAAS,CAACE,MAHH;AAIhBjG,EAAAA,QAAQ,EAAE+F,SAAS,CAACG,GAJJ;AAKhBxO,EAAAA,KAAK,EAAEqO,SAAS,CAACE,MALD;AAMhBhC,EAAAA,UAAU,EAAE8B,SAAS,CAACE,MANN;AAOhBpK,EAAAA,KAAK,EAAEkK,SAAS,CAACI,SAAV,CAAoB,CAACJ,SAAS,CAACK,MAAX,EAAmBL,SAAS,CAACE,MAA7B,CAApB,CAPS;AAQhBlB,EAAAA,UAAU,EAAEgB,SAAS,CAACM,KARN;AAShBlB,EAAAA,UAAU,EAAEY,SAAS,CAACO,IATN;AAUhBlB,EAAAA,QAAQ,EAAEW,SAAS,CAACO,IAVJ;AAWhBnD,EAAAA,WAAW,EAAE4C,SAAS,CAACO,IAXP;AAYhBjE,EAAAA,UAAU,EAAE0D,SAAS,CAACO,IAZN;AAahB7D,EAAAA,QAAQ,EAAEsD,SAAS,CAACO,IAbJ;AAchBrD,EAAAA,SAAS,EAAE8C,SAAS,CAACO,IAdL;AAgBhB9C,EAAAA,OAAO,EAAEuC,SAAS,CAACO,IAhBH;AAiBhB7C,EAAAA,UAAU,EAAEsC,SAAS,CAACQ,MAjBN;AAkBhBvK,EAAAA,MAAM,EAAE+J,SAAS,CAACO;AAlBF,CAAlB;AAqBA,AAAO,MAAME,YAAY,GAAGxO,QAAQ,CAAEC,KAAD,iBACnC,oBAAC,KAAD;AACE,EAAA,IAAI,EAAEA,KAAK,CAACoL,KAAN,CAAY5J,EADpB;AAEE,EAAA,KAAK,EAAExB,KAAK,CAAC4D,KAAN,IAAe5D,KAAK,CAACoL,KAAN,CAAYxH,KAFpC;AAGE,EAAA,QAAQ,EAAE5D,KAAK,CAAC6M,QAAN,IAAkB7M,KAAK,CAACoL,KAAN,CAAYyB,QAH1C;AAIE,EAAA,WAAW,EAAE7M,KAAK,CAACkL,WAAN,IAAqBlL,KAAK,CAACoL,KAAN,CAAYF,WAJhD;AAKE,EAAA,UAAU,EAAElL,KAAK,CAACoL,KAAN,CAAYhB,UAL1B;AAME,EAAA,aAAa,EAAEpK,KAAK,CAACoL,KAAN,CAAYa,aAN7B;AAOE,EAAA,QAAQ,EAAEjM,KAAK,CAACoL,KAAN,CAAYZ,QAPxB;AAQE,EAAA,QAAQ,EAAExK,KAAK,CAAC4I,QARlB;AASE,EAAA,SAAS,EAAE5I,KAAK,CAACgL,SAAN,IAAmBhL,KAAK,CAACoL,KAAN,CAAYJ,SAT5C;AAUE,EAAA,QAAQ,EAAEhL,KAAK,CAACoL,KAAN,CAAYgB,QAVxB;AAWE,EAAA,YAAY,EAAEpM,KAAK,CAACoL,KAAN,CAAYoD,YAX5B;AAYE,EAAA,aAAa,EAAExO,KAAK,CAACoL,KAAN,CAAYoD,YAZ7B;AAaE,EAAA,QAAQ,EAAExO,KAAK,CAACoL,KAAN,CAAY3I,QAbxB;AAcE,EAAA,UAAU,EAAEzC,KAAK,CAACoL,KAAN,CAAYvB,UAd1B;AAeE,EAAA,OAAO,EAAE7J,KAAK,CAACgG,OAfjB;AAgBE,EAAA,OAAO,EAAEhG,KAAK,CAACoN,OAhBjB;AAiBE,EAAA,UAAU,EAAEpN,KAAK,CAAC8M,UAjBpB;AAkBE,EAAA,OAAO,EAAE9M,KAAK,CAACqI,OAlBjB;AAmBE,EAAA,QAAQ,EAAErI,KAAK,CAACiL,QAAN,IAAkBjL,KAAK,CAACoL,KAAN,CAAYH,QAnB1C;AAoBE,EAAA,SAAS,EAAEjL,KAAK,CAACmM,SAAN,IAAmBnM,KAAK,CAACoL,KAAN,CAAYe,SApB5C;AAqBE,EAAA,KAAK,EAAEnM,KAAK,CAACP,KArBf;AAsBE,EAAA,aAAa,EAAEO,KAAK,CAAC0L,aAtBvB;AAuBE,EAAA,oBAAoB,EAAE1L,KAAK,CAACyO,oBAvB9B;AAwBE,EAAA,OAAO,EAAEzO,KAAK,CAAC0K,OAxBjB;AAyBE,EAAA,MAAM,EAAE1K,KAAK,CAAC6K,MAzBhB;AA0BE,EAAA,KAAK,EAAE7K,KAAK,CAACkC,KA1Bf;AA2BE,EAAA,OAAO,EAAElC,KAAK,CAACoL,KAAN,CAAYsD,WA3BvB;AA4BE,EAAA,gBAAgB,EAAE1O,KAAK,CAACoL,KAAN,CAAYjD,WA5BhC;AA6BE,EAAA,kBAAkB,EAAEnI,KAAK,CAACoL,KAAN,CAAYuD,aA7BlC;AA8BE,EAAA,YAAY,EAAE3O,KAAK,CAACoL,KAAN,CAAYwD,aA9B5B;AA+BE,EAAA,aAAa,EAAE5O,KAAK,CAACuM;AA/BvB,GAiCGvM,KAAK,CAAC+H,QAjCT,CADkC,CAA7B;;;;ACrmBP,MAAM8G,IAAI,GAAI7O,KAAD,IAAW;AACtB,sBACE;AAAK,IAAA,SAAS,EAAE2C,QAAM,CAACmM,IAAvB;AAA6B,IAAA,KAAK,EAAE9O,KAAK,CAACP;AAA1C,KACGO,KAAK,CAAC+H,QADT,CADF;AAKD,CAND;;;;ACCA,MAAMgH,YAAY,GAAI/O,KAAD,IAAW;AAC9B,QAAMC,OAAO,GAAGC,UAAU,CAACZ,SAAD,CAAV,CAAsBa,KAAtC;AAEA,sBACE;AAAK,IAAA,SAAS,EAAEwC,QAAM,CAAC8E;AAAvB,kBACE;AACE,IAAA,KAAK,EAAE;AACLxB,MAAAA,WAAW,EAAEhG,OAAO,CAAC+D;AADhB;AADT,KAKGhE,KAAK,CAACgP,IAAN,iBACC;AACE,IAAA,KAAK,EAAE;AACL1K,MAAAA,OAAO,EAAE,SADJ;AAEL1B,MAAAA,eAAe,EAAE3C,OAAO,CAAC8C,UAFpB;AAGLD,MAAAA,KAAK,EAAE7C,OAAO,CAACuI;AAHV;AADT,kBAOE,oCAASxI,KAAK,CAACgP,IAAf,CAPF,CANJ,eAiBE,iCACGzP,KAAK,CAAC0P,QAAN,CAAe9L,GAAf,CAAmBnD,KAAK,CAAC+H,QAAzB,EAAoCmH,KAAD,IAAW;AAC7C,QAAIC,UAAU,GAAG,KAAjB;;AAEA,QAAInP,KAAK,CAAC+H,QAAN,CAAeqH,MAAnB,EAA2B;AACzBD,MAAAA,UAAU,GAAG,QAAQnP,KAAK,CAAC+H,QAAN,CAAeqH,MAApC;AACD;;AAED,QAAI7P,KAAK,CAAC8P,cAAN,CAAqBH,KAArB,CAAJ,EAAiC;AAC/B,aAAO3P,KAAK,CAAC+P,YAAN,CAAmBJ,KAAnB,EAA0B;AAC/BzP,QAAAA,KAAK,EAAE;AAAEE,UAAAA,KAAK,EAAG,GAAEwP,UAAW;AAAvB;AADwB,OAA1B,CAAP;AAGD;;AAED,WAAOD,KAAP;AACD,GAdA,CADH,CAjBF,CADF,CADF;AAuCD,CA1CD;;ACAA,MAAMK,WAAW,GAAG,CAACC,QAAD,EAAWC,OAAX,EAAoBC,YAAY,GAAG,EAAnC,KAA0C;AAC5D,QAAM3P,QAAQ,GAAGM,MAAM,CAAC,IAAD,CAAvB;AAEA+B,EAAAA,eAAe,CAAC,MAAM;AACpB,UAAMuN,OAAO,GAAG,MAAM;AACpB,UAAIF,OAAO,IAAIA,OAAO,CAAC3N,OAAnB,IAA8B/B,QAAQ,CAAC+B,OAA3C,EAAoD;AAClD/B,QAAAA,QAAQ,CAAC+B,OAAT,CAAiB6N,OAAjB,CAAyBF,OAAO,CAAC3N,OAAjC;AACD;AACF,KAJD;;AAMA,UAAMA,OAAO,GAAG2N,OAAO,CAAC3N,OAAxB;;AAGA,QAAI/B,QAAQ,IAAIA,QAAQ,CAAC+B,OAArB,IAAgCA,OAApC,EAA6C;AAC3C/B,MAAAA,QAAQ,CAAC+B,OAAT,CAAiB8N,SAAjB,CAA2B9N,OAA3B;AACD;;AACD,UAAM+N,wBAAwB,GAAGC,cAAjC;AAEA/P,IAAAA,QAAQ,CAAC+B,OAAT,GAAmB,IAAI+N,wBAAJ,CAA6BL,QAA7B,CAAnB;AACAG,IAAAA,OAAO;AAEP,WAAO,MAAM;AACX,UAAI5P,QAAQ,IAAIA,QAAQ,CAAC+B,OAArB,IAAgCA,OAApC,EAA6C;AAC3C/B,QAAAA,QAAQ,CAAC+B,OAAT,CAAiB8N,SAAjB,CAA2B9N,OAA3B;AACD;AACF,KAJD;AAKD,GAvBc,EAuBZ,CAAC0N,QAAD,EAAWC,OAAX,EAAoB1P,QAApB,EAA8B,GAAG2P,YAAjC,CAvBY,CAAf;AAwBD,CA3BD;;AA6BAH,WAAW,CAAC/K,SAAZ,GAAwB;AACtBiL,EAAAA,OAAO,EAAE3B,SAAS,CAACE,MADG;AAEtBwB,EAAAA,QAAQ,EAAE1B,SAAS,CAACC;AAFE,CAAxB;;;;ACpBA,MAAMgC,KAAN,CAAY;AACVC,EAAAA,WAAW,CAAC;AAAExO,IAAAA,EAAE,GAAG,CAAP;AAAUgJ,IAAAA,QAAQ,GAAG,KAArB;AAA4ByF,IAAAA,IAAI,GAAG;AAAnC,GAAD,EAA2C;AACpD,SAAKzO,EAAL,GAAUA,EAAV;AACA,SAAKgJ,QAAL,GAAgBA,QAAhB;AACA,SAAKyF,IAAL,GAAYA,IAAZ;AACD;;AALS;;AAQZ,MAAMC,cAAc,GAAIlQ,KAAD,IAAW;AAChC,QAAMC,OAAO,GAAGC,UAAU,CAACZ,SAAD,CAAV,CAAsBa,KAAtC;;AAEA,QAAMgQ,gBAAgB,GAAG,MAAM;AAC7B,UAAMC,KAAK,GAAGpQ,KAAK,CAAC+H,QAAN,CAAeqH,MAA7B;AAGA,QAAIgB,KAAK,IAAI,CAAb,EACE,OAAO,CACL,IAAIL,KAAJ,CAAU;AACRvO,MAAAA,EAAE,EAAE,CADI;AAERgJ,MAAAA,QAAQ,EAAE,KAFF;AAGRyF,MAAAA,IAAI,EAAE;AAHE,KAAV,CADK,CAAP;AASF,UAAMI,aAAa,GAAGrQ,KAAK,CAAC+H,QAAN,CACnBuI,MADmB,CACXtP,CAAD,IAAOA,CAAC,CAAChB,KAAF,CAAQuQ,WADH,EAEnBpN,GAFmB,CAGlB,CAACnC,CAAD,EAAIqC,CAAJ,KACE,IAAI0M,KAAJ,CAAU;AACRvO,MAAAA,EAAE,EAAE6B,CADI;AAERmH,MAAAA,QAAQ,EAAE,KAFF;AAGRyF,MAAAA,IAAI,EAAEjP,CAAC,CAAChB,KAAF,CAAQuQ,WAAR,GAAsB;AAHpB,KAAV,CAJgB,CAAtB;;AAYA,QAAIF,aAAa,CAACjB,MAAlB,EAA0B;AACxB,YAAMoB,UAAU,GAAGH,aAAa,CAC7BC,MADgB,CACRG,CAAD,IAAO,CAACA,CAAC,CAACjG,QADD,EAEhBkG,MAFgB,CAET,CAACC,CAAD,EAAI7M,CAAJ,KAAU6M,CAAC,GAAG7M,CAAC,CAACmM,IAFP,EAEa,CAFb,CAAnB;AAKA,aAAOjQ,KAAK,CAAC+H,QAAN,CAAe5E,GAAf,CACL,CAACnC,CAAD,EAAIqC,CAAJ,KACE,IAAI0M,KAAJ,CAAU;AACRvO,QAAAA,EAAE,EAAE6B,CADI;AAER4M,QAAAA,IAAI,EAAEjP,CAAC,CAAChB,KAAF,CAAQuQ,WAAR,GACFvP,CAAC,CAAChB,KAAF,CAAQuQ,WAAR,GAAsB,KADpB,GAEF,CAAC,QAAQC,UAAT,KAAwBJ,KAAK,GAAG,CAAhC,CAJI;AAKR5F,QAAAA,QAAQ,EAAE;AALF,OAAV,CAFG,CAAP;AAUD,KAhBD,MAgBO;AACL,aAAOxK,KAAK,CAAC+H,QAAN,CAAe5E,GAAf,CACL,CAACnC,CAAD,EAAIqC,CAAJ,KACE,IAAI0M,KAAJ,CAAU;AACRvO,QAAAA,EAAE,EAAE6B,CADI;AAERmH,QAAAA,QAAQ,EAAE,KAFF;AAGRyF,QAAAA,IAAI,EAAE,QAAQG;AAHN,OAAV,CAFG,CAAP;AAQD;AACF,GApDD;;AAsDA,QAAM,CAACQ,KAAD,EAAQC,QAAR,IAAoBrQ,QAAQ,CAAC2P,gBAAgB,EAAjB,CAAlC;AACA,QAAM,CAACW,OAAD,EAAUC,QAAV,IAAsBvQ,QAAQ,CAAC,KAAD,CAApC;AAEA,QAAMmI,cAAc,GAAGtI,MAAM,CAAC,IAAD,CAA7B;AAIA,QAAM,CAAC2Q,UAAD,EAAaC,aAAb,IAA8BzQ,QAAQ,CAC1CR,KAAK,CAACmN,QAAN,IAAkB,CAACnN,KAAK,CAACkN,UADiB,CAA5C;;AAIA,QAAMgE,qBAAqB,GAAIlQ,CAAD,IAAO;AACnC,QAAIhB,KAAK,CAACmR,IAAV,EAAgB;AACd,YAAM9P,MAAM,GAAGsH,cAAc,CAAC7G,OAAf,CAAuBP,qBAAvB,EAAf;AACA0P,MAAAA,aAAa,CAAC5P,MAAM,CAAC1B,KAAP,GAAe0B,MAAM,CAACK,MAAvB,CAAb;AACD;AACF,GALD;;AAQA0P,EAAAA,WAAiB,CAACF,qBAAD,EAAwBvI,cAAxB,EAAwC,CACvD3I,KAAK,CAACmR,IADiD,EAEvDH,UAFuD,CAAxC,CAAjB;;AAKA,QAAMK,iBAAiB,GAAG,CAACrQ,CAAD,EAAIqC,CAAJ,KAAU;AAClC,aAASmG,UAAT,CAAoBxI,CAApB,EAAuB;AACrB,UAAIA,CAAC,CAACiG,KAAN,EAAa;AACX,cAAMoC,OAAO,GAAGV,cAAc,CAAC7G,OAAf,CAAuBP,qBAAvB,EAAhB;AAEA,YAAIkP,CAAJ;;AAEA,YAAIO,UAAJ,EAAgB;AACdP,UAAAA,CAAC,GAAG,CAACzP,CAAC,CAACkG,KAAF,GAAUmC,OAAO,CAACxD,CAAnB,IAAwBwD,OAAO,CAAC3H,MAApC;AACD,SAFD,MAEO;AACL+O,UAAAA,CAAC,GAAG,CAACzP,CAAC,CAACiG,KAAF,GAAUoC,OAAO,CAAC/C,CAAnB,IAAwB+C,OAAO,CAAC1J,KAApC;AACD;;AAED,cAAM2R,QAAQ,GACZjO,CAAC,GAAG,CAAJ,GACIuN,KAAK,CACFW,KADH,CACS,CADT,EACYlO,CADZ,EAEGiN,MAFH,CAEWG,CAAD,IAAO,CAACA,CAAC,CAACjG,QAFpB,EAGGkG,MAHH,CAGU,CAACC,CAAD,EAAI7M,CAAJ,KAAU6M,CAAC,GAAG7M,CAAC,CAACmM,IAH1B,EAGgC,CAHhC,CADJ,GAKI,CANN;AAOAW,QAAAA,KAAK,CAACvN,CAAD,CAAL,CAAS4M,IAAT,GAAgBQ,CAAC,GAAG,GAAJ,GAAUa,QAA1B;AAEA,YAAIV,KAAK,CAACvN,CAAD,CAAL,CAAS4M,IAAT,GAAgB,GAApB,EAAyBW,KAAK,CAACvN,CAAD,CAAL,CAAS4M,IAAT,GAAgB,GAAhB;AACzB,YAAIW,KAAK,CAACvN,CAAD,CAAL,CAAS4M,IAAT,GAAgB,CAApB,EAAuBW,KAAK,CAACvN,CAAD,CAAL,CAAS4M,IAAT,GAAgB,CAAhB;AAEvBY,QAAAA,QAAQ,CAAC,CAAC,GAAGD,KAAJ,CAAD,CAAR;AACD;AACF;;AAED,aAAS7G,aAAT,CAAuB/I,CAAvB,EAA0B;AACxB,UAAIA,CAAC,CAACyI,OAAF,IAAazI,CAAC,CAACyI,OAAF,CAAU,CAAV,CAAjB,EAA+BzI,CAAC,GAAGA,CAAC,CAACyI,OAAF,CAAU,CAAV,CAAJ;;AAE/B,UAAIzI,CAAC,CAACiG,KAAN,EAAa;AACX,cAAMoC,OAAO,GAAGV,cAAc,CAAC7G,OAAf,CAAuBP,qBAAvB,EAAhB;AAEA,YAAIkP,CAAJ;;AAEA,YAAIO,UAAJ,EAAgB;AACdP,UAAAA,CAAC,GAAG,CAACzP,CAAC,CAACkG,KAAF,GAAUmC,OAAO,CAACxD,CAAnB,IAAwBwD,OAAO,CAAC3H,MAApC;AACD,SAFD,MAEO;AACL+O,UAAAA,CAAC,GAAG,CAACzP,CAAC,CAACiG,KAAF,GAAUoC,OAAO,CAAC/C,CAAnB,IAAwB+C,OAAO,CAAC1J,KAApC;AACD;;AAED,cAAM2R,QAAQ,GACZjO,CAAC,GAAG,CAAJ,GACIuN,KAAK,CACFW,KADH,CACS,CADT,EACYlO,CADZ,EAEGiN,MAFH,CAEWG,CAAD,IAAO,CAACA,CAAC,CAACjG,QAFpB,EAGGkG,MAHH,CAGU,CAACC,CAAD,EAAI7M,CAAJ,KAAU6M,CAAC,GAAG7M,CAAC,CAACmM,IAH1B,EAGgC,CAHhC,CADJ,GAKI,CANN;AAOAW,QAAAA,KAAK,CAACvN,CAAD,CAAL,CAAS4M,IAAT,GAAgBQ,CAAC,GAAG,GAAJ,GAAUa,QAA1B;AAEA,YAAIV,KAAK,CAACvN,CAAD,CAAL,CAAS4M,IAAT,GAAgB,GAApB,EAAyBW,KAAK,CAACvN,CAAD,CAAL,CAAS4M,IAAT,GAAgB,GAAhB;AACzB,YAAIW,KAAK,CAACvN,CAAD,CAAL,CAAS4M,IAAT,GAAgB,CAApB,EAAuBW,KAAK,CAACvN,CAAD,CAAL,CAAS4M,IAAT,GAAgB,CAAhB;AAEvBY,QAAAA,QAAQ,CAAC,CAAC,GAAGD,KAAJ,CAAD,CAAR;AACD;;AAEDvO,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,WAA7B,EAA0CiH,UAA1C;AACAnH,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,SAA7B,EAAwCwH,aAAxC;AACA1H,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,WAA7B,EAA0CiH,UAA1C;AACAnH,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,UAA7B,EAAyCwH,aAAzC;AACD;AAID1H,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,WAA1B,EAAuCkH,UAAvC;AACAnH,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,SAA1B,EAAqCyH,aAArC;AACA1H,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,WAA1B,EAAuCkH,UAAvC;AACAnH,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,UAA1B,EAAsCyH,aAAtC;AACD,GAtED;;AAwEA,QAAMyH,YAAY,GAAG,CAACnO,CAAD,EAAIoO,UAAJ,KAAmB;AACtC,QAAIpO,CAAC,KAAKuN,KAAK,CAACxB,MAAhB,EAAwB;AACxBwB,IAAAA,KAAK,CAACvN,CAAD,CAAL,CAASmH,QAAT,GAAoBiH,UAApB;AACAZ,IAAAA,QAAQ,CAAC,CAAC,GAAGD,KAAJ,CAAD,CAAR;AACD,GAJD;;AAMAxO,EAAAA,eAAe,CACZpB,CAAD,IAAO;AACL6P,IAAAA,QAAQ,CAACV,gBAAgB,EAAjB,CAAR;AACD,GAHY,EAIb,CAACnQ,KAAK,CAAC+H,QAAN,CAAeqH,MAAhB,EAAwBpP,KAAK,CAAC0R,UAA9B,CAJa,CAAf;AAOA9L,EAAAA,SAAS,CACN5E,CAAD,IAAO;AAEL,QAAI,CAAC4P,KAAK,CAACN,MAAN,CAAcG,CAAD,IAAO,CAACA,CAAC,CAACjG,QAAvB,EAAiC4E,MAAlC,IAA4C,CAAC0B,OAAjD,EAA0D;AACxDC,MAAAA,QAAQ,CAAC,IAAD,CAAR;AACA,UAAI/Q,KAAK,CAAC2R,OAAV,EAAmB3R,KAAK,CAAC2R,OAAN,CAAc,IAAd;AACpB;;AAGD,QAAIb,OAAJ,EAAa;AACXC,MAAAA,QAAQ,CAAC,KAAD,CAAR;AACA,UAAI/Q,KAAK,CAAC2R,OAAV,EAAmB3R,KAAK,CAAC2R,OAAN,CAAc,KAAd;AACpB;AACF,GAbM,EAcP,CAACf,KAAD,CAdO,CAAT;AAiBA,QAAMgB,YAAY,GAAGlP,UAAU,CAACC,QAAM,CAAC8E,OAAR,EAAiB;AAC9C,KAAC9E,QAAM,CAACwK,QAAR,GAAmB6D,UAD2B;AAE9C,KAACrO,QAAM,CAACuK,UAAR,GAAqB,CAAC8D,UAFwB;AAG9C,KAACrO,QAAM,CAACkP,KAAR,GAAgBf;AAH8B,GAAjB,CAA/B;AAMA,sBACE;AACE,IAAA,SAAS,EAAEc,YADb;AAEE,IAAA,GAAG,EAAEjJ,cAFP;AAGE,IAAA,KAAK,EAAE;AACL/F,MAAAA,eAAe,EAAE3C,OAAO,CAAC6H;AADpB;AAHT,KAOG9H,KAAK,CAAC+H,QAAN,IACCxI,KAAK,CAAC0P,QAAN,CAAe9L,GAAf,CAAmBnD,KAAK,CAAC+H,QAAzB,EAAmC,CAACmH,KAAD,EAAQ7L,CAAR,KAAc;AAC/C,UAAMyO,OAAO,GAAG5C,KAAK,CAAC6C,IAAN,CAAW/C,IAAX,KAAoB,gBAApC;AAGA,QAAIhP,KAAK,CAAC+H,QAAN,CAAeqH,MAAf,KAA0B,CAA9B,EACE,oBACE;AACE,MAAA,KAAK,EAAE4B,UAAU,GAAG;AAAEtP,QAAAA,MAAM,EAAE;AAAV,OAAH,GAAwB;AAAE/B,QAAAA,KAAK,EAAE;AAAT,OAD3C;AAEE,MAAA,SAAS,EAAE+C,UAAU,CAAC;AACpB,SAACC,QAAM,CAACqP,eAAR,GAA0BF,OADN;AAEpB,SAACnP,QAAM,CAACsP,eAAR,GAA0B,CAACH;AAFP,OAAD;AAFvB,OAOG5C,KAPH,CADF;AAYF,QAAIgD,SAAS,GAAG7O,CAAC,GAAGrD,KAAK,CAAC+H,QAAN,CAAeqH,MAAf,GAAwB,CAA5C;AAEA,QAAI1F,CAAJ;;AAEA,QAAIrG,CAAC,GAAGrD,KAAK,CAAC+H,QAAN,CAAeqH,MAAf,GAAwB,CAAhC,EAAmC;AACjC1F,MAAAA,CAAC,GAAGkH,KAAK,CAACvN,CAAD,CAAL,GAAWuN,KAAK,CAACvN,CAAD,CAAL,CAAS4M,IAApB,GAA2B,CAA/B;AACAvG,MAAAA,CAAC,GAAGkH,KAAK,CAACvN,CAAD,CAAL,CAASmH,QAAT,GAAoB,CAApB,GAAwBd,CAA5B;AACA,UAAIkH,KAAK,CAACvN,CAAD,CAAL,CAASmH,QAAb,EAAuB0H,SAAS,GAAG,KAAZ;AACxB,KAJD,MAIO;AAGL,UAAItB,KAAK,CAACvN,CAAD,CAAL,IAAYuN,KAAK,CAACvN,CAAD,CAAL,CAASmH,QAAzB,EAAmC;AACjC0H,QAAAA,SAAS,GAAG,KAAZ;AACAxI,QAAAA,CAAC,GAAG,CAAJ;AACD,OAHD,MAGO;AACLA,QAAAA,CAAC,GACC,MACAkH,KAAK,CACFW,KADH,CACS,CADT,EACY,CAAC,CADb,EAEGjB,MAFH,CAEWG,CAAD,IAAO,CAACA,CAAC,CAACjG,QAFpB,EAGGkG,MAHH,CAGU,CAACC,CAAD,EAAI7M,CAAJ,KAAU6M,CAAC,GAAG7M,CAAC,CAACmM,IAH1B,EAGgC,CAHhC,CAFF;AAMD;AACF;;AAED,QAAIW,KAAK,CAACvN,CAAC,GAAG,CAAL,CAAL,IAAgBuN,KAAK,CAACvN,CAAC,GAAG,CAAL,CAAL,CAAamH,QAA7B,IAAyCnH,CAAC,KAAKuN,KAAK,CAACxB,MAAN,GAAe,CAAlE,EAAqE;AACnE1F,MAAAA,CAAC,GACC,MACAkH,KAAK,CACFW,KADH,CACS,CADT,EACYlO,CADZ,EAEGiN,MAFH,CAEWG,CAAD,IAAO,CAACA,CAAC,CAACjG,QAFpB,EAGGkG,MAHH,CAGU,CAACC,CAAD,EAAI7M,CAAJ,KAAU6M,CAAC,GAAG7M,CAAC,CAACmM,IAH1B,EAGgC,CAHhC,CAFF;AAMD;;AAED,QACEW,KAAK,CAACvN,CAAD,CAAL,IACA,CAACuN,KAAK,CAACvN,CAAD,CAAL,CAASmH,QADV,IAEAoG,KAAK,CAACN,MAAN,CAAcG,CAAD,IAAO,CAACA,CAAC,CAACjG,QAAvB,EAAiC4E,MAAjC,KAA4C,CAH9C,EAIE;AACA1F,MAAAA,CAAC,GAAG,GAAJ;AACAwI,MAAAA,SAAS,GAAG,KAAZ;AACD;;AAMD,QAAIhD,KAAK,CAAClP,KAAN,CAAYmS,UAAhB,EAA4B;AAC1BjD,MAAAA,KAAK,GAAG3P,KAAK,CAAC+P,YAAN,CAAmBJ,KAAnB,EAA0B,EAChC,GAAGA,KAAK,CAAClP,KADuB;AAEhCoS,QAAAA,QAAQ,EAAGtO,CAAD,IAAO0N,YAAY,CAACnO,CAAD,EAAIS,CAAJ;AAFG,OAA1B,CAAR;AAID;;AAKD,QAAIgO,OAAJ,EAAa;AACX5C,MAAAA,KAAK,GAAG3P,KAAK,CAAC+P,YAAN,CAAmBJ,KAAnB,EAA0B,EAChC,GAAGA,KAAK,CAAClP,KADuB;AAEhC2R,QAAAA,OAAO,EAAG7N,CAAD,IAAO0N,YAAY,CAACnO,CAAD,EAAIS,CAAJ;AAFI,OAA1B,CAAR;AAID;;AAED,wBACE,oBAAC,KAAD,CAAO,QAAP,qBACE;AACE,MAAA,KAAK,EAAEkN,UAAU,GAAG;AAAEtP,QAAAA,MAAM,EAAEgI,CAAC,GAAG;AAAd,OAAH,GAAyB;AAAE/J,QAAAA,KAAK,EAAE+J,CAAC,GAAG;AAAb,OAD5C;AAEE,MAAA,SAAS,EAAEhH,UAAU,CAACC,QAAM,CAACsK,aAAR,EAAuB;AAC1C,SAACtK,QAAM,CAACqP,eAAR,GAA0BF,OADgB;AAE1C,SAACnP,QAAM,CAACsP,eAAR,GAA0B,CAACH,OAFe;AAG1C,SAACnP,QAAM,CAAC0P,cAAR,GAAyBzB,KAAK,CAACvN,CAAD,CAAL,GAAWuN,KAAK,CAACvN,CAAD,CAAL,CAASmH,QAApB,GAA+B;AAHd,OAAvB;AAFvB,OASG0E,KATH,CADF,EAYGgD,SAAS,iBACR;AACE,MAAA,SAAS,EAAExP,UAAU,CAACC,QAAM,CAAC2P,cAAR,EAAwB;AAC3C,SAAC3P,QAAM,CAACwK,QAAR,GAAmB6D,UADwB;AAE3C,SAACrO,QAAM,CAACuK,UAAR,GAAqB,CAAC8D;AAFqB,OAAxB;AADvB,oBAME;AACE,MAAA,SAAS,EAAEtO,UAAU,CAACC,QAAM,CAAC4P,mBAAR,EAA6B;AAChD,SAAC5P,QAAM,CAACwK,QAAR,GAAmB6D,UAD6B;AAEhD,SAACrO,QAAM,CAACuK,UAAR,GAAqB,CAAC8D;AAF0B,OAA7B,CADvB;AAKE,MAAA,KAAK,EAAE;AAEL/K,QAAAA,WAAW,EAAEhG,OAAO,CAACkL;AAFhB,OALT;AASE,MAAA,YAAY,EAAGnK,CAAD,IAAOqQ,iBAAiB,CAACrQ,CAAD,EAAIqC,CAAJ,CATxC;AAUE,MAAA,WAAW,EAAGrC,CAAD,IAAOqQ,iBAAiB,CAACrQ,CAAD,EAAIqC,CAAJ;AAVvC,oBAYE;AACE,MAAA,SAAS,EAAEX,UAAU,CAACC,QAAM,CAAC6P,WAAR,EAAqB;AACxC,SAAC7P,QAAM,CAACwK,QAAR,GAAmB6D,UADqB;AAExC,SAACrO,QAAM,CAACuK,UAAR,GAAqB,CAAC8D;AAFkB,OAArB,CADvB;AAKE,MAAA,KAAK,EAAE;AAEL/K,QAAAA,WAAW,EAAEhG,OAAO,CAAC+D;AAFhB;AALT,MAZF,CANF,CAbJ,CADF;AA+CD,GA/HD,CARJ,EAyIGhE,KAAK,CAAC+H,QAAN,CAAeqH,MAAf,KAA0B,CAA1B,iBACC;AACE,IAAA,KAAK,EAAE;AACLqD,MAAAA,SAAS,EAAE,QADN;AAELC,MAAAA,SAAS,EAAE;AAFN;AADT,kBAME,wDANF,CA1IJ,CADF;AAsJD,CAnVD;;AAqVAxC,cAAc,CAAC3L,YAAf,GAA8B;AAC5BmN,EAAAA,UAAU,EAAE;AADgB,CAA9B;AAMAxB,cAAc,CAAC1L,SAAf,GAA2B;AACzBuD,EAAAA,QAAQ,EAAE+F,SAAS,CAACG,GAAV,CAAc0E,UADC;AAEzBzF,EAAAA,UAAU,EAAEY,SAAS,CAACO,IAFG;AAGzBlB,EAAAA,QAAQ,EAAEW,SAAS,CAACO,IAHK;AAIzB8C,EAAAA,IAAI,EAAErD,SAAS,CAACO,IAJS;AAKzBuC,EAAAA,KAAK,EAAE9C,SAAS,CAACM,KALQ;AAMzBsD,EAAAA,UAAU,EAAE5D,SAAS,CAACO;AANG,CAA3B;;;;ACzWA,MAAMuE,eAAe,GAAG7S,QAAQ,CAAEC,KAAD,IAAW;AAC1C,QAAMC,OAAO,GAAGC,UAAU,CAACZ,SAAD,CAAV,CAAsBa,KAAtC;AACA,QAAMmH,EAAE,GAAGpH,UAAU,CAACZ,SAAD,CAArB;AAEA,QAAM0R,UAAU,GAAGhR,KAAK,CAAC6S,MAAN,CAAa1J,SAAb,KAA2B,UAA9C;AAEA,QAAM2H,OAAO,GAAG9Q,KAAK,CAAC6S,MAAN,CAAa/B,OAA7B;AAEA,QAAMnI,cAAc,GAAGtI,MAAM,CAAC,IAAD,CAA7B;;AAEA,QAAM6I,YAAY,GAAG,CAAClI,CAAD,EAAI6R,MAAJ,KAAe;AAClC,aAASrJ,UAAT,CAAoBxI,CAApB,EAAuB;AACrB,UAAIA,CAAC,CAACyI,OAAN,EAAezI,CAAC,GAAGA,CAAC,CAACyI,OAAF,CAAU,CAAV,CAAJ;;AAEf,UAAIzI,CAAC,CAACiG,KAAN,EAAa;AACX,cAAM5F,MAAM,GAAGsH,cAAc,CAAC7G,OAAf,CAAuBP,qBAAvB,EAAf;AAEA,YAAIuR,GAAJ;;AACA,YAAI9B,UAAJ,EAAgB;AACd8B,UAAAA,GAAG,GAAG,CAAC9R,CAAC,CAACkG,KAAF,GAAU7F,MAAM,CAACwE,CAAlB,IAAuBxE,MAAM,CAACK,MAApC;AACD,SAFD,MAEO;AACLoR,UAAAA,GAAG,GAAG,CAAC9R,CAAC,CAACiG,KAAF,GAAU5F,MAAM,CAACiF,CAAlB,IAAuBjF,MAAM,CAAC1B,KAApC;AACD;;AAEDkT,QAAAA,MAAM,CAACE,MAAP,CAAcD,GAAd;AACD;AACF;;AAED,aAAS/I,aAAT,CAAuB/I,CAAvB,EAA0B;AACxB,UAAIA,CAAC,CAACyI,OAAF,IAAazI,CAAC,CAACyI,OAAF,CAAU,CAAV,CAAjB,EAA+BzI,CAAC,GAAGA,CAAC,CAACyI,OAAF,CAAU,CAAV,CAAJ;;AAE/B,UAAIzI,CAAC,CAACiG,KAAN,EAAa;AACX,cAAM5F,MAAM,GAAGsH,cAAc,CAAC7G,OAAf,CAAuBP,qBAAvB,EAAf;AAEA,YAAIuR,GAAJ;;AACA,YAAI9B,UAAJ,EAAgB;AACd8B,UAAAA,GAAG,GAAG,CAAC9R,CAAC,CAACkG,KAAF,GAAU7F,MAAM,CAACwE,CAAlB,IAAuBxE,MAAM,CAACK,MAApC;AACD,SAFD,MAEO;AACLoR,UAAAA,GAAG,GAAG,CAAC9R,CAAC,CAACiG,KAAF,GAAU5F,MAAM,CAACiF,CAAlB,IAAuBjF,MAAM,CAAC1B,KAApC;AACD;;AAEDkT,QAAAA,MAAM,CAACE,MAAP,CAAcD,GAAd;AACD;;AAEDzQ,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,WAA7B,EAA0CiH,UAA1C;AACAnH,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,SAA7B,EAAwCwH,aAAxC;AACA1H,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,WAA7B,EAA0CiH,UAA1C;AACAnH,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,UAA7B,EAAyCwH,aAAzC;AACD;AAID1H,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,WAA1B,EAAuCkH,UAAvC;AACAnH,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,SAA1B,EAAqCyH,aAArC;AACA1H,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,WAA1B,EAAuCkH,UAAvC;AACAnH,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,UAA1B,EAAsCyH,aAAtC;AACD,GA9CD;;AAgDA,QAAM5H,iBAAiB,GAAG,CAACnB,CAAD,EAAI6R,MAAJ,KAAe;AACvC,QAAIG,MAAM,GAAG,EAAb;AAEA/P,IAAAA,MAAM,CAAC0J,MAAP,CAAcrF,EAAE,CAACsF,aAAjB,EAAgCqG,OAAhC,CAAyC7H,KAAD,IAAW;AACjD4H,MAAAA,MAAM,GAAG,EACP,GAAGA,MADI;AAEP,SAAC5H,KAAK,CAAC5J,EAAP,GAAY;AACVA,UAAAA,EAAE,EAAE4J,KAAK,CAAC5J,EADA;AAEViC,UAAAA,KAAK,EAAE2H,KAAK,CAACxH,KAFH;AAGVzC,UAAAA,OAAO,EAAE,MAAM;AACbnB,YAAAA,KAAK,CAAC6S,MAAN,CAAaK,QAAb,CAAsB9H,KAAtB,EAA6ByH,MAA7B;AACD;AALS;AAFL,OAAT;AAUD,KAXD;AAaAvL,IAAAA,EAAE,CAACrH,OAAH,CAAWsH,cAAX,CAA0B;AACxB2L,MAAAA,QAAQ,EAAE;AACR1R,QAAAA,EAAE,EAAE,UADI;AAERiC,QAAAA,KAAK,EAAE,WAFC;AAGRH,QAAAA,QAAQ,EAAE0P;AAHF,OADc;AAMxBG,MAAAA,gBAAgB,EAAE;AAChB3R,QAAAA,EAAE,EAAE,kBADY;AAEhBiC,QAAAA,KAAK,EAAE,mBAFS;AAGhBtC,QAAAA,OAAO,EAAEnB,KAAK,CAAC6S,MAAN,CAAaO;AAHN;AANM,KAA1B;AAcA,QAAIpT,KAAK,CAAC0L,aAAV,EAAyB1L,KAAK,CAAC0L,aAAN,CAAoB1K,CAApB,EAAuB6R,MAAvB;AAC1B,GA/BD;;AAiCA,QAAMQ,iBAAiB,GAAG,CAACrS,CAAD,EAAIsS,OAAJ,KAAgB;AACxCA,IAAAA,OAAO,CAACC,QAAR,CAAiBvS,CAAC,CAACgB,MAAF,CAASwR,KAA1B;AACD,GAFD;;AAIA,QAAMC,iBAAiB,GAAIZ,MAAD,IAAY;AACpC7S,IAAAA,KAAK,CAAC6S,MAAN,CAAaa,WAAb,CAAyBb,MAAzB;AACD,GAFD;;AAIA,QAAMc,cAAc,GAAG,MAAM;AAC3B,QAAIC,QAAQ,GAAG,EAAf;AACAA,IAAAA,QAAQ,GAAG5T,KAAK,CAAC6S,MAAN,CAAa9K,QAAb,CAAsB5E,GAAtB,CAA0B,CAACmQ,OAAD,EAAUjQ,CAAV,KAAgB;AAMnD,YAAMwQ,QAAQ,GAAG7T,KAAK,CAAC6S,MAAN,CAAa9K,QAA9B;AACA,YAAM+L,aAAa,GAAGR,OAAO,CAACvL,QAAR,CAAiBqH,MAAvC;AAEA,UAAI8C,SAAS,GAAG7O,CAAC,GAAGrD,KAAK,CAAC6S,MAAN,CAAa9K,QAAb,CAAsBqH,MAAtB,GAA+B,CAAnD;AACA,UAAIa,IAAI,GAAG,CAAX;;AAEA,YAAM8D,eAAe,GAAItD,CAAD,IAAO,CAACA,CAAC,CAACrF,KAAH,IAAaqF,CAAC,CAACrF,KAAF,IAAW,CAACqF,CAAC,CAACrF,KAAF,CAAQZ,QAAhE;;AAEA,YAAMsG,OAAO,GAAI+B,MAAD,IAAY;AAC1B,eACEA,MAAM,CAAC9K,QAAP,CAAgBqH,MAAhB,IACAyD,MAAM,CAAC9K,QAAP,CAAgBuI,MAAhB,CAAuByD,eAAvB,EAAwC3E,MAAxC,KAAmD,CAFrD;AAID,OALD;;AAeA,YAAM4E,UAAU,GAAInB,MAAD,IAAY;AAC7B,eAAO/B,OAAO,CAAC+B,MAAD,CAAP,IAAoBA,MAAM,CAACzH,KAAP,IAAgByH,MAAM,CAACzH,KAAP,CAAaZ,QAAxD;AACD,OAFD;;AAIA,UAAIwJ,UAAU,CAACV,OAAD,CAAd,EAAyB;AACvBW,QAAAA,OAAO,CAACC,GAAR,CAAYZ,OAAO,CAAC9R,EAAR,GAAa,cAAzB;AACA0Q,QAAAA,SAAS,GAAG,KAAZ;AACAjC,QAAAA,IAAI,GAAG,CAAP;AACD,OAJD,MAIO;AACLA,QAAAA,IAAI,GAAGqD,OAAO,CAACrD,IAAf;;AAKA,aAAK,IAAIkE,CAAC,GAAG9Q,CAAC,GAAG,CAAjB,EAAoB8Q,CAAC,IAAI,CAAzB,EAA4BA,CAAC,EAA7B,EAAiC;AAC/B,cAAIH,UAAU,CAACH,QAAQ,CAACM,CAAD,CAAT,CAAd,EAA6B;AAC3BlE,YAAAA,IAAI,IAAI4D,QAAQ,CAACM,CAAD,CAAR,CAAYlE,IAApB;AACD,WAFD,MAEO;AACL;AACD;AACF;;AAMD,YAAImE,IAAI,GAAG,CAAX;;AACA,aAAK,IAAID,CAAC,GAAG9Q,CAAC,GAAG,CAAjB,EAAoB8Q,CAAC,GAAGN,QAAQ,CAACzE,MAAjC,EAAyC+E,CAAC,EAA1C,EAA8C;AAC5C,cAAIH,UAAU,CAACH,QAAQ,CAACM,CAAD,CAAT,CAAd,EAA6B;AAC3BC,YAAAA,IAAI,IAAIP,QAAQ,CAACM,CAAD,CAAR,CAAYlE,IAApB;AAGA,gBAAIkE,CAAC,KAAKN,QAAQ,CAACzE,MAAT,GAAkB,CAA5B,EAA+Ba,IAAI,IAAImE,IAAR;AAChC,WALD,MAKO;AACL;AACD;AACF;AACF;;AAEDnE,MAAAA,IAAI,IAAI,GAAR;AAEA,0BACE,oBAAC,KAAD,CAAO,QAAP;AAAgB,QAAA,GAAG,EAAEqD,OAAO,CAAC9R;AAA7B,sBAEE;AACE,QAAA,KAAK,EAAEwP,UAAU,GAAG;AAAEtP,UAAAA,MAAM,EAAEuO,IAAI,GAAG;AAAjB,SAAH,GAA4B;AAAEtQ,UAAAA,KAAK,EAAEsQ,IAAI,GAAG;AAAhB,SAD/C;AAEE,QAAA,SAAS,EAAEvN,UAAU,CAACC,QAAM,CAACsK,aAAR,EAAuB;AAC1C,WAACtK,QAAM,CAAC0R,gBAAR,GAA2BP,aADe;AAE1C,WAACnR,QAAM,CAACsP,eAAR,GAA0B,CAAC6B,aAFe;AAG1C,WAACnR,QAAM,CAAC2R,eAAR,GAA0BN,UAAU,CAACV,OAAD;AAHM,SAAvB;AAFvB,sBAQE;AAAK,QAAA,SAAS,EAAE3Q,QAAM,CAAC4R;AAAvB,SAA+BtE,IAA/B,CARF,EAaGqD,OAAO,CAACvL,QAAR,CAAiBqH,MAAjB,gBACC,oBAAC,eAAD;AAAiB,QAAA,MAAM,EAAEkE;AAAzB,SACGtT,KAAK,CAAC+H,QADT,CADD,gBAKC,oBAAC,YAAD;AACE,QAAA,KAAK,EAAEuL,OAAO,CAAClI,KADjB;AAEE,QAAA,aAAa,EAAGpK,CAAD,IAAOqS,iBAAiB,CAACrS,CAAD,EAAIsS,OAAJ,CAFzC;AAGE,QAAA,QAAQ,EAAE,MAAMG,iBAAiB,CAACH,OAAD;AAHnC,SAUGtT,KAAK,CAAC+H,QAAN,CAAeuI,MAAf,CAAuBpB,KAAD,IAAW;AAKhC,YAAIA,KAAK,CAAClP,KAAN,CAAYoL,KAAhB,EAAuB;AACrB,iBAAO8D,KAAK,CAAClP,KAAN,CAAYoL,KAAZ,CAAkB5J,EAAlB,KAAyB8R,OAAO,CAAClI,KAAR,CAAc5J,EAA9C;AACD,SAFD;AAKD,OAVA,CAVH,CAlBJ,CAFF,EA4CG0Q,SAAS,iBACR;AACE,QAAA,aAAa,EAAGlR,CAAD,IAAOmB,iBAAiB,CAACnB,CAAD,EAAIsS,OAAJ,CADzC;AAEE,QAAA,SAAS,EAAE5Q,UAAU,CAACC,QAAM,CAAC2P,cAAR,EAAwB;AAC3C,WAAC3P,QAAM,CAACwK,QAAR,GAAmB6D,UADwB;AAE3C,WAACrO,QAAM,CAACuK,UAAR,GAAqB,CAAC8D;AAFqB,SAAxB,CAFvB;AAME,QAAA,YAAY,EAAGhQ,CAAD,IAAOkI,YAAY,CAAClI,CAAD,EAAIsS,OAAJ,CANnC;AAOE,QAAA,WAAW,EAAGtS,CAAD,IAAOkI,YAAY,CAAClI,CAAD,EAAIsS,OAAJ;AAPlC,sBASE;AACE,QAAA,SAAS,EAAE5Q,UAAU,CAACC,QAAM,CAAC6P,WAAR,EAAqB;AACxC,WAAC7P,QAAM,CAACwK,QAAR,GAAmB6D,UADqB;AAExC,WAACrO,QAAM,CAACuK,UAAR,GAAqB,CAAC8D;AAFkB,SAArB,CADvB;AAKE,QAAA,KAAK,EAAE;AACLpO,UAAAA,eAAe,EAAE3C,OAAO,CAACkL,YADpB;AAELlF,UAAAA,WAAW,EAAEhG,OAAO,CAACuI;AAFhB;AALT,QATF,CA7CJ,CADF;AAsED,KA5IU,CAAX;AA8IA,WAAOoL,QAAP;AACD,GAjJD;;AAmJA,sBACE;AACE,IAAA,GAAG,EAAEjL,cADP;AAEE,IAAA,KAAK,EAAE;AACL/F,MAAAA,eAAe,EAAE3C,OAAO,CAAC6H;AADpB,KAFT;AAKE,IAAA,SAAS,EAAEpF,UAAU,CAACC,QAAM,CAAC8E,OAAR,EAAiB;AACpC,OAAC9E,QAAM,CAACwK,QAAR,GAAmB6D,UADiB;AAEpC,OAACrO,QAAM,CAACuK,UAAR,GAAqB,CAAC8D,UAFc;AAGpC,OAACrO,QAAM,CAACkP,KAAR,GAAgBf;AAHoB,KAAjB;AALvB,KAWG6C,cAAc,EAXjB,CADF;AAeD,CArQ+B,CAAhC;AAuQAf,eAAe,CAACrO,YAAhB,GAA+B;AAC7B0L,EAAAA,IAAI,EAAE,GADuB;AAE7BuE,EAAAA,KAAK,EAAE;AAFsB,CAA/B;AAKA5B,eAAe,CAACpO,SAAhB,GAA4B,EAA5B;;;;AC/QA,MAAMiQ,KAAK,GAAIzU,KAAD,IAAW;AACvB,QAAM,CAAC0U,WAAD,EAAcC,cAAd,IAAgCnU,QAAQ,CAAC,CAAD,CAA9C;AACA,QAAMP,OAAO,GAAGC,UAAU,CAACZ,SAAD,CAAV,CAAsBa,KAAtC;;AAEA,QAAMyU,kBAAkB,GAAG,MAAM;AAC/B,QAAIF,WAAW,GAAG,CAAlB,EAAqBC,cAAc,CAACD,WAAW,GAAG,CAAf,CAAd;AACtB,GAFD;;AAIA,QAAMG,cAAc,GAAG,MAAM;AAC3B,QAAIH,WAAW,GAAG,CAAd,GAAkB1U,KAAK,CAAC+H,QAAN,CAAeqH,MAArC,EAA6CuF,cAAc,CAACD,WAAW,GAAG,CAAf,CAAd;AAC9C,GAFD;;AAIA,QAAMI,WAAW,GAAG;AAClBlS,IAAAA,eAAe,EAAE3C,OAAO,CAAC4C,eADP;AAElBC,IAAAA,KAAK,EAAE7C,OAAO,CAAC8C;AAFG,GAApB;AAKA,sBACE;AAAK,IAAA,SAAS,EAAEJ,QAAM,CAAC8E,OAAvB;AAAgC,IAAA,KAAK,EAAEzH,KAAK,CAACP;AAA7C,kBACE;AAAK,IAAA,SAAS,EAAEkD,QAAM,CAACoS;AAAvB,KAAqC/U,KAAK,CAAC+H,QAAN,CAAe2M,WAAf,CAArC,CADF,eAEE;AAAK,IAAA,SAAS,EAAE/R,QAAM,CAACqS;AAAvB,kBACE;AAAQ,IAAA,KAAK,EAAEF,WAAf;AAA4B,IAAA,OAAO,EAAEF;AAArC,KACG,GADH,CADF,eAIE;AAAQ,IAAA,KAAK,EAAEE,WAAf;AAA4B,IAAA,OAAO,EAAED;AAArC,KACG,GADH,CAJF,eAOE,kCAAQ,GAAEH,WAAW,GAAG,CAAE,OAAM1U,KAAK,CAAC+H,QAAN,CAAeqH,MAAO,EAAtD,CAPF,CAFF,CADF;AAcD,CA/BD;;;;ACCA,MAAM6F,SAAS,GAAGlV,QAAQ,CAAEC,KAAD,IAAW;AACpC,QAAMC,OAAO,GAAGC,UAAU,CAACZ,SAAD,CAAV,CAAsBa,KAAtC;;AACA,QAAM+U,WAAW,GAAIlU,CAAD,IAAOhB,KAAK,CAACmV,QAAN,CAAenU,CAAC,CAACgB,MAAF,CAASoT,OAAxB,EAAiCpU,CAAC,CAACgB,MAAF,CAASwR,KAA1C,CAA3B;;AAEA,sBACE;AACE,IAAA,SAAS,EAAE7Q,QAAM,CAAC8E,OADpB;AAEE,IAAA,KAAK,EAAE,EACL,GAAGzH,KAAK,CAACP,KADJ;AAELmD,MAAAA,eAAe,EAAE5C,KAAK,CAAC8I,OAAN,GACb7I,OAAO,CAACkL,YADK,GAEblL,OAAO,CAAC4C,eAJP;AAKLwS,MAAAA,QAAQ,EAAErV,KAAK,CAACsV,MAAN,IAAgBtV,KAAK,CAACyD,KAAtB,GAA8B,KAA9B,GAAsC;AAL3C;AAFT,KAUGzD,KAAK,CAACyD,KAAN,iBACC;AACE,IAAA,KAAK,EAAE;AACLb,MAAAA,eAAe,EAAE5C,KAAK,CAAC8I,OAAN,GACb7I,OAAO,CAACkL,YADK,GAEblL,OAAO,CAAC8C,UAHP;AAILD,MAAAA,KAAK,EAAE7C,OAAO,CAACuI;AAJV;AADT,KAQGxI,KAAK,CAACyD,KART,MAXJ,eAsBE;AAAK,IAAA,SAAS,EAAEd,QAAM,CAAC4S;AAAvB,kBACE;AACE,IAAA,KAAK,EAAEvV,KAAK,CAACP,KADf;AAEE,IAAA,IAAI,EAAC,UAFP;AAGE,IAAA,KAAK,EAAEO,KAAK,CAACwT,KAHf;AAIE,IAAA,OAAO,EAAExT,KAAK,CAACoV,OAJjB;AAKE,IAAA,QAAQ,EAAEF,WALZ;AAME,IAAA,aAAa,EAAElV,KAAK,CAAC0L;AANvB,IADF,CAtBF,CADF;AAmCD,CAvCyB,CAA1B;;;;ACCA,IAAIjJ,QAAQ,GAAG,CAAC,CAAD,EAAI,CAAJ,CAAf;AACA,IAAI+S,UAAU,GAAG,CAAjB;AAYA,MAAMC,UAAU,GAAG1V,QAAQ,CAAEC,KAAD,IAAW;AACrC,QAAMC,OAAO,GAAGC,UAAU,CAACZ,SAAD,CAAV,CAAsBa,KAAtC;;AAEA,QAAMuV,YAAY,GAAI1U,CAAD,IAAOhB,KAAK,CAACmV,QAAN,CAAeQ,MAAM,CAAC3U,CAAC,CAACgB,MAAF,CAASwR,KAAV,CAArB,CAA5B;;AAEA,QAAMoC,eAAe,GAAI5U,CAAD,IAAO;AAC7B,QAAIoI,QAAQ,GAAG,KAAf;;AAEA,aAASyM,UAAT,CAAoB7U,CAApB,EAAuB;AACrBA,MAAAA,CAAC,CAACgG,cAAF;AACAoC,MAAAA,QAAQ,GAAG,IAAX;;AAMA,UAAIpI,CAAC,CAACkG,KAAN,EAAa;AAEX,YAAI4O,MAAM,GAAG9U,CAAC,CAAC+U,OAAF,GAAY,GAAZ,GAAkB/U,CAAC,CAACgV,QAAF,GAAa,KAAb,GAAqB,IAApD;AAEA,YAAIC,QAAQ,GAAGjV,CAAC,CAACiG,KAAF,GAAUxE,QAAQ,CAAC,CAAD,CAAjC;AACA,YAAIyT,QAAQ,GAAGzT,QAAQ,CAAC,CAAD,CAAR,GAAczB,CAAC,CAACkG,KAA/B;AAEA+O,QAAAA,QAAQ,GAAG9Q,IAAI,CAACgR,GAAL,CAAShR,IAAI,CAACiR,GAAL,CAASH,QAAT,EAAmB,CAAnB,CAAT,EAAgC,GAAhC,CAAX;AAEA,YAAII,YAAY,GAAGb,UAAU,GAAIU,QAAQ,GAAGD,QAAZ,GAAwBH,MAAxD;;AAGA,YAAI9V,KAAK,CAACsW,IAAV,EAAgB;AACdD,UAAAA,YAAY,IAAIrW,KAAK,CAACsW,IAAtB;AACAD,UAAAA,YAAY,GAAGlR,IAAI,CAACoR,KAAL,CAAWF,YAAX,CAAf;AACAA,UAAAA,YAAY,IAAIrW,KAAK,CAACsW,IAAtB;AACD;;AAEDtW,QAAAA,KAAK,CAACmV,QAAN,CAAekB,YAAf;AACD;AACF;;AAED,aAASG,aAAT,CAAuBxV,CAAvB,EAA0B;AACxB,UAAIoI,QAAJ,EAAc;AAEZ,YAAI0M,MAAM,GAAG9U,CAAC,CAAC+U,OAAF,GAAY,GAAZ,GAAkB/U,CAAC,CAACgV,QAAF,GAAa,KAAb,GAAqB,IAApD;AAEA,YAAIC,QAAQ,GAAGjV,CAAC,CAACiG,KAAF,GAAUxE,QAAQ,CAAC,CAAD,CAAjC;AACA,YAAIyT,QAAQ,GAAGzT,QAAQ,CAAC,CAAD,CAAR,GAAczB,CAAC,CAACkG,KAA/B;AAEA+O,QAAAA,QAAQ,GAAG9Q,IAAI,CAACgR,GAAL,CAAShR,IAAI,CAACiR,GAAL,CAASH,QAAT,EAAmB,CAAnB,CAAT,EAAgC,GAAhC,CAAX;AAEA,YAAII,YAAY,GAAGb,UAAU,GAAIU,QAAQ,GAAGD,QAAZ,GAAwBH,MAAxD;;AAGA,YAAI9V,KAAK,CAACsW,IAAV,EAAgB;AACdD,UAAAA,YAAY,IAAIrW,KAAK,CAACsW,IAAtB;AACAD,UAAAA,YAAY,GAAGlR,IAAI,CAACoR,KAAL,CAAWF,YAAX,CAAf;AACAA,UAAAA,YAAY,IAAIrW,KAAK,CAACsW,IAAtB;AACD;;AAEDtW,QAAAA,KAAK,CAACmV,QAAN,CAAekB,YAAf;AACD;;AAEDhU,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,WAA7B,EAA0CsT,UAA1C;AACAxT,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,SAA7B,EAAwCiU,aAAxC;AACAnU,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,WAA7B,EAA0CsT,UAA1C;AACAxT,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,UAA7B,EAAyCiU,aAAzC;AAEApN,MAAAA,QAAQ,GAAG,KAAX;AACD;;AAED,QAAIpI,CAAC,CAACyI,OAAF,IAAazI,CAAC,CAACyI,OAAF,CAAU,CAAV,CAAjB,EAA+BzI,CAAC,GAAGA,CAAC,CAACyI,OAAF,CAAU,CAAV,CAAJ;AAE/BhH,IAAAA,QAAQ,GAAG,CAACzB,CAAC,CAACiG,KAAH,EAAUjG,CAAC,CAACkG,KAAZ,CAAX;AACAsO,IAAAA,UAAU,GAAGxV,KAAK,CAACwT,KAAnB;AAEAnR,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,WAA1B,EAAuCuT,UAAvC;AACAxT,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,SAA1B,EAAqCkU,aAArC;AACAnU,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,WAA1B,EAAuCuT,UAAvC;AACAxT,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,UAA1B,EAAsCkU,aAAtC;AACD,GAxED;;AA0EA,QAAMhD,KAAK,GAAGiD,UAAU,CAACzW,KAAK,CAACwT,KAAP,CAAV,CAAwBkD,OAAxB,CAAgC,CAAhC,CAAd;AAEA,QAAMC,iBAAiB,GAAG;AACxB/T,IAAAA,eAAe,EAAE3C,OAAO,CAAC4C,eADD;AAExBC,IAAAA,KAAK,EAAE7C,OAAO,CAAC8C;AAFS,GAA1B;AAKA,sBACE;AACE,IAAA,SAAS,EAAEJ,QAAM,CAAC8E,OADpB;AAEE,IAAA,KAAK,EAAE,EACL,GAAGzH,KAAK,CAACP,KADJ;AAELmD,MAAAA,eAAe,EAAE5C,KAAK,CAAC8I,OAAN,GACb7I,OAAO,CAACkL,YADK,GAEblL,OAAO,CAAC4C;AAJP;AAFT,KASG7C,KAAK,CAACyD,KAAN,iBACC;AACE,IAAA,KAAK,EAAE;AACLb,MAAAA,eAAe,EAAE5C,KAAK,CAAC8I,OAAN,GACb7I,OAAO,CAACkL,YADK,GAEblL,OAAO,CAAC8C,UAHP;AAILD,MAAAA,KAAK,EAAE7C,OAAO,CAACuI;AAJV;AADT,KAQGxI,KAAK,CAACyD,KART,MAVJ,eAqBE;AAAK,IAAA,SAAS,EAAEd,QAAM,CAAC4S;AAAvB,kBACE;AACE,IAAA,IAAI,EAAC,QADP;AAEE,IAAA,IAAI,EAAEvV,KAAK,CAACsW,IAFd;AAGE,IAAA,KAAK,EAAEX,MAAM,CAACnC,KAAD,CAHf;AAIE,IAAA,QAAQ,EAAEkC,YAJZ;AAKE,IAAA,OAAO,EAAE1V,KAAK,CAACmB,OALjB;AAME,IAAA,YAAY,EAAEyU,eANhB;AAOE,IAAA,WAAW,EAAEA,eAPf;AAQE,IAAA,aAAa,EAAE5V,KAAK,CAAC4W,aARvB;AASE,IAAA,aAAa,EAAE5W,KAAK,CAAC0L,aATvB;AAUE,IAAA,KAAK,EAAE,EACL,GAAGiL,iBADE;AAEL,SAAG3W,KAAK,CAAC6W;AAFJ;AAVT,IADF,CArBF,CADF;AAyCD,CA/H0B,CAA3B;AAiIApB,UAAU,CAAClR,YAAX,GAA0B;AACxBiP,EAAAA,KAAK,EAAE,CADiB;AAExB8C,EAAAA,IAAI,EAAE,GAFkB;AAGxBxN,EAAAA,OAAO,EAAE;AAHe,CAA1B;AAMA2M,UAAU,CAACjR,SAAX,GAAuB;AACrBf,EAAAA,KAAK,EAAEqK,SAAS,CAACK,MADI;AAErBqF,EAAAA,KAAK,EAAE1F,SAAS,CAACI,SAAV,CAAoB,CAACJ,SAAS,CAACQ,MAAX,EAAmBR,SAAS,CAACK,MAA7B,CAApB,CAFc;AAGrBmI,EAAAA,IAAI,EAAExI,SAAS,CAACQ,MAHK;AAIrBxF,EAAAA,OAAO,EAAEgF,SAAS,CAACO,IAJE;AAMrB8G,EAAAA,QAAQ,EAAErH,SAAS,CAACC,IANC;AAOrB6I,EAAAA,aAAa,EAAE9I,SAAS,CAACC,IAPJ;AAQrB8I,EAAAA,UAAU,EAAE/I,SAAS,CAACE;AARD,CAAvB;;;;ACtJA,MAAM8I,WAAW,GAAI9W,KAAD,IAAW;AAC7B,QAAMC,OAAO,GAAGC,UAAU,CAACZ,SAAD,CAAV,CAAsBa,KAAtC;;AAEA,QAAMuV,YAAY,GAAI1U,CAAD,IAAOhB,KAAK,CAACmV,QAAN,CAAenU,CAAC,CAACgB,MAAF,CAASwR,KAAxB,CAA5B;;AAEA,sBACE;AACE,IAAA,SAAS,EAAE7Q,QAAM,CAAC8E,OADpB;AAEE,IAAA,KAAK,EAAE,EACL,GAAGzH,KAAK,CAACP,KADJ;AAELmD,MAAAA,eAAe,EAAE5C,KAAK,CAAC8I,OAAN,GACb7I,OAAO,CAACkL,YADK,GAEblL,OAAO,CAAC4C;AAJP;AAFT,KASG7C,KAAK,CAACyD,KAAN,iBACC;AACE,IAAA,KAAK,EAAE;AACLb,MAAAA,eAAe,EAAE5C,KAAK,CAAC8I,OAAN,GACb7I,OAAO,CAACkL,YADK,GAEblL,OAAO,CAAC8C,UAHP;AAILD,MAAAA,KAAK,EAAE7C,OAAO,CAACuI;AAJV;AADT,KAQGxI,KAAK,CAACyD,KART,MAVJ,eAqBE;AAAK,IAAA,SAAS,EAAEd,QAAM,CAAC4S;AAAvB,kBACE;AACE,IAAA,YAAY,EAAEvV,KAAK,CAAC+W,cADtB;AAEE,IAAA,QAAQ,EAAErB,YAFZ;AAGE,IAAA,aAAa,EAAE1V,KAAK,CAAC0L,aAHvB;AAIE,IAAA,KAAK,EAAE;AACL9I,MAAAA,eAAe,EAAE3C,OAAO,CAAC4C,eADpB;AAELC,MAAAA,KAAK,EAAE7C,OAAO,CAAC8C;AAFV;AAJT,KASG/C,KAAK,CAACgX,OAAN,CAAc7T,GAAd,CAAkB,CAAC8T,GAAD,EAAM5T,CAAN,kBACjB;AAAQ,IAAA,GAAG,EAAEA,CAAb;AAAgB,IAAA,KAAK,EAAE4T,GAAG,CAACzD;AAA3B,KACGyD,GAAG,CAACxT,KADP,CADD,CATH,CADF,CArBF,CADF;AAyCD,CA9CD;;;;ACEA,IAAIyT,aAAa,GAAG,IAApB;;AAEA,MAAMC,WAAW,GAAInX,KAAD,IAAW;AAC7B,QAAMC,OAAO,GAAGC,UAAU,CAACZ,SAAD,CAAV,CAAsBa,KAAtC;AAEA,QAAMiX,cAAc,GAAG/W,MAAM,CAAC,IAAD,CAA7B;;AAEA,QAAMuV,eAAe,GAAI5U,CAAD,IAAO;AAC7B,aAAS6U,UAAT,CAAoB7U,CAApB,EAAuB;AACrB,UAAIA,CAAC,CAACyI,OAAN,EAAezI,CAAC,GAAGA,CAAC,CAACyI,OAAF,CAAU,CAAV,CAAJ;;AAMf,UAAIzI,CAAC,CAACkG,KAAN,EAAa;AACX,YAAIZ,CAAC,GAAGtF,CAAC,CAACiG,KAAF,GAAU,CAAlB;AACA,YAAIxE,QAAQ,GAAG,CAAC6D,CAAC,GAAG4Q,aAAa,CAAC5Q,CAAnB,IAAwB4Q,aAAa,CAACvX,KAArD;AAEA,YAAI6T,KAAK,GAAG/Q,QAAQ,IAAIzC,KAAK,CAACoW,GAAN,GAAYpW,KAAK,CAACmW,GAAtB,CAAR,GAAqCnW,KAAK,CAACmW,GAAvD;AAEA,YAAI1T,QAAQ,IAAI,GAAhB,EAAqB+Q,KAAK,GAAGxT,KAAK,CAACmW,GAAd;AACrB,YAAI1T,QAAQ,IAAI,GAAhB,EAAqB+Q,KAAK,GAAGxT,KAAK,CAACoW,GAAd;AAErBpW,QAAAA,KAAK,CAACmV,QAAN,CAAehQ,IAAI,CAACoR,KAAL,CAAW/C,KAAK,GAAGxT,KAAK,CAACsW,IAAzB,IAAiCtW,KAAK,CAACsW,IAAtD;AACD;AACF;;AAED,aAASE,aAAT,CAAuBxV,CAAvB,EAA0B;AACxB,UAAIA,CAAC,CAACyI,OAAF,IAAazI,CAAC,CAACyI,OAAF,CAAU,CAAV,CAAjB,EAA+BzI,CAAC,GAAGA,CAAC,CAACyI,OAAF,CAAU,CAAV,CAAJ;AAE/B,UAAInD,CAAC,GAAGtF,CAAC,CAACiG,KAAF,GAAU,CAAlB;AACA,UAAIxE,QAAQ,GAAG,CAAC6D,CAAC,GAAG4Q,aAAa,CAAC5Q,CAAnB,IAAwB4Q,aAAa,CAACvX,KAArD;AACA,UAAI6T,KAAK,GAAG/Q,QAAQ,IAAIzC,KAAK,CAACoW,GAAN,GAAYpW,KAAK,CAACmW,GAAtB,CAAR,GAAqCnW,KAAK,CAACmW,GAAvD;;AAEA,UAAI1T,QAAQ,IAAI,GAAZ,IAAmBA,QAAQ,IAAI,GAAnC,EAAwC;AACtCzC,QAAAA,KAAK,CAACmV,QAAN,CAAehQ,IAAI,CAACoR,KAAL,CAAW/C,KAAK,GAAGxT,KAAK,CAACsW,IAAzB,IAAiCtW,KAAK,CAACsW,IAAtD;AACD;;AAEDjU,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,WAA7B,EAA0CsT,UAA1C;AACAxT,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,SAA7B,EAAwCiU,aAAxC;AACAnU,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,WAA7B,EAA0CsT,UAA1C;AACAxT,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,UAA7B,EAAyCiU,aAAzC;AACD;;AAED,QAAIxV,CAAC,CAACyI,OAAF,IAAazI,CAAC,CAACyI,OAAF,CAAU,CAAV,CAAjB,EAA+BzI,CAAC,GAAGA,CAAC,CAACyI,OAAF,CAAU,CAAV,CAAJ;AAE/ByN,IAAAA,aAAa,GAAGE,cAAc,CAACtV,OAAf,CAAuBP,qBAAvB,EAAhB;AACA,QAAI+E,CAAC,GAAGtF,CAAC,CAACiG,KAAF,GAAU,CAAlB;AACA,QAAIxE,QAAQ,GAAG,CAAC6D,CAAC,GAAG4Q,aAAa,CAAC5Q,CAAnB,IAAwB4Q,aAAa,CAACvX,KAArD;AAEA,QAAI6T,KAAK,GAAG/Q,QAAQ,IAAIzC,KAAK,CAACoW,GAAN,GAAYpW,KAAK,CAACmW,GAAtB,CAAR,GAAqCnW,KAAK,CAACmW,GAAvD;AACAlC,IAAAA,OAAO,CAACC,GAAR,CAAY,CAAClU,KAAK,CAACmW,GAAP,EAAYnW,KAAK,CAACoW,GAAlB,CAAZ;AACAnC,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBzR,QAAxB;AACAwR,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBV,KAArB;;AAEA,QAAI/Q,QAAQ,IAAI,GAAZ,IAAmBA,QAAQ,IAAI,GAAnC,EAAwC;AACtCzC,MAAAA,KAAK,CAACmV,QAAN,CAAehQ,IAAI,CAACoR,KAAL,CAAW/C,KAAK,GAAGxT,KAAK,CAACsW,IAAzB,IAAiCtW,KAAK,CAACsW,IAAtD;AACD;;AAEDjU,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,WAA1B,EAAuCuT,UAAvC;AACAxT,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,SAA1B,EAAqCkU,aAArC;AACAnU,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,WAA1B,EAAuCuT,UAAvC;AACAxT,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,UAA1B,EAAsCkU,aAAtC;AACD,GAzDD;;AA2DA,QAAMa,eAAe,GAAIC,CAAD,IAAO;AAC7BtX,IAAAA,KAAK,CAACmV,QAAN,CAAemC,CAAf;AACD,GAFD;;AAIA,sBACE;AACE,IAAA,SAAS,EAAE3U,QAAM,CAAC8E,OAAP,GAAiB,GAAjB,GAAuB9E,QAAM,CAACuK,UAD3C;AAEE,IAAA,KAAK,EAAElN,KAAK,CAACP,KAFf;AAGE,IAAA,aAAa,EAAEO,KAAK,CAAC0L;AAHvB,kBAKE,oBAAC,UAAD;AACE,IAAA,KAAK,EAAE1L,KAAK,CAACwT,KADf;AAEE,IAAA,QAAQ,EAAE6D,eAFZ;AAGE,IAAA,IAAI,EAAErX,KAAK,CAACsW,IAAN,IAAc;AAHtB,IALF,eAUE;AACE,IAAA,GAAG,EAAEc,cADP;AAEE,IAAA,SAAS,EAAEzU,QAAM,CAAC4U,YAFpB;AAGE,IAAA,YAAY,EAAE3B,eAHhB;AAIE,IAAA,WAAW,EAAEA,eAJf;AAKE,IAAA,KAAK,EAAE;AACLhT,MAAAA,eAAe,EAAE3C,OAAO,CAAC4C;AADpB;AALT,kBASE;AACE,IAAA,SAAS,EAAEF,QAAM,CAAC6U,MADpB;AAEE,IAAA,KAAK,EAAE;AACL7X,MAAAA,KAAK,EACF,CAACK,KAAK,CAACwT,KAAN,GAAcxT,KAAK,CAACmW,GAArB,KAA6BnW,KAAK,CAACoW,GAAN,GAAYpW,KAAK,CAACmW,GAA/C,CAAD,GAAwD,GAAxD,GAA8D,GAF3D;AAGLvT,MAAAA,eAAe,EAAE3C,OAAO,CAACkL;AAHpB;AAFT,IATF,eAiBE;AACE,IAAA,SAAS,EAAExI,QAAM,CAAC8U,MADpB;AAEE,IAAA,KAAK,EAAE;AACL5X,MAAAA,IAAI,EACD,CAACG,KAAK,CAACwT,KAAN,GAAcxT,KAAK,CAACmW,GAArB,KAA6BnW,KAAK,CAACoW,GAAN,GAAYpW,KAAK,CAACmW,GAA/C,CAAD,GAAwD,GAAxD,GAA8D,GAF3D;AAGLvT,MAAAA,eAAe,EAAE3C,OAAO,CAACkL;AAHpB;AAFT,IAjBF,CAVF,CADF;AAuCD,CA3GD;;AA6GAgM,WAAW,CAAC3S,SAAZ,GAAwB;AACtB2R,EAAAA,GAAG,EAAErI,SAAS,CAACQ,MADO;AAEtB8H,EAAAA,GAAG,EAAEtI,SAAS,CAACQ,MAFO;AAGtBkF,EAAAA,KAAK,EAAE1F,SAAS,CAACQ,MAHK;AAItB7O,EAAAA,KAAK,EAAEqO,SAAS,CAACE;AAJK,CAAxB;;;;ACjHA,MAAM0J,UAAU,GAAI1X,KAAD,IAAW;AAC5B,QAAMC,OAAO,GAAGC,UAAU,CAACZ,SAAD,CAAV,CAAsBa,KAAtC;;AAEA,QAAMuV,YAAY,GAAI1U,CAAD,IAAOhB,KAAK,CAACmV,QAAN,CAAenU,CAAC,CAACgB,MAAF,CAASwR,KAAxB,CAA5B;;AAEA,sBACE;AACE,IAAA,SAAS,EAAE7Q,QAAM,CAAC8E,OADpB;AAEE,IAAA,KAAK,EAAE,EACL,GAAGzH,KAAK,CAACP,KADJ;AAELmD,MAAAA,eAAe,EAAE5C,KAAK,CAAC8I,OAAN,GACb7I,OAAO,CAACkL,YADK,GAEblL,OAAO,CAAC4C;AAJP;AAFT,KASG7C,KAAK,CAACyD,KAAN,iBACC;AACE,IAAA,KAAK,EAAE;AACLb,MAAAA,eAAe,EAAE5C,KAAK,CAAC8I,OAAN,GACb7I,OAAO,CAACkL,YADK,GAEblL,OAAO,CAAC8C,UAHP;AAILD,MAAAA,KAAK,EAAE7C,OAAO,CAACuI;AAJV;AADT,KAQGxI,KAAK,CAACyD,KART,MAVJ,eAqBE;AAAK,IAAA,SAAS,EAAEd,QAAM,CAAC4S;AAAvB,KACGvV,KAAK,CAAC2X,SAAN,iBACC;AACE,IAAA,IAAI,EAAC,QADP;AAEE,IAAA,SAAS,EAAEhV,QAAM,CAACiV,SAFpB;AAGE,IAAA,KAAK,EAAE5X,KAAK,CAACwT,KAHf;AAIE,IAAA,QAAQ,EAAEkC,YAJZ;AAKE,IAAA,KAAK,EAAE;AACL9S,MAAAA,eAAe,EAAE3C,OAAO,CAAC8C,UADpB;AAELD,MAAAA,KAAK,EAAE7C,OAAO,CAAC4C;AAFV;AALT,IAFJ,eAcE;AACE,IAAA,IAAI,EAAC,OADP;AAEE,IAAA,KAAK,EAAE7C,KAAK,CAACwT,KAFf;AAGE,IAAA,QAAQ,EAAEkC,YAHZ;AAIE,IAAA,aAAa,EAAE1V,KAAK,CAAC0L,aAJvB;AAKE,IAAA,KAAK,EAAE;AACL9I,MAAAA,eAAe,EAAE3C,OAAO,CAAC4C,eADpB;AAELC,MAAAA,KAAK,EAAE7C,OAAO,CAAC4C;AAFV;AALT,IAdF,CArBF,CADF;AAiDD,CAtDD;;ACDO,MAAMgV,eAAe,GAAGC,KAAK,CACjCC,KAD4B,CACtB,iBADsB,EACH;AACxBvW,EAAAA,EAAE,EAAEsW,KAAK,CAACE,UADc;AAExBvU,EAAAA,KAAK,EAAEqU,KAAK,CAACG,MAAN,EAFiB;AAGxBpU,EAAAA,OAAO,EAAEiU,KAAK,CAACG,MAAN,EAHe;AAIxB3U,EAAAA,QAAQ,EAAEwU,KAAK,CAAC3U,GAAN,CAAU2U,KAAK,CAACI,IAAN,CAAW,MAAML,eAAjB,CAAV;AAJc,CADG,EAO5BM,QAP4B,CAOlBC,IAAD,KAAW;AACnBjX,EAAAA,OAAO,EAAE,MAAM;AADI,CAAX,CAPmB,CAAxB;AAWP,MAAMkX,OAAO,GAAGP,KAAK,CAClBC,KADa,CACP,SADO,EACI,EADJ,EAEbI,QAFa,CAEHC,IAAD,KAAW;AACnB5Q,EAAAA,WAAW,EAAE,EADM;AAEnB8Q,EAAAA,WAAW,EAAEC,QAAQ,CAACzS,MAAD,EAAS,EAAT,CAFF;AAGnB0S,EAAAA,MAAM,EAAE;AAHW,CAAX,CAFI,EAObC,OAPa,CAOJL,IAAD,KAAW;AAClBM,EAAAA,SAAS,EAAGF,MAAD,IAAY;AACrB,QAAIJ,IAAI,CAACE,WAAT,EAAsBF,IAAI,CAACE,WAAL;AAEtBF,IAAAA,IAAI,CAACI,MAAL,GAAcA,MAAd;AACAJ,IAAAA,IAAI,CAACE,WAAL,GAAmBC,QAAQ,CAACzS,MAAD,EAASsS,IAAI,CAACI,MAAd,CAA3B;AACD,GANiB;AAOlBG,EAAAA,YAAY,EAAE,MAAMP,IAAI,CAACE,WAAL,EAPF;AAQlB/Q,EAAAA,cAAc,EAAGqR,CAAD,IAAO;AACrBR,IAAAA,IAAI,CAAC5Q,WAAL,GAAmBoR,CAAnB;AACD;AAViB,CAAX,CAPK,CAAhB;;ACXA,MAAMlQ,OAAK,GAAGoP,KAAK,CAChBC,KADW,CACL,OADK,EACI;AACdvW,EAAAA,EAAE,EAAEsW,KAAK,CAACE,UADI;AAEda,EAAAA,cAAc,EAAE,EAFF;AAGdjV,EAAAA,KAAK,EAAEkU,KAAK,CAACgB,KAAN,CAAYhB,KAAK,CAAC3J,MAAlB,CAHO;AAIdtB,EAAAA,QAAQ,EAAEiL,KAAK,CAACgB,KAAN,CAAYhB,KAAK,CAAC3J,MAAlB,CAJI;AAKdnD,EAAAA,SAAS,EAAE,IALG;AAMdR,EAAAA,QAAQ,EAAE,KANI;AAOdJ,EAAAA,UAAU,EAAE,KAPE;AAQdgC,EAAAA,QAAQ,EAAE,KARI;AASdD,EAAAA,SAAS,EAAE,KATG;AAUdF,EAAAA,aAAa,EAAE,KAVD;AAWdpC,EAAAA,UAAU,EAAEiO,KAAK,CAAC1J,KAAN,CAAY0J,KAAK,CAACxJ,MAAlB,CAXE;AAYd7L,EAAAA,QAAQ,EAAEqV,KAAK,CAAC1J,KAAN,CAAY0J,KAAK,CAACxJ,MAAlB,CAZI;AAaduE,EAAAA,MAAM,EAAEiF,KAAK,CAACgB,KAAN,CAAYhB,KAAK,CAACI,IAAN,CAAW,MAAMa,MAAjB,CAAZ;AAbM,CADJ,EAgBXZ,QAhBW,CAgBDC,IAAD,KAAW;AACnBY,EAAAA,aAAa,EAAE;AADI,CAAX,CAhBE,EAmBXP,OAnBW,CAmBFL,IAAD,KAAW;AAClBa,EAAAA,SAAS,EAAGpG,MAAD,IAAY;AACrBuF,IAAAA,IAAI,CAACvF,MAAL,GAAcA,MAAd;AACD,GAHiB;AAKlBnE,EAAAA,WAAW,EAAGwK,CAAD,IAAO;AAClBd,IAAAA,IAAI,CAAC5N,QAAL,GAAgB0O,CAAhB;AACD,GAPiB;AASlBC,EAAAA,cAAc,EAAE,MAAM;AACpBf,IAAAA,IAAI,CAAC5N,QAAL,GAAgB,CAAC4N,IAAI,CAAC5N,QAAtB;AACD,GAXiB;AAalB4O,EAAAA,gBAAgB,EAAE,MAAM;AACtBhB,IAAAA,IAAI,CAAChO,UAAL,GAAkB,CAACgO,IAAI,CAAChO,UAAxB;AACD,GAfiB;AAiBlBjC,EAAAA,WAAW,EAAGkR,CAAD,IAAO;AAElB,QAAIA,CAAC,CAAC,CAAD,CAAD,GAAO,EAAX,EAAeA,CAAC,CAAC,CAAD,CAAD,GAAO,EAAP;AAEfjB,IAAAA,IAAI,CAAC3V,QAAL,GAAgB4W,CAAhB;AAGA,QAAIA,CAAC,CAAC,CAAD,CAAD,GAAOjB,IAAI,CAACvO,UAAL,CAAgB,CAAhB,CAAP,GAA4B/D,MAAM,CAACqB,UAAvC,EACEiR,IAAI,CAAC3V,QAAL,CAAc,CAAd,IAAmBqD,MAAM,CAACqB,UAAP,GAAoBiR,IAAI,CAACvO,UAAL,CAAgB,CAAhB,CAAvC;AAEF,QAAIwP,CAAC,CAAC,CAAD,CAAD,GAAOjB,IAAI,CAACvO,UAAL,CAAgB,CAAhB,CAAP,GAA4B/D,MAAM,CAACC,WAAvC,EACEqS,IAAI,CAAC3V,QAAL,CAAc,CAAd,IAAmBqD,MAAM,CAACC,WAAP,GAAqBqS,IAAI,CAACvO,UAAL,CAAgB,CAAhB,CAAxC;AACH,GA7BiB;AA+BlB8E,EAAAA,aAAa,EAAG2K,CAAD,IAAO;AACpBlB,IAAAA,IAAI,CAACvO,UAAL,GAAkByP,CAAlB;AAGA,QAAIA,CAAC,CAAC,CAAD,CAAD,GAAOlB,IAAI,CAAC3V,QAAL,CAAc,CAAd,CAAP,GAA0BqD,MAAM,CAACqB,UAArC,EACEiR,IAAI,CAACvO,UAAL,CAAgB,CAAhB,IAAqB/D,MAAM,CAACqB,UAAP,GAAoBiR,IAAI,CAAC3V,QAAL,CAAc,CAAd,CAAzC;AAEF,QAAI6W,CAAC,CAAC,CAAD,CAAD,GAAOlB,IAAI,CAAC3V,QAAL,CAAc,CAAd,CAAP,GAA0BqD,MAAM,CAACC,WAArC,EACEqS,IAAI,CAACvO,UAAL,CAAgB,CAAhB,IAAqB/D,MAAM,CAACC,WAAP,GAAqBqS,IAAI,CAAC3V,QAAL,CAAc,CAAd,CAA1C;AACH,GAxCiB;AA0ClBmM,EAAAA,aAAa,EAAGsK,CAAD,IAAO;AACpBd,IAAAA,IAAI,CAAChO,UAAL,GAAkB8O,CAAlB;AACD,GA5CiB;AA8ClBjO,EAAAA,QAAQ,EAAE,MAAM;AACdmN,IAAAA,IAAI,CAACY,aAAL,GAAqBO,SAAS,CAACnB,IAAD,EAAO,CAAP,CAA9B;AACAA,IAAAA,IAAI,CAACY,aAAL,CAAmBtF,WAAnB,CAA+B0E,IAA/B;AACD,GAjDiB;AAmDlBoB,EAAAA,MAAM,EAAE,MAAM;AACZpB,IAAAA,IAAI,CAAC3V,QAAL,CAAc,CAAd,IAAmBqD,MAAM,CAACqB,UAAP,GAAoB,CAApB,GAAwBiR,IAAI,CAACvO,UAAL,CAAgB,CAAhB,IAAqB,CAAhE;AACAuO,IAAAA,IAAI,CAAC3V,QAAL,CAAc,CAAd,IAAmBqD,MAAM,CAACC,WAAP,GAAqB,CAArB,GAAyBqS,IAAI,CAACvO,UAAL,CAAgB,CAAhB,IAAqB,CAAjE;AACD,GAtDiB;AAwDlB4P,EAAAA,SAAS,EAAE,MAAM;AACf,QAAIrB,IAAI,CAAC3V,QAAL,CAAc,CAAd,KAAoB,CAAxB,EAA2B2V,IAAI,CAAC3V,QAAL,CAAc,CAAd,IAAmB,CAAnB;AAE3B,QAAI2V,IAAI,CAAC3V,QAAL,CAAc,CAAd,KAAoB,CAAxB,EAA2B2V,IAAI,CAAC3V,QAAL,CAAc,CAAd,IAAmB,CAAnB;AAO5B;AAlEiB,CAAX,CAnBG,CAAd;;ACCA,MAAMsW,MAAM,GAAGjB,KAAK,CACjBC,KADY,CACN,QADM,EACI;AACfvW,EAAAA,EAAE,EAAEsW,KAAK,CAACE,UADK;AAEfpU,EAAAA,KAAK,EAAE,QAFQ;AAGfqM,EAAAA,IAAI,EAAE,CAHS;AAIf7E,EAAAA,KAAK,EAAE0M,KAAK,CAACgB,KAAN,CAAYpQ,OAAZ,CAJQ;AAKfX,EAAAA,QAAQ,EAAE+P,KAAK,CAAC1J,KAAN,CAAY0J,KAAK,CAACI,IAAN,CAAW,MAAMa,MAAjB,CAAZ,CALK;AAMf5P,EAAAA,SAAS,EAAE2O,KAAK,CAAC4B,QAAN,CACT5B,KAAK,CAAC6B,WAAN,CAAkB,CAAC,UAAD,EAAa,YAAb,CAAlB,CADS,EAET,YAFS;AANI,CADJ,EAYZC,KAZY,CAYLxB,IAAD,KAAW;AAChB,MAAItH,OAAJ,GAAc;AACZ,UAAMkC,MAAM,GACVoF,IAAI,CAACrQ,QAAL,CAAcqH,MAAd,IACAgJ,IAAI,CAACrQ,QAAL,CAAcuI,MAAd,CACGG,CAAD,IAAQ,CAACA,CAAC,CAACrF,KAAH,IAAY,CAACqF,CAAC,CAACK,OAAhB,IAA6BL,CAAC,CAACrF,KAAF,IAAW,CAACqF,CAAC,CAACrF,KAAF,CAAQZ,QAD1D,EAEE4E,MAFF,KAEa,CAJf;AAKA,WAAO4D,MAAP;AACD;;AARe,CAAX,CAZM,EAsBZmF,QAtBY,CAsBFC,IAAD,KAAW;AACnBvE,EAAAA,QAAQ,EAAE,IADS;AAEnBgG,EAAAA,SAAS,EAAE;AAFQ,CAAX,CAtBG,EA0BZpB,OA1BY,CA0BHL,IAAD,KAAW;AAClB0B,EAAAA,WAAW,EAAE,MAAM;AACjB1B,IAAAA,IAAI,CAACvE,QAAL,GAAgB0F,SAAS,CAACnB,IAAD,CAAzB;AACAA,IAAAA,IAAI,CAACyB,SAAL,GAAiBE,OAAO,CAAC3B,IAAD,CAAxB;AACD,GAJiB;AAMlBrF,EAAAA,MAAM,EAAGtQ,QAAD,IAAc;AACpB,UAAMuX,SAAS,GAAG5B,IAAI,CAACvE,QAAL,CAAcoG,OAAd,CAAsB7B,IAAtB,CAAlB;AAMA,QAAI8B,GAAG,GAAG,CAAV;;AACA,SAAK,IAAI7W,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG2W,SAApB,EAA+B3W,CAAC,EAAhC,EAAoC;AAClC6W,MAAAA,GAAG,IAAI9B,IAAI,CAACvE,QAAL,CAAcxQ,CAAd,EAAiB4M,IAAxB;AACD;;AAED,UAAMkK,YAAY,GAAG/B,IAAI,CAACnI,IAA1B;AACA,UAAMmK,YAAY,GAAG3X,QAAQ,GAAGyX,GAAhC;AAEA9B,IAAAA,IAAI,CAACiC,OAAL,CAAaD,YAAb;AAEA,UAAME,WAAW,GAAGlC,IAAI,CAACvE,QAAL,CAAcmG,SAAS,GAAG,CAA1B,CAApB;AACAM,IAAAA,WAAW,CAACD,OAAZ,CAAoBC,WAAW,CAACrK,IAAZ,IAAoBkK,YAAY,GAAGC,YAAnC,CAApB;AACD,GAzBiB;AA2BlBhH,EAAAA,kBAAkB,EAAE,MAAM;AACxBgF,IAAAA,IAAI,CAACrQ,QAAL,CAAckL,OAAd,CAAsB,CAACjS,CAAD,EAAIqC,CAAJ,KAAU;AAC9B4Q,MAAAA,OAAO,CAACC,GAAR,CAAY7Q,CAAZ,EAAe,CAACA,CAAC,GAAG,CAAL,IAAU+U,IAAI,CAACrQ,QAAL,CAAcqH,MAAvC;AACApO,MAAAA,CAAC,CAACqZ,OAAF,CAAU,IAAIjC,IAAI,CAACrQ,QAAL,CAAcqH,MAA5B;AACD,KAHD;AAID,GAhCiB;AAkClBiL,EAAAA,OAAO,EAAGpK,IAAD,IAAU;AACjBmI,IAAAA,IAAI,CAACnI,IAAL,GAAYA,IAAZ;AACD,GApCiB;AAsClBsD,EAAAA,QAAQ,EAAGgH,OAAD,IAAa;AAWrB,UAAMC,QAAQ,GAAG,EACf,GAAGpC,IAAI,CAACyB,SAAL,CAAevS,EAAf,CAAkBsF,aAAlB,CAAgC2N,OAAhC,CADY;AAEf/P,MAAAA,QAAQ,EAAE4N,IAAI,CAAChN,KAAL,CAAWZ,QAFN;AAGfX,MAAAA,UAAU,EAAE,CAAC,GAAGuO,IAAI,CAAChN,KAAL,CAAWvB,UAAf,CAHG;AAIfpH,MAAAA,QAAQ,EAAE,CAAC,GAAG2V,IAAI,CAAChN,KAAL,CAAW3I,QAAf;AAJK,KAAjB;AAOA2V,IAAAA,IAAI,CAAChN,KAAL,GAAaoP,QAAb;AACApC,IAAAA,IAAI,CAACxU,KAAL,GAAawU,IAAI,CAACyB,SAAL,CAAevS,EAAf,CAAkBsF,aAAlB,CAAgC2N,OAAhC,EAAyC3W,KAAtD;AACD,GA1DiB;AA4DlBsP,EAAAA,QAAQ,EAAE,CAAC9H,KAAD,EAAQqP,KAAR,KAAkB;AAK1B,UAAMC,WAAW,GAAGtC,IAAI,CAACrQ,QAAL,CAAckS,OAAd,CAAsBQ,KAAtB,CAApB;AAEArC,IAAAA,IAAI,CAACrQ,QAAL,CAAc4S,MAAd,CACED,WAAW,GAAG,CADhB,EAEE,CAFF,EAGE3B,MAAM,CAAC6B,MAAP,CAAc;AACZpZ,MAAAA,EAAE,EAAEqZ,MAAM,EADE;AAEZzP,MAAAA,KAAK,EAAEA,KAFK;AAGZ6E,MAAAA,IAAI,EAAE,IAAImI,IAAI,CAACrQ,QAAL,CAAcqH;AAHZ,KAAd,CAHF;AAUAgJ,IAAAA,IAAI,CAAChF,kBAAL;AACD,GA9EiB;AAgFlBM,EAAAA,WAAW,EAAGtI,KAAD,IAAW;AACtB,QAAIgN,IAAI,CAACrQ,QAAT,EAAmB;AACjBqQ,MAAAA,IAAI,CAACrQ,QAAL,GAAgBqQ,IAAI,CAACrQ,QAAL,CAAcuI,MAAd,CAAsBpB,KAAD,IAAWA,KAAK,KAAK9D,KAA1C,CAAhB;;AAGA,UAAIgN,IAAI,CAACrQ,QAAL,CAAcqH,MAAd,KAAyB,CAA7B,EAAgC;AAC9B,YAAImK,SAAS,CAACnB,IAAD,EAAO,CAAP,CAAT,CAAmB1E,WAAvB,EACE6F,SAAS,CAACnB,IAAD,EAAO,CAAP,CAAT,CAAmB1E,WAAnB,CAA+B0E,IAA/B;AACH;AACF;;AAKDA,IAAAA,IAAI,CAAChF,kBAAL;AACD,GA/FiB;AAiGlB0H,EAAAA,KAAK,EAAE,MAAM;AACX,QAAI1C,IAAI,CAAC2C,MAAL,IAAe3C,IAAI,CAACrQ,QAAxB,EAAkC;AAChCqQ,MAAAA,IAAI,CAAC2C,MAAL,CAAYD,KAAZ;AACA1C,MAAAA,IAAI,CAACrQ,QAAL,GAAgB,EAAhB;AACD;AACF;AAtGiB,CAAX,CA1BI,CAAf;;ACFO,MAAMiT,MAAM,GAAG;AACpB,aAAW;AACTxS,IAAAA,aAAa,EAAE,SADN;AAET3F,IAAAA,eAAe,EAAE,SAFR;AAGTiF,IAAAA,cAAc,EAAE,SAHP;AAIT/E,IAAAA,UAAU,EAAE,SAJH;AAKTiB,IAAAA,aAAa,EAAE,SALN;AAMTmH,IAAAA,YAAY,EAAE;AANL,GADS;AASpB,YAAU;AACR3C,IAAAA,aAAa,EAAE,SADP;AAER3F,IAAAA,eAAe,EAAE,SAFT;AAGRiF,IAAAA,cAAc,EAAE,SAHR;AAIR/E,IAAAA,UAAU,EAAE,SAJJ;AAKRiB,IAAAA,aAAa,EAAE,SALP;AAMRmH,IAAAA,YAAY,EAAE;AANN,GATU;AAiBpB,gBAAc;AACZ3C,IAAAA,aAAa,EAAE,SADH;AAEZ3F,IAAAA,eAAe,EAAE,SAFL;AAGZiF,IAAAA,cAAc,EAAE,SAHJ;AAIZ/E,IAAAA,UAAU,EAAE,SAJA;AAKZiB,IAAAA,aAAa,EAAE,SALH;AAMZmH,IAAAA,YAAY,EAAE;AANF,GAjBM;AAyBpB,WAAS;AACP3C,IAAAA,aAAa,EAAE,SADR;AAEP3F,IAAAA,eAAe,EAAE,SAFV;AAGPiF,IAAAA,cAAc,EAAE,SAHT;AAIP/E,IAAAA,UAAU,EAAE,SAJL;AAKPiB,IAAAA,aAAa,EAAE,SALR;AAMPmH,IAAAA,YAAY,EAAE;AANP;AAzBW,CAAf;AAmCP,MAAM8P,KAAK,GAAGnD,KAAK,CACdC,KADS,CACH,OADG,EACM,EACZ,GAAGiD,MAAM,CAACE;AADE,CADN,EAITzC,OAJS,CAIDL,IAAI,KAAK;AAChB+C,EAAAA,QAAQ,EAAGhb,KAAD,IAAW;AACnBiY,IAAAA,IAAI,CAAC5P,aAAL,GAAqBrI,KAAK,CAACqI,aAA3B;AACA4P,IAAAA,IAAI,CAACvV,eAAL,GAAuB1C,KAAK,CAAC0C,eAA7B;AACAuV,IAAAA,IAAI,CAACtQ,cAAL,GAAsB3H,KAAK,CAAC2H,cAA5B;AACAsQ,IAAAA,IAAI,CAACrV,UAAL,GAAkB5C,KAAK,CAAC4C,UAAxB;AACAqV,IAAAA,IAAI,CAACpU,aAAL,GAAqB7D,KAAK,CAAC6D,aAA3B;AACAoU,IAAAA,IAAI,CAACjN,YAAL,GAAoBhL,KAAK,CAACgL,YAA1B;AACD,GARe;AAShBiQ,EAAAA,eAAe,EAAEtY,KAAK,IAAIsV,IAAI,CAAC5P,aAAL,GAAqB1F,KAT/B;AAUhBuY,EAAAA,iBAAiB,EAAEvY,KAAK,IAAIsV,IAAI,CAACvV,eAAL,GAAuBC,KAVnC;AAWhBwY,EAAAA,gBAAgB,EAAExY,KAAK,IAAIsV,IAAI,CAACtQ,cAAL,GAAsBhF,KAXjC;AAYhByY,EAAAA,YAAY,EAAEzY,KAAK,IAAIsV,IAAI,CAACrV,UAAL,GAAkBD,KAZzB;AAahB0Y,EAAAA,eAAe,EAAE1Y,KAAK,IAAIsV,IAAI,CAACpU,aAAL,GAAqBlB,KAb/B;AAchB2Y,EAAAA,cAAc,EAAE3Y,KAAK,IAAIsV,IAAI,CAACjN,YAAL,GAAoBrI;AAd7B,CAAL,CAJH,CAAd;;AC/BA,MAAM4Y,EAAE,GAAG5D,KAAK,CACbC,KADQ,CACF,IADE,EACI;AACXgD,EAAAA,MAAM,EAAEjD,KAAK,CAAC3U,GAAN,CAAUuF,OAAV,CADG;AAEXvI,EAAAA,KAAK,EAAE8a,KAFI;AAGXhb,EAAAA,OAAO,EAAE6X,KAAK,CAACgB,KAAN,CAAYT,OAAZ;AAHE,CADJ,EAMRF,QANQ,CAMEC,IAAD,KAAW;AACnBxL,EAAAA,aAAa,EAAE,IADI;AAEnB+O,EAAAA,cAAc,EAAE;AAFG,CAAX,CAND,EAURlD,OAVQ,CAUCL,IAAD,KAAW;AAClB0B,EAAAA,WAAW,EAAE,MAAM;AACjB1B,IAAAA,IAAI,CAACnY,OAAL,GAAeoY,OAAO,CAACuC,MAAR,EAAf;AACD,GAHiB;AAKlBgB,EAAAA,gBAAgB,EAAGb,MAAD,IAAY;AAC5B3C,IAAAA,IAAI,CAACxL,aAAL,GAAqBmO,MAArB;AACD,GAPiB;AASlBc,EAAAA,iBAAiB,EAAGC,OAAD,IAAa;AAC9B1D,IAAAA,IAAI,CAACuD,cAAL,GAAsBG,OAAtB;AACD,GAXiB;AAalBC,EAAAA,eAAe,EAAGva,EAAD,IAAQ;AACvB,WAAO4W,IAAI,CAACxL,aAAL,CAAmBpL,EAAnB,CAAP;AACD,GAfiB;AAiBlBwa,EAAAA,gBAAgB,EAAGxa,EAAD,IAAQ;AACxB,QAAI4W,IAAI,CAACuD,cAAL,CAAoBna,EAApB,CAAJ,EAA6B;AAC3B,aAAO4W,IAAI,CAACuD,cAAL,CAAoBna,EAApB,CAAP;AACD,KAFD,MAEO;AACL,UAAI4W,IAAI,CAACxL,aAAT,EAAwB;AACtBqH,QAAAA,OAAO,CAACgI,KAAR,CACG,YAAWza,EAAG,0DAAyDyB,MAAM,CAACC,IAAP,CACtEkV,IAAI,CAACxL,aADiE,CAEtE,GAHJ;AAKD,OAND,MAMO;AACLqH,QAAAA,OAAO,CAACgI,KAAR,CAAe,oBAAf;AACD;AACF;AACF,GA/BiB;AAiClBC,EAAAA,QAAQ,EAAG1a,EAAD,IAAQ;AAChB,WAAO4W,IAAI,CAAC2C,MAAL,CAAYoB,GAAZ,CAAgB3a,EAAhB,CAAP;AACD;AAnCiB,CAAX,CAVA,CAAX;;ICqBW4a,oBAAoB,GAAGC;AAElC,IAAWC,aAAa,GAAGC;AAC3B,IAAWC,cAAc,GAAGC;AAC5B,IAAWlO,cAAY,GAAGmO;AAC1B,IAAWhV,gBAAgB,GAAGiV;AAC9B,IAAW/U,oBAAoB,GAAGgV;AAClC,IAAWC,qBAAqB,GAAGC;AACnC,IAAW5M,gBAAc,GAAG6M;AAC5B,IAAWnK,iBAAe,GAAGoK;AAC7B,IAAWC,cAAc,GAAGC;AAE5B,IAAWjI,WAAS,GAAGkI;AACvB,IAAW1H,YAAU,GAAG2H;AACxB,IAAWtG,aAAW,GAAGuG;AACzB,IAAWlG,aAAW,GAAGmG;AACzB,IAAW5F,YAAU,GAAG6F;AAExB,IAAWje,WAAS,GAAGke;AAEvB,IAAWC,MAAM,GAAGzC,MAAb;AAGP,IAAW0C,YAAY,GAAGC;AAC1B,IAAWC,WAAW,GAAGC;AACzB,IAAWC,UAAU,GAAGC;AACxB,IAAWC,OAAO,GAAGC;;;;"}