{"version":3,"file":"index.modern.js","sources":["../src/stores/Theme.js","../src/ThemeContext.js","../src/components/DropDownComponent.js","../src/components/ToolbarComponent.js","../src/components/ContextMenuComponent.js","../src/components/MacoWrapperComponent.js","../src/components/PanelComponent.js","../src/components/TextComponent.js","../src/components/ControlGroupComponent.js","../src/components/hooks/ResizeHook.js","../src/components/SplitContainer.js","../src/components/LayoutContainer.js","../src/components/PagesContainer.js","../src/components/input/InputBool.js","../src/components/input/InputFloat.js","../src/components/input/InputSelect.js","../src/components/input/InputSlider.js","../src/components/input/InputColor.js","../src/stores/Context.js","../src/stores/Panel.js","../src/stores/Layout.js","../src/stores/UI.js","../src/index.js"],"sourcesContent":["import { types } from \"mobx-state-tree\";\n\nexport const themes = {\n  'weyland': { // light\n    primary_color: '#ffffff',\n    secondary_color: '#C2C2C2',\n    tertiary_color: '#e0e0e0',\n    text_color: '#000000',\n    outline_color: '#aaaaaa',\n    accent_color: '#3fa3a3'\n  },\n  'yutani': { // dark\n    primary_color: '#000000',\n    secondary_color: '#202020',\n    tertiary_color: '#303030',\n    text_color: '#ffffff',\n    outline_color: '#474747',\n    accent_color: '#3fa3a3'\n  },\n  'powershell': { // blue\n    primary_color: '#012456',\n    secondary_color: '#304E78',\n    tertiary_color: '#233767',\n    text_color: '#ffffff',\n    outline_color: '#51578B',\n    accent_color: '#ffff00'\n  },\n  'sarah': {\n    primary_color: '#0D5439',\n    secondary_color: '#9D6C71',\n    tertiary_color: '#5b6b5c',\n    text_color: '#C9A6A6',\n    outline_color: '#aaaaaa',\n    accent_color: '#D3945A'\n  },\n};\n\nconst Theme = types\n    .model(\"Theme\", {\n        ...themes.weyland\n    })\n    .actions(self => ({\n      setTheme: (theme) => {\n        self.primary_color = theme.primary_color;\n        self.secondary_color = theme.secondary_color;\n        self.tertiary_color = theme.tertiary_color;\n        self.text_color = theme.text_color;\n        self.outline_color = theme.outline_color;\n        self.accent_color = theme.accent_color;\n      },\n      setPrimaryColor: color => self.primary_color = color,\n      setSecondaryColor: color => self.secondary_color = color,\n      setTertiaryColor: color => self.tertiary_color = color,\n      setTextColor: color => self.text_color = color,\n      setOutlineColor: color => self.outline_color = color,\n      setAccentColor: color => self.accent_color = color\n    }))\n\nexport default Theme;","import { createContext } from 'react';\n\nimport { themes } from \"./stores/Theme\";\n\nconst ThemeContext = createContext(themes.weyland)\n\nexport default ThemeContext","import React, { useState, useContext, useRef, useLayoutEffect, useEffect } from 'react';\nimport ThemeContext from '../ThemeContext';\nimport styles from './DropDownComponent.module.css';\nimport classNames from 'classnames';\nimport {observer} from 'mobx-react';\n\nlet style = {\n    drawer: {\n        width: \"0px\",\n        top: \"0px\",\n        left: \"0px\",\n    }\n}\n\nconst DropDown = observer((props) => {\n    const context = useContext(ThemeContext);\n    let mainRef = useRef(null);\n\n    const [activeItem, setActiveItem] = useState(null);\n    const [subDropDownOpen, setSubDropDownOpen] = useState(false);\n    const [subDropDownId, setSubDropDownId] = useState(null);\n    const [subDropDownPosition, setSubDropDownPosition] = useState({top:0,left:0});\n\n    const handleSubDropDown = (e, index, item) => {\n        if(item.onClick) item.onClick();\n        let toggle = index === activeItem ? !subDropDownOpen : true;\n\n        let bounds = e.currentTarget.getBoundingClientRect();\n\n        setActiveItem(toggle ? index : false);\n        setSubDropDownId(item.id)\n        setSubDropDownOpen(toggle);\n        setSubDropDownPosition({\n            top: !props.openUp ? -bounds.height : 'auto',\n            bottom: props.openUp ? 0 : 'auto', \n            left: props.openLeft ? -bounds.width : bounds.width\n        });\n    }\n\n    const handleClickAway = e => {\n        if (mainRef.current && !mainRef.current.contains(e.target)) {\n            setActiveItem(null);\n            setSubDropDownOpen(false);\n        }\n    }\n\n    function handleRef(e) {\n        mainRef.current = e;\n        if(props.onRef) props.onRef(mainRef)\n    }\n\n    function handleContextMenu(e) {\n        setSubDropDownOpen(false);\n    }\n\n    useLayoutEffect(() => {\n      document.addEventListener('click', (e) => handleClickAway(e));\n      document.addEventListener('contextmenu', (e) => handleContextMenu(e));\n\n      return () => {\n        document.removeEventListener('click', (e) => handleClickAway(e));\n        document.addEventListener('contextmenu', (e) => handleContextMenu(e));\n      }\n    }, []);\n\n    style = {\n      ...style,\n      drawer: {\n        width: props.open ? '150px' : '0px',\n        ...props.position\n      }\n    };\n\n    return(\n        <div \n            className = {\n              classNames(\n                styles.drawer, {\n                //   [styles.openLeft]: props.openLeft,\n                //   [styles.openUp]: props.openUp,\n                }\n              )\n            }\n            ref={(e)=>handleRef(e)}\n            style={{\n                ...style.drawer,\n                backgroundColor: context.secondary_color,\n                color: context.text_color\n            }}            \n        >\t\t\t\n            {props.items && Object.keys(props.items).map((k,i)=>{ \n                let item = props.items[k];\n\n                // if there is a subdropdown               \n                if(item.dropDown) {         \n                    return (\n                        <div \n                            key={item.id}\n                            className={styles.subDropDown}\n                            style = {\n                              {\n                                ...style.drawer,\n                                backgroundColor: context.secondary_color,\n                                color: context.text_color\n                              }\n                            }\n                        >\n                            <button\n                                key={'sub'+item.id}                                \n                                onClick={e=>handleSubDropDown(e,i,item)}\n                                className={\n                                    classNames(\n                                        {\n                                            [styles.activeButton]: i === activeItem,\n                                            [styles.openLeft]: props.openLeft,\n                                            [styles.openUp]: props.openUp,\n                                        }\n                                    )\n                                }\n                            >                                \n                                {item.label}      \n                                <span>{props.openLeft ? '<' : '>'}</span>\n                            </button>\n                            \n\n                            {/* \n                                this extra div helps ensure nested \n                                dropdowns are visible through hidden\n                                overflow\n                             */}\n                            {(i === activeItem && subDropDownId) && (\n                                <div key={item.id} style={{position:'fixed'}}>\n                                    <DropDown \n                                        key={item.id+'dd'}\n                                        open={props.open && subDropDownOpen}                                    \n                                        items={{...props.items[subDropDownId].dropDown}}\n                                        position={subDropDownPosition}       \n                                        openLeft={props.openLeft}   \n                                        openUp={props.openUp}                          \n                                    />\n                                </div>\n                            )}\n                        </div>                            \n                    )\n                }else{\n                    return (\n                        <div \n                            key={item.id}\n                            className = {\n                              classNames({\n                                [styles.activeButton]: i === activeItem,\n                                [styles.disableHover]: item.disableHover,\n                                [styles.openLeft]: props.openLeft,\n                                [styles.openUp]: props.openUp,\n                              })\n                            }\n                            style={{\n                                display:'flex',\n                                width:'100%'\n                            }}\n                        >\n                            <button\n                                key={'normal'+item.id}   \n                                title={item.title}                                            \n                                onClick={item.onClick}\n                            >\n                                {item.label}                                 \n                            </button>\n                            {item.buttons && Object.keys(item.buttons).map((k) => {\n                                let b = item.buttons[k];\n                                return (\n                                    <button\n                                        key={'button'+b.id}\n                                        onClick={b.onClick} \n                                        title={b.title}             \n                                        style={{\n                                            border: `1px solid ${context.outline_color}`,\n                                            borderTop: 'none',\n                                            borderBottom: 'none',\n                                            borderLeftStyle: !props.openLeft ? 'solid' : 'none',\n                                            borderRightStyle: props.openLeft ? 'solid' : 'none',\n                                            flexShrink: 10,\n                                            padding: 3\n                                        }}\n                                    ><small>{b.label}</small></button>\n                                )\n                            })}\n                        </div>                        \n                    )\n                }\n            })}\n        </div>\n    )\n})\n\nDropDown.defaultProps = {\n  openLeft: false,\n  openUp: false\n}\n\nDropDown.propTypes = {\n\n}\n\nexport default DropDown;","import React, { useState, useContext, useRef, useEffect } from 'react';\nimport styles from './ToolbarComponent.module.css';\nimport ThemeContext from '../ThemeContext';\nimport DropDownComponent from './DropDownComponent';\nimport classNames from 'classnames';\nimport {observer} from 'mobx-react';\n\nconst Toolbar = observer((props) => {\n    const context = useContext(ThemeContext);\n    const mainRef = useRef(null); \n\n    const [activeItem, setActiveItem] = useState(null);\n    const [dropDownOpen, setDropDownOpen] = useState(false);\n    const [dropDownId, setDropDownId] = useState(null);\n    const [dropDownPosition, setDropDownPosition] = useState({top:0,left:0});\n    const [openUp, setOpenUp] = useState(false);\n\n    const handleClickAway = (e) => {\n      if (mainRef.current && !mainRef.current.contains(e.target)) {\n        setActiveItem(null);\n        setDropDownOpen(false);\n      }\n    }\n\n    const handleWheel = (e) => {\n        let offset = (Math.sign(e.deltaY) * 5)\n        mainRef.current.scroll(mainRef.current.scrollLeft + offset, 0);\n            \n        let at_start = mainRef.current.scrollLeft === 0;\n        let at_end = mainRef.current.offsetWidth + mainRef.current.scrollLeft >= mainRef.current.scrollWidth;\n        \n        if(!at_start && !at_end && dropDownOpen) {            \n            setDropDownPosition({\n              top: dropDownPosition.top,\n              left: dropDownPosition.left - offset\n            });\n        }\n    }\n\n    useEffect(()=>{\n        document.addEventListener('click', (e) => handleClickAway(e));\n\n        let bounds = mainRef.current.getBoundingClientRect();\n        setOpenUp(bounds.y > (window.innerHeight - (window.innerHeight / 3)))\n\n        return (document.removeEventListener('click', (e) => handleClickAway(e)));\n    }, []);\n\n    return (\n        <div \n            className={styles.toolbar}\n            ref={mainRef}\n            style = {{\n                ...props.style,\n                backgroundColor: context.secondary_color || 'black',\n                color: context.text_color || 'white',\n            }}\n            onWheel={handleWheel}\n        >\n            {props.items && Object.keys(props.items).map((k,i)=>{\n                let item = props.items[k];\n                return (\n                    <button\n                        key={item.id}\n                        title={item.title}\n                        style={{\n                            ...item.style,\n                            borderColor: context.text_color\n                        }}\n                        className = {\n                          classNames(styles.button, {\n                            [styles.activeButton]: (item === activeItem) || (item.highlight),\n                            // [styles.disableHover]: (item.onClick === undefined) && !item.dropDown\n                            [styles.disableHover]: item.disableHover\n                          })\n                        }\n                        onClick={(e)=>{\n                            if(item.dropDown) {\n                                let toggle = item === activeItem ? !dropDownOpen : true;\n\n                                let parent_bounds = mainRef.current.getBoundingClientRect();\n                                let bounds = e.currentTarget.getBoundingClientRect();\n\n                                let _openUp = bounds.y > (window.innerHeight - (window.innerHeight / 3));\n                                setActiveItem(toggle ? item : null);\n                                setOpenUp(_openUp)\n                                setDropDownOpen(toggle);\n\n                                // this id is important so that the dropdowns to received DERIVED STATE!\n                                setDropDownId(item.id);\n                                setDropDownPosition({\n                                  top: !openUp ? bounds.height : 'auto',\n                                  bottom: openUp ? 0 : 'auto',\n                                  left: bounds.left - parent_bounds.x\n                                });\n                            }\n                            \n                            if(item.onClick) item.onClick();\n                        }}\n                    >\n                        {item.label}   \n                        {item.dropDown && (\n                            <span className={styles.itemDecoration}>\n                                {openUp ? '▲' : '▼'}\n                            </span>\n                        )}                         \n                    </button>\n                )\n            })}\n\n            <div style={{position:'fixed'}}>\n                {props.items[dropDownId] && (<DropDownComponent \n                    open={dropDownOpen}                                    \n                    items={{...props.items[dropDownId].dropDown}}\n                    position={dropDownPosition}\n                    openUp={openUp}\n                />)}\n            </div>\n            \n        </div>  \n    );\n});\n\nexport default Toolbar;","import React, { useState, useRef, useLayoutEffect } from 'react';\nimport DropDownComponent from './DropDownComponent';\nimport {observer} from 'mobx-react';\n\nconst ContextMenu = observer((props) => {\n    const mainRef = useRef(null);\n    let dropRef = useRef(null);\n\n    const [dropDownOpen, setDropDownOpen] = useState(false);\n    const [dropDownPosition, setDropDownPosition] = useState({top:0,left:0});\n    const [dropDownOpenLeft, setDropDownOpenLeft] = useState(false);\n    const [dropDownOpenUp, setDropDownOpenUp] = useState(false);\n\n    const handleClickAway = (e) => {\n        if (mainRef.current && !mainRef.current.contains(e.target)) {\n            setDropDownOpen(false);\n        }\n    }\n\n    const handleClick = (e) => {\n        e.preventDefault();\n\n        // keep open with right click.\n        setDropDownOpen(true);\n\n        // adjust to keep menu in frame\n        let x = e.pageX;\n        let y = e.pageY;\n\n        // 150 is the menu width, this shouldn't be hardcoded\n        // but it's not in bounding box when first clicked\n        if (e.pageX + 150 > window.innerWidth)\n            x -= 150\n        \n        let _openUp = y > (window.innerHeight - (window.innerHeight / 3));\n\n        setDropDownOpenUp(_openUp);\n        setDropDownOpenLeft(e.pageX > window.innerWidth / 2);\n        setDropDownPosition({\n            top: !_openUp ? y : 'auto',\n            bottom: _openUp ? (window.innerHeight - y) : 'auto',            \n            left:x\n        });\n         \n        return false;\n    }\n\n    const handleRef = (e) => {\n        dropRef = e;\n    }\n\n    useLayoutEffect(()=>{\n        document.addEventListener('click', (e) => handleClickAway(e), true);\n        document.addEventListener('contextmenu', (e) => handleClick(e), true);\n\n        return () => {\n            document.removeEventListener('click', (e) => handleClickAway(e), true);\n            document.removeEventListener('contextmenu', (e) => handleClick(e), true);\n        };\n    }, []);\n\n    return (\n        <div ref={mainRef}>\n            {/* <div style={{\n                position: 'absolute',\n                top: dropDownPosition.top,\n                left: dropDownPosition.left,\n                fontSize: '2em',\n                zIndex: 10000\n            }}>\n                ⌖\n            </div> */}\n            <DropDownComponent \n                open={dropDownOpen}                                    \n                items={props.items}\n                position={dropDownPosition}\n                onRef={handleRef}\n                openLeft={dropDownOpenLeft}\n                openUp={dropDownOpenUp}\n            />\n        </div>\n    );\n})\n\nexport default ContextMenu;","import React, { useState, useContext, useRef, useLayoutEffect } from 'react';\nimport styles from './MacoWrapperComponent.module.css';\nimport ThemeContext from '../ThemeContext';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport {observer} from 'mobx-react';\nimport ToolbarComponent from './ToolbarComponent';\nimport ContextMenuComponent from './ContextMenuComponent';\n\nconst MacoWrapper = observer((props) => {\n\tconst store = props.store;\n\n\tconst handleContextMenu = () => {\n\t  // prevents context menu anywhere that hasn't been\n\t  // explicitly allowed\n\t  store.ui.context.setContextmenu(props.contextmenu);\n\t};\n\n\treturn (\n\t\t<div className={styles.wrapper}>\n\t\t\t<ThemeContext.Provider value={store.ui.theme}>\n\t\t\t\t<ToolbarComponent items={props.titlebar} />\n\t\t\t\t<ContextMenuComponent items={store.ui.context.contextmenu} />\n\n\t\t\t\t<div \n\t\t\t\t\tstyle={{\n\t\t\t\t\t\twidth:'100%',\n\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\tbackgroundColor: store.ui.theme.tertiary_color\n\t\t\t\t\t}}\n\t\t\t\t\tonContextMenu={() => handleContextMenu()}\n\t\t\t\t></div>\n\n\t\t\t\t{props.children}\n\t\t\t</ThemeContext.Provider>\n\t\t</div>\n\t);\n});\n\nMacoWrapper.defaultProps = {\n\tcontextmenu: {},\n\ttitlebar: {}\n}\n\nexport default MacoWrapper;","import React, { useState, useContext, useRef, useLayoutEffect } from 'react'\nimport styles from './PanelComponent.module.css'\nimport ThemeContext from '../ThemeContext'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport { observer } from 'mobx-react'\n\nconst Tooltip = observer((props) => {\n  const context = useContext(ThemeContext)\n  const [show, setShow] = useState(false)\n  const [position, setPosition] = useState([0, 0, 0, 0])\n\n  const handleToggle = (e) => {\n    let x = e.pageX\n    let y = e.pageY\n\n    if (x > window.innerWidth - 150) x = e.pageX - 150\n\n    if (y > window.innerHeight - 150) y = e.pageY - 150\n\n    setPosition([x, y])\n    setShow(!show)\n  }\n\n  return (\n    <div className={styles.tooltip}>\n      <div className={styles.tooltip_symbol} onClick={(e) => handleToggle(e)}>\n        ℹ\n      </div>\n      <div\n        className={styles.tooltip_content}\n        style={{\n          backgroundColor: context.primary_color,\n          border: `1px solid ${context.outline_color}`,\n          display: show ? 'block' : 'none',\n          left: position[0],\n          top: position[1]\n        }}\n      >\n        {props.content}\n      </div>\n    </div>\n  )\n})\n\nconst Panel = observer((props) => {\n  const context = useContext(ThemeContext)\n\n  const wrapperElement = useRef(null)\n\n  const [expanded, setExpanded] = useState(props.expanded)\n  const [focused, setFocused] = useState(props.focused)\n  const [hover, setHover] = useState(false)\n\n  const handleResize = (e, direction = 'xy') => {\n\tlet dragging = true\n\n    const pBounds = wrapperElement.current.getBoundingClientRect()\n    const initialDimensions = [pBounds.width, pBounds.height]\n    const initialPosition = [pBounds.x, pBounds.y]\n\n    const handleMove = (e) => {\n      if (e.touches) e = e.touches[0]\n\n      if (e.pageY && dragging) {\n        const pBounds = wrapperElement.current.getBoundingClientRect()\n\n        let w, h\n        let x, y\n\n        switch (direction) {\n          case 'se':\n            w = e.pageX - pBounds.x\n            h = e.pageY - pBounds.y\n            props.onDimensionsChange([w, h])\n            break\n          case 'e':\n            w = e.pageX - pBounds.x\n            h = props.dimensions[1]\n            props.onDimensionsChange([w, h])\n            break\n          case 's':\n            w = props.dimensions[0]\n            h = e.pageY - pBounds.y\n            props.onDimensionsChange([w, h])\n            break\n          case 'sw':\n            w = initialDimensions[0] + (initialPosition[0] - e.pageX)\n            h = e.pageY - pBounds.y\n            x = e.pageX\n            y = pBounds.y\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          case 'w':\n            w = initialDimensions[0] + (initialPosition[0] - e.pageX)\n            h = props.dimensions[1]\n            x = e.pageX\n            y = pBounds.y\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          case 'n':\n            w = props.dimensions[0]\n            h = initialDimensions[1] + (initialPosition[1] - e.pageY)\n            x = pBounds.x\n            y = e.pageY\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          case 'nw':\n            w = initialDimensions[0] + (initialPosition[0] - e.pageX)\n            h = initialDimensions[1] + (initialPosition[1] - e.pageY)\n            x = e.pageX\n            y = e.pageY\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          case 'ne':\n            w = e.pageX - pBounds.x\n            h = initialDimensions[1] + (initialPosition[1] - e.pageY)\n            x = pBounds.x\n            y = e.pageY\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          default:\n            break\n        }\n      }\n    }\n\n    const handleMoveEnd = (e) => {\n      dragging = false\n      if (e.touches && e.touches[0]) e = e.touches[0]\n\n      if (e.pageY) {\n        const pBounds = wrapperElement.current.getBoundingClientRect()\n\n        let w, h\n        let x, y\n\n        switch (direction) {\n          case 'se':\n            w = e.pageX - pBounds.x\n            h = e.pageY - pBounds.y\n            props.onDimensionsChange([w, h])\n            break\n          case 'e':\n            w = e.pageX - pBounds.x\n            h = props.dimensions[1]\n            props.onDimensionsChange([w, h])\n            break\n          case 's':\n            w = props.dimensions[0]\n            h = e.pageY - pBounds.y\n            props.onDimensionsChange([w, h])\n            break\n          case 'sw':\n            w = initialDimensions[0] + (initialPosition[0] - e.pageX)\n            h = e.pageY - pBounds.y\n            x = e.pageX\n            y = pBounds.y\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          case 'w':\n            w = initialDimensions[0] + (initialPosition[0] - e.pageX)\n            h = props.dimensions[1]\n            x = e.pageX\n            y = pBounds.y\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          case 'n':\n            w = props.dimensions[0]\n            h = initialDimensions[1] + (initialPosition[1] - e.pageY)\n            x = pBounds.x\n            y = e.pageY\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          case 'nw':\n            w = initialDimensions[0] + (initialPosition[0] - e.pageX)\n            h = initialDimensions[1] + (initialPosition[1] - e.pageY)\n            x = e.pageX\n            y = e.pageY\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          case 'ne':\n            w = e.pageX - pBounds.x\n            h = initialDimensions[1] + (initialPosition[1] - e.pageY)\n            x = pBounds.x\n            y = e.pageY\n            props.onPositionChange([x, y])\n            props.onDimensionsChange([w, h])\n            break\n          default:\n            break\n        }\n      }\n\n      document.removeEventListener('mousemove', handleMove)\n      document.removeEventListener('mouseup', handleMoveEnd)\n      document.removeEventListener('touchmove', handleMove)\n      document.removeEventListener('touchend', handleMoveEnd)\n    }\n\n    if (e.touches && e.touches[0]) e = e.touches[0]\n\n    document.addEventListener('mousemove', handleMove)\n    document.addEventListener('mouseup', handleMoveEnd)\n    document.addEventListener('touchmove', handleMove)\n    document.addEventListener('touchend', handleMoveEnd)\n  }\n\n  const handleMoveStart = (e) => {\n    /*\n\t\t\tthere are issues with drag events in firefox that make\n\t\t\tthe native 'drag' events less useful for this case. my \n\t\t\talternative was to use mouseEvents and create listeners \n\t\t\ton the document\n\t\t*/\n\n    function handleMove(e) {\n      if (e.touches) e = e.touches[0]\n\n      if (e.pageY) {\n        const x = e.pageX - dragOff[0]\n        const y = e.pageY - dragOff[1]\n\n        // limits to upper left\n        props.onPositionChange([x >= 0 ? x : 0, y >= 0 ? y : 0])\n      }\n    }\n\n    function handleMoveEnd(e) {\n      if (e.touches && e.touches[0]) e = e.touches[0]\n\n      if (e.pageY) {\n        const x = e.pageX - dragOff[0]\n        const y = e.pageY - dragOff[1]\n\n        // limits to upper left\n        props.onPositionChange([x >= 0 ? x : 0, y >= 0 ? y : 0])\n      }\n\n      document.removeEventListener('mousemove', handleMove)\n      document.removeEventListener('mouseup', handleMoveEnd)\n      document.removeEventListener('touchmove', handleMove)\n      document.removeEventListener('touchend', handleMoveEnd)\n    }\n\n    // use first touch event if on mobile device\n    if (e.touches) e = e.touches[0]\n\n    const pBounds = wrapperElement.current.getBoundingClientRect()\n    const offset = { x: pBounds.left, y: pBounds.top }\n\n    const dragOff = [e.pageX - offset.x, e.pageY - offset.y]\n\n    document.addEventListener('mousemove', handleMove)\n    document.addEventListener('mouseup', handleMoveEnd)\n    document.addEventListener('touchmove', handleMove)\n    document.addEventListener('touchend', handleMoveEnd)\n  }\n\n  const handleCenter = () => {\n    if (!props.onPositionChange) return\n    const pBounds = wrapperElement.current.getBoundingClientRect()\n\n    const x = window.innerWidth / 2 - pBounds.width / 2\n    const y = window.innerHeight / 2 - pBounds.height / 2\n\n    // limits to upper left\n    props.onPositionChange([x >= 0 ? x : 0, y >= 0 ? y : 0])\n  }\n\n  const handleFullscreen = () => {\n    if (!props.fullscreen) handleCenter()\n\n    props.onFullscreen(!props.fullscreen)\n    props.onFloat(props.fullscreen)\n  }\n\n  const handleFloat = () => {\n    if (props.floating === null) {\n      // get current width/height if it hasn't been detached before\n      const pBounds = wrapperElement.current.getBoundingClientRect()\n      if (props.onDimensionsChange)\n        props.onDimensionsChange([pBounds.width, pBounds.height])\n    }\n\n    if (props.onFloat) props.onFloat(!props.floating)\n  }\n\n  /*\n\t\tpositions the panel on top when hovered over\n\t*/\n  const handleFocus = (e) => {\n    setHover(true)\n    setFocused(true)\n    if (props.onFocus) props.onFocus(e)\n  }\n\n  const handleBlur = () => {\n    wrapperElement.current.blur()\n    setHover(false)\n    setFocused(false)\n    if (props.onBlur) props.onBlur(false)\n  }\n\n  let mainStyling = {}\n\n  if (props.floating && !props.fullscreen) {\n    mainStyling = {\n      width: props.dimensions[0],\n      height: expanded ? props.dimensions[1] : 'min-content',\n      left: props.position[0],\n      top: props.position[1]\n    }\n  } else if (props.fullscreen) {\n    mainStyling = {\n      width: '100%',\n      height: '100%',\n      left: 0,\n      top: 0\n    }\n  }\n\n  const hasTitle =\n    props.showTitle &&\n    (props.title || props.onRemove || props.collapsible || props.floating)\n  const borderColor = focused ? context.accent_color : context.outline_color\n\n  let dblClickTitle = null\n\n  if (props.canFullscreen) {\n    dblClickTitle = handleFullscreen\n  } else if (props.collapsible) {\n    dblClickTitle = () => setExpanded(!expanded)\n  } else if (props.canFloat) {\n    dblClickTitle = handleFloat\n  }\n\n  // questionable mix of controlled/uncontrolled\n  useLayoutEffect(() => {\n    setExpanded(props.expanded)\n  }, [props.expanded])\n\n  return (\n    <div\n      ref={wrapperElement}\n      className={classNames(styles.panel, {\n        [styles.fullscreen]: props.fullscreen,\n        [styles.floating]: props.floating,\n        [styles.collapsed]: !expanded\n      })}\n      style={{\n        backgroundColor: !props.fullscreen\n          ? context.primary_color\n          : 'transparent',\n        color: context.text_color || 'white',\n        border:\n          props.border && !props.fullscreen\n            ? '1px solid ' + borderColor\n            : 'none',\n        height: props.collapsible ? 'auto' : '100%',\n        margin: props.gutters ? props.gutterSize : 0,\n        zIndex: hover ? 5 : 2,\n        ...mainStyling,\n        ...props.style\n      }}\n      onFocus={handleFocus}\n      onBlur={handleBlur}\n      onContextMenu={props.onContextMenu}\n      onMouseEnter={props.onMouseEnter}\n      onMouseLeave={props.onMouseLeave}\n      onMouseOver={props.onMouseOver}\n      onMouseOut={props.onMouseOut}\n      tabIndex='-1'\n    >\n      {hasTitle && (\n        <div\n          className={styles.title_bar}\n          style={{\n            backgroundColor: context.primary_color || 'black',\n            ...props.titleStyle\n          }}\n        >\n          {props.canFullscreen && (\n            <button\n              title='fullscreen'\n              onClick={handleFullscreen}\n              style={{ fontSize: '0.9em' }}\n            >\n              ✳\n            </button>\n          )}\n\n          {props.canRemove && (\n            <button title='close' onClick={props.onRemove}>\n              x\n            </button>\n          )}\n\n          {props.canFloat && (\n            <button\n              title={props.floating ? 'snap' : 'float'}\n              onClick={handleFloat}\n              style={{ fontSize: '0.9em' }}\n            >\n              {props.floating ? '◧' : '❏'}\n            </button>\n          )}\n\n          {props.collapsible && (\n            <button onClick={() => setExpanded(!expanded)}>\n              {expanded ? '▾' : '▸'}\n            </button>\n          )}\n\n          <div\n            className={styles.dragContainer}\n            onDoubleClick={dblClickTitle}\n            onClick={\n              props.collapsible && !props.canFullscreen\n                ? () => setExpanded(!expanded)\n                : null\n            }\n          >\n            {props.floating && (\n              <div\n                className={styles.moveHandle}\n                onTouchStart={handleMoveStart}\n                onMouseDown={handleMoveStart}\n              />\n            )}\n\n            <legend>\n              <strong>{props.title}</strong>\n            </legend>\n          </div>\n\n          <div className={styles.subtitle}>{props.subtitle}</div>\n\n          {props.indicators && (\n            <div className={styles.indicators}>\n              {props.indicators.map((e, i) => {\n                return (\n                  <div\n                    key={i}\n                    className={styles.indicator}\n                    title={e.title}\n                    style={{\n                      color: context.primary_color,\n                      backgroundColor: e.color\n                    }}\n                  >\n                    {e.label}\n                  </div>\n                )\n              })}\n            </div>\n          )}\n\n          {props.tooltip && <Tooltip content={props.tooltip} />}\n        </div>\n      )}\n\n      {expanded && props.toolbar}\n\n      {expanded && (\n        <div\n          style={{\n            borderColor: context.text_color,\n            flexBasis: props.fullscreen ? '0px' : 'auto'\n          }}\n          className={classNames(styles.panel_content, {\n            [styles.horizontal]: props.horizontal,\n            [styles.vertical]: props.vertical\n          })}\n          ref={props.onRef}\n        >\n          {props.children}\n        </div>\n      )}\n\n      {expanded && props.footbar}\n\n      {/* resize handles */}\n      {props.floating && !props.fullscreen && expanded && (\n        <React.Fragment>\n          <div\n            className={`${styles.resizeHandle} ${styles.resizeSE}`}\n            onTouchStart={(e) => handleResize(e, 'se')}\n            onMouseDown={(e) => handleResize(e, 'se')}\n            style={{\n              borderColor: context.text_color\n            }}\n          />\n          <div\n            className={`${styles.resizeHandle} ${styles.resizeE}`}\n            onTouchStart={(e) => handleResize(e, 'e')}\n            onMouseDown={(e) => handleResize(e, 'e')}\n            style={{\n              borderColor: context.text_color\n            }}\n          />\n          <div\n            className={`${styles.resizeHandle} ${styles.resizeS}`}\n            onTouchStart={(e) => handleResize(e, 's')}\n            onMouseDown={(e) => handleResize(e, 's')}\n            style={{\n              borderColor: context.text_color\n            }}\n          />\n          <div\n            className={`${styles.resizeHandle} ${styles.resizeSW}`}\n            onTouchStart={(e) => handleResize(e, 'sw')}\n            onMouseDown={(e) => handleResize(e, 'sw')}\n            style={{\n              borderColor: context.text_color\n            }}\n          />\n          <div\n            className={`${styles.resizeHandle} ${styles.resizeW}`}\n            onTouchStart={(e) => handleResize(e, 'w')}\n            onMouseDown={(e) => handleResize(e, 'w')}\n            style={{\n              borderColor: context.text_color\n            }}\n          />\n          <div\n            className={`${styles.resizeHandle} ${styles.resizeN}`}\n            onTouchStart={(e) => handleResize(e, 'n')}\n            onMouseDown={(e) => handleResize(e, 'n')}\n            style={{\n              borderColor: context.text_color\n            }}\n          />\n          <div\n            className={`${styles.resizeHandle} ${styles.resizeNE}`}\n            onTouchStart={(e) => handleResize(e, 'ne')}\n            onMouseDown={(e) => handleResize(e, 'ne')}\n            style={{\n              borderColor: context.text_color\n            }}\n          />\n          <div\n            className={`${styles.resizeHandle} ${styles.resizeNW}`}\n            onTouchStart={(e) => handleResize(e, 'nw')}\n            onMouseDown={(e) => handleResize(e, 'nw')}\n            style={{\n              borderColor: context.text_color\n            }}\n          />\n        </React.Fragment>\n      )}\n    </div>\n  )\n})\n\nPanel.defaultProps = {\n  fullscreen: false,\n  expanded: true,\n  border: true,\n  focused: false,\n  floating: false,\n  position: [100, 100],\n  dimensions: [100, 100],\n  gutterSize: 5,\n  showTitle: true,\n  onContextMenu: () => {}\n}\n\nPanel.propTypes = {\n  onRemove: PropTypes.func,\n  onFocus: PropTypes.func,\n  toolbar: PropTypes.object,\n  children: PropTypes.any,\n  style: PropTypes.object,\n  titleStyle: PropTypes.object,\n  title: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  indicators: PropTypes.array,\n  horizontal: PropTypes.bool,\n  vertical: PropTypes.bool,\n  collapsible: PropTypes.bool,\n  fullscreen: PropTypes.bool,\n  floating: PropTypes.bool,\n  showTitle: PropTypes.bool,\n  // adds space around the panel, off by default\n  gutters: PropTypes.bool,\n  gutterSize: PropTypes.number,\n  border: PropTypes.bool\n}\n\nexport const GenericPanel = observer((props) => (\n  <Panel\n    uuid={props.panel.id}\n    title={props.title ?? props.panel.title}\n    subtitle={props.subtitle ?? props.panel.subtitle}\n    collapsible={props.collapsible ?? props.panel.collapsible}\n    fullscreen={props.panel.fullscreen}\n    canFullscreen={props.panel.canFullscreen}\n    floating={props.panel.floating}\n    expanded={props.expanded}\n    showTitle={props.showTitle ?? props.panel.showTitle}\n    canFloat={props.panel.canFloat}\n    defaultWidth={props.panel.defaultWidth}\n    defaultHeight={props.panel.defaultWidth}\n    position={props.panel.position}\n    dimensions={props.panel.dimensions}\n    toolbar={props.toolbar}\n    footbar={props.footbar}\n    indicators={props.indicators}\n    tooltip={props.tooltip}\n    onRemove={props.onRemove ?? props.panel.onRemove}\n    canRemove={props.canRemove ?? props.panel.canRemove}\n    style={props.style}\n    onContextMenu={props.onContextMenu}\n    onContextMenuCapture={props.onContextMenuCapture}\n    onFocus={props.onFocus}\n    onBlur={props.onBlur}\n    onRef={props.onRef}\n    onFloat={props.panel.setFloating}\n    onPositionChange={props.panel.setPosition}\n    onDimensionsChange={props.panel.setDimensions}\n    onFullscreen={props.panel.setFullscreen}\n  >\n    {props.children}\n  </Panel>\n))\n\nexport default Panel\n","import React from 'react';\nimport styles from './TextComponent.module.css';\n\nconst Text = (props) => {\n\treturn(\n\t\t<div className={styles.text} style={props.style}>\n\t\t\t{props.children}\n\t\t</div>\t\n\t)\n}\n\nexport default Text;","import React, { useContext } from 'react';\nimport styles from './ControlGroupComponent.module.css';\nimport ThemeContext from '../ThemeContext';\n\nconst ControlGroup = (props) => {\n    const context = useContext(ThemeContext);\n\n    return (\n        <div className={styles.wrapper}>\n            <fieldset\n                style={{\n                    borderColor: context.outline_color\n                }}\n            >                \n                {props.name && (\n                    <legend\n                        style={{ \n                            padding: '2px 4px',\n                            backgroundColor: context.text_color,\n                            color: context.primary_color\n                        }}\n                    >\n                        <strong>{props.name}</strong>\n                    </legend>  \n                )}\n                                  \n                <div>\n                    {React.Children.map(props.children,(child)=>{\n                        let input_width = 100.0;\n\n                        if(props.children.length) {\n                            input_width = 100.0 / props.children.length;\n                        }\n                        \n                        if (React.isValidElement(child)) {\n                            return React.cloneElement(child, { style: {width:`${input_width}%`} })\n                        }\n\n                        return child;\n                    })}\n                </div>                    \n            </fieldset>  \n        </div>          \n    );\n}\n\nexport default ControlGroup;","import { useLayoutEffect, useRef } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport ResizeObserver from 'resize-observer-polyfill'\r\n\r\nconst useObserver = (callback, element, dependencies = []) => {\r\n  const observer = useRef(null)\r\n  \r\n  useLayoutEffect(() => {\r\n    const observe = () => {\r\n      if (element && element.current && observer.current) {\r\n        observer.current.observe(element.current)\r\n      }\r\n    }\r\n\r\n    const current = element.current\r\n\r\n    // if we are already observing old element\r\n    if (observer && observer.current && current) {\r\n      observer.current.unobserve(current)\r\n    }\r\n    const resizeObserverOrPolyfill = ResizeObserver\r\n\r\n    observer.current = new resizeObserverOrPolyfill(callback)\r\n    observe()\r\n\r\n    return () => {\r\n      if (observer && observer.current && current) {\r\n        observer.current.unobserve(current)\r\n      }\r\n    }\r\n  }, [callback, element, observer, ...dependencies])\r\n}\r\n\r\nuseObserver.propTypes = {\r\n  element: PropTypes.object,\r\n  callback: PropTypes.func\r\n  //   dependencies\r\n}\r\n\r\nexport default useObserver\r\n","import React, {\n  useState,\n  useContext,\n  useRef,\n  useEffect,\n  useLayoutEffect\n} from 'react'\nimport useResizeObserver from './hooks/ResizeHook'\nimport classNames from 'classnames'\nimport styles from './SplitContainer.module.css'\nimport ThemeContext from '../ThemeContext'\nimport PropTypes from 'prop-types'\n\nclass Split {\n  constructor({ id = 0, floating = false, size = 100 }) {\n    this.id = id\n    this.floating = floating\n    this.size = size\n  }\n}\n\nconst SplitContainer = (props) => {\n  const context = useContext(ThemeContext)\n\n  const distributeSplits = () => {\n    const count = props.children.length\n\n    // make a full length split if there is only one child\n    if (count <= 1)\n      return [\n        new Split({\n          id: 0,\n          floating: false,\n          size: 100\n        })\n      ]\n\n    // get all splits with default size values\n    const defaultSplits = props.children\n      .filter((e) => e.props.defaultsize)\n      .map(\n        (e, i) =>\n          new Split({\n            id: i,\n            floating: false,\n            size: e.props.defaultsize * 100.0\n          })\n      )\n\n    // if defaults are defined, take them into account\n    if (defaultSplits.length) {\n      const defaultSum = defaultSplits\n        .filter((s) => !s.floating)\n        .reduce((a, b) => a + b.size, 0)\n\n      // get default split sum\n      return props.children.map(\n        (e, i) =>\n          new Split({\n            id: i,\n            size: e.props.defaultsize\n              ? e.props.defaultsize * 100.0\n              : (100.0 - defaultSum) / (count - 1),\n            floating: false\n          })\n      )\n    } else {\n      return props.children.map(\n        (e, i) =>\n          new Split({\n            id: i,\n            floating: false,\n            size: 100.0 / count\n          })\n      )\n    }\n  }\n\n  const [split, setSplit] = useState(distributeSplits())\n  const [isEmpty, setEmpty] = useState(false)\n\n  const wrapperElement = useRef(null)\n\n  // if the split is set to auto, decide whether or not its vertical based on\n  // wrapper dimensions / aspect ratio\n  const [isVertical, setIsVertical] = useState(\n    props.vertical || !props.horizontal\n  )\n\n  const handleContainerResize = (e) => {\n    if (props.auto) {\n      const bounds = wrapperElement.current.getBoundingClientRect()\n      setIsVertical(bounds.width < bounds.height)\n    }\n  }\n\n  // TO DO this causes way too many redraws!\n  useResizeObserver(handleContainerResize, wrapperElement, [\n    props.auto,\n    isVertical\n  ])\n\n  const handlePanelResize = (e, i) => {\n    function handleMove(e) {\n      if (e.pageX) {\n        const pBounds = wrapperElement.current.getBoundingClientRect()\n\n        let s\n\n        if (isVertical) {\n          s = (e.pageY - pBounds.y) / pBounds.height\n        } else {\n          s = (e.pageX - pBounds.x) / pBounds.width\n        }\n\n        const splitSum =\n          i > 0\n            ? split\n                .slice(0, i)\n                .filter((s) => !s.floating)\n                .reduce((a, b) => a + b.size, 0)\n            : 0\n        split[i].size = s * 100 - splitSum\n\n        if (split[i].size > 100) split[i].size = 100\n        if (split[i].size < 0) split[i].size = 0\n\n        setSplit([...split])\n      }\n    }\n\n    function handleMoveEnd(e) {\n      if (e.touches && e.touches[0]) e = e.touches[0]\n\n      if (e.pageX) {\n        const pBounds = wrapperElement.current.getBoundingClientRect()\n\n        let s\n\n        if (isVertical) {\n          s = (e.pageY - pBounds.y) / pBounds.height\n        } else {\n          s = (e.pageX - pBounds.x) / pBounds.width\n        }\n\n        const splitSum =\n          i > 0\n            ? split\n                .slice(0, i)\n                .filter((s) => !s.floating)\n                .reduce((a, b) => a + b.size, 0)\n            : 0\n        split[i].size = s * 100 - splitSum\n\n        if (split[i].size > 100) split[i].size = 100\n        if (split[i].size < 0) split[i].size = 0\n\n        setSplit([...split])\n      }\n\n      document.removeEventListener('mousemove', handleMove)\n      document.removeEventListener('mouseup', handleMoveEnd)\n      document.removeEventListener('touchmove', handleMove)\n      document.removeEventListener('touchend', handleMoveEnd)\n    }\n\n    if (e.touches && e.touches[0]) e = e.touches[0]\n\n    document.addEventListener('mousemove', handleMove)\n    document.addEventListener('mouseup', handleMoveEnd)\n    document.addEventListener('touchmove', handleMove)\n    document.addEventListener('touchend', handleMoveEnd)\n  }\n\n  const handleDetach = (i, detachBool) => {\n    if (i === split.length) return\n    split[i].floating = detachBool\n    setSplit([...split])\n  }\n\n  useLayoutEffect(\n    (e) => {\n      setSplit(distributeSplits())\n    },\n    [props.children.length, props.updateFlag]\n  )\n\n  useEffect(\n    (e) => {\n      // if all empty\n      if (!split.filter((s) => !s.floating).length && !isEmpty) {\n        setEmpty(true)\n        if (props.onEmpty) props.onEmpty(true)\n      }\n\n      // if empty and a new split has been changed\n      if (isEmpty) {\n        setEmpty(false)\n        if (props.onEmpty) props.onEmpty(false)\n      }\n    },\n    [split]\n  )\n\n  const wrapperClass = classNames(styles.wrapper, {\n    [styles.vertical]: isVertical,\n    [styles.horizontal]: !isVertical,\n    [styles.empty]: isEmpty\n  })\n\n  return (\n    <div\n      className={wrapperClass}\n      ref={wrapperElement}\n      style={{\n        backgroundColor: context.tertiary_color\n      }}\n    >\n      {props.children &&\n        React.Children.map(props.children, (child, i) => {\n          const isSplit = child.type.name === 'SplitContainer'\n\n          // if there is only one panel, make it full width and height\n          if (props.children.length === 1)\n            return (\n              <div\n                style={isVertical ? { height: '100%' } : { width: '100%' }}\n                className={classNames({\n                  [styles.split_container]: isSplit,\n                  [styles.panel_container]: !isSplit\n                })}\n              >\n                {child}\n              </div>\n            )\n\n          let hasHandle = i < props.children.length - 1\n\n          let w\n          // for all panels up to the last\n          if (i < props.children.length - 1) {\n            w = split[i] ? split[i].size : 0\n            w = split[i].floating ? 0 : w\n            if (split[i].floating) hasHandle = false\n          } else {\n            // sum all splits and get the final panel width\n            // if last split is floating, remove handle\n            if (split[i] && split[i].floating) {\n              hasHandle = false\n              w = 0\n            } else {\n              w =\n                100 -\n                split\n                  .slice(0, -1)\n                  .filter((s) => !s.floating)\n                  .reduce((a, b) => a + b.size, 0)\n            }\n          }\n\n          if (split[i + 1] && split[i + 1].floating && i === split.length - 2) {\n            w =\n              100 -\n              split\n                .slice(0, i)\n                .filter((s) => !s.floating)\n                .reduce((a, b) => a + b.size, 0)\n          }\n\n          if (\n            split[i] &&\n            !split[i].floating &&\n            split.filter((s) => !s.floating).length === 1\n          ) {\n            w = 100\n            hasHandle = false\n          }\n\n          /* \n            attaches hook that watches for float\n            (hopefully this isn't a performance hit)\n          */\n          if (child.props.detachable) {\n            child = React.cloneElement(child, {\n              ...child.props,\n              onDetach: (b) => handleDetach(i, b)\n            })\n          }\n\n          /*\n            if the child is a split, and the split is empty, make it shrink\n          */\n          if (isSplit) {\n            child = React.cloneElement(child, {\n              ...child.props,\n              onEmpty: (b) => handleDetach(i, b)\n            })\n          }\n\n          return (\n            <React.Fragment>\n              <div\n                style={isVertical ? { height: w + '%' } : { width: w + '%' }}\n                className={classNames(styles.panel_content, {\n                  [styles.split_container]: isSplit,\n                  [styles.panel_container]: !isSplit,\n                  [styles.split_floating]: split[i] ? split[i].floating : false\n                })}\n              >\n                {/* {`w: ${w}`} */}\n                {child}\n              </div>\n              {hasHandle && (\n                <div\n                  className={classNames(styles.drag_container, {\n                    [styles.vertical]: isVertical,\n                    [styles.horizontal]: !isVertical\n                  })}\n                >\n                  <div\n                    className={classNames(styles.drag_handle_visible, {\n                      [styles.vertical]: isVertical,\n                      [styles.horizontal]: !isVertical\n                    })}\n                    style={{\n                      // backgroundColor: context.accent_color,\n                      borderColor: context.accent_color\n                    }}\n                    onTouchStart={(e) => handlePanelResize(e, i)}\n                    onMouseDown={(e) => handlePanelResize(e, i)}                    \n                  >\n                    <div\n                      className={classNames(styles.drag_handle, {\n                        [styles.vertical]: isVertical,\n                        [styles.horizontal]: !isVertical\n                      })}\n                      style={{\n                        // backgroundColor: context.accent_color,\n                        borderColor: context.outline_color\n                      }}\n                    />\n                  </div>\n                </div>\n              )}\n            </React.Fragment>\n          )\n        })}\n\n      {props.children.length === 0 && (\n        <p\n          style={{\n            alignSelf: 'center',\n            textAlign: 'center'\n          }}\n        >\n          <small>no panel in split!</small>\n        </p>\n      )}\n    </div>\n  )\n}\n\nSplitContainer.defaultProps = {\n  updateFlag: false\n}\n\n// the children can have a defaultsize prop\n\nSplitContainer.propTypes = {\n  children: PropTypes.any.isRequired,\n  horizontal: PropTypes.bool,\n  vertical: PropTypes.bool,\n  auto: PropTypes.bool, // used to automatically choose from horizontal or vertical\n  split: PropTypes.array,\n  updateFlag: PropTypes.bool\n}\n\nexport default SplitContainer\n","import React, { useContext, useRef } from 'react'\nimport classNames from 'classnames'\nimport styles from './LayoutContainer.module.css'\nimport ThemeContext from '../ThemeContext'\nimport { observer } from 'mobx-react'\n\nconst LayoutContainer = observer((props) => {\n  const context = useContext(ThemeContext)\n\n  let isVertical = props.layout.direction === 'VERTICAL'\n\n  let isEmpty = props.layout.isEmpty\n\n  const wrapper_element = useRef(null)\n\n  const handleResize = (e, layout) => {\n    function handleMove(e) {\n      if (e.touches) e = e.touches[0]\n\n      if (e.pageX) {\n        const bounds = wrapper_element.current.getBoundingClientRect()\n\n        let pos\n        if (isVertical) {\n          pos = (e.pageY - bounds.y) / bounds.height\n        } else {\n          pos = (e.pageX - bounds.x) / bounds.width\n        }\n\n        layout.adjust(pos)\n      }\n    }\n\n    function handleMoveEnd(e) {\n      if (e.touches && e.touches[0]) e = e.touches[0]\n\n      if (e.pageX) {\n        const bounds = wrapper_element.current.getBoundingClientRect()\n\n        let pos\n        if (isVertical) {\n          pos = (e.pageY - bounds.y) / bounds.height\n        } else {\n          pos = (e.pageX - bounds.x) / bounds.width\n        }\n\n        layout.adjust(pos)\n      }\n\n      document.removeEventListener('mousemove', handleMove)\n      document.removeEventListener('mouseup', handleMoveEnd)\n      document.removeEventListener('touchmove', handleMove)\n      document.removeEventListener('touchend', handleMoveEnd)\n    }\n\n    if (e.touches && e.touches[0]) e = e.touches[0]\n\n    document.addEventListener('mousemove', handleMove)\n    document.addEventListener('mouseup', handleMoveEnd)\n    document.addEventListener('touchmove', handleMove)\n    document.addEventListener('touchend', handleMoveEnd)\n  }\n\n  const handleContextMenu = (e, layout) => {\n    if (props.onContextMenu) props.onContextMenu(e, layout)\n  }\n\n  return (\n    <div\n      ref={wrapper_element}\n      style={{\n        backgroundColor: context.tertiary_color\n      }}\n      className={classNames(styles.wrapper, {\n        [styles.vertical]: isVertical,\n        [styles.horizontal]: !isVertical,\n        [styles.empty]: isEmpty\n      })}\n    >\n      {props.layout.children.map((sibling, i) => {\n        let siblings = props.layout.children\n        let hasHandle = i < props.layout.children.length - 1\n        let childIsLayout = sibling.children.length\n        let size = 0\n\n        let filterOutFloats = (s) => !s.panel || (s.panel && !s.panel.floating)\n        let filterOutEmptyLayouts = (s) => !s.isEmpty\n        let empty =\n          sibling.children.length &&\n          sibling.children.filter(filterOutFloats).length === 0\n\n        /*\n                    the benefit of applying the size calculations here\n                    is that floating panels will retain their width. \n                */\n        let isFloating = sibling.panel && sibling.panel.floating\n\n        // for all panels up to the last\n        if (i < siblings.length - 1) {\n          size = sibling ? sibling.size : 0\n\n          // if the next panel is floating, absorb it\n          if (siblings[i + 1].panel && siblings[i + 1].panel.floating) {\n            // while right sibling is floating... TODO: might still need to finish this\n            // let _i = i;\n            // while (siblings[_i + 1] && siblings[_i + 1].panel.floating) {\n            //     size += props.layout.children[_i + 1].size;\n            //     _i++;\n            // }\n            size += props.layout.children[i + 1].size\n            // removes handle (and fixes overflow issue)\n            if (i === siblings.length - 2) hasHandle = false\n          }\n\n          if (isFloating) {\n            hasHandle = false\n            size = 0\n          }\n        } else {\n          // sum all splits and get the final panel width\n          if (isFloating || empty) {\n            hasHandle = false\n            size = 0\n          } else {\n            size =\n              1 -\n              siblings\n                .slice(0, -1)\n                .filter(filterOutFloats)\n                .filter(filterOutEmptyLayouts)\n                .reduce((a, b) => a + b.size, 0)\n          }\n        }\n\n        if (\n          i < siblings.length - 1 &&\n          siblings[i + 1].floating &&\n          i === siblings.length - 2\n        ) {\n          size =\n            1 -\n            siblings\n              .slice(0, i)\n              .filter(filterOutFloats)\n              .filter(filterOutEmptyLayouts)\n              .reduce((a, b) => a + b.size, 0)\n        }\n\n        if (\n          sibling &&\n          !isFloating &&\n          !empty &&\n          siblings.filter(filterOutFloats).filter(filterOutEmptyLayouts)\n            .length === 1\n        ) {\n          size = 1\n          hasHandle = false\n        }\n\n        size *= 100\n\n        return (\n          <React.Fragment key={sibling.id}>\n            <div\n              style={\n                isVertical ? { height: size + '%' } : { width: size + '%' }\n              }\n              className={classNames(styles.panel_content, {\n                [styles.layout_container]: childIsLayout,\n                [styles.panel_container]: !childIsLayout,\n                [styles.float_container]: isFloating\n              })}\n            >\n              {/* <div className={styles.debug}>\n                                {size}\n                            </div> */}\n              {sibling.children.length ? (\n                <LayoutContainer layout={sibling}>\n                  {props.children}\n                </LayoutContainer>\n              ) : (\n                props.children.filter((child) => {\n                  if (child.props.panel) {\n                    return child.props.panel.id === sibling.id\n                  } else {\n                    return child.props.id === sibling.id\n                  }\n                })\n              )}\n            </div>\n            {hasHandle && (\n              <div\n                onContextMenu={handleContextMenu}\n                className={classNames(styles.drag_container, {\n                  [styles.vertical]: isVertical,\n                  [styles.horizontal]: !isVertical\n                })}\n              >\n                <div\n                  className={classNames(styles.drag_handle, {\n                    [styles.vertical]: isVertical,\n                    [styles.horizontal]: !isVertical\n                  })}\n                  style={{\n                    backgroundColor: context.accent_color,\n                    borderColor: context.primary_color\n                  }}\n                  onTouchStart={(e) => handleResize(e, sibling)}\n                  onMouseDown={(e) => handleResize(e, sibling)}\n                ></div>\n              </div>\n            )}\n          </React.Fragment>\n        )\n      })}\n    </div>\n  )\n})\n\nLayoutContainer.defaultProps = {\n  size: 100,\n  order: 0\n}\n\nLayoutContainer.propTypes = {}\n\nexport default LayoutContainer\n","import React, { useState, useContext } from 'react';\nimport styles from './PagesContainer.module.css';\nimport ThemeContext from '../ThemeContext';\n\nconst Pages = (props) => {\n\tconst [currentPage, setCurrentPage] = useState(0);\n\tconst context = useContext(ThemeContext);\n\n\tconst handlePreviousPage = () => {\n\t\tif (currentPage > 0)\n\t\t\tsetCurrentPage(currentPage-1);\n\t}\n\n\tconst handleNextPage = () => {\n\t\tif(currentPage + 1 < props.children.length)\n\t\t\tsetCurrentPage(currentPage+1);\n\t}\t\n\n\tconst buttonStyle = {\n\t\tbackgroundColor: context.secondary_color,\n\t\tcolor: context.text_color\n\t}\n\t\n\treturn(\n\t\t<div className={styles.wrapper} style={props.style}>\n\t\t\t<div className={styles.pagecontent}>\n\t\t\t\t{props.children[currentPage]}\n\t\t\t</div>\n\t\t\t<div className={styles.pagenav}>\n\t\t\t\t<button style={buttonStyle} onClick={handlePreviousPage}>{'<'}</button>\t\t\t\t\n\t\t\t\t<button style={buttonStyle} onClick={handleNextPage}>{'>'}</button>\t\t\t\t\n\t\t\t\t<span>{`${currentPage+1} of ${props.children.length}`}</span>\n\t\t\t</div>\n\t\t</div>\t\n\t)\n}\n\nexport default Pages;","import React, { useContext } from 'react';\nimport styles from './InputBool.module.css';\nimport ThemeContext from '../../ThemeContext';\nimport {observer} from 'mobx-react';\n\nconst InputBool = observer((props) => {    \n    const context = useContext(ThemeContext);\n    const updateValue = e => props.onChange(e.target.checked, e.target.value);\n\n    return (\n        <div \n            className={styles.wrapper}\n            style={{\n                ...props.style,\n                backgroundColor: props.focused ? context.accent_color : context.secondary_color,\n                flexFlow: props.hLabel && props.label ? 'row' : 'column'\n            }}\n        >\n            {props.label && (\n                <label\n                    style={{\n                        backgroundColor: props.focused ? context.accent_color : context.text_color,\n                        color: context.primary_color\n                    }}\n                >\n                    {props.label}:\n                </label>\n            )}\n            <div\n                className={styles.wrapper_inner}\n            >\n                <input \n                    style={props.style}\n                    type=\"checkbox\"         \n                    value={props.value}\n                    checked={props.checked}\n                    onChange={updateValue}\n                    onContextMenu={props.onContextMenu}\n                />\n            </div>                                                           \n        </div>\n    );\n});\n\nexport default InputBool;","import React, { useContext } from 'react';\nimport styles from './InputFloat.module.css';\nimport ThemeContext from '../../ThemeContext';\nimport {observer} from 'mobx-react';\nimport PropTypes from 'prop-types';\n\nlet position = [0, 0];\nlet base_value = 0;\n\n/*\n    ISSUES:\n\n        should be able to drag input outside of browser window\n        but the solution in js is not immediately obvious\n\n        there is a possible lead here:\n        https://stackoverflow.com/questions/1685326/responding-to-the-onmousemove-event-outside-of-the-browser-window-in-ie\n*/\n\nconst InputFloat = observer((props) => {\n    const context = useContext(ThemeContext);\n\n    const handleChange = e => props.onChange(Number(e.target.value));\n\n    const handleDragStart = e => {\n        let dragging = false;\n\n        function handleDrag(e) {\n            e.preventDefault();\n            dragging = true;\n            /*\n                conditional fixes issue where last frame of\n                drag results in a 'jump' in value, as pageY\n                is 0. \n            */\n            if (e.pageY) {\n                // fine control w shift / large control w ctrl\n                let scalar = e.ctrlKey ? 100 : e.shiftKey ? 20000 : 1000;\n\n                let x_offset = e.pageX - position[0];\n                let y_offset = (position[1] - e.pageY);\n\n                x_offset = Math.min(Math.max(x_offset, 1), 100);\n\n                let output_value = base_value + (y_offset * x_offset / scalar);\n\n                // factor in step size\n                if (props.step) {\n                    output_value /= props.step;\n                    output_value = Math.floor(output_value);\n                    output_value *= props.step;\n                }\n\n                props.onChange(output_value);\n            }\n        }\n\n        function handleDragEnd(e) {\n            if(dragging) {\n                // fine control w shift / large control w ctrl\n                let scalar = e.ctrlKey ? 100 : e.shiftKey ? 20000 : 1000;\n\n                let x_offset = e.pageX - position[0];\n                let y_offset = position[1] - e.pageY;\n\n                x_offset = Math.min(Math.max(x_offset, 1), 100);\n\n                let output_value = base_value + (y_offset * x_offset / scalar);\n\n                // factor in step size\n                if (props.step) {\n                    output_value /= props.step;\n                    output_value = Math.floor(output_value);\n                    output_value *= props.step;\n                }\n\n                props.onChange(output_value);\n            } \n\n            document.removeEventListener(\"mousemove\", handleDrag);\n            document.removeEventListener(\"mouseup\", handleDragEnd);\n            document.removeEventListener(\"touchmove\", handleDrag);\n            document.removeEventListener(\"touchend\", handleDragEnd);\n\n            dragging = false;\n        }\n\n        if (e.touches && e.touches[0]) e = e.touches[0]\n\n        position = [e.pageX, e.pageY];\n        base_value = props.value;\n\n        document.addEventListener(\"mousemove\", handleDrag);\n        document.addEventListener(\"mouseup\", handleDragEnd);\n        document.addEventListener(\"touchmove\", handleDrag);\n        document.addEventListener(\"touchend\", handleDragEnd);\n    }\n\n    const value = parseFloat(props.value).toFixed(2);\n\n    const defaultInputStyle = {\n        backgroundColor: context.secondary_color,\n        color: context.text_color\n    }\n\n    return (\n        <div \n            className={styles.wrapper}\n            style={{\n                ...props.style,\n                backgroundColor: props.focused ? context.accent_color : context.secondary_color,\n            }}\n        >\n            {props.label && (\n                <label\n                    style={{\n                        backgroundColor: props.focused ? context.accent_color : context.text_color,\n                        color: context.primary_color\n                    }}\n                >\n                    {props.label}:\n                </label>\n            )}\n            <div\n                className={styles.wrapper_inner}\n            >\n                <input                 \n                    type=\"number\" \n                    step={props.step}\n                    value={Number(value)}                    \n                    onChange={handleChange} \n                    \n                    onClick={props.onClick}\n                    onTouchStart={handleDragStart}\n\t\t\t\t\tonMouseDown={handleDragStart}\n                    onDoubleClick={props.onDoubleClick}      \n                    onContextMenu={props.onContextMenu}\n\n                    style={{                        \n                        ...defaultInputStyle,\n                        ...props.inputStyle,\n                    }}                  \n                />   \n            </div>                                                           \n        </div>\n    );\n});\n\nInputFloat.defaultProps = {\n    value: 0,\n    step: 0.1,\n    focused: false,\n}\n\nInputFloat.propTypes = {\n    label: PropTypes.string,\n    value: PropTypes.oneOfType([\n        PropTypes.number,\n        PropTypes.string\n    ]),\n    step: PropTypes.number,\n    focused: PropTypes.bool,\n    \n    onChange: PropTypes.func,\n    onDoubleClick: PropTypes.func,\n    inputStyle: PropTypes.object\n}\n\nexport default InputFloat;\n","import React, { useContext } from 'react';\nimport styles from './InputSelect.module.css';\nimport ThemeContext from '../../ThemeContext';\n\nconst InputSelect = (props) => {\n    const context = useContext(ThemeContext);\n\n    const handleChange = e => props.onChange(e.target.value);\n\n    return (\n        <div \n            className={styles.wrapper}\n            style={{\n                ...props.style,\n                backgroundColor: props.focused ? context.accent_color : context.secondary_color,\n            }}\n        >\n            {props.label && (\n                <label\n                    style={{\n                        backgroundColor: props.focused ? context.accent_color : context.text_color,\n                        color: context.primary_color\n                    }}\n                >\n                    {props.label}:\n                </label>\n            )}\n            <div\n                className={styles.wrapper_inner}\n            >\n                <select \n                    defaultValue={props.selectedOption} \n                    onChange={handleChange} \n                    onContextMenu={props.onContextMenu}\n                    style={{\n                        backgroundColor: context.secondary_color,\n                        color: context.text_color,\n                    }}\n                >\n                    {props.options.map((opt,i)=>(\n                        <option key={i} value={opt.value}>\n                            {opt.label}\n                        </option> \n                    ))}                   \n                </select>   \n            </div>                                             \n        </div>\n    );\n}\n\nexport default InputSelect;\n","import React, { useContext, useRef } from 'react';\nimport styles from './InputSlider.module.css';\nimport InputFloat from './InputFloat';\nimport ThemeContext from '../../ThemeContext';\nimport PropTypes from 'prop-types';\n\nlet slider_bounds = null;   \n\nconst InputSlider = (props) => {\n    const context = useContext(ThemeContext);\n\n    const slider_element = useRef(null);\n\n    const handleDragStart = e => {\n        function handleDrag(e) {\n            if (e.touches) e = e.touches[0]\n          /*\n              conditional fixes issue where last frame of\n              drag results in a 'jump' in value, as pageY\n              is 0. \n          */\n          if (e.pageY) {\n            let x = e.pageX + 2;\n            let position = (x - slider_bounds.x) / slider_bounds.width;\n\n            let value = (position * (props.max - props.min)) + props.min;\n\n            if (position <= 0.00) value = props.min\n            if (position >= 1.00) value = props.max\n\n            props.onChange(Math.floor(value / props.step) * props.step)\n          }\n        }\n\n        function handleDragEnd(e) {\n            if (e.touches && e.touches[0]) e = e.touches[0]\n\n            let x = e.pageX + 2;\n            let position = (x - slider_bounds.x) / slider_bounds.width;\n            let value = (position * (props.max - props.min)) + props.min;\n\n            if (position >= 0.00 && position <= 1.0) {\n                props.onChange(Math.floor(value / props.step) * props.step)\n            }\n\n            document.removeEventListener(\"mousemove\", handleDrag);\n            document.removeEventListener(\"mouseup\", handleDragEnd);\n            document.removeEventListener(\"touchmove\", handleDrag);\n            document.removeEventListener(\"touchend\", handleDragEnd);\n        }\n\n        if (e.touches && e.touches[0]) e = e.touches[0]\n\n        slider_bounds = slider_element.current.getBoundingClientRect();\n        let x = e.pageX + 2;\n        let position = (x - slider_bounds.x) / slider_bounds.width;\n\n        let value = (position * (props.max-props.min)) + props.min;\n        console.log([props.min,props.max])\n        console.log('position',position)\n        console.log('value',value)\n\n        if (position >= 0.00 && position <= 1.0) {\n            props.onChange(Math.floor(value / props.step) * props.step) // floor to step\n        }\n\n        document.addEventListener(\"mousemove\", handleDrag);\n        document.addEventListener(\"mouseup\", handleDragEnd);\n        document.addEventListener(\"touchmove\", handleDrag);\n        document.addEventListener(\"touchend\", handleDragEnd);\n    }\n\n    const handleFloatDrag = v => {\n        props.onChange(v)\n    }\n\n    return (\n        <div \n            className={styles.wrapper + ' ' + styles.horizontal}\n            style={props.style}\n            onContextMenu={props.onContextMenu}\n        >\n            <InputFloat \n                value={props.value}\n                onChange={handleFloatDrag}\n                step={props.step || 0.1}\n            />\n            <div \n                ref={slider_element}\t\t\t\n                className={styles.slider_track}    \n                onTouchStart={handleDragStart}\n                onMouseDown={handleDragStart}  \n                style={{\n                    backgroundColor: context.secondary_color\n                }}                        \n            >\n                <div \n                    className={styles.sleeve}\n                    style={{\n                        width: ((props.value-props.min)/(props.max-props.min)*100) + '%',\n                        backgroundColor: context.accent_color\n                    }}\n                >                        \n                </div>\n                <div\n                    className={styles.handle}\n                    style={{\n                        left: ((props.value-props.min)/(props.max-props.min)*100) + '%',\n                        backgroundColor: context.accent_color\n                    }}                    \n                ></div>                        \n            </div>                                               \n        </div>\n    );\n}\n\nInputSlider.propTypes = {\n    min: PropTypes.number,\n    max: PropTypes.number,\n    value: PropTypes.number,\n    style: PropTypes.object,\n}\n\nexport default InputSlider;","import React, { useContext } from 'react';\nimport styles from './InputColor.module.css';\nimport ThemeContext from '../../ThemeContext';\n\nconst InputColor = (props) => {\n    const context = useContext(ThemeContext);\n\n    const handleChange = (e) => props.onChange(e.target.value);\n\n    return (\n        <div \n            className={styles.wrapper}\n            style={{\n                ...props.style,\n                backgroundColor: props.focused ? context.accent_color : context.secondary_color,\n            }}\n        >\n            {props.label && (\n                <label\n                    style={{\n                        backgroundColor: props.focused ? context.accent_color : context.text_color,\n                        color: context.primary_color\n                    }}\n                >\n                    {props.label}:\n                </label>\n            )}\n            <div\n                className={styles.wrapper_inner}\n            >\n            \n                {props.showValue && (\n                    <input \n                        type=\"string\"\n                        className={styles.textInput}\n                        value={props.value}\n                        onChange={handleChange}\n                        style={{\n                            backgroundColor: context.text_color,\n                            color: context.secondary_color\n                        }}\n                    />                     \n                )}   \n\n                    <input \n                        type=\"color\"\n                        value={props.value}\n                        onChange={handleChange}\n                        onContextMenu={props.onContextMenu}\n                        style={{\n                            backgroundColor: context.secondary_color,\n                            color: context.secondary_color                        \n                        }}\n                    /> \n            </div>                                                    \n        </div>\n    );\n}\n\nexport default InputColor;","import { types } from \"mobx-state-tree\";\nimport tinykeys from \"tinykeys\";\nimport { observable } from \"mobx\";\n\nexport const ContextMenuItem = types\n  .model(\"ContextMenuItem\", {\n    id: types.identifier,\n    label: types.frozen(),\n    buttons: types.frozen(),\n    dropDown: types.map(types.late(() => ContextMenuItem))\n  })\n  .volatile(self => ({\n    onClick: () => {}\n  }));\n\nconst Context = types\n  .model(\"Context\", {})\n  .volatile(self => ({\n    contextmenu: {},\n    keylistener: tinykeys(window, {}),\n    keymap: null\n  }))\n  .actions(self => ({\n    setKeymap: keymap => {\n      if (self.keylistener) self.keylistener();\n\n      self.keymap = keymap;\n      self.keylistener = tinykeys(window, self.keymap);\n    },\n    removeKeymap: () => self.keylistener(),\n    setContextmenu: c => {\n      self.contextmenu = c;\n    }\n  }));\n\nexport default Context;","import { types, getParent } from \"mobx-state-tree\";\nimport Layout from './Layout';\n\nconst Panel = types\n    .model(\"Panel\", {\n        id: types.identifier,\n        component_type: \"\",\n        title: types.maybe(types.string),\n        subtitle: types.maybe(types.string),\n        showTitle: true,\n        floating: false,\n        fullscreen: false,\n        canFloat: false,\n        canRemove: false,\n        canFullscreen: false,\n        dimensions: types.array(types.number),\n        position: types.array(types.number),\n        layout: types.maybe(types.late(() => Layout))\n    })\n    .volatile(self => ({\n        parent_layout: null\n    }))\n    .actions(self => ({\n        setLayout: layout => {\n          self.layout = layout;\n        },\n\n        setFloating: f => {\n          self.floating = f;\n        },\n\n        toggleFloating: () => {\n          self.floating = !self.floating;\n        },\n\n        toggleFullscreen: () => {\n          self.fullscreen = !self.fullscreen;\n        },\n\n        setPosition: (p) => {\n          // TEMP: hack to keep away from title, use safe areas instead\n          if (p[1] < 24) p[1] = 24;\n\n          self.position = p;\n\n          // EXPERIMENT: Limit position to max bounds\n          if (p[0] + self.dimensions[0] > window.innerWidth) \n            self.position[0] = window.innerWidth - self.dimensions[0];\n          \n          if (p[1] + self.dimensions[1] > window.innerHeight)\n            self.position[1] = window.innerHeight - self.dimensions[1];\n        },\n\n        setDimensions: (d) => {\n          self.dimensions = d;\n\n          // EXPERIMENT: Limit position to max bounds\n          if (d[0] + self.position[0] > window.innerWidth)\n            self.dimensions[0] = window.innerWidth - self.position[0];\n\n          if (d[1] + self.position[1] > window.innerHeight)\n            self.dimensions[1] = window.innerHeight - self.position[1];\n        },\n\n        setFullscreen: (f) => {\n          self.fullscreen = f;\n        },\n\n        onRemove: () => {\n          self.parent_layout = getParent(self, 2); // ERROR HERE, cant remove\n          self.parent_layout.removePanel(self);\n        },\n\n        center: () => {\n          self.position[0] = window.innerWidth / 2 - self.dimensions[0] / 2;\n          self.position[1] = window.innerHeight / 2 - self.dimensions[1] / 2;\n        },\n\n        fitScreen: () => {\n          if (self.position[0] <= 0) self.position[0] = 0;\n\n          if (self.position[1] <= 0) self.position[1] = 0;\n\n          // if (self.dimensions[0] + self.position[0] >= window.innerWidth)\n          // self.dimensions[0] = window.innerWidth - self.position[0];\n\n          // if (self.dimensions[1] + self.position[1] >= window.innerHeight)\n          // self.dimensions[1] = window.innerHeight - self.position[1];\n        }\n    }))\n\nexport default Panel;","import {\n  types,\n  getParent,\n  getRoot\n} from \"mobx-state-tree\";\nimport Panel from \"./Panel\";\n\nconst Layout = types\n  .model(\"Layout\", {\n    id: types.identifier,\n    title: \"Layout\",\n    size: 0,\n    panel: types.maybe(types.safeReference(Panel)),\n    children: types.array(types.late(() => Layout)),\n    panels: types.maybe(types.map(Panel)),\n    direction: types.optional(\n      types.enumeration([\"VERTICAL\", \"HORIZONTAL\"]),\n      \"HORIZONTAL\"\n    )\n  })\n  .views(self => ({\n    get isEmpty() {\n      let result =\n        self.children.length &&\n        self.children.filter(\n          s => (!s.panel && !s.isEmpty) || (s.panel && !s.panel.floating)\n        ).length === 0;\n      return result;\n    }\n  }))\n  .volatile(self => ({\n    siblings: null,\n    rootStore: null\n  }))\n  .actions(self => ({\n\n    afterAttach: () => {\n      self.siblings = getParent(self);\n      self.rootStore = getRoot(self);\n    },\n\n    adjust: (size) => {\n      let self_index = self.siblings.indexOf(self);\n\n      let adjusted_size = size;\n\n      let sum =\n        self_index > 0 ?\n        self.siblings\n        .slice(0, self_index)\n        .filter(s => !s.floating)\n        .reduce((a, b) => a + b.size, 0) :\n        0;\n\n      adjusted_size = size - sum;\n\n      if (adjusted_size > 100) adjusted_size = 100;\n      if (adjusted_size < 0) adjusted_size = 0;\n\n      self.setSize(adjusted_size);\n    },\n\n    distributeChildren: () => {\n      self.children.forEach((e, i) => {\n        console.log(i, (i + 1) / self.children.length);\n        e.setSize(1 / self.children.length);\n      });\n    },\n\n    setSize: (size) => {\n      self.size = size;\n    },\n\n    addPanel: (panel) => {\n      // if panel is a string, look it up from list of defaults\n      if (typeof panel === \"string\" && self.rootStore.panelVariants[panel]) {\n        panel = self.rootStore.panelVariants[panel];\n      }\n\n      let layout = Layout.create({\n        id: panel.id,\n        panel: panel.id,\n        size: 1 / self.children.length\n      });\n\n      self.panels.put(panel);\n      self.children.push(layout);\n\n      //       console.log(\"self\", self);\n\n      //       self.distributeChildren();\n    },\n\n    removePanel: (panel) => {\n      if (self.panels) self.panels.delete(panel);\n      if (self.children) {\n        self.children = self.children.filter(e => e.panel !== panel);\n\n        self.children.forEach(e => {\n          e.removePanel(panel);\n        });\n\n        // console.log(\"SELF\", getSnapshot(self));\n\n        // TODO: if all panels are gone, remove this layout\n        // if(!self.children.length) {\n        //     console.log(getParent(self,1))\n        //     let parent = getParent(self, 1);\n        //     parent.children.filter(e => e !== self)\n        // }\n      }\n    },\n\n    clear: () => {\n      if (self.panels && self.children) {\n        self.panels.clear();\n        self.children = [];\n      }\n    },\n\n    // removeLayout: (layout) => {\n    //     if(self.children) self.children.filter(e => e !== layout);\n    // }\n\n  }))\n\nexport default Layout;\n","import { types } from \"mobx-state-tree\";\nimport Context from \"./Context\";\n\nimport Panel from \"./Panel\";\nimport Theme from \"./Theme\";\n\nconst UI = types\n    .model('UI', {\n        panels: types.map(Panel),\n        theme: Theme,\n        context: types.maybe(Context)\n    })\n    .volatile(self => ({\n        panelVariants: null,\n        layoutVariants: null\n    }))\n    .actions(self => ({\n        afterAttach: () => {\n            self.context = Context.create()\n        },\n\n        setPanelVariants: panels => {\n            self.panelVariants = panels;\n        },\n\n        setLayoutVariants: layouts => {\n            self.layoutVariants = layouts;\n        },\n\n        getPanelVariant: id => {\n            return self.panelVariants[id];\n        },\n\n        getLayoutVariant: id => {\n            if (self.layoutVariants[id]) {\n                return self.layoutVariants[id]\n            }else{\n                if(self.panelVariants) {\n                    console.error(`variant (${id}) could not be found. should be one of the following: (${Object.keys(self.panelVariants)})`)\n                } else {\n                    console.error(`no variants found!`)\n                }\n                    \n            }\n                \n            return;\n        },\n\n        getPanel: id => {\n            return self.panels.get(id);\n        }\n    }))\n\nexport default UI;","import _MacoWrapperComponent from './components/MacoWrapperComponent';\n\nimport _PanelComponent from './components/PanelComponent';\nimport { GenericPanel as _GenericPanel} from './components/PanelComponent';\nimport _TextComponent from './components/TextComponent';\nimport _ToolbarComponent from './components/ToolbarComponent';\nimport _ContextMenuComponent from './components/ContextMenuComponent';\nimport _ControlGroupComponent from './components/ControlGroupComponent';\nimport _SplitContainer from './components/SplitContainer';\nimport _LayoutContainer from './components/LayoutContainer';\nimport _PagesContainer from './components/PagesContainer';\n\nimport _InputBool from './components/input/InputBool';\nimport _InputFloat from './components/input/InputFloat';\nimport _InputSelect from './components/input/InputSelect';\nimport _InputSlider from './components/input/InputSlider';\nimport _InputColor from './components/input/InputColor';\n\nimport _ThemeContext from './ThemeContext';\n\n// STORES\nimport _ContextStore from './stores/Context';\nimport _LayoutStore from './stores/Layout';\nimport _PanelStore from './stores/Panel';\nimport _ThemeStore, { themes } from './stores/Theme';\nimport _UIStore from './stores/UI';\n\nexport let MacoWrapperComponent = _MacoWrapperComponent;\n\nexport let TextComponent = _TextComponent;\nexport let PanelComponent = _PanelComponent;\nexport let GenericPanel = _GenericPanel;\nexport let ToolbarComponent = _ToolbarComponent;\nexport let ContextMenuComponent = _ContextMenuComponent;\nexport let ControlGroupComponent = _ControlGroupComponent;\nexport let SplitContainer = _SplitContainer;\nexport let LayoutContainer = _LayoutContainer;\nexport let PagesContainer = _PagesContainer;\n\nexport let InputBool = _InputBool;\nexport let InputFloat = _InputFloat;\nexport let InputSelect = _InputSelect;\nexport let InputSlider = _InputSlider;\nexport let InputColor = _InputColor;\n\nexport let ThemeContext = _ThemeContext;\nexport let ThemeStore = _ThemeStore;\nexport let Themes = themes;\n\n// STORES\nexport let ContextStore = _ContextStore;\nexport let LayoutStore = _LayoutStore;\nexport let PanelStore = _PanelStore;\nexport let UIStore = _UIStore; // main store output\n"],"names":["themes","primary_color","secondary_color","tertiary_color","text_color","outline_color","accent_color","Theme","types","model","weyland","actions","self","setTheme","theme","setPrimaryColor","color","setSecondaryColor","setTertiaryColor","setTextColor","setOutlineColor","setAccentColor","ThemeContext","createContext","style","drawer","width","top","left","DropDown","observer","props","context","useContext","mainRef","useRef","useState","activeItem","setActiveItem","subDropDownOpen","setSubDropDownOpen","subDropDownId","setSubDropDownId","subDropDownPosition","setSubDropDownPosition","handleSubDropDown","e","index","item","onClick","toggle","bounds","currentTarget","getBoundingClientRect","id","openUp","height","bottom","openLeft","handleClickAway","current","contains","target","handleRef","onRef","handleContextMenu","useLayoutEffect","document","addEventListener","removeEventListener","open","position","classNames","styles","backgroundColor","items","Object","keys","map","k","i","dropDown","subDropDown","activeButton","label","disableHover","display","title","buttons","b","border","borderTop","borderBottom","borderLeftStyle","borderRightStyle","flexShrink","padding","defaultProps","propTypes","Toolbar","dropDownOpen","setDropDownOpen","dropDownId","setDropDownId","dropDownPosition","setDropDownPosition","setOpenUp","handleWheel","offset","Math","sign","deltaY","scroll","scrollLeft","at_start","at_end","offsetWidth","scrollWidth","useEffect","y","window","innerHeight","toolbar","borderColor","button","highlight","parent_bounds","_openUp","x","itemDecoration","DropDownComponent","ContextMenu","dropRef","dropDownOpenLeft","setDropDownOpenLeft","dropDownOpenUp","setDropDownOpenUp","handleClick","preventDefault","pageX","pageY","innerWidth","MacoWrapper","store","ui","setContextmenu","contextmenu","wrapper","ToolbarComponent","titlebar","ContextMenuComponent","children","Tooltip","show","setShow","setPosition","handleToggle","tooltip","tooltip_symbol","tooltip_content","content","Panel","wrapperElement","expanded","setExpanded","focused","setFocused","hover","setHover","handleResize","direction","dragging","pBounds","initialDimensions","initialPosition","handleMove","touches","w","h","onDimensionsChange","dimensions","onPositionChange","handleMoveEnd","handleMoveStart","dragOff","handleCenter","handleFullscreen","fullscreen","onFullscreen","onFloat","handleFloat","floating","handleFocus","onFocus","handleBlur","blur","onBlur","mainStyling","hasTitle","showTitle","onRemove","collapsible","dblClickTitle","canFullscreen","canFloat","panel","collapsed","margin","gutters","gutterSize","zIndex","onContextMenu","onMouseEnter","onMouseLeave","onMouseOver","onMouseOut","title_bar","titleStyle","fontSize","canRemove","dragContainer","moveHandle","subtitle","indicators","indicator","flexBasis","panel_content","horizontal","vertical","footbar","resizeHandle","resizeSE","resizeE","resizeS","resizeSW","resizeW","resizeN","resizeNE","resizeNW","PropTypes","func","object","any","oneOfType","string","array","bool","number","GenericPanel","defaultWidth","onContextMenuCapture","setFloating","setDimensions","setFullscreen","Text","text","ControlGroup","name","React","Children","child","input_width","length","isValidElement","cloneElement","useObserver","callback","element","dependencies","observe","unobserve","resizeObserverOrPolyfill","ResizeObserver","Split","size","SplitContainer","distributeSplits","count","defaultSplits","filter","defaultsize","defaultSum","s","reduce","a","split","setSplit","isEmpty","setEmpty","isVertical","setIsVertical","handleContainerResize","auto","useResizeObserver","handlePanelResize","splitSum","slice","handleDetach","detachBool","updateFlag","onEmpty","wrapperClass","empty","isSplit","type","split_container","panel_container","hasHandle","detachable","onDetach","split_floating","drag_container","drag_handle_visible","drag_handle","alignSelf","textAlign","isRequired","LayoutContainer","layout","wrapper_element","pos","adjust","sibling","siblings","childIsLayout","filterOutFloats","filterOutEmptyLayouts","isFloating","layout_container","float_container","order","Pages","currentPage","setCurrentPage","handlePreviousPage","handleNextPage","buttonStyle","pagecontent","pagenav","InputBool","updateValue","onChange","checked","value","flexFlow","hLabel","wrapper_inner","base_value","InputFloat","handleChange","Number","handleDragStart","handleDrag","scalar","ctrlKey","shiftKey","x_offset","y_offset","min","max","output_value","step","floor","handleDragEnd","parseFloat","toFixed","defaultInputStyle","onDoubleClick","inputStyle","InputSelect","selectedOption","options","opt","slider_bounds","InputSlider","slider_element","console","log","handleFloatDrag","v","slider_track","sleeve","handle","InputColor","showValue","textInput","ContextMenuItem","identifier","frozen","late","Context","keylistener","tinykeys","keymap","setKeymap","removeKeymap","c","component_type","maybe","Layout","parent_layout","setLayout","f","toggleFloating","toggleFullscreen","p","d","getParent","removePanel","center","fitScreen","safeReference","panels","optional","enumeration","views","result","rootStore","afterAttach","getRoot","self_index","indexOf","adjusted_size","sum","setSize","distributeChildren","forEach","addPanel","panelVariants","create","put","push","clear","UI","layoutVariants","setPanelVariants","setLayoutVariants","layouts","getPanelVariant","getLayoutVariant","error","getPanel","get","MacoWrapperComponent","_MacoWrapperComponent","TextComponent","_TextComponent","PanelComponent","_PanelComponent","_GenericPanel","_ToolbarComponent","_ContextMenuComponent","ControlGroupComponent","_ControlGroupComponent","_SplitContainer","_LayoutContainer","PagesContainer","_PagesContainer","_InputBool","_InputFloat","_InputSelect","_InputSlider","_InputColor","_ThemeContext","ThemeStore","_ThemeStore","Themes","ContextStore","_ContextStore","LayoutStore","_LayoutStore","PanelStore","_PanelStore","UIStore","_UIStore"],"mappings":"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"}